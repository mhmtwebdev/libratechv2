function Rw(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fm={exports:{}},Zu={},dm={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yl=Symbol.for("react.element"),bw=Symbol.for("react.portal"),Dw=Symbol.for("react.fragment"),Mw=Symbol.for("react.strict_mode"),Ow=Symbol.for("react.profiler"),Pw=Symbol.for("react.provider"),kw=Symbol.for("react.context"),Lw=Symbol.for("react.forward_ref"),Bw=Symbol.for("react.suspense"),Fw=Symbol.for("react.memo"),Vw=Symbol.for("react.lazy"),I0=Symbol.iterator;function Uw(t){return t===null||typeof t!="object"?null:(t=I0&&t[I0]||t["@@iterator"],typeof t=="function"?t:null)}var gm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pm=Object.assign,mm={};function Ea(t,e,n){this.props=t,this.context=e,this.refs=mm,this.updater=n||gm}Ea.prototype.isReactComponent={};Ea.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ea.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ym(){}ym.prototype=Ea.prototype;function zd(t,e,n){this.props=t,this.context=e,this.refs=mm,this.updater=n||gm}var Hd=zd.prototype=new ym;Hd.constructor=zd;pm(Hd,Ea.prototype);Hd.isPureReactComponent=!0;var T0=Array.isArray,xm=Object.prototype.hasOwnProperty,Gd={current:null},wm={key:!0,ref:!0,__self:!0,__source:!0};function Em(t,e,n){var i,o={},l=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(l=""+e.key),e)xm.call(e,i)&&!wm.hasOwnProperty(i)&&(o[i]=e[i]);var x=arguments.length-2;if(x===1)o.children=n;else if(1<x){for(var m=Array(x),p=0;p<x;p++)m[p]=arguments[p+2];o.children=m}if(t&&t.defaultProps)for(i in x=t.defaultProps,x)o[i]===void 0&&(o[i]=x[i]);return{$$typeof:Yl,type:t,key:l,ref:f,props:o,_owner:Gd.current}}function jw(t,e){return{$$typeof:Yl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yl}function zw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var v0=/\/+/g;function kh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zw(""+t.key):e.toString(36)}function Gc(t,e,n,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case Yl:case bw:f=!0}}if(f)return f=t,o=o(f),t=i===""?"."+kh(f,0):i,T0(o)?(n="",t!=null&&(n=t.replace(v0,"$&/")+"/"),Gc(o,e,n,"",function(p){return p})):o!=null&&(Wd(o)&&(o=jw(o,n+(!o.key||f&&f.key===o.key?"":(""+o.key).replace(v0,"$&/")+"/")+t)),e.push(o)),1;if(f=0,i=i===""?".":i+":",T0(t))for(var x=0;x<t.length;x++){l=t[x];var m=i+kh(l,x);f+=Gc(l,e,n,m,o)}else if(m=Uw(t),typeof m=="function")for(t=m.call(t),x=0;!(l=t.next()).done;)l=l.value,m=i+kh(l,x++),f+=Gc(l,e,n,m,o);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function wc(t,e,n){if(t==null)return t;var i=[],o=0;return Gc(t,i,"","",function(l){return e.call(n,l,o++)}),i}function Hw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zn={current:null},Wc={transition:null},Gw={ReactCurrentDispatcher:zn,ReactCurrentBatchConfig:Wc,ReactCurrentOwner:Gd};function Am(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:wc,forEach:function(t,e,n){wc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wc(t,function(){e++}),e},toArray:function(t){return wc(t,function(e){return e})||[]},only:function(t){if(!Wd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=Ea;ze.Fragment=Dw;ze.Profiler=Ow;ze.PureComponent=zd;ze.StrictMode=Mw;ze.Suspense=Bw;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gw;ze.act=Am;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=pm({},t.props),o=t.key,l=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,f=Gd.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var x=t.type.defaultProps;for(m in e)xm.call(e,m)&&!wm.hasOwnProperty(m)&&(i[m]=e[m]===void 0&&x!==void 0?x[m]:e[m])}var m=arguments.length-2;if(m===1)i.children=n;else if(1<m){x=Array(m);for(var p=0;p<m;p++)x[p]=arguments[p+2];i.children=x}return{$$typeof:Yl,type:t.type,key:o,ref:l,props:i,_owner:f}};ze.createContext=function(t){return t={$$typeof:kw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Pw,_context:t},t.Consumer=t};ze.createElement=Em;ze.createFactory=function(t){var e=Em.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:Lw,render:t}};ze.isValidElement=Wd;ze.lazy=function(t){return{$$typeof:Vw,_payload:{_status:-1,_result:t},_init:Hw}};ze.memo=function(t,e){return{$$typeof:Fw,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Wc.transition;Wc.transition={};try{t()}finally{Wc.transition=e}};ze.unstable_act=Am;ze.useCallback=function(t,e){return zn.current.useCallback(t,e)};ze.useContext=function(t){return zn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return zn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return zn.current.useEffect(t,e)};ze.useId=function(){return zn.current.useId()};ze.useImperativeHandle=function(t,e,n){return zn.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return zn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return zn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return zn.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return zn.current.useReducer(t,e,n)};ze.useRef=function(t){return zn.current.useRef(t)};ze.useState=function(t){return zn.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return zn.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return zn.current.useTransition()};ze.version="18.3.1";dm.exports=ze;var Me=dm.exports;const $a=hm(Me);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ww=Me,Yw=Symbol.for("react.element"),Xw=Symbol.for("react.fragment"),Qw=Object.prototype.hasOwnProperty,Kw=Ww.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qw={key:!0,ref:!0,__self:!0,__source:!0};function _m(t,e,n){var i,o={},l=null,f=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)Qw.call(e,i)&&!qw.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:Yw,type:t,key:l,ref:f,props:o,_owner:Kw.current}}Zu.Fragment=Xw;Zu.jsx=_m;Zu.jsxs=_m;fm.exports=Zu;var R=fm.exports,Ef={},Cm={exports:{}},gr={},Im={exports:{}},Tm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(pe,Te){var Ne=pe.length;pe.push(Te);e:for(;0<Ne;){var pt=Ne-1>>>1,Ve=pe[pt];if(0<o(Ve,Te))pe[pt]=Te,pe[Ne]=Ve,Ne=pt;else break e}}function n(pe){return pe.length===0?null:pe[0]}function i(pe){if(pe.length===0)return null;var Te=pe[0],Ne=pe.pop();if(Ne!==Te){pe[0]=Ne;e:for(var pt=0,Ve=pe.length,Ln=Ve>>>1;pt<Ln;){var dt=2*(pt+1)-1,Pr=pe[dt],Ae=dt+1,mr=pe[Ae];if(0>o(Pr,Ne))Ae<Ve&&0>o(mr,Pr)?(pe[pt]=mr,pe[Ae]=Ne,pt=Ae):(pe[pt]=Pr,pe[dt]=Ne,pt=dt);else if(Ae<Ve&&0>o(mr,Ne))pe[pt]=mr,pe[Ae]=Ne,pt=Ae;else break e}}return Te}function o(pe,Te){var Ne=pe.sortIndex-Te.sortIndex;return Ne!==0?Ne:pe.id-Te.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,x=f.now();t.unstable_now=function(){return f.now()-x}}var m=[],p=[],E=1,_=null,S=3,P=!1,V=!1,G=!1,X=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(pe){for(var Te=n(p);Te!==null;){if(Te.callback===null)i(p);else if(Te.startTime<=pe)i(p),Te.sortIndex=Te.expirationTime,e(m,Te);else break;Te=n(p)}}function K(pe){if(G=!1,L(pe),!V)if(n(m)!==null)V=!0,Rt(ae);else{var Te=n(p);Te!==null&&be(K,Te.startTime-pe)}}function ae(pe,Te){V=!1,G&&(G=!1,j(D),D=-1),P=!0;var Ne=S;try{for(L(Te),_=n(m);_!==null&&(!(_.expirationTime>Te)||pe&&!H());){var pt=_.callback;if(typeof pt=="function"){_.callback=null,S=_.priorityLevel;var Ve=pt(_.expirationTime<=Te);Te=t.unstable_now(),typeof Ve=="function"?_.callback=Ve:_===n(m)&&i(m),L(Te)}else i(m);_=n(m)}if(_!==null)var Ln=!0;else{var dt=n(p);dt!==null&&be(K,dt.startTime-Te),Ln=!1}return Ln}finally{_=null,S=Ne,P=!1}}var te=!1,b=null,D=-1,O=5,z=-1;function H(){return!(t.unstable_now()-z<O)}function Y(){if(b!==null){var pe=t.unstable_now();z=pe;var Te=!0;try{Te=b(!0,pe)}finally{Te?U():(te=!1,b=null)}}else te=!1}var U;if(typeof B=="function")U=function(){B(Y)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,re=He.port2;He.port1.onmessage=Y,U=function(){re.postMessage(null)}}else U=function(){X(Y,0)};function Rt(pe){b=pe,te||(te=!0,U())}function be(pe,Te){D=X(function(){pe(t.unstable_now())},Te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(pe){pe.callback=null},t.unstable_continueExecution=function(){V||P||(V=!0,Rt(ae))},t.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<pe?Math.floor(1e3/pe):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(pe){switch(S){case 1:case 2:case 3:var Te=3;break;default:Te=S}var Ne=S;S=Te;try{return pe()}finally{S=Ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(pe,Te){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Ne=S;S=pe;try{return Te()}finally{S=Ne}},t.unstable_scheduleCallback=function(pe,Te,Ne){var pt=t.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?pt+Ne:pt):Ne=pt,pe){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=Ne+Ve,pe={id:E++,callback:Te,priorityLevel:pe,startTime:Ne,expirationTime:Ve,sortIndex:-1},Ne>pt?(pe.sortIndex=Ne,e(p,pe),n(m)===null&&pe===n(p)&&(G?(j(D),D=-1):G=!0,be(K,Ne-pt))):(pe.sortIndex=Ve,e(m,pe),V||P||(V=!0,Rt(ae))),pe},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(pe){var Te=S;return function(){var Ne=S;S=Te;try{return pe.apply(this,arguments)}finally{S=Ne}}}})(Tm);Im.exports=Tm;var Zw=Im.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $w=Me,dr=Zw;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vm=new Set,Al={};function go(t,e){aa(t,e),aa(t+"Capture",e)}function aa(t,e){for(Al[t]=e,t=0;t<e.length;t++)vm.add(e[t])}var Pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Af=Object.prototype.hasOwnProperty,Jw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S0={},N0={};function eE(t){return Af.call(N0,t)?!0:Af.call(S0,t)?!1:Jw.test(t)?N0[t]=!0:(S0[t]=!0,!1)}function tE(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nE(t,e,n,i){if(e===null||typeof e>"u"||tE(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hn(t,e,n,i,o,l,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=f}var In={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){In[t]=new Hn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];In[e]=new Hn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){In[t]=new Hn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){In[t]=new Hn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){In[t]=new Hn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){In[t]=new Hn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){In[t]=new Hn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){In[t]=new Hn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){In[t]=new Hn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yd=/[\-:]([a-z])/g;function Xd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yd,Xd);In[e]=new Hn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yd,Xd);In[e]=new Hn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yd,Xd);In[e]=new Hn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){In[t]=new Hn(t,1,!1,t.toLowerCase(),null,!1,!1)});In.xlinkHref=new Hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){In[t]=new Hn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Qd(t,e,n,i){var o=In.hasOwnProperty(e)?In[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nE(e,n,o,i)&&(n=null),i||o===null?eE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var zi=$w.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ec=Symbol.for("react.element"),Fo=Symbol.for("react.portal"),Vo=Symbol.for("react.fragment"),Kd=Symbol.for("react.strict_mode"),_f=Symbol.for("react.profiler"),Sm=Symbol.for("react.provider"),Nm=Symbol.for("react.context"),qd=Symbol.for("react.forward_ref"),Cf=Symbol.for("react.suspense"),If=Symbol.for("react.suspense_list"),Zd=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),Rm=Symbol.for("react.offscreen"),R0=Symbol.iterator;function Ha(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var Bt=Object.assign,Lh;function Ja(t){if(Lh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lh=e&&e[1]||""}return`
`+Lh+t}var Bh=!1;function Fh(t,e){if(!t||Bh)return"";Bh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),l=i.stack.split(`
`),f=o.length-1,x=l.length-1;1<=f&&0<=x&&o[f]!==l[x];)x--;for(;1<=f&&0<=x;f--,x--)if(o[f]!==l[x]){if(f!==1||x!==1)do if(f--,x--,0>x||o[f]!==l[x]){var m=`
`+o[f].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=f&&0<=x);break}}}finally{Bh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ja(t):""}function rE(t){switch(t.tag){case 5:return Ja(t.type);case 16:return Ja("Lazy");case 13:return Ja("Suspense");case 19:return Ja("SuspenseList");case 0:case 2:case 15:return t=Fh(t.type,!1),t;case 11:return t=Fh(t.type.render,!1),t;case 1:return t=Fh(t.type,!0),t;default:return""}}function Tf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vo:return"Fragment";case Fo:return"Portal";case _f:return"Profiler";case Kd:return"StrictMode";case Cf:return"Suspense";case If:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Nm:return(t.displayName||"Context")+".Consumer";case Sm:return(t._context.displayName||"Context")+".Provider";case qd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Zd:return e=t.displayName||null,e!==null?e:Tf(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return Tf(t(e))}catch{}}return null}function iE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tf(e);case 8:return e===Kd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Is(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sE(t){var e=bm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ac(t){t._valueTracker||(t._valueTracker=sE(t))}function Dm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=bm(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function lu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vf(t,e){var n=e.checked;return Bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function b0(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Is(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mm(t,e){e=e.checked,e!=null&&Qd(t,"checked",e,!1)}function Sf(t,e){Mm(t,e);var n=Is(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nf(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nf(t,e.type,Is(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function D0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nf(t,e,n){(e!=="number"||lu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var el=Array.isArray;function Zo(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Is(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Rf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function M0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(el(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Is(n)}}function Om(t,e){var n=Is(e.value),i=Is(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function O0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var _c,km=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(_c=_c||document.createElement("div"),_c.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_c.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _l(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var al={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oE=["Webkit","ms","Moz","O"];Object.keys(al).forEach(function(t){oE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),al[e]=al[t]})});function Lm(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||al.hasOwnProperty(t)&&al[t]?(""+e).trim():e+"px"}function Bm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=Lm(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var aE=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Df(t,e){if(e){if(aE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function Mf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Of=null;function $d(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pf=null,$o=null,Jo=null;function P0(t){if(t=Kl(t)){if(typeof Pf!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=nh(e),Pf(t.stateNode,t.type,e))}}function Fm(t){$o?Jo?Jo.push(t):Jo=[t]:$o=t}function Vm(){if($o){var t=$o,e=Jo;if(Jo=$o=null,P0(t),e)for(t=0;t<e.length;t++)P0(e[t])}}function Um(t,e){return t(e)}function jm(){}var Vh=!1;function zm(t,e,n){if(Vh)return t(e,n);Vh=!0;try{return Um(t,e,n)}finally{Vh=!1,($o!==null||Jo!==null)&&(jm(),Vm())}}function Cl(t,e){var n=t.stateNode;if(n===null)return null;var i=nh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var kf=!1;if(Pi)try{var Ga={};Object.defineProperty(Ga,"passive",{get:function(){kf=!0}}),window.addEventListener("test",Ga,Ga),window.removeEventListener("test",Ga,Ga)}catch{kf=!1}function lE(t,e,n,i,o,l,f,x,m){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(E){this.onError(E)}}var ll=!1,cu=null,uu=!1,Lf=null,cE={onError:function(t){ll=!0,cu=t}};function uE(t,e,n,i,o,l,f,x,m){ll=!1,cu=null,lE.apply(cE,arguments)}function hE(t,e,n,i,o,l,f,x,m){if(uE.apply(this,arguments),ll){if(ll){var p=cu;ll=!1,cu=null}else throw Error(ce(198));uu||(uu=!0,Lf=p)}}function po(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Hm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function k0(t){if(po(t)!==t)throw Error(ce(188))}function fE(t){var e=t.alternate;if(!e){if(e=po(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return k0(o),t;if(l===i)return k0(o),e;l=l.sibling}throw Error(ce(188))}if(n.return!==i.return)n=o,i=l;else{for(var f=!1,x=o.child;x;){if(x===n){f=!0,n=o,i=l;break}if(x===i){f=!0,i=o,n=l;break}x=x.sibling}if(!f){for(x=l.child;x;){if(x===n){f=!0,n=l,i=o;break}if(x===i){f=!0,i=l,n=o;break}x=x.sibling}if(!f)throw Error(ce(189))}}if(n.alternate!==i)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function Gm(t){return t=fE(t),t!==null?Wm(t):null}function Wm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wm(t);if(e!==null)return e;t=t.sibling}return null}var Ym=dr.unstable_scheduleCallback,L0=dr.unstable_cancelCallback,dE=dr.unstable_shouldYield,gE=dr.unstable_requestPaint,Xt=dr.unstable_now,pE=dr.unstable_getCurrentPriorityLevel,Jd=dr.unstable_ImmediatePriority,Xm=dr.unstable_UserBlockingPriority,hu=dr.unstable_NormalPriority,mE=dr.unstable_LowPriority,Qm=dr.unstable_IdlePriority,$u=null,fi=null;function yE(t){if(fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot($u,t,void 0,(t.current.flags&128)===128)}catch{}}var Yr=Math.clz32?Math.clz32:EE,xE=Math.log,wE=Math.LN2;function EE(t){return t>>>=0,t===0?32:31-(xE(t)/wE|0)|0}var Cc=64,Ic=4194304;function tl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fu(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,f=n&268435455;if(f!==0){var x=f&~o;x!==0?i=tl(x):(l&=f,l!==0&&(i=tl(l)))}else f=n&~o,f!==0?i=tl(f):l!==0&&(i=tl(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Yr(e),o=1<<n,i|=t[n],e&=~o;return i}function AE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _E(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var f=31-Yr(l),x=1<<f,m=o[f];m===-1?(!(x&n)||x&i)&&(o[f]=AE(x,e)):m<=e&&(t.expiredLanes|=x),l&=~x}}function Bf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Km(){var t=Cc;return Cc<<=1,!(Cc&4194240)&&(Cc=64),t}function Uh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yr(e),t[e]=n}function CE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Yr(n),l=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~l}}function e1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Yr(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var ht=0;function qm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zm,t1,$m,Jm,e2,Ff=!1,Tc=[],hs=null,fs=null,ds=null,Il=new Map,Tl=new Map,os=[],IE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function B0(t,e){switch(t){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":fs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":Il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(e.pointerId)}}function Wa(t,e,n,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},e!==null&&(e=Kl(e),e!==null&&t1(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function TE(t,e,n,i,o){switch(e){case"focusin":return hs=Wa(hs,t,e,n,i,o),!0;case"dragenter":return fs=Wa(fs,t,e,n,i,o),!0;case"mouseover":return ds=Wa(ds,t,e,n,i,o),!0;case"pointerover":var l=o.pointerId;return Il.set(l,Wa(Il.get(l)||null,t,e,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,Tl.set(l,Wa(Tl.get(l)||null,t,e,n,i,o)),!0}return!1}function t2(t){var e=$s(t.target);if(e!==null){var n=po(e);if(n!==null){if(e=n.tag,e===13){if(e=Hm(n),e!==null){t.blockedOn=e,e2(t.priority,function(){$m(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Of=i,n.target.dispatchEvent(i),Of=null}else return e=Kl(n),e!==null&&t1(e),t.blockedOn=n,!1;e.shift()}return!0}function F0(t,e,n){Yc(t)&&n.delete(e)}function vE(){Ff=!1,hs!==null&&Yc(hs)&&(hs=null),fs!==null&&Yc(fs)&&(fs=null),ds!==null&&Yc(ds)&&(ds=null),Il.forEach(F0),Tl.forEach(F0)}function Ya(t,e){t.blockedOn===e&&(t.blockedOn=null,Ff||(Ff=!0,dr.unstable_scheduleCallback(dr.unstable_NormalPriority,vE)))}function vl(t){function e(o){return Ya(o,t)}if(0<Tc.length){Ya(Tc[0],t);for(var n=1;n<Tc.length;n++){var i=Tc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(hs!==null&&Ya(hs,t),fs!==null&&Ya(fs,t),ds!==null&&Ya(ds,t),Il.forEach(e),Tl.forEach(e),n=0;n<os.length;n++)i=os[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<os.length&&(n=os[0],n.blockedOn===null);)t2(n),n.blockedOn===null&&os.shift()}var ea=zi.ReactCurrentBatchConfig,du=!0;function SE(t,e,n,i){var o=ht,l=ea.transition;ea.transition=null;try{ht=1,n1(t,e,n,i)}finally{ht=o,ea.transition=l}}function NE(t,e,n,i){var o=ht,l=ea.transition;ea.transition=null;try{ht=4,n1(t,e,n,i)}finally{ht=o,ea.transition=l}}function n1(t,e,n,i){if(du){var o=Vf(t,e,n,i);if(o===null)qh(t,e,i,gu,n),B0(t,i);else if(TE(o,t,e,n,i))i.stopPropagation();else if(B0(t,i),e&4&&-1<IE.indexOf(t)){for(;o!==null;){var l=Kl(o);if(l!==null&&Zm(l),l=Vf(t,e,n,i),l===null&&qh(t,e,i,gu,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else qh(t,e,i,null,n)}}var gu=null;function Vf(t,e,n,i){if(gu=null,t=$d(i),t=$s(t),t!==null)if(e=po(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Hm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gu=t,null}function n2(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pE()){case Jd:return 1;case Xm:return 4;case hu:case mE:return 16;case Qm:return 536870912;default:return 16}default:return 16}}var ls=null,r1=null,Xc=null;function r2(){if(Xc)return Xc;var t,e=r1,n=e.length,i,o="value"in ls?ls.value:ls.textContent,l=o.length;for(t=0;t<n&&e[t]===o[t];t++);var f=n-t;for(i=1;i<=f&&e[n-i]===o[l-i];i++);return Xc=o.slice(t,1<i?1-i:void 0)}function Qc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vc(){return!0}function V0(){return!1}function pr(t){function e(n,i,o,l,f){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(n=t[x],this[x]=n?n(l):l[x]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?vc:V0,this.isPropagationStopped=V0,this}return Bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vc)},persist:function(){},isPersistent:vc}),e}var Aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},i1=pr(Aa),Ql=Bt({},Aa,{view:0,detail:0}),RE=pr(Ql),jh,zh,Xa,Ju=Bt({},Ql,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xa&&(Xa&&t.type==="mousemove"?(jh=t.screenX-Xa.screenX,zh=t.screenY-Xa.screenY):zh=jh=0,Xa=t),jh)},movementY:function(t){return"movementY"in t?t.movementY:zh}}),U0=pr(Ju),bE=Bt({},Ju,{dataTransfer:0}),DE=pr(bE),ME=Bt({},Ql,{relatedTarget:0}),Hh=pr(ME),OE=Bt({},Aa,{animationName:0,elapsedTime:0,pseudoElement:0}),PE=pr(OE),kE=Bt({},Aa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LE=pr(kE),BE=Bt({},Aa,{data:0}),j0=pr(BE),FE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UE[t])?!!e[t]:!1}function s1(){return jE}var zE=Bt({},Ql,{key:function(t){if(t.key){var e=FE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s1,charCode:function(t){return t.type==="keypress"?Qc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HE=pr(zE),GE=Bt({},Ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z0=pr(GE),WE=Bt({},Ql,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s1}),YE=pr(WE),XE=Bt({},Aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),QE=pr(XE),KE=Bt({},Ju,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qE=pr(KE),ZE=[9,13,27,32],o1=Pi&&"CompositionEvent"in window,cl=null;Pi&&"documentMode"in document&&(cl=document.documentMode);var $E=Pi&&"TextEvent"in window&&!cl,i2=Pi&&(!o1||cl&&8<cl&&11>=cl),H0=String.fromCharCode(32),G0=!1;function s2(t,e){switch(t){case"keyup":return ZE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function o2(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Uo=!1;function JE(t,e){switch(t){case"compositionend":return o2(e);case"keypress":return e.which!==32?null:(G0=!0,H0);case"textInput":return t=e.data,t===H0&&G0?null:t;default:return null}}function eA(t,e){if(Uo)return t==="compositionend"||!o1&&s2(t,e)?(t=r2(),Xc=r1=ls=null,Uo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return i2&&e.locale!=="ko"?null:e.data;default:return null}}var tA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function W0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tA[t.type]:e==="textarea"}function a2(t,e,n,i){Fm(i),e=pu(e,"onChange"),0<e.length&&(n=new i1("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ul=null,Sl=null;function nA(t){x2(t,0)}function eh(t){var e=Ho(t);if(Dm(e))return t}function rA(t,e){if(t==="change")return e}var l2=!1;if(Pi){var Gh;if(Pi){var Wh="oninput"in document;if(!Wh){var Y0=document.createElement("div");Y0.setAttribute("oninput","return;"),Wh=typeof Y0.oninput=="function"}Gh=Wh}else Gh=!1;l2=Gh&&(!document.documentMode||9<document.documentMode)}function X0(){ul&&(ul.detachEvent("onpropertychange",c2),Sl=ul=null)}function c2(t){if(t.propertyName==="value"&&eh(Sl)){var e=[];a2(e,Sl,t,$d(t)),zm(nA,e)}}function iA(t,e,n){t==="focusin"?(X0(),ul=e,Sl=n,ul.attachEvent("onpropertychange",c2)):t==="focusout"&&X0()}function sA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eh(Sl)}function oA(t,e){if(t==="click")return eh(e)}function aA(t,e){if(t==="input"||t==="change")return eh(e)}function lA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kr=typeof Object.is=="function"?Object.is:lA;function Nl(t,e){if(Kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Af.call(e,o)||!Kr(t[o],e[o]))return!1}return!0}function Q0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function K0(t,e){var n=Q0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Q0(n)}}function u2(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?u2(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function h2(){for(var t=window,e=lu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lu(t.document)}return e}function a1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cA(t){var e=h2(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&u2(n.ownerDocument.documentElement,n)){if(i!==null&&a1(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=K0(n,l);var f=K0(n,i);o&&f&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uA=Pi&&"documentMode"in document&&11>=document.documentMode,jo=null,Uf=null,hl=null,jf=!1;function q0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jf||jo==null||jo!==lu(i)||(i=jo,"selectionStart"in i&&a1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),hl&&Nl(hl,i)||(hl=i,i=pu(Uf,"onSelect"),0<i.length&&(e=new i1("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=jo)))}function Sc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zo={animationend:Sc("Animation","AnimationEnd"),animationiteration:Sc("Animation","AnimationIteration"),animationstart:Sc("Animation","AnimationStart"),transitionend:Sc("Transition","TransitionEnd")},Yh={},f2={};Pi&&(f2=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function th(t){if(Yh[t])return Yh[t];if(!zo[t])return t;var e=zo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in f2)return Yh[t]=e[n];return t}var d2=th("animationend"),g2=th("animationiteration"),p2=th("animationstart"),m2=th("transitionend"),y2=new Map,Z0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Os(t,e){y2.set(t,e),go(e,[t])}for(var Xh=0;Xh<Z0.length;Xh++){var Qh=Z0[Xh],hA=Qh.toLowerCase(),fA=Qh[0].toUpperCase()+Qh.slice(1);Os(hA,"on"+fA)}Os(d2,"onAnimationEnd");Os(g2,"onAnimationIteration");Os(p2,"onAnimationStart");Os("dblclick","onDoubleClick");Os("focusin","onFocus");Os("focusout","onBlur");Os(m2,"onTransitionEnd");aa("onMouseEnter",["mouseout","mouseover"]);aa("onMouseLeave",["mouseout","mouseover"]);aa("onPointerEnter",["pointerout","pointerover"]);aa("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dA=new Set("cancel close invalid load scroll toggle".split(" ").concat(nl));function $0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,hE(i,e,void 0,t),t.currentTarget=null}function x2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var f=i.length-1;0<=f;f--){var x=i[f],m=x.instance,p=x.currentTarget;if(x=x.listener,m!==l&&o.isPropagationStopped())break e;$0(o,x,p),l=m}else for(f=0;f<i.length;f++){if(x=i[f],m=x.instance,p=x.currentTarget,x=x.listener,m!==l&&o.isPropagationStopped())break e;$0(o,x,p),l=m}}}if(uu)throw t=Lf,uu=!1,Lf=null,t}function Tt(t,e){var n=e[Yf];n===void 0&&(n=e[Yf]=new Set);var i=t+"__bubble";n.has(i)||(w2(e,t,2,!1),n.add(i))}function Kh(t,e,n){var i=0;e&&(i|=4),w2(n,t,i,e)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function Rl(t){if(!t[Nc]){t[Nc]=!0,vm.forEach(function(n){n!=="selectionchange"&&(dA.has(n)||Kh(n,!1,t),Kh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nc]||(e[Nc]=!0,Kh("selectionchange",!1,e))}}function w2(t,e,n,i){switch(n2(e)){case 1:var o=SE;break;case 4:o=NE;break;default:o=n1}n=o.bind(null,e,n,t),o=void 0,!kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function qh(t,e,n,i,o){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var x=i.stateNode.containerInfo;if(x===o||x.nodeType===8&&x.parentNode===o)break;if(f===4)for(f=i.return;f!==null;){var m=f.tag;if((m===3||m===4)&&(m=f.stateNode.containerInfo,m===o||m.nodeType===8&&m.parentNode===o))return;f=f.return}for(;x!==null;){if(f=$s(x),f===null)return;if(m=f.tag,m===5||m===6){i=l=f;continue e}x=x.parentNode}}i=i.return}zm(function(){var p=l,E=$d(n),_=[];e:{var S=y2.get(t);if(S!==void 0){var P=i1,V=t;switch(t){case"keypress":if(Qc(n)===0)break e;case"keydown":case"keyup":P=HE;break;case"focusin":V="focus",P=Hh;break;case"focusout":V="blur",P=Hh;break;case"beforeblur":case"afterblur":P=Hh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=U0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=DE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=YE;break;case d2:case g2:case p2:P=PE;break;case m2:P=QE;break;case"scroll":P=RE;break;case"wheel":P=qE;break;case"copy":case"cut":case"paste":P=LE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=z0}var G=(e&4)!==0,X=!G&&t==="scroll",j=G?S!==null?S+"Capture":null:S;G=[];for(var B=p,L;B!==null;){L=B;var K=L.stateNode;if(L.tag===5&&K!==null&&(L=K,j!==null&&(K=Cl(B,j),K!=null&&G.push(bl(B,K,L)))),X)break;B=B.return}0<G.length&&(S=new P(S,V,null,n,E),_.push({event:S,listeners:G}))}}if(!(e&7)){e:{if(S=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",S&&n!==Of&&(V=n.relatedTarget||n.fromElement)&&($s(V)||V[ki]))break e;if((P||S)&&(S=E.window===E?E:(S=E.ownerDocument)?S.defaultView||S.parentWindow:window,P?(V=n.relatedTarget||n.toElement,P=p,V=V?$s(V):null,V!==null&&(X=po(V),V!==X||V.tag!==5&&V.tag!==6)&&(V=null)):(P=null,V=p),P!==V)){if(G=U0,K="onMouseLeave",j="onMouseEnter",B="mouse",(t==="pointerout"||t==="pointerover")&&(G=z0,K="onPointerLeave",j="onPointerEnter",B="pointer"),X=P==null?S:Ho(P),L=V==null?S:Ho(V),S=new G(K,B+"leave",P,n,E),S.target=X,S.relatedTarget=L,K=null,$s(E)===p&&(G=new G(j,B+"enter",V,n,E),G.target=L,G.relatedTarget=X,K=G),X=K,P&&V)t:{for(G=P,j=V,B=0,L=G;L;L=Do(L))B++;for(L=0,K=j;K;K=Do(K))L++;for(;0<B-L;)G=Do(G),B--;for(;0<L-B;)j=Do(j),L--;for(;B--;){if(G===j||j!==null&&G===j.alternate)break t;G=Do(G),j=Do(j)}G=null}else G=null;P!==null&&J0(_,S,P,G,!1),V!==null&&X!==null&&J0(_,X,V,G,!0)}}e:{if(S=p?Ho(p):window,P=S.nodeName&&S.nodeName.toLowerCase(),P==="select"||P==="input"&&S.type==="file")var ae=rA;else if(W0(S))if(l2)ae=aA;else{ae=sA;var te=iA}else(P=S.nodeName)&&P.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(ae=oA);if(ae&&(ae=ae(t,p))){a2(_,ae,n,E);break e}te&&te(t,S,p),t==="focusout"&&(te=S._wrapperState)&&te.controlled&&S.type==="number"&&Nf(S,"number",S.value)}switch(te=p?Ho(p):window,t){case"focusin":(W0(te)||te.contentEditable==="true")&&(jo=te,Uf=p,hl=null);break;case"focusout":hl=Uf=jo=null;break;case"mousedown":jf=!0;break;case"contextmenu":case"mouseup":case"dragend":jf=!1,q0(_,n,E);break;case"selectionchange":if(uA)break;case"keydown":case"keyup":q0(_,n,E)}var b;if(o1)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Uo?s2(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(i2&&n.locale!=="ko"&&(Uo||D!=="onCompositionStart"?D==="onCompositionEnd"&&Uo&&(b=r2()):(ls=E,r1="value"in ls?ls.value:ls.textContent,Uo=!0)),te=pu(p,D),0<te.length&&(D=new j0(D,t,null,n,E),_.push({event:D,listeners:te}),b?D.data=b:(b=o2(n),b!==null&&(D.data=b)))),(b=$E?JE(t,n):eA(t,n))&&(p=pu(p,"onBeforeInput"),0<p.length&&(E=new j0("onBeforeInput","beforeinput",null,n,E),_.push({event:E,listeners:p}),E.data=b))}x2(_,e)})}function bl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pu(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Cl(t,n),l!=null&&i.unshift(bl(t,l,o)),l=Cl(t,e),l!=null&&i.push(bl(t,l,o))),t=t.return}return i}function Do(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function J0(t,e,n,i,o){for(var l=e._reactName,f=[];n!==null&&n!==i;){var x=n,m=x.alternate,p=x.stateNode;if(m!==null&&m===i)break;x.tag===5&&p!==null&&(x=p,o?(m=Cl(n,l),m!=null&&f.unshift(bl(n,m,x))):o||(m=Cl(n,l),m!=null&&f.push(bl(n,m,x)))),n=n.return}f.length!==0&&t.push({event:e,listeners:f})}var gA=/\r\n?/g,pA=/\u0000|\uFFFD/g;function eg(t){return(typeof t=="string"?t:""+t).replace(gA,`
`).replace(pA,"")}function Rc(t,e,n){if(e=eg(e),eg(t)!==e&&n)throw Error(ce(425))}function mu(){}var zf=null,Hf=null;function Gf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wf=typeof setTimeout=="function"?setTimeout:void 0,mA=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,yA=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(t){return tg.resolve(null).then(t).catch(xA)}:Wf;function xA(t){setTimeout(function(){throw t})}function Zh(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),vl(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);vl(e)}function gs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ng(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _a=Math.random().toString(36).slice(2),hi="__reactFiber$"+_a,Dl="__reactProps$"+_a,ki="__reactContainer$"+_a,Yf="__reactEvents$"+_a,wA="__reactListeners$"+_a,EA="__reactHandles$"+_a;function $s(t){var e=t[hi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ki]||n[hi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ng(t);t!==null;){if(n=t[hi])return n;t=ng(t)}return e}t=n,n=t.parentNode}return null}function Kl(t){return t=t[hi]||t[ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ho(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function nh(t){return t[Dl]||null}var Xf=[],Go=-1;function Ps(t){return{current:t}}function Nt(t){0>Go||(t.current=Xf[Go],Xf[Go]=null,Go--)}function At(t,e){Go++,Xf[Go]=t.current,t.current=e}var Ts={},kn=Ps(Ts),tr=Ps(!1),io=Ts;function la(t,e){var n=t.type.contextTypes;if(!n)return Ts;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function nr(t){return t=t.childContextTypes,t!=null}function yu(){Nt(tr),Nt(kn)}function rg(t,e,n){if(kn.current!==Ts)throw Error(ce(168));At(kn,e),At(tr,n)}function E2(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(ce(108,iE(t)||"Unknown",o));return Bt({},n,i)}function xu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ts,io=kn.current,At(kn,t),At(tr,tr.current),!0}function ig(t,e,n){var i=t.stateNode;if(!i)throw Error(ce(169));n?(t=E2(t,e,io),i.__reactInternalMemoizedMergedChildContext=t,Nt(tr),Nt(kn),At(kn,t)):Nt(tr),At(tr,n)}var Si=null,rh=!1,$h=!1;function A2(t){Si===null?Si=[t]:Si.push(t)}function AA(t){rh=!0,A2(t)}function ks(){if(!$h&&Si!==null){$h=!0;var t=0,e=ht;try{var n=Si;for(ht=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Si=null,rh=!1}catch(o){throw Si!==null&&(Si=Si.slice(t+1)),Ym(Jd,ks),o}finally{ht=e,$h=!1}}return null}var Wo=[],Yo=0,wu=null,Eu=0,Sr=[],Nr=0,so=null,Ri=1,bi="";function Qs(t,e){Wo[Yo++]=Eu,Wo[Yo++]=wu,wu=t,Eu=e}function _2(t,e,n){Sr[Nr++]=Ri,Sr[Nr++]=bi,Sr[Nr++]=so,so=t;var i=Ri;t=bi;var o=32-Yr(i)-1;i&=~(1<<o),n+=1;var l=32-Yr(e)+o;if(30<l){var f=o-o%5;l=(i&(1<<f)-1).toString(32),i>>=f,o-=f,Ri=1<<32-Yr(e)+o|n<<o|i,bi=l+t}else Ri=1<<l|n<<o|i,bi=t}function l1(t){t.return!==null&&(Qs(t,1),_2(t,1,0))}function c1(t){for(;t===wu;)wu=Wo[--Yo],Wo[Yo]=null,Eu=Wo[--Yo],Wo[Yo]=null;for(;t===so;)so=Sr[--Nr],Sr[Nr]=null,bi=Sr[--Nr],Sr[Nr]=null,Ri=Sr[--Nr],Sr[Nr]=null}var fr=null,ur=null,bt=!1,Wr=null;function C2(t,e){var n=br(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fr=t,ur=gs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fr=t,ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=so!==null?{id:Ri,overflow:bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=br(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fr=t,ur=null,!0):!1;default:return!1}}function Qf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Kf(t){if(bt){var e=ur;if(e){var n=e;if(!sg(t,e)){if(Qf(t))throw Error(ce(418));e=gs(n.nextSibling);var i=fr;e&&sg(t,e)?C2(i,n):(t.flags=t.flags&-4097|2,bt=!1,fr=t)}}else{if(Qf(t))throw Error(ce(418));t.flags=t.flags&-4097|2,bt=!1,fr=t}}}function og(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fr=t}function bc(t){if(t!==fr)return!1;if(!bt)return og(t),bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gf(t.type,t.memoizedProps)),e&&(e=ur)){if(Qf(t))throw I2(),Error(ce(418));for(;e;)C2(t,e),e=gs(e.nextSibling)}if(og(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ur=gs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ur=null}}else ur=fr?gs(t.stateNode.nextSibling):null;return!0}function I2(){for(var t=ur;t;)t=gs(t.nextSibling)}function ca(){ur=fr=null,bt=!1}function u1(t){Wr===null?Wr=[t]:Wr.push(t)}var _A=zi.ReactCurrentBatchConfig;function Qa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var i=n.stateNode}if(!i)throw Error(ce(147,t));var o=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(f){var x=o.refs;f===null?delete x[l]:x[l]=f},e._stringRef=l,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function Dc(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ag(t){var e=t._init;return e(t._payload)}function T2(t){function e(j,B){if(t){var L=j.deletions;L===null?(j.deletions=[B],j.flags|=16):L.push(B)}}function n(j,B){if(!t)return null;for(;B!==null;)e(j,B),B=B.sibling;return null}function i(j,B){for(j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function o(j,B){return j=xs(j,B),j.index=0,j.sibling=null,j}function l(j,B,L){return j.index=L,t?(L=j.alternate,L!==null?(L=L.index,L<B?(j.flags|=2,B):L):(j.flags|=2,B)):(j.flags|=1048576,B)}function f(j){return t&&j.alternate===null&&(j.flags|=2),j}function x(j,B,L,K){return B===null||B.tag!==6?(B=of(L,j.mode,K),B.return=j,B):(B=o(B,L),B.return=j,B)}function m(j,B,L,K){var ae=L.type;return ae===Vo?E(j,B,L.props.children,K,L.key):B!==null&&(B.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===is&&ag(ae)===B.type)?(K=o(B,L.props),K.ref=Qa(j,B,L),K.return=j,K):(K=tu(L.type,L.key,L.props,null,j.mode,K),K.ref=Qa(j,B,L),K.return=j,K)}function p(j,B,L,K){return B===null||B.tag!==4||B.stateNode.containerInfo!==L.containerInfo||B.stateNode.implementation!==L.implementation?(B=af(L,j.mode,K),B.return=j,B):(B=o(B,L.children||[]),B.return=j,B)}function E(j,B,L,K,ae){return B===null||B.tag!==7?(B=ro(L,j.mode,K,ae),B.return=j,B):(B=o(B,L),B.return=j,B)}function _(j,B,L){if(typeof B=="string"&&B!==""||typeof B=="number")return B=of(""+B,j.mode,L),B.return=j,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Ec:return L=tu(B.type,B.key,B.props,null,j.mode,L),L.ref=Qa(j,null,B),L.return=j,L;case Fo:return B=af(B,j.mode,L),B.return=j,B;case is:var K=B._init;return _(j,K(B._payload),L)}if(el(B)||Ha(B))return B=ro(B,j.mode,L,null),B.return=j,B;Dc(j,B)}return null}function S(j,B,L,K){var ae=B!==null?B.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return ae!==null?null:x(j,B,""+L,K);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Ec:return L.key===ae?m(j,B,L,K):null;case Fo:return L.key===ae?p(j,B,L,K):null;case is:return ae=L._init,S(j,B,ae(L._payload),K)}if(el(L)||Ha(L))return ae!==null?null:E(j,B,L,K,null);Dc(j,L)}return null}function P(j,B,L,K,ae){if(typeof K=="string"&&K!==""||typeof K=="number")return j=j.get(L)||null,x(B,j,""+K,ae);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case Ec:return j=j.get(K.key===null?L:K.key)||null,m(B,j,K,ae);case Fo:return j=j.get(K.key===null?L:K.key)||null,p(B,j,K,ae);case is:var te=K._init;return P(j,B,L,te(K._payload),ae)}if(el(K)||Ha(K))return j=j.get(L)||null,E(B,j,K,ae,null);Dc(B,K)}return null}function V(j,B,L,K){for(var ae=null,te=null,b=B,D=B=0,O=null;b!==null&&D<L.length;D++){b.index>D?(O=b,b=null):O=b.sibling;var z=S(j,b,L[D],K);if(z===null){b===null&&(b=O);break}t&&b&&z.alternate===null&&e(j,b),B=l(z,B,D),te===null?ae=z:te.sibling=z,te=z,b=O}if(D===L.length)return n(j,b),bt&&Qs(j,D),ae;if(b===null){for(;D<L.length;D++)b=_(j,L[D],K),b!==null&&(B=l(b,B,D),te===null?ae=b:te.sibling=b,te=b);return bt&&Qs(j,D),ae}for(b=i(j,b);D<L.length;D++)O=P(b,j,D,L[D],K),O!==null&&(t&&O.alternate!==null&&b.delete(O.key===null?D:O.key),B=l(O,B,D),te===null?ae=O:te.sibling=O,te=O);return t&&b.forEach(function(H){return e(j,H)}),bt&&Qs(j,D),ae}function G(j,B,L,K){var ae=Ha(L);if(typeof ae!="function")throw Error(ce(150));if(L=ae.call(L),L==null)throw Error(ce(151));for(var te=ae=null,b=B,D=B=0,O=null,z=L.next();b!==null&&!z.done;D++,z=L.next()){b.index>D?(O=b,b=null):O=b.sibling;var H=S(j,b,z.value,K);if(H===null){b===null&&(b=O);break}t&&b&&H.alternate===null&&e(j,b),B=l(H,B,D),te===null?ae=H:te.sibling=H,te=H,b=O}if(z.done)return n(j,b),bt&&Qs(j,D),ae;if(b===null){for(;!z.done;D++,z=L.next())z=_(j,z.value,K),z!==null&&(B=l(z,B,D),te===null?ae=z:te.sibling=z,te=z);return bt&&Qs(j,D),ae}for(b=i(j,b);!z.done;D++,z=L.next())z=P(b,j,D,z.value,K),z!==null&&(t&&z.alternate!==null&&b.delete(z.key===null?D:z.key),B=l(z,B,D),te===null?ae=z:te.sibling=z,te=z);return t&&b.forEach(function(Y){return e(j,Y)}),bt&&Qs(j,D),ae}function X(j,B,L,K){if(typeof L=="object"&&L!==null&&L.type===Vo&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case Ec:e:{for(var ae=L.key,te=B;te!==null;){if(te.key===ae){if(ae=L.type,ae===Vo){if(te.tag===7){n(j,te.sibling),B=o(te,L.props.children),B.return=j,j=B;break e}}else if(te.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===is&&ag(ae)===te.type){n(j,te.sibling),B=o(te,L.props),B.ref=Qa(j,te,L),B.return=j,j=B;break e}n(j,te);break}else e(j,te);te=te.sibling}L.type===Vo?(B=ro(L.props.children,j.mode,K,L.key),B.return=j,j=B):(K=tu(L.type,L.key,L.props,null,j.mode,K),K.ref=Qa(j,B,L),K.return=j,j=K)}return f(j);case Fo:e:{for(te=L.key;B!==null;){if(B.key===te)if(B.tag===4&&B.stateNode.containerInfo===L.containerInfo&&B.stateNode.implementation===L.implementation){n(j,B.sibling),B=o(B,L.children||[]),B.return=j,j=B;break e}else{n(j,B);break}else e(j,B);B=B.sibling}B=af(L,j.mode,K),B.return=j,j=B}return f(j);case is:return te=L._init,X(j,B,te(L._payload),K)}if(el(L))return V(j,B,L,K);if(Ha(L))return G(j,B,L,K);Dc(j,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,B!==null&&B.tag===6?(n(j,B.sibling),B=o(B,L),B.return=j,j=B):(n(j,B),B=of(L,j.mode,K),B.return=j,j=B),f(j)):n(j,B)}return X}var ua=T2(!0),v2=T2(!1),Au=Ps(null),_u=null,Xo=null,h1=null;function f1(){h1=Xo=_u=null}function d1(t){var e=Au.current;Nt(Au),t._currentValue=e}function qf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ta(t,e){_u=t,h1=Xo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jn=!0),t.firstContext=null)}function Mr(t){var e=t._currentValue;if(h1!==t)if(t={context:t,memoizedValue:e,next:null},Xo===null){if(_u===null)throw Error(ce(308));Xo=t,_u.dependencies={lanes:0,firstContext:t}}else Xo=Xo.next=t;return e}var Js=null;function g1(t){Js===null?Js=[t]:Js.push(t)}function S2(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,g1(e)):(n.next=o.next,o.next=n),e.interleaved=n,Li(t,i)}function Li(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ss=!1;function p1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function N2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Oi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ps(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,et&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,Li(t,n)}return o=i.interleaved,o===null?(e.next=e,g1(i)):(e.next=o.next,o.next=e),i.interleaved=e,Li(t,n)}function Kc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,e1(t,n)}}function lg(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?o=l=e:l=l.next=e}else o=l=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Cu(t,e,n,i){var o=t.updateQueue;ss=!1;var l=o.firstBaseUpdate,f=o.lastBaseUpdate,x=o.shared.pending;if(x!==null){o.shared.pending=null;var m=x,p=m.next;m.next=null,f===null?l=p:f.next=p,f=m;var E=t.alternate;E!==null&&(E=E.updateQueue,x=E.lastBaseUpdate,x!==f&&(x===null?E.firstBaseUpdate=p:x.next=p,E.lastBaseUpdate=m))}if(l!==null){var _=o.baseState;f=0,E=p=m=null,x=l;do{var S=x.lane,P=x.eventTime;if((i&S)===S){E!==null&&(E=E.next={eventTime:P,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var V=t,G=x;switch(S=e,P=n,G.tag){case 1:if(V=G.payload,typeof V=="function"){_=V.call(P,_,S);break e}_=V;break e;case 3:V.flags=V.flags&-65537|128;case 0:if(V=G.payload,S=typeof V=="function"?V.call(P,_,S):V,S==null)break e;_=Bt({},_,S);break e;case 2:ss=!0}}x.callback!==null&&x.lane!==0&&(t.flags|=64,S=o.effects,S===null?o.effects=[x]:S.push(x))}else P={eventTime:P,lane:S,tag:x.tag,payload:x.payload,callback:x.callback,next:null},E===null?(p=E=P,m=_):E=E.next=P,f|=S;if(x=x.next,x===null){if(x=o.shared.pending,x===null)break;S=x,x=S.next,S.next=null,o.lastBaseUpdate=S,o.shared.pending=null}}while(1);if(E===null&&(m=_),o.baseState=m,o.firstBaseUpdate=p,o.lastBaseUpdate=E,e=o.shared.interleaved,e!==null){o=e;do f|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);ao|=f,t.lanes=f,t.memoizedState=_}}function cg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(ce(191,o));o.call(i)}}}var ql={},di=Ps(ql),Ml=Ps(ql),Ol=Ps(ql);function eo(t){if(t===ql)throw Error(ce(174));return t}function m1(t,e){switch(At(Ol,e),At(Ml,t),At(di,ql),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bf(e,t)}Nt(di),At(di,e)}function ha(){Nt(di),Nt(Ml),Nt(Ol)}function R2(t){eo(Ol.current);var e=eo(di.current),n=bf(e,t.type);e!==n&&(At(Ml,t),At(di,n))}function y1(t){Ml.current===t&&(Nt(di),Nt(Ml))}var kt=Ps(0);function Iu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jh=[];function x1(){for(var t=0;t<Jh.length;t++)Jh[t]._workInProgressVersionPrimary=null;Jh.length=0}var qc=zi.ReactCurrentDispatcher,ef=zi.ReactCurrentBatchConfig,oo=0,Lt=null,tn=null,dn=null,Tu=!1,fl=!1,Pl=0,CA=0;function Rn(){throw Error(ce(321))}function w1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kr(t[n],e[n]))return!1;return!0}function E1(t,e,n,i,o,l){if(oo=l,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qc.current=t===null||t.memoizedState===null?SA:NA,t=n(i,o),fl){l=0;do{if(fl=!1,Pl=0,25<=l)throw Error(ce(301));l+=1,dn=tn=null,e.updateQueue=null,qc.current=RA,t=n(i,o)}while(fl)}if(qc.current=vu,e=tn!==null&&tn.next!==null,oo=0,dn=tn=Lt=null,Tu=!1,e)throw Error(ce(300));return t}function A1(){var t=Pl!==0;return Pl=0,t}function li(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dn===null?Lt.memoizedState=dn=t:dn=dn.next=t,dn}function Or(){if(tn===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=tn.next;var e=dn===null?Lt.memoizedState:dn.next;if(e!==null)dn=e,tn=t;else{if(t===null)throw Error(ce(310));tn=t,t={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},dn===null?Lt.memoizedState=dn=t:dn=dn.next=t}return dn}function kl(t,e){return typeof e=="function"?e(t):e}function tf(t){var e=Or(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var i=tn,o=i.baseQueue,l=n.pending;if(l!==null){if(o!==null){var f=o.next;o.next=l.next,l.next=f}i.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,i=i.baseState;var x=f=null,m=null,p=l;do{var E=p.lane;if((oo&E)===E)m!==null&&(m=m.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var _={lane:E,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};m===null?(x=m=_,f=i):m=m.next=_,Lt.lanes|=E,ao|=E}p=p.next}while(p!==null&&p!==l);m===null?f=i:m.next=x,Kr(i,e.memoizedState)||(Jn=!0),e.memoizedState=i,e.baseState=f,e.baseQueue=m,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do l=o.lane,Lt.lanes|=l,ao|=l,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nf(t){var e=Or(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,l=e.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do l=t(l,f.action),f=f.next;while(f!==o);Kr(l,e.memoizedState)||(Jn=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function b2(){}function D2(t,e){var n=Lt,i=Or(),o=e(),l=!Kr(i.memoizedState,o);if(l&&(i.memoizedState=o,Jn=!0),i=i.queue,_1(P2.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||dn!==null&&dn.memoizedState.tag&1){if(n.flags|=2048,Ll(9,O2.bind(null,n,i,o,e),void 0,null),gn===null)throw Error(ce(349));oo&30||M2(n,e,o)}return o}function M2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function O2(t,e,n,i){e.value=n,e.getSnapshot=i,k2(e)&&L2(t)}function P2(t,e,n){return n(function(){k2(e)&&L2(t)})}function k2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kr(t,n)}catch{return!0}}function L2(t){var e=Li(t,1);e!==null&&Xr(e,t,1,-1)}function ug(t){var e=li();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kl,lastRenderedState:t},e.queue=t,t=t.dispatch=vA.bind(null,Lt,t),[e.memoizedState,t]}function Ll(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function B2(){return Or().memoizedState}function Zc(t,e,n,i){var o=li();Lt.flags|=t,o.memoizedState=Ll(1|e,n,void 0,i===void 0?null:i)}function ih(t,e,n,i){var o=Or();i=i===void 0?null:i;var l=void 0;if(tn!==null){var f=tn.memoizedState;if(l=f.destroy,i!==null&&w1(i,f.deps)){o.memoizedState=Ll(e,n,l,i);return}}Lt.flags|=t,o.memoizedState=Ll(1|e,n,l,i)}function hg(t,e){return Zc(8390656,8,t,e)}function _1(t,e){return ih(2048,8,t,e)}function F2(t,e){return ih(4,2,t,e)}function V2(t,e){return ih(4,4,t,e)}function U2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function j2(t,e,n){return n=n!=null?n.concat([t]):null,ih(4,4,U2.bind(null,e,t),n)}function C1(){}function z2(t,e){var n=Or();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&w1(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function H2(t,e){var n=Or();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&w1(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function G2(t,e,n){return oo&21?(Kr(n,e)||(n=Km(),Lt.lanes|=n,ao|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jn=!0),t.memoizedState=n)}function IA(t,e){var n=ht;ht=n!==0&&4>n?n:4,t(!0);var i=ef.transition;ef.transition={};try{t(!1),e()}finally{ht=n,ef.transition=i}}function W2(){return Or().memoizedState}function TA(t,e,n){var i=ys(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Y2(t))X2(e,n);else if(n=S2(t,e,n,i),n!==null){var o=jn();Xr(n,t,i,o),Q2(n,e,i)}}function vA(t,e,n){var i=ys(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Y2(t))X2(e,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,x=l(f,n);if(o.hasEagerState=!0,o.eagerState=x,Kr(x,f)){var m=e.interleaved;m===null?(o.next=o,g1(e)):(o.next=m.next,m.next=o),e.interleaved=o;return}}catch{}finally{}n=S2(t,e,o,i),n!==null&&(o=jn(),Xr(n,t,i,o),Q2(n,e,i))}}function Y2(t){var e=t.alternate;return t===Lt||e!==null&&e===Lt}function X2(t,e){fl=Tu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q2(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,e1(t,n)}}var vu={readContext:Mr,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},SA={readContext:Mr,useCallback:function(t,e){return li().memoizedState=[t,e===void 0?null:e],t},useContext:Mr,useEffect:hg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zc(4194308,4,U2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zc(4,2,t,e)},useMemo:function(t,e){var n=li();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=li();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=TA.bind(null,Lt,t),[i.memoizedState,t]},useRef:function(t){var e=li();return t={current:t},e.memoizedState=t},useState:ug,useDebugValue:C1,useDeferredValue:function(t){return li().memoizedState=t},useTransition:function(){var t=ug(!1),e=t[0];return t=IA.bind(null,t[1]),li().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Lt,o=li();if(bt){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),gn===null)throw Error(ce(349));oo&30||M2(i,e,n)}o.memoizedState=n;var l={value:n,getSnapshot:e};return o.queue=l,hg(P2.bind(null,i,l,t),[t]),i.flags|=2048,Ll(9,O2.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=li(),e=gn.identifierPrefix;if(bt){var n=bi,i=Ri;n=(i&~(1<<32-Yr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=CA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NA={readContext:Mr,useCallback:z2,useContext:Mr,useEffect:_1,useImperativeHandle:j2,useInsertionEffect:F2,useLayoutEffect:V2,useMemo:H2,useReducer:tf,useRef:B2,useState:function(){return tf(kl)},useDebugValue:C1,useDeferredValue:function(t){var e=Or();return G2(e,tn.memoizedState,t)},useTransition:function(){var t=tf(kl)[0],e=Or().memoizedState;return[t,e]},useMutableSource:b2,useSyncExternalStore:D2,useId:W2,unstable_isNewReconciler:!1},RA={readContext:Mr,useCallback:z2,useContext:Mr,useEffect:_1,useImperativeHandle:j2,useInsertionEffect:F2,useLayoutEffect:V2,useMemo:H2,useReducer:nf,useRef:B2,useState:function(){return nf(kl)},useDebugValue:C1,useDeferredValue:function(t){var e=Or();return tn===null?e.memoizedState=t:G2(e,tn.memoizedState,t)},useTransition:function(){var t=nf(kl)[0],e=Or().memoizedState;return[t,e]},useMutableSource:b2,useSyncExternalStore:D2,useId:W2,unstable_isNewReconciler:!1};function zr(t,e){if(t&&t.defaultProps){e=Bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sh={isMounted:function(t){return(t=t._reactInternals)?po(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=jn(),o=ys(t),l=Oi(i,o);l.payload=e,n!=null&&(l.callback=n),e=ps(t,l,o),e!==null&&(Xr(e,t,o,i),Kc(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=jn(),o=ys(t),l=Oi(i,o);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=ps(t,l,o),e!==null&&(Xr(e,t,o,i),Kc(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jn(),i=ys(t),o=Oi(n,i);o.tag=2,e!=null&&(o.callback=e),e=ps(t,o,i),e!==null&&(Xr(e,t,i,n),Kc(e,t,i))}};function fg(t,e,n,i,o,l,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,f):e.prototype&&e.prototype.isPureReactComponent?!Nl(n,i)||!Nl(o,l):!0}function K2(t,e,n){var i=!1,o=Ts,l=e.contextType;return typeof l=="object"&&l!==null?l=Mr(l):(o=nr(e)?io:kn.current,i=e.contextTypes,l=(i=i!=null)?la(t,o):Ts),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),e}function dg(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&sh.enqueueReplaceState(e,e.state,null)}function $f(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},p1(t);var l=e.contextType;typeof l=="object"&&l!==null?o.context=Mr(l):(l=nr(e)?io:kn.current,o.context=la(t,l)),o.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Zf(t,e,l,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&sh.enqueueReplaceState(o,o.state,null),Cu(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function fa(t,e){try{var n="",i=e;do n+=rE(i),i=i.return;while(i);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:o,digest:null}}function rf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Jf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bA=typeof WeakMap=="function"?WeakMap:Map;function q2(t,e,n){n=Oi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Nu||(Nu=!0,cd=i),Jf(t,e)},n}function Z2(t,e,n){n=Oi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){Jf(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Jf(t,e),typeof i!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),n}function gg(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new bA;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=GA.bind(null,t,e,n),e.then(t,t))}function pg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mg(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Oi(-1,1),e.tag=2,ps(n,e,1))),n.lanes|=1),t)}var DA=zi.ReactCurrentOwner,Jn=!1;function Un(t,e,n,i){e.child=t===null?v2(e,null,n,i):ua(e,t.child,n,i)}function yg(t,e,n,i,o){n=n.render;var l=e.ref;return ta(e,o),i=E1(t,e,n,i,l,o),n=A1(),t!==null&&!Jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Bi(t,e,o)):(bt&&n&&l1(e),e.flags|=1,Un(t,e,i,o),e.child)}function xg(t,e,n,i,o){if(t===null){var l=n.type;return typeof l=="function"&&!D1(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,$2(t,e,l,i,o)):(t=tu(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&o)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:Nl,n(f,i)&&t.ref===e.ref)return Bi(t,e,o)}return e.flags|=1,t=xs(l,i),t.ref=e.ref,t.return=e,e.child=t}function $2(t,e,n,i,o){if(t!==null){var l=t.memoizedProps;if(Nl(l,i)&&t.ref===e.ref)if(Jn=!1,e.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&(Jn=!0);else return e.lanes=t.lanes,Bi(t,e,o)}return ed(t,e,n,i,o)}function J2(t,e,n){var i=e.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},At(Ko,lr),lr|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,At(Ko,lr),lr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,At(Ko,lr),lr|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,At(Ko,lr),lr|=i;return Un(t,e,o,n),e.child}function ey(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ed(t,e,n,i,o){var l=nr(n)?io:kn.current;return l=la(e,l),ta(e,o),n=E1(t,e,n,i,l,o),i=A1(),t!==null&&!Jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Bi(t,e,o)):(bt&&i&&l1(e),e.flags|=1,Un(t,e,n,o),e.child)}function wg(t,e,n,i,o){if(nr(n)){var l=!0;xu(e)}else l=!1;if(ta(e,o),e.stateNode===null)$c(t,e),K2(e,n,i),$f(e,n,i,o),i=!0;else if(t===null){var f=e.stateNode,x=e.memoizedProps;f.props=x;var m=f.context,p=n.contextType;typeof p=="object"&&p!==null?p=Mr(p):(p=nr(n)?io:kn.current,p=la(e,p));var E=n.getDerivedStateFromProps,_=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function";_||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==i||m!==p)&&dg(e,f,i,p),ss=!1;var S=e.memoizedState;f.state=S,Cu(e,i,f,o),m=e.memoizedState,x!==i||S!==m||tr.current||ss?(typeof E=="function"&&(Zf(e,n,E,i),m=e.memoizedState),(x=ss||fg(e,n,x,i,S,m,p))?(_||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=m),f.props=i,f.state=m,f.context=p,i=x):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,N2(t,e),x=e.memoizedProps,p=e.type===e.elementType?x:zr(e.type,x),f.props=p,_=e.pendingProps,S=f.context,m=n.contextType,typeof m=="object"&&m!==null?m=Mr(m):(m=nr(n)?io:kn.current,m=la(e,m));var P=n.getDerivedStateFromProps;(E=typeof P=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==_||S!==m)&&dg(e,f,i,m),ss=!1,S=e.memoizedState,f.state=S,Cu(e,i,f,o);var V=e.memoizedState;x!==_||S!==V||tr.current||ss?(typeof P=="function"&&(Zf(e,n,P,i),V=e.memoizedState),(p=ss||fg(e,n,p,i,S,V,m)||!1)?(E||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,V,m),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,V,m)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||x===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=V),f.props=i,f.state=V,f.context=m,i=p):(typeof f.componentDidUpdate!="function"||x===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),i=!1)}return td(t,e,n,i,l,o)}function td(t,e,n,i,o,l){ey(t,e);var f=(e.flags&128)!==0;if(!i&&!f)return o&&ig(e,n,!1),Bi(t,e,l);i=e.stateNode,DA.current=e;var x=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&f?(e.child=ua(e,t.child,null,l),e.child=ua(e,null,x,l)):Un(t,e,x,l),e.memoizedState=i.state,o&&ig(e,n,!0),e.child}function ty(t){var e=t.stateNode;e.pendingContext?rg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rg(t,e.context,!1),m1(t,e.containerInfo)}function Eg(t,e,n,i,o){return ca(),u1(o),e.flags|=256,Un(t,e,n,i),e.child}var nd={dehydrated:null,treeContext:null,retryLane:0};function rd(t){return{baseLanes:t,cachePool:null,transitions:null}}function ny(t,e,n){var i=e.pendingProps,o=kt.current,l=!1,f=(e.flags&128)!==0,x;if((x=f)||(x=t!==null&&t.memoizedState===null?!1:(o&2)!==0),x?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),At(kt,o&1),t===null)return Kf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=i.children,t=i.fallback,l?(i=e.mode,l=e.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=lh(f,i,0,null),t=ro(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=rd(n),e.memoizedState=nd,t):I1(e,f));if(o=t.memoizedState,o!==null&&(x=o.dehydrated,x!==null))return MA(t,e,f,i,x,o,n);if(l){l=i.fallback,f=e.mode,o=t.child,x=o.sibling;var m={mode:"hidden",children:i.children};return!(f&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=m,e.deletions=null):(i=xs(o,m),i.subtreeFlags=o.subtreeFlags&14680064),x!==null?l=xs(x,l):(l=ro(l,f,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,f=t.child.memoizedState,f=f===null?rd(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=t.childLanes&~n,e.memoizedState=nd,i}return l=t.child,t=l.sibling,i=xs(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function I1(t,e){return e=lh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mc(t,e,n,i){return i!==null&&u1(i),ua(e,t.child,null,n),t=I1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MA(t,e,n,i,o,l,f){if(n)return e.flags&256?(e.flags&=-257,i=rf(Error(ce(422))),Mc(t,e,f,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,o=e.mode,i=lh({mode:"visible",children:i.children},o,0,null),l=ro(l,o,f,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&ua(e,t.child,null,f),e.child.memoizedState=rd(f),e.memoizedState=nd,l);if(!(e.mode&1))return Mc(t,e,f,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var x=i.dgst;return i=x,l=Error(ce(419)),i=rf(l,i,void 0),Mc(t,e,f,i)}if(x=(f&t.childLanes)!==0,Jn||x){if(i=gn,i!==null){switch(f&-f){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|f)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Li(t,o),Xr(i,t,o,-1))}return b1(),i=rf(Error(ce(421))),Mc(t,e,f,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=WA.bind(null,t),o._reactRetry=e,null):(t=l.treeContext,ur=gs(o.nextSibling),fr=e,bt=!0,Wr=null,t!==null&&(Sr[Nr++]=Ri,Sr[Nr++]=bi,Sr[Nr++]=so,Ri=t.id,bi=t.overflow,so=e),e=I1(e,i.children),e.flags|=4096,e)}function Ag(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),qf(t.return,e,n)}function sf(t,e,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function ry(t,e,n){var i=e.pendingProps,o=i.revealOrder,l=i.tail;if(Un(t,e,i.children,n),i=kt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ag(t,n,e);else if(t.tag===19)Ag(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(At(kt,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Iu(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),sf(e,!1,o,n,l);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Iu(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}sf(e,!0,n,null,l);break;case"together":sf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $c(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ao|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OA(t,e,n){switch(e.tag){case 3:ty(e),ca();break;case 5:R2(e);break;case 1:nr(e.type)&&xu(e);break;case 4:m1(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;At(Au,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(At(kt,kt.current&1),e.flags|=128,null):n&e.child.childLanes?ny(t,e,n):(At(kt,kt.current&1),t=Bi(t,e,n),t!==null?t.sibling:null);At(kt,kt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return ry(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),At(kt,kt.current),i)break;return null;case 22:case 23:return e.lanes=0,J2(t,e,n)}return Bi(t,e,n)}var iy,id,sy,oy;iy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};id=function(){};sy=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,eo(di.current);var l=null;switch(n){case"input":o=vf(t,o),i=vf(t,i),l=[];break;case"select":o=Bt({},o,{value:void 0}),i=Bt({},i,{value:void 0}),l=[];break;case"textarea":o=Rf(t,o),i=Rf(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=mu)}Df(n,i);var f;n=null;for(p in o)if(!i.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var x=o[p];for(f in x)x.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Al.hasOwnProperty(p)?l||(l=[]):(l=l||[]).push(p,null));for(p in i){var m=i[p];if(x=o!=null?o[p]:void 0,i.hasOwnProperty(p)&&m!==x&&(m!=null||x!=null))if(p==="style")if(x){for(f in x)!x.hasOwnProperty(f)||m&&m.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in m)m.hasOwnProperty(f)&&x[f]!==m[f]&&(n||(n={}),n[f]=m[f])}else n||(l||(l=[]),l.push(p,n)),n=m;else p==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,x=x?x.__html:void 0,m!=null&&x!==m&&(l=l||[]).push(p,m)):p==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(p,""+m):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Al.hasOwnProperty(p)?(m!=null&&p==="onScroll"&&Tt("scroll",t),l||x===m||(l=[])):(l=l||[]).push(p,m))}n&&(l=l||[]).push("style",n);var p=l;(e.updateQueue=p)&&(e.flags|=4)}};oy=function(t,e,n,i){n!==i&&(e.flags|=4)};function Ka(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function bn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function PA(t,e,n){var i=e.pendingProps;switch(c1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bn(e),null;case 1:return nr(e.type)&&yu(),bn(e),null;case 3:return i=e.stateNode,ha(),Nt(tr),Nt(kn),x1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(bc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(fd(Wr),Wr=null))),id(t,e),bn(e),null;case 5:y1(e);var o=eo(Ol.current);if(n=e.type,t!==null&&e.stateNode!=null)sy(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ce(166));return bn(e),null}if(t=eo(di.current),bc(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[hi]=e,i[Dl]=l,t=(e.mode&1)!==0,n){case"dialog":Tt("cancel",i),Tt("close",i);break;case"iframe":case"object":case"embed":Tt("load",i);break;case"video":case"audio":for(o=0;o<nl.length;o++)Tt(nl[o],i);break;case"source":Tt("error",i);break;case"img":case"image":case"link":Tt("error",i),Tt("load",i);break;case"details":Tt("toggle",i);break;case"input":b0(i,l),Tt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Tt("invalid",i);break;case"textarea":M0(i,l),Tt("invalid",i)}Df(n,l),o=null;for(var f in l)if(l.hasOwnProperty(f)){var x=l[f];f==="children"?typeof x=="string"?i.textContent!==x&&(l.suppressHydrationWarning!==!0&&Rc(i.textContent,x,t),o=["children",x]):typeof x=="number"&&i.textContent!==""+x&&(l.suppressHydrationWarning!==!0&&Rc(i.textContent,x,t),o=["children",""+x]):Al.hasOwnProperty(f)&&x!=null&&f==="onScroll"&&Tt("scroll",i)}switch(n){case"input":Ac(i),D0(i,l,!0);break;case"textarea":Ac(i),O0(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=mu)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{f=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=f.createElement(n,{is:i.is}):(t=f.createElement(n),n==="select"&&(f=t,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):t=f.createElementNS(t,n),t[hi]=e,t[Dl]=i,iy(t,e,!1,!1),e.stateNode=t;e:{switch(f=Mf(n,i),n){case"dialog":Tt("cancel",t),Tt("close",t),o=i;break;case"iframe":case"object":case"embed":Tt("load",t),o=i;break;case"video":case"audio":for(o=0;o<nl.length;o++)Tt(nl[o],t);o=i;break;case"source":Tt("error",t),o=i;break;case"img":case"image":case"link":Tt("error",t),Tt("load",t),o=i;break;case"details":Tt("toggle",t),o=i;break;case"input":b0(t,i),o=vf(t,i),Tt("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=Bt({},i,{value:void 0}),Tt("invalid",t);break;case"textarea":M0(t,i),o=Rf(t,i),Tt("invalid",t);break;default:o=i}Df(n,o),x=o;for(l in x)if(x.hasOwnProperty(l)){var m=x[l];l==="style"?Bm(t,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&km(t,m)):l==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&_l(t,m):typeof m=="number"&&_l(t,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Al.hasOwnProperty(l)?m!=null&&l==="onScroll"&&Tt("scroll",t):m!=null&&Qd(t,l,m,f))}switch(n){case"input":Ac(t),D0(t,i,!1);break;case"textarea":Ac(t),O0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Is(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?Zo(t,!!i.multiple,l,!1):i.defaultValue!=null&&Zo(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=mu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bn(e),null;case 6:if(t&&e.stateNode!=null)oy(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ce(166));if(n=eo(Ol.current),eo(di.current),bc(e)){if(i=e.stateNode,n=e.memoizedProps,i[hi]=e,(l=i.nodeValue!==n)&&(t=fr,t!==null))switch(t.tag){case 3:Rc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rc(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[hi]=e,e.stateNode=i}return bn(e),null;case 13:if(Nt(kt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bt&&ur!==null&&e.mode&1&&!(e.flags&128))I2(),ca(),e.flags|=98560,l=!1;else if(l=bc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(ce(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ce(317));l[hi]=e}else ca(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bn(e),l=!1}else Wr!==null&&(fd(Wr),Wr=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||kt.current&1?nn===0&&(nn=3):b1())),e.updateQueue!==null&&(e.flags|=4),bn(e),null);case 4:return ha(),id(t,e),t===null&&Rl(e.stateNode.containerInfo),bn(e),null;case 10:return d1(e.type._context),bn(e),null;case 17:return nr(e.type)&&yu(),bn(e),null;case 19:if(Nt(kt),l=e.memoizedState,l===null)return bn(e),null;if(i=(e.flags&128)!==0,f=l.rendering,f===null)if(i)Ka(l,!1);else{if(nn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=Iu(t),f!==null){for(e.flags|=128,Ka(l,!1),i=f.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,t=f.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return At(kt,kt.current&1|2),e.child}t=t.sibling}l.tail!==null&&Xt()>da&&(e.flags|=128,i=!0,Ka(l,!1),e.lanes=4194304)}else{if(!i)if(t=Iu(f),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ka(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!bt)return bn(e),null}else 2*Xt()-l.renderingStartTime>da&&n!==1073741824&&(e.flags|=128,i=!0,Ka(l,!1),e.lanes=4194304);l.isBackwards?(f.sibling=e.child,e.child=f):(n=l.last,n!==null?n.sibling=f:e.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Xt(),e.sibling=null,n=kt.current,At(kt,i?n&1|2:n&1),e):(bn(e),null);case 22:case 23:return R1(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?lr&1073741824&&(bn(e),e.subtreeFlags&6&&(e.flags|=8192)):bn(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function kA(t,e){switch(c1(e),e.tag){case 1:return nr(e.type)&&yu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ha(),Nt(tr),Nt(kn),x1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return y1(e),null;case 13:if(Nt(kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));ca()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nt(kt),null;case 4:return ha(),null;case 10:return d1(e.type._context),null;case 22:case 23:return R1(),null;case 24:return null;default:return null}}var Oc=!1,On=!1,LA=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function Qo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){zt(t,e,i)}else n.current=null}function sd(t,e,n){try{n()}catch(i){zt(t,e,i)}}var _g=!1;function BA(t,e){if(zf=du,t=h2(),a1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,x=-1,m=-1,p=0,E=0,_=t,S=null;t:for(;;){for(var P;_!==n||o!==0&&_.nodeType!==3||(x=f+o),_!==l||i!==0&&_.nodeType!==3||(m=f+i),_.nodeType===3&&(f+=_.nodeValue.length),(P=_.firstChild)!==null;)S=_,_=P;for(;;){if(_===t)break t;if(S===n&&++p===o&&(x=f),S===l&&++E===i&&(m=f),(P=_.nextSibling)!==null)break;_=S,S=_.parentNode}_=P}n=x===-1||m===-1?null:{start:x,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hf={focusedElem:t,selectionRange:n},du=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var V=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(V!==null){var G=V.memoizedProps,X=V.memoizedState,j=e.stateNode,B=j.getSnapshotBeforeUpdate(e.elementType===e.type?G:zr(e.type,G),X);j.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var L=e.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(K){zt(e,e.return,K)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return V=_g,_g=!1,V}function dl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&sd(e,n,l)}o=o.next}while(o!==i)}}function oh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function od(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ay(t){var e=t.alternate;e!==null&&(t.alternate=null,ay(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hi],delete e[Dl],delete e[Yf],delete e[wA],delete e[EA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ly(t){return t.tag===5||t.tag===3||t.tag===4}function Cg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ly(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ad(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mu));else if(i!==4&&(t=t.child,t!==null))for(ad(t,e,n),t=t.sibling;t!==null;)ad(t,e,n),t=t.sibling}function ld(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ld(t,e,n),t=t.sibling;t!==null;)ld(t,e,n),t=t.sibling}var En=null,Hr=!1;function ns(t,e,n){for(n=n.child;n!==null;)cy(t,e,n),n=n.sibling}function cy(t,e,n){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount($u,n)}catch{}switch(n.tag){case 5:On||Qo(n,e);case 6:var i=En,o=Hr;En=null,ns(t,e,n),En=i,Hr=o,En!==null&&(Hr?(t=En,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):En.removeChild(n.stateNode));break;case 18:En!==null&&(Hr?(t=En,n=n.stateNode,t.nodeType===8?Zh(t.parentNode,n):t.nodeType===1&&Zh(t,n),vl(t)):Zh(En,n.stateNode));break;case 4:i=En,o=Hr,En=n.stateNode.containerInfo,Hr=!0,ns(t,e,n),En=i,Hr=o;break;case 0:case 11:case 14:case 15:if(!On&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&sd(n,e,f),o=o.next}while(o!==i)}ns(t,e,n);break;case 1:if(!On&&(Qo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(x){zt(n,e,x)}ns(t,e,n);break;case 21:ns(t,e,n);break;case 22:n.mode&1?(On=(i=On)||n.memoizedState!==null,ns(t,e,n),On=i):ns(t,e,n);break;default:ns(t,e,n)}}function Ig(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LA),e.forEach(function(i){var o=YA.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function jr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var l=t,f=e,x=f;e:for(;x!==null;){switch(x.tag){case 5:En=x.stateNode,Hr=!1;break e;case 3:En=x.stateNode.containerInfo,Hr=!0;break e;case 4:En=x.stateNode.containerInfo,Hr=!0;break e}x=x.return}if(En===null)throw Error(ce(160));cy(l,f,o),En=null,Hr=!1;var m=o.alternate;m!==null&&(m.return=null),o.return=null}catch(p){zt(o,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uy(e,t),e=e.sibling}function uy(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(jr(e,t),ai(t),i&4){try{dl(3,t,t.return),oh(3,t)}catch(G){zt(t,t.return,G)}try{dl(5,t,t.return)}catch(G){zt(t,t.return,G)}}break;case 1:jr(e,t),ai(t),i&512&&n!==null&&Qo(n,n.return);break;case 5:if(jr(e,t),ai(t),i&512&&n!==null&&Qo(n,n.return),t.flags&32){var o=t.stateNode;try{_l(o,"")}catch(G){zt(t,t.return,G)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,f=n!==null?n.memoizedProps:l,x=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{x==="input"&&l.type==="radio"&&l.name!=null&&Mm(o,l),Mf(x,f);var p=Mf(x,l);for(f=0;f<m.length;f+=2){var E=m[f],_=m[f+1];E==="style"?Bm(o,_):E==="dangerouslySetInnerHTML"?km(o,_):E==="children"?_l(o,_):Qd(o,E,_,p)}switch(x){case"input":Sf(o,l);break;case"textarea":Om(o,l);break;case"select":var S=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var P=l.value;P!=null?Zo(o,!!l.multiple,P,!1):S!==!!l.multiple&&(l.defaultValue!=null?Zo(o,!!l.multiple,l.defaultValue,!0):Zo(o,!!l.multiple,l.multiple?[]:"",!1))}o[Dl]=l}catch(G){zt(t,t.return,G)}}break;case 6:if(jr(e,t),ai(t),i&4){if(t.stateNode===null)throw Error(ce(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(G){zt(t,t.return,G)}}break;case 3:if(jr(e,t),ai(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{vl(e.containerInfo)}catch(G){zt(t,t.return,G)}break;case 4:jr(e,t),ai(t);break;case 13:jr(e,t),ai(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(S1=Xt())),i&4&&Ig(t);break;case 22:if(E=n!==null&&n.memoizedState!==null,t.mode&1?(On=(p=On)||E,jr(e,t),On=p):jr(e,t),ai(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!E&&t.mode&1)for(Ee=t,E=t.child;E!==null;){for(_=Ee=E;Ee!==null;){switch(S=Ee,P=S.child,S.tag){case 0:case 11:case 14:case 15:dl(4,S,S.return);break;case 1:Qo(S,S.return);var V=S.stateNode;if(typeof V.componentWillUnmount=="function"){i=S,n=S.return;try{e=i,V.props=e.memoizedProps,V.state=e.memoizedState,V.componentWillUnmount()}catch(G){zt(i,n,G)}}break;case 5:Qo(S,S.return);break;case 22:if(S.memoizedState!==null){vg(_);continue}}P!==null?(P.return=S,Ee=P):vg(_)}E=E.sibling}e:for(E=null,_=t;;){if(_.tag===5){if(E===null){E=_;try{o=_.stateNode,p?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(x=_.stateNode,m=_.memoizedProps.style,f=m!=null&&m.hasOwnProperty("display")?m.display:null,x.style.display=Lm("display",f))}catch(G){zt(t,t.return,G)}}}else if(_.tag===6){if(E===null)try{_.stateNode.nodeValue=p?"":_.memoizedProps}catch(G){zt(t,t.return,G)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;E===_&&(E=null),_=_.return}E===_&&(E=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:jr(e,t),ai(t),i&4&&Ig(t);break;case 21:break;default:jr(e,t),ai(t)}}function ai(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ly(n)){var i=n;break e}n=n.return}throw Error(ce(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(_l(o,""),i.flags&=-33);var l=Cg(t);ld(t,l,o);break;case 3:case 4:var f=i.stateNode.containerInfo,x=Cg(t);ad(t,x,f);break;default:throw Error(ce(161))}}catch(m){zt(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FA(t,e,n){Ee=t,hy(t)}function hy(t,e,n){for(var i=(t.mode&1)!==0;Ee!==null;){var o=Ee,l=o.child;if(o.tag===22&&i){var f=o.memoizedState!==null||Oc;if(!f){var x=o.alternate,m=x!==null&&x.memoizedState!==null||On;x=Oc;var p=On;if(Oc=f,(On=m)&&!p)for(Ee=o;Ee!==null;)f=Ee,m=f.child,f.tag===22&&f.memoizedState!==null?Sg(o):m!==null?(m.return=f,Ee=m):Sg(o);for(;l!==null;)Ee=l,hy(l),l=l.sibling;Ee=o,Oc=x,On=p}Tg(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,Ee=l):Tg(t)}}function Tg(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:On||oh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!On)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:zr(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&cg(e,l,i);break;case 3:var f=e.updateQueue;if(f!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cg(e,f,n)}break;case 5:var x=e.stateNode;if(n===null&&e.flags&4){n=x;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var E=p.memoizedState;if(E!==null){var _=E.dehydrated;_!==null&&vl(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}On||e.flags&512&&od(e)}catch(S){zt(e,e.return,S)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function vg(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function Sg(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{oh(4,e)}catch(m){zt(e,n,m)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(m){zt(e,o,m)}}var l=e.return;try{od(e)}catch(m){zt(e,l,m)}break;case 5:var f=e.return;try{od(e)}catch(m){zt(e,f,m)}}}catch(m){zt(e,e.return,m)}if(e===t){Ee=null;break}var x=e.sibling;if(x!==null){x.return=e.return,Ee=x;break}Ee=e.return}}var VA=Math.ceil,Su=zi.ReactCurrentDispatcher,T1=zi.ReactCurrentOwner,Dr=zi.ReactCurrentBatchConfig,et=0,gn=null,Zt=null,Cn=0,lr=0,Ko=Ps(0),nn=0,Bl=null,ao=0,ah=0,v1=0,gl=null,Zn=null,S1=0,da=1/0,vi=null,Nu=!1,cd=null,ms=null,Pc=!1,cs=null,Ru=0,pl=0,ud=null,Jc=-1,eu=0;function jn(){return et&6?Xt():Jc!==-1?Jc:Jc=Xt()}function ys(t){return t.mode&1?et&2&&Cn!==0?Cn&-Cn:_A.transition!==null?(eu===0&&(eu=Km()),eu):(t=ht,t!==0||(t=window.event,t=t===void 0?16:n2(t.type)),t):1}function Xr(t,e,n,i){if(50<pl)throw pl=0,ud=null,Error(ce(185));Xl(t,n,i),(!(et&2)||t!==gn)&&(t===gn&&(!(et&2)&&(ah|=n),nn===4&&as(t,Cn)),rr(t,i),n===1&&et===0&&!(e.mode&1)&&(da=Xt()+500,rh&&ks()))}function rr(t,e){var n=t.callbackNode;_E(t,e);var i=fu(t,t===gn?Cn:0);if(i===0)n!==null&&L0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&L0(n),e===1)t.tag===0?AA(Ng.bind(null,t)):A2(Ng.bind(null,t)),yA(function(){!(et&6)&&ks()}),n=null;else{switch(qm(i)){case 1:n=Jd;break;case 4:n=Xm;break;case 16:n=hu;break;case 536870912:n=Qm;break;default:n=hu}n=wy(n,fy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function fy(t,e){if(Jc=-1,eu=0,et&6)throw Error(ce(327));var n=t.callbackNode;if(na()&&t.callbackNode!==n)return null;var i=fu(t,t===gn?Cn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=bu(t,i);else{e=i;var o=et;et|=2;var l=gy();(gn!==t||Cn!==e)&&(vi=null,da=Xt()+500,no(t,e));do try{zA();break}catch(x){dy(t,x)}while(1);f1(),Su.current=l,et=o,Zt!==null?e=0:(gn=null,Cn=0,e=nn)}if(e!==0){if(e===2&&(o=Bf(t),o!==0&&(i=o,e=hd(t,o))),e===1)throw n=Bl,no(t,0),as(t,i),rr(t,Xt()),n;if(e===6)as(t,i);else{if(o=t.current.alternate,!(i&30)&&!UA(o)&&(e=bu(t,i),e===2&&(l=Bf(t),l!==0&&(i=l,e=hd(t,l))),e===1))throw n=Bl,no(t,0),as(t,i),rr(t,Xt()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(ce(345));case 2:Ks(t,Zn,vi);break;case 3:if(as(t,i),(i&130023424)===i&&(e=S1+500-Xt(),10<e)){if(fu(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){jn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Wf(Ks.bind(null,t,Zn,vi),e);break}Ks(t,Zn,vi);break;case 4:if(as(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var f=31-Yr(i);l=1<<f,f=e[f],f>o&&(o=f),i&=~l}if(i=o,i=Xt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*VA(i/1960))-i,10<i){t.timeoutHandle=Wf(Ks.bind(null,t,Zn,vi),i);break}Ks(t,Zn,vi);break;case 5:Ks(t,Zn,vi);break;default:throw Error(ce(329))}}}return rr(t,Xt()),t.callbackNode===n?fy.bind(null,t):null}function hd(t,e){var n=gl;return t.current.memoizedState.isDehydrated&&(no(t,e).flags|=256),t=bu(t,e),t!==2&&(e=Zn,Zn=n,e!==null&&fd(e)),t}function fd(t){Zn===null?Zn=t:Zn.push.apply(Zn,t)}function UA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!Kr(l(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function as(t,e){for(e&=~v1,e&=~ah,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yr(e),i=1<<n;t[n]=-1,e&=~i}}function Ng(t){if(et&6)throw Error(ce(327));na();var e=fu(t,0);if(!(e&1))return rr(t,Xt()),null;var n=bu(t,e);if(t.tag!==0&&n===2){var i=Bf(t);i!==0&&(e=i,n=hd(t,i))}if(n===1)throw n=Bl,no(t,0),as(t,e),rr(t,Xt()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ks(t,Zn,vi),rr(t,Xt()),null}function N1(t,e){var n=et;et|=1;try{return t(e)}finally{et=n,et===0&&(da=Xt()+500,rh&&ks())}}function lo(t){cs!==null&&cs.tag===0&&!(et&6)&&na();var e=et;et|=1;var n=Dr.transition,i=ht;try{if(Dr.transition=null,ht=1,t)return t()}finally{ht=i,Dr.transition=n,et=e,!(et&6)&&ks()}}function R1(){lr=Ko.current,Nt(Ko)}function no(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mA(n)),Zt!==null)for(n=Zt.return;n!==null;){var i=n;switch(c1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&yu();break;case 3:ha(),Nt(tr),Nt(kn),x1();break;case 5:y1(i);break;case 4:ha();break;case 13:Nt(kt);break;case 19:Nt(kt);break;case 10:d1(i.type._context);break;case 22:case 23:R1()}n=n.return}if(gn=t,Zt=t=xs(t.current,null),Cn=lr=e,nn=0,Bl=null,v1=ah=ao=0,Zn=gl=null,Js!==null){for(e=0;e<Js.length;e++)if(n=Js[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,l=n.pending;if(l!==null){var f=l.next;l.next=o,i.next=f}n.pending=i}Js=null}return t}function dy(t,e){do{var n=Zt;try{if(f1(),qc.current=vu,Tu){for(var i=Lt.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Tu=!1}if(oo=0,dn=tn=Lt=null,fl=!1,Pl=0,T1.current=null,n===null||n.return===null){nn=1,Bl=e,Zt=null;break}e:{var l=t,f=n.return,x=n,m=e;if(e=Cn,x.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var p=m,E=x,_=E.tag;if(!(E.mode&1)&&(_===0||_===11||_===15)){var S=E.alternate;S?(E.updateQueue=S.updateQueue,E.memoizedState=S.memoizedState,E.lanes=S.lanes):(E.updateQueue=null,E.memoizedState=null)}var P=pg(f);if(P!==null){P.flags&=-257,mg(P,f,x,l,e),P.mode&1&&gg(l,p,e),e=P,m=p;var V=e.updateQueue;if(V===null){var G=new Set;G.add(m),e.updateQueue=G}else V.add(m);break e}else{if(!(e&1)){gg(l,p,e),b1();break e}m=Error(ce(426))}}else if(bt&&x.mode&1){var X=pg(f);if(X!==null){!(X.flags&65536)&&(X.flags|=256),mg(X,f,x,l,e),u1(fa(m,x));break e}}l=m=fa(m,x),nn!==4&&(nn=2),gl===null?gl=[l]:gl.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var j=q2(l,m,e);lg(l,j);break e;case 1:x=m;var B=l.type,L=l.stateNode;if(!(l.flags&128)&&(typeof B.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(ms===null||!ms.has(L)))){l.flags|=65536,e&=-e,l.lanes|=e;var K=Z2(l,x,e);lg(l,K);break e}}l=l.return}while(l!==null)}my(n)}catch(ae){e=ae,Zt===n&&n!==null&&(Zt=n=n.return);continue}break}while(1)}function gy(){var t=Su.current;return Su.current=vu,t===null?vu:t}function b1(){(nn===0||nn===3||nn===2)&&(nn=4),gn===null||!(ao&268435455)&&!(ah&268435455)||as(gn,Cn)}function bu(t,e){var n=et;et|=2;var i=gy();(gn!==t||Cn!==e)&&(vi=null,no(t,e));do try{jA();break}catch(o){dy(t,o)}while(1);if(f1(),et=n,Su.current=i,Zt!==null)throw Error(ce(261));return gn=null,Cn=0,nn}function jA(){for(;Zt!==null;)py(Zt)}function zA(){for(;Zt!==null&&!dE();)py(Zt)}function py(t){var e=xy(t.alternate,t,lr);t.memoizedProps=t.pendingProps,e===null?my(t):Zt=e,T1.current=null}function my(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kA(n,e),n!==null){n.flags&=32767,Zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nn=6,Zt=null;return}}else if(n=PA(n,e,lr),n!==null){Zt=n;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=t}while(e!==null);nn===0&&(nn=5)}function Ks(t,e,n){var i=ht,o=Dr.transition;try{Dr.transition=null,ht=1,HA(t,e,n,i)}finally{Dr.transition=o,ht=i}return null}function HA(t,e,n,i){do na();while(cs!==null);if(et&6)throw Error(ce(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(CE(t,l),t===gn&&(Zt=gn=null,Cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pc||(Pc=!0,wy(hu,function(){return na(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Dr.transition,Dr.transition=null;var f=ht;ht=1;var x=et;et|=4,T1.current=null,BA(t,n),uy(n,t),cA(Hf),du=!!zf,Hf=zf=null,t.current=n,FA(n),gE(),et=x,ht=f,Dr.transition=l}else t.current=n;if(Pc&&(Pc=!1,cs=t,Ru=o),l=t.pendingLanes,l===0&&(ms=null),yE(n.stateNode),rr(t,Xt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(Nu)throw Nu=!1,t=cd,cd=null,t;return Ru&1&&t.tag!==0&&na(),l=t.pendingLanes,l&1?t===ud?pl++:(pl=0,ud=t):pl=0,ks(),null}function na(){if(cs!==null){var t=qm(Ru),e=Dr.transition,n=ht;try{if(Dr.transition=null,ht=16>t?16:t,cs===null)var i=!1;else{if(t=cs,cs=null,Ru=0,et&6)throw Error(ce(331));var o=et;for(et|=4,Ee=t.current;Ee!==null;){var l=Ee,f=l.child;if(Ee.flags&16){var x=l.deletions;if(x!==null){for(var m=0;m<x.length;m++){var p=x[m];for(Ee=p;Ee!==null;){var E=Ee;switch(E.tag){case 0:case 11:case 15:dl(8,E,l)}var _=E.child;if(_!==null)_.return=E,Ee=_;else for(;Ee!==null;){E=Ee;var S=E.sibling,P=E.return;if(ay(E),E===p){Ee=null;break}if(S!==null){S.return=P,Ee=S;break}Ee=P}}}var V=l.alternate;if(V!==null){var G=V.child;if(G!==null){V.child=null;do{var X=G.sibling;G.sibling=null,G=X}while(G!==null)}}Ee=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,Ee=f;else e:for(;Ee!==null;){if(l=Ee,l.flags&2048)switch(l.tag){case 0:case 11:case 15:dl(9,l,l.return)}var j=l.sibling;if(j!==null){j.return=l.return,Ee=j;break e}Ee=l.return}}var B=t.current;for(Ee=B;Ee!==null;){f=Ee;var L=f.child;if(f.subtreeFlags&2064&&L!==null)L.return=f,Ee=L;else e:for(f=B;Ee!==null;){if(x=Ee,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:oh(9,x)}}catch(ae){zt(x,x.return,ae)}if(x===f){Ee=null;break e}var K=x.sibling;if(K!==null){K.return=x.return,Ee=K;break e}Ee=x.return}}if(et=o,ks(),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot($u,t)}catch{}i=!0}return i}finally{ht=n,Dr.transition=e}}return!1}function Rg(t,e,n){e=fa(n,e),e=q2(t,e,1),t=ps(t,e,1),e=jn(),t!==null&&(Xl(t,1,e),rr(t,e))}function zt(t,e,n){if(t.tag===3)Rg(t,t,n);else for(;e!==null;){if(e.tag===3){Rg(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ms===null||!ms.has(i))){t=fa(n,t),t=Z2(e,t,1),e=ps(e,t,1),t=jn(),e!==null&&(Xl(e,1,t),rr(e,t));break}}e=e.return}}function GA(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=jn(),t.pingedLanes|=t.suspendedLanes&n,gn===t&&(Cn&n)===n&&(nn===4||nn===3&&(Cn&130023424)===Cn&&500>Xt()-S1?no(t,0):v1|=n),rr(t,e)}function yy(t,e){e===0&&(t.mode&1?(e=Ic,Ic<<=1,!(Ic&130023424)&&(Ic=4194304)):e=1);var n=jn();t=Li(t,e),t!==null&&(Xl(t,e,n),rr(t,n))}function WA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yy(t,n)}function YA(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ce(314))}i!==null&&i.delete(e),yy(t,n)}var xy;xy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tr.current)Jn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jn=!1,OA(t,e,n);Jn=!!(t.flags&131072)}else Jn=!1,bt&&e.flags&1048576&&_2(e,Eu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;$c(t,e),t=e.pendingProps;var o=la(e,kn.current);ta(e,n),o=E1(null,e,i,t,o,n);var l=A1();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nr(i)?(l=!0,xu(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,p1(e),o.updater=sh,e.stateNode=o,o._reactInternals=e,$f(e,i,t,n),e=td(null,e,i,!0,l,n)):(e.tag=0,bt&&l&&l1(e),Un(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch($c(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=QA(i),t=zr(i,t),o){case 0:e=ed(null,e,i,t,n);break e;case 1:e=wg(null,e,i,t,n);break e;case 11:e=yg(null,e,i,t,n);break e;case 14:e=xg(null,e,i,zr(i.type,t),n);break e}throw Error(ce(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:zr(i,o),ed(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:zr(i,o),wg(t,e,i,o,n);case 3:e:{if(ty(e),t===null)throw Error(ce(387));i=e.pendingProps,l=e.memoizedState,o=l.element,N2(t,e),Cu(e,i,null,n);var f=e.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=fa(Error(ce(423)),e),e=Eg(t,e,i,n,o);break e}else if(i!==o){o=fa(Error(ce(424)),e),e=Eg(t,e,i,n,o);break e}else for(ur=gs(e.stateNode.containerInfo.firstChild),fr=e,bt=!0,Wr=null,n=v2(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ca(),i===o){e=Bi(t,e,n);break e}Un(t,e,i,n)}e=e.child}return e;case 5:return R2(e),t===null&&Kf(e),i=e.type,o=e.pendingProps,l=t!==null?t.memoizedProps:null,f=o.children,Gf(i,o)?f=null:l!==null&&Gf(i,l)&&(e.flags|=32),ey(t,e),Un(t,e,f,n),e.child;case 6:return t===null&&Kf(e),null;case 13:return ny(t,e,n);case 4:return m1(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ua(e,null,i,n):Un(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:zr(i,o),yg(t,e,i,o,n);case 7:return Un(t,e,e.pendingProps,n),e.child;case 8:return Un(t,e,e.pendingProps.children,n),e.child;case 12:return Un(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,l=e.memoizedProps,f=o.value,At(Au,i._currentValue),i._currentValue=f,l!==null)if(Kr(l.value,f)){if(l.children===o.children&&!tr.current){e=Bi(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var x=l.dependencies;if(x!==null){f=l.child;for(var m=x.firstContext;m!==null;){if(m.context===i){if(l.tag===1){m=Oi(-1,n&-n),m.tag=2;var p=l.updateQueue;if(p!==null){p=p.shared;var E=p.pending;E===null?m.next=m:(m.next=E.next,E.next=m),p.pending=m}}l.lanes|=n,m=l.alternate,m!==null&&(m.lanes|=n),qf(l.return,n,e),x.lanes|=n;break}m=m.next}}else if(l.tag===10)f=l.type===e.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(ce(341));f.lanes|=n,x=f.alternate,x!==null&&(x.lanes|=n),qf(f,n,e),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}Un(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,ta(e,n),o=Mr(o),i=i(o),e.flags|=1,Un(t,e,i,n),e.child;case 14:return i=e.type,o=zr(i,e.pendingProps),o=zr(i.type,o),xg(t,e,i,o,n);case 15:return $2(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:zr(i,o),$c(t,e),e.tag=1,nr(i)?(t=!0,xu(e)):t=!1,ta(e,n),K2(e,i,o),$f(e,i,o,n),td(null,e,i,!0,t,n);case 19:return ry(t,e,n);case 22:return J2(t,e,n)}throw Error(ce(156,e.tag))};function wy(t,e){return Ym(t,e)}function XA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(t,e,n,i){return new XA(t,e,n,i)}function D1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QA(t){if(typeof t=="function")return D1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qd)return 11;if(t===Zd)return 14}return 2}function xs(t,e){var n=t.alternate;return n===null?(n=br(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tu(t,e,n,i,o,l){var f=2;if(i=t,typeof t=="function")D1(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Vo:return ro(n.children,o,l,e);case Kd:f=8,o|=8;break;case _f:return t=br(12,n,e,o|2),t.elementType=_f,t.lanes=l,t;case Cf:return t=br(13,n,e,o),t.elementType=Cf,t.lanes=l,t;case If:return t=br(19,n,e,o),t.elementType=If,t.lanes=l,t;case Rm:return lh(n,o,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sm:f=10;break e;case Nm:f=9;break e;case qd:f=11;break e;case Zd:f=14;break e;case is:f=16,i=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=br(f,n,e,o),e.elementType=t,e.type=i,e.lanes=l,e}function ro(t,e,n,i){return t=br(7,t,i,e),t.lanes=n,t}function lh(t,e,n,i){return t=br(22,t,i,e),t.elementType=Rm,t.lanes=n,t.stateNode={isHidden:!1},t}function of(t,e,n){return t=br(6,t,null,e),t.lanes=n,t}function af(t,e,n){return e=br(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KA(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uh(0),this.expirationTimes=Uh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uh(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function M1(t,e,n,i,o,l,f,x,m){return t=new KA(t,e,n,x,m),e===1?(e=1,l===!0&&(e|=8)):e=0,l=br(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},p1(l),t}function qA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function Ey(t){if(!t)return Ts;t=t._reactInternals;e:{if(po(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(nr(n))return E2(t,n,e)}return e}function Ay(t,e,n,i,o,l,f,x,m){return t=M1(n,i,!0,t,o,l,f,x,m),t.context=Ey(null),n=t.current,i=jn(),o=ys(n),l=Oi(i,o),l.callback=e??null,ps(n,l,o),t.current.lanes=o,Xl(t,o,i),rr(t,i),t}function ch(t,e,n,i){var o=e.current,l=jn(),f=ys(o);return n=Ey(n),e.context===null?e.context=n:e.pendingContext=n,e=Oi(l,f),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ps(o,e,f),t!==null&&(Xr(t,o,f,l),Kc(t,o,f)),f}function Du(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function O1(t,e){bg(t,e),(t=t.alternate)&&bg(t,e)}function ZA(){return null}var _y=typeof reportError=="function"?reportError:function(t){console.error(t)};function P1(t){this._internalRoot=t}uh.prototype.render=P1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));ch(t,e,null,null)};uh.prototype.unmount=P1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;lo(function(){ch(null,t,null,null)}),e[ki]=null}};function uh(t){this._internalRoot=t}uh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<os.length&&e!==0&&e<os[n].priority;n++);os.splice(n,0,t),n===0&&t2(t)}};function k1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dg(){}function $A(t,e,n,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var p=Du(f);l.call(p)}}var f=Ay(e,i,t,0,null,!1,!1,"",Dg);return t._reactRootContainer=f,t[ki]=f.current,Rl(t.nodeType===8?t.parentNode:t),lo(),f}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var x=i;i=function(){var p=Du(m);x.call(p)}}var m=M1(t,0,!1,null,null,!1,!1,"",Dg);return t._reactRootContainer=m,t[ki]=m.current,Rl(t.nodeType===8?t.parentNode:t),lo(function(){ch(e,m,n,i)}),m}function fh(t,e,n,i,o){var l=n._reactRootContainer;if(l){var f=l;if(typeof o=="function"){var x=o;o=function(){var m=Du(f);x.call(m)}}ch(e,f,t,o)}else f=$A(n,e,t,o,i);return Du(f)}Zm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=tl(e.pendingLanes);n!==0&&(e1(e,n|1),rr(e,Xt()),!(et&6)&&(da=Xt()+500,ks()))}break;case 13:lo(function(){var i=Li(t,1);if(i!==null){var o=jn();Xr(i,t,1,o)}}),O1(t,1)}};t1=function(t){if(t.tag===13){var e=Li(t,134217728);if(e!==null){var n=jn();Xr(e,t,134217728,n)}O1(t,134217728)}};$m=function(t){if(t.tag===13){var e=ys(t),n=Li(t,e);if(n!==null){var i=jn();Xr(n,t,e,i)}O1(t,e)}};Jm=function(){return ht};e2=function(t,e){var n=ht;try{return ht=t,e()}finally{ht=n}};Pf=function(t,e,n){switch(e){case"input":if(Sf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=nh(i);if(!o)throw Error(ce(90));Dm(i),Sf(i,o)}}}break;case"textarea":Om(t,n);break;case"select":e=n.value,e!=null&&Zo(t,!!n.multiple,e,!1)}};Um=N1;jm=lo;var JA={usingClientEntryPoint:!1,Events:[Kl,Ho,nh,Fm,Vm,N1]},qa={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e_={bundleType:qa.bundleType,version:qa.version,rendererPackageName:qa.rendererPackageName,rendererConfig:qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gm(t),t===null?null:t.stateNode},findFiberByHostInstance:qa.findFiberByHostInstance||ZA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kc.isDisabled&&kc.supportsFiber)try{$u=kc.inject(e_),fi=kc}catch{}}gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JA;gr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!k1(e))throw Error(ce(200));return qA(t,e,null,n)};gr.createRoot=function(t,e){if(!k1(t))throw Error(ce(299));var n=!1,i="",o=_y;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=M1(t,1,!1,null,null,n,!1,i,o),t[ki]=e.current,Rl(t.nodeType===8?t.parentNode:t),new P1(e)};gr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=Gm(e),t=t===null?null:t.stateNode,t};gr.flushSync=function(t){return lo(t)};gr.hydrate=function(t,e,n){if(!hh(e))throw Error(ce(200));return fh(null,t,e,!0,n)};gr.hydrateRoot=function(t,e,n){if(!k1(t))throw Error(ce(405));var i=n!=null&&n.hydratedSources||null,o=!1,l="",f=_y;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),e=Ay(e,null,t,1,n??null,o,!1,l,f),t[ki]=e.current,Rl(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new uh(e)};gr.render=function(t,e,n){if(!hh(e))throw Error(ce(200));return fh(null,t,e,!1,n)};gr.unmountComponentAtNode=function(t){if(!hh(t))throw Error(ce(40));return t._reactRootContainer?(lo(function(){fh(null,null,t,!1,function(){t._reactRootContainer=null,t[ki]=null})}),!0):!1};gr.unstable_batchedUpdates=N1;gr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!hh(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return fh(t,e,n,!1,i)};gr.version="18.3.1-next-f1338f8080-20240426";function Cy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cy)}catch(t){console.error(t)}}Cy(),Cm.exports=gr;var t_=Cm.exports,Mg=t_;Ef.createRoot=Mg.createRoot,Ef.hydrateRoot=Mg.hydrateRoot;var n_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const r_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i_=(t,e)=>{const n=Me.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:f,children:x,...m},p)=>Me.createElement("svg",{ref:p,...n_,width:o,height:o,stroke:i,strokeWidth:f?Number(l)*24/Number(o):l,className:`lucide lucide-${r_(t)}`,...m},[...e.map(([E,_])=>Me.createElement(E,_)),...(Array.isArray(x)?x:[x])||[]]));return n.displayName=`${t}`,n};var ft=i_;const s_=ft("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),lf=ft("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),o_=ft("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),a_=ft("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),l_=ft("BookDown",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M12 13V7",key:"h0r20n"}],["path",{d:"m9 10 3 3 3-3",key:"zt5b4y"}]]),c_=ft("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),u_=ft("BookUp",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M12 13V7",key:"h0r20n"}],["path",{d:"m9 10 3-3 3 3",key:"11gsxs"}]]),Og=ft("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Pg=ft("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),h_=ft("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),dd=ft("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),f_=ft("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),d_=ft("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),gd=ft("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),g_=ft("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),p_=ft("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),m_=ft("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Iy=ft("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Ty=ft("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),y_=ft("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),x_=ft("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),w_=ft("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),kg=ft("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),vy=ft("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Sy=ft("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Lg=ft("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),E_=ft("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),pd=ft("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Bg=ft("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),A_=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},__=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],f=t[n++],x=t[n++],m=((o&7)<<18|(l&63)<<12|(f&63)<<6|x&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=t[n++],f=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|f&63)}}return e.join("")},Ry={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const l=t[o],f=o+1<t.length,x=f?t[o+1]:0,m=o+2<t.length,p=m?t[o+2]:0,E=l>>2,_=(l&3)<<4|x>>4;let S=(x&15)<<2|p>>6,P=p&63;m||(P=64,f||(S=64)),i.push(n[E],n[_],n[S],n[P])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ny(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):__(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],x=o<t.length?n[t.charAt(o)]:0;++o;const p=o<t.length?n[t.charAt(o)]:64;++o;const _=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||x==null||p==null||_==null)throw new C_;const S=l<<2|x>>4;if(i.push(S),p!==64){const P=x<<4&240|p>>2;if(i.push(P),_!==64){const V=p<<6&192|_;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class C_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I_=function(t){const e=Ny(t);return Ry.encodeByteArray(e,!0)},Mu=function(t){return I_(t).replace(/\./g,"")},T_=function(t){try{return Ry.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=()=>v_().__FIREBASE_DEFAULTS__,N_=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&T_(t[1]);return e&&JSON.parse(e)},L1=()=>{try{return A_()||S_()||N_()||R_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},b_=t=>{var e,n;return(n=(e=L1())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},D_=t=>{const e=b_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},by=()=>{var t;return(t=L1())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function O_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t},x="";return[Mu(JSON.stringify(n)),Mu(JSON.stringify(f)),x].join(".")}const ml={};function k_(){const t={prod:[],emulator:[]};for(const e of Object.keys(ml))ml[e]?t.emulator.push(e):t.prod.push(e);return t}function L_(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Fg=!1;function B_(t,e){if(typeof window>"u"||typeof document>"u"||!B1(window.location.host)||ml[t]===e||ml[t]||Fg)return;ml[t]=e;function n(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=k_().prod.length>0;function f(){const S=document.getElementById(i);S&&S.remove()}function x(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function m(S,P){S.setAttribute("width","24"),S.setAttribute("id",P),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Fg=!0,f()},S}function E(S,P){S.setAttribute("id",P),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function _(){const S=L_(i),P=n("text"),V=document.getElementById(P)||document.createElement("span"),G=n("learnmore"),X=document.getElementById(G)||document.createElement("a"),j=n("preprendIcon"),B=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const L=S.element;x(L),E(X,G);const K=p();m(B,j),L.append(B,V,X,K),document.body.appendChild(L)}l?(V.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function V_(){var e;const t=(e=L1())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U_(){return!V_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j_(){try{return typeof indexedDB=="object"}catch{return!1}}function z_(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="FirebaseError";class Ca extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=H_,Object.setPrototypeOf(this,Ca.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dy.prototype.create)}}class Dy{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],f=l?G_(l,i):"Error",x=`${this.serviceName}: ${f} (${o}).`;return new Ca(o,x,i)}}function G_(t,e){return t.replace(W_,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const W_=/\{\$([^}]+)}/g;function Ou(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const l=t[o],f=e[o];if(Vg(l)&&Vg(f)){if(!Ou(l,f))return!1}else if(l!==f)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function Vg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){return t&&t._delegate?t._delegate:t}class Fl{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new M_;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Q_(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,f]of this.instancesDeferred.entries()){const x=this.normalizeInstanceIdentifier(l);i===x&&f.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:X_(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function X_(t){return t===qs?void 0:t}function Q_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Y_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($e||($e={}));const q_={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},Z_=$e.INFO,$_={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},J_=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=$_[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class My{constructor(e){this.name=e,this._logLevel=Z_,this._logHandler=J_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const eC=(t,e)=>e.some(n=>t instanceof n);let Ug,jg;function tC(){return Ug||(Ug=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nC(){return jg||(jg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Oy=new WeakMap,md=new WeakMap,Py=new WeakMap,cf=new WeakMap,F1=new WeakMap;function rC(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",f)},l=()=>{n(ws(t.result)),o()},f=()=>{i(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Oy.set(n,t)}).catch(()=>{}),F1.set(e,t),e}function iC(t){if(md.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",f),t.removeEventListener("abort",f)},l=()=>{n(),o()},f=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",f),t.addEventListener("abort",f)});md.set(t,e)}let yd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return md.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Py.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sC(t){yd=t(yd)}function oC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(uf(this),e,...n);return Py.set(i,e.sort?e.sort():[e]),ws(i)}:nC().includes(t)?function(...e){return t.apply(uf(this),e),ws(Oy.get(this))}:function(...e){return ws(t.apply(uf(this),e))}}function aC(t){return typeof t=="function"?oC(t):(t instanceof IDBTransaction&&iC(t),eC(t,tC())?new Proxy(t,yd):t)}function ws(t){if(t instanceof IDBRequest)return rC(t);if(cf.has(t))return cf.get(t);const e=aC(t);return e!==t&&(cf.set(t,e),F1.set(e,t)),e}const uf=t=>F1.get(t);function lC(t,e,{blocked:n,upgrade:i,blocking:o,terminated:l}={}){const f=indexedDB.open(t,e),x=ws(f);return i&&f.addEventListener("upgradeneeded",m=>{i(ws(f.result),m.oldVersion,m.newVersion,ws(f.transaction),m)}),n&&f.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),x.then(m=>{l&&m.addEventListener("close",()=>l()),o&&m.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),x}const cC=["get","getKey","getAll","getAllKeys","count"],uC=["put","add","delete","clear"],hf=new Map;function zg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hf.get(e))return hf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=uC.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||cC.includes(n)))return;const l=async function(f,...x){const m=this.transaction(f,o?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(x.shift())),(await Promise.all([p[n](...x),o&&m.done]))[0]};return hf.set(e,l),l}sC(t=>({...t,get:(e,n,i)=>zg(e,n)||t.get(e,n,i),has:(e,n)=>!!zg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fC(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function fC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xd="@firebase/app",Hg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new My("@firebase/app"),dC="@firebase/app-compat",gC="@firebase/analytics-compat",pC="@firebase/analytics",mC="@firebase/app-check-compat",yC="@firebase/app-check",xC="@firebase/auth",wC="@firebase/auth-compat",EC="@firebase/database",AC="@firebase/data-connect",_C="@firebase/database-compat",CC="@firebase/functions",IC="@firebase/functions-compat",TC="@firebase/installations",vC="@firebase/installations-compat",SC="@firebase/messaging",NC="@firebase/messaging-compat",RC="@firebase/performance",bC="@firebase/performance-compat",DC="@firebase/remote-config",MC="@firebase/remote-config-compat",OC="@firebase/storage",PC="@firebase/storage-compat",kC="@firebase/firestore",LC="@firebase/ai",BC="@firebase/firestore-compat",FC="firebase",VC="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="[DEFAULT]",UC={[xd]:"fire-core",[dC]:"fire-core-compat",[pC]:"fire-analytics",[gC]:"fire-analytics-compat",[yC]:"fire-app-check",[mC]:"fire-app-check-compat",[xC]:"fire-auth",[wC]:"fire-auth-compat",[EC]:"fire-rtdb",[AC]:"fire-data-connect",[_C]:"fire-rtdb-compat",[CC]:"fire-fn",[IC]:"fire-fn-compat",[TC]:"fire-iid",[vC]:"fire-iid-compat",[SC]:"fire-fcm",[NC]:"fire-fcm-compat",[RC]:"fire-perf",[bC]:"fire-perf-compat",[DC]:"fire-rc",[MC]:"fire-rc-compat",[OC]:"fire-gcs",[PC]:"fire-gcs-compat",[kC]:"fire-fst",[BC]:"fire-fst-compat",[LC]:"fire-vertex","fire-js":"fire-js",[FC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new Map,jC=new Map,Ed=new Map;function Gg(t,e){try{t.container.addComponent(e)}catch(n){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ku(t){const e=t.name;if(Ed.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;Ed.set(e,t);for(const n of Pu.values())Gg(n,t);for(const n of jC.values())Gg(n,t);return!0}function zC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function HC(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new Dy("app","Firebase",GC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Fl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=VC;function ky(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:wd,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Es.create("bad-app-name",{appName:String(o)});if(n||(n=by()),!n)throw Es.create("no-options");const l=Pu.get(o);if(l){if(Ou(n,l.options)&&Ou(i,l.config))return l;throw Es.create("duplicate-app",{appName:o})}const f=new K_(o);for(const m of Ed.values())f.addComponent(m);const x=new WC(n,i,f);return Pu.set(o,x),x}function XC(t=wd){const e=Pu.get(t);if(!e&&t===wd&&by())return ky();if(!e)throw Es.create("no-app",{appName:t});return e}function ra(t,e,n){let i=UC[t]??t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const f=[`Unable to register library "${i}" with version "${e}":`];o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&f.push("and"),l&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(f.join(" "));return}ku(new Fl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="firebase-heartbeat-database",KC=1,Vl="firebase-heartbeat-store";let ff=null;function Ly(){return ff||(ff=lC(QC,KC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Es.create("idb-open",{originalErrorMessage:t.message})})),ff}async function qC(t){try{const n=(await Ly()).transaction(Vl),i=await n.objectStore(Vl).get(By(t));return await n.done,i}catch(e){if(e instanceof Ca)Vi.warn(e.message);else{const n=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Vi.warn(n.message)}}}async function Wg(t,e){try{const i=(await Ly()).transaction(Vl,"readwrite");await i.objectStore(Vl).put(e,By(t)),await i.done}catch(n){if(n instanceof Ca)Vi.warn(n.message);else{const i=Es.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Vi.warn(i.message)}}}function By(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=1024,$C=30;class JC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new t3(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Yg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(f=>f.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>$C){const f=n3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Vi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Yg(),{heartbeatsToSend:i,unsentEntries:o}=e3(this._heartbeatsCache.heartbeats),l=Mu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Vi.warn(n),""}}}function Yg(){return new Date().toISOString().substring(0,10)}function e3(t,e=ZC){const n=[];let i=t.slice();for(const o of t){const l=n.find(f=>f.agent===o.agent);if(l){if(l.dates.push(o.date),Xg(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Xg(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class t3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return j_()?z_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Wg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Wg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xg(t){return Mu(JSON.stringify({version:2,heartbeats:t})).length}function n3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){ku(new Fl("platform-logger",e=>new hC(e),"PRIVATE")),ku(new Fl("heartbeat",e=>new JC(e),"PRIVATE")),ra(xd,Hg,t),ra(xd,Hg,"esm2020"),ra("fire-js","")}r3("");var i3="firebase",s3="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ra(i3,s3,"app");var Qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var As,Fy;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,D){function O(){}O.prototype=D.prototype,b.F=D.prototype,b.prototype=new O,b.prototype.constructor=b,b.D=function(z,H,Y){for(var U=Array(arguments.length-2),He=2;He<arguments.length;He++)U[He-2]=arguments[He];return D.prototype[H].apply(z,U)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,D,O){O||(O=0);const z=Array(16);if(typeof D=="string")for(var H=0;H<16;++H)z[H]=D.charCodeAt(O++)|D.charCodeAt(O++)<<8|D.charCodeAt(O++)<<16|D.charCodeAt(O++)<<24;else for(H=0;H<16;++H)z[H]=D[O++]|D[O++]<<8|D[O++]<<16|D[O++]<<24;D=b.g[0],O=b.g[1],H=b.g[2];let Y=b.g[3],U;U=D+(Y^O&(H^Y))+z[0]+3614090360&4294967295,D=O+(U<<7&4294967295|U>>>25),U=Y+(H^D&(O^H))+z[1]+3905402710&4294967295,Y=D+(U<<12&4294967295|U>>>20),U=H+(O^Y&(D^O))+z[2]+606105819&4294967295,H=Y+(U<<17&4294967295|U>>>15),U=O+(D^H&(Y^D))+z[3]+3250441966&4294967295,O=H+(U<<22&4294967295|U>>>10),U=D+(Y^O&(H^Y))+z[4]+4118548399&4294967295,D=O+(U<<7&4294967295|U>>>25),U=Y+(H^D&(O^H))+z[5]+1200080426&4294967295,Y=D+(U<<12&4294967295|U>>>20),U=H+(O^Y&(D^O))+z[6]+2821735955&4294967295,H=Y+(U<<17&4294967295|U>>>15),U=O+(D^H&(Y^D))+z[7]+4249261313&4294967295,O=H+(U<<22&4294967295|U>>>10),U=D+(Y^O&(H^Y))+z[8]+1770035416&4294967295,D=O+(U<<7&4294967295|U>>>25),U=Y+(H^D&(O^H))+z[9]+2336552879&4294967295,Y=D+(U<<12&4294967295|U>>>20),U=H+(O^Y&(D^O))+z[10]+4294925233&4294967295,H=Y+(U<<17&4294967295|U>>>15),U=O+(D^H&(Y^D))+z[11]+2304563134&4294967295,O=H+(U<<22&4294967295|U>>>10),U=D+(Y^O&(H^Y))+z[12]+1804603682&4294967295,D=O+(U<<7&4294967295|U>>>25),U=Y+(H^D&(O^H))+z[13]+4254626195&4294967295,Y=D+(U<<12&4294967295|U>>>20),U=H+(O^Y&(D^O))+z[14]+2792965006&4294967295,H=Y+(U<<17&4294967295|U>>>15),U=O+(D^H&(Y^D))+z[15]+1236535329&4294967295,O=H+(U<<22&4294967295|U>>>10),U=D+(H^Y&(O^H))+z[1]+4129170786&4294967295,D=O+(U<<5&4294967295|U>>>27),U=Y+(O^H&(D^O))+z[6]+3225465664&4294967295,Y=D+(U<<9&4294967295|U>>>23),U=H+(D^O&(Y^D))+z[11]+643717713&4294967295,H=Y+(U<<14&4294967295|U>>>18),U=O+(Y^D&(H^Y))+z[0]+3921069994&4294967295,O=H+(U<<20&4294967295|U>>>12),U=D+(H^Y&(O^H))+z[5]+3593408605&4294967295,D=O+(U<<5&4294967295|U>>>27),U=Y+(O^H&(D^O))+z[10]+38016083&4294967295,Y=D+(U<<9&4294967295|U>>>23),U=H+(D^O&(Y^D))+z[15]+3634488961&4294967295,H=Y+(U<<14&4294967295|U>>>18),U=O+(Y^D&(H^Y))+z[4]+3889429448&4294967295,O=H+(U<<20&4294967295|U>>>12),U=D+(H^Y&(O^H))+z[9]+568446438&4294967295,D=O+(U<<5&4294967295|U>>>27),U=Y+(O^H&(D^O))+z[14]+3275163606&4294967295,Y=D+(U<<9&4294967295|U>>>23),U=H+(D^O&(Y^D))+z[3]+4107603335&4294967295,H=Y+(U<<14&4294967295|U>>>18),U=O+(Y^D&(H^Y))+z[8]+1163531501&4294967295,O=H+(U<<20&4294967295|U>>>12),U=D+(H^Y&(O^H))+z[13]+2850285829&4294967295,D=O+(U<<5&4294967295|U>>>27),U=Y+(O^H&(D^O))+z[2]+4243563512&4294967295,Y=D+(U<<9&4294967295|U>>>23),U=H+(D^O&(Y^D))+z[7]+1735328473&4294967295,H=Y+(U<<14&4294967295|U>>>18),U=O+(Y^D&(H^Y))+z[12]+2368359562&4294967295,O=H+(U<<20&4294967295|U>>>12),U=D+(O^H^Y)+z[5]+4294588738&4294967295,D=O+(U<<4&4294967295|U>>>28),U=Y+(D^O^H)+z[8]+2272392833&4294967295,Y=D+(U<<11&4294967295|U>>>21),U=H+(Y^D^O)+z[11]+1839030562&4294967295,H=Y+(U<<16&4294967295|U>>>16),U=O+(H^Y^D)+z[14]+4259657740&4294967295,O=H+(U<<23&4294967295|U>>>9),U=D+(O^H^Y)+z[1]+2763975236&4294967295,D=O+(U<<4&4294967295|U>>>28),U=Y+(D^O^H)+z[4]+1272893353&4294967295,Y=D+(U<<11&4294967295|U>>>21),U=H+(Y^D^O)+z[7]+4139469664&4294967295,H=Y+(U<<16&4294967295|U>>>16),U=O+(H^Y^D)+z[10]+3200236656&4294967295,O=H+(U<<23&4294967295|U>>>9),U=D+(O^H^Y)+z[13]+681279174&4294967295,D=O+(U<<4&4294967295|U>>>28),U=Y+(D^O^H)+z[0]+3936430074&4294967295,Y=D+(U<<11&4294967295|U>>>21),U=H+(Y^D^O)+z[3]+3572445317&4294967295,H=Y+(U<<16&4294967295|U>>>16),U=O+(H^Y^D)+z[6]+76029189&4294967295,O=H+(U<<23&4294967295|U>>>9),U=D+(O^H^Y)+z[9]+3654602809&4294967295,D=O+(U<<4&4294967295|U>>>28),U=Y+(D^O^H)+z[12]+3873151461&4294967295,Y=D+(U<<11&4294967295|U>>>21),U=H+(Y^D^O)+z[15]+530742520&4294967295,H=Y+(U<<16&4294967295|U>>>16),U=O+(H^Y^D)+z[2]+3299628645&4294967295,O=H+(U<<23&4294967295|U>>>9),U=D+(H^(O|~Y))+z[0]+4096336452&4294967295,D=O+(U<<6&4294967295|U>>>26),U=Y+(O^(D|~H))+z[7]+1126891415&4294967295,Y=D+(U<<10&4294967295|U>>>22),U=H+(D^(Y|~O))+z[14]+2878612391&4294967295,H=Y+(U<<15&4294967295|U>>>17),U=O+(Y^(H|~D))+z[5]+4237533241&4294967295,O=H+(U<<21&4294967295|U>>>11),U=D+(H^(O|~Y))+z[12]+1700485571&4294967295,D=O+(U<<6&4294967295|U>>>26),U=Y+(O^(D|~H))+z[3]+2399980690&4294967295,Y=D+(U<<10&4294967295|U>>>22),U=H+(D^(Y|~O))+z[10]+4293915773&4294967295,H=Y+(U<<15&4294967295|U>>>17),U=O+(Y^(H|~D))+z[1]+2240044497&4294967295,O=H+(U<<21&4294967295|U>>>11),U=D+(H^(O|~Y))+z[8]+1873313359&4294967295,D=O+(U<<6&4294967295|U>>>26),U=Y+(O^(D|~H))+z[15]+4264355552&4294967295,Y=D+(U<<10&4294967295|U>>>22),U=H+(D^(Y|~O))+z[6]+2734768916&4294967295,H=Y+(U<<15&4294967295|U>>>17),U=O+(Y^(H|~D))+z[13]+1309151649&4294967295,O=H+(U<<21&4294967295|U>>>11),U=D+(H^(O|~Y))+z[4]+4149444226&4294967295,D=O+(U<<6&4294967295|U>>>26),U=Y+(O^(D|~H))+z[11]+3174756917&4294967295,Y=D+(U<<10&4294967295|U>>>22),U=H+(D^(Y|~O))+z[2]+718787259&4294967295,H=Y+(U<<15&4294967295|U>>>17),U=O+(Y^(H|~D))+z[9]+3951481745&4294967295,b.g[0]=b.g[0]+D&4294967295,b.g[1]=b.g[1]+(H+(U<<21&4294967295|U>>>11))&4294967295,b.g[2]=b.g[2]+H&4294967295,b.g[3]=b.g[3]+Y&4294967295}i.prototype.v=function(b,D){D===void 0&&(D=b.length);const O=D-this.blockSize,z=this.C;let H=this.h,Y=0;for(;Y<D;){if(H==0)for(;Y<=O;)o(this,b,Y),Y+=this.blockSize;if(typeof b=="string"){for(;Y<D;)if(z[H++]=b.charCodeAt(Y++),H==this.blockSize){o(this,z),H=0;break}}else for(;Y<D;)if(z[H++]=b[Y++],H==this.blockSize){o(this,z),H=0;break}}this.h=H,this.o+=D},i.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var D=1;D<b.length-8;++D)b[D]=0;D=this.o*8;for(var O=b.length-8;O<b.length;++O)b[O]=D&255,D/=256;for(this.v(b),b=Array(16),D=0,O=0;O<4;++O)for(let z=0;z<32;z+=8)b[D++]=this.g[O]>>>z&255;return b};function l(b,D){var O=x;return Object.prototype.hasOwnProperty.call(O,b)?O[b]:O[b]=D(b)}function f(b,D){this.h=D;const O=[];let z=!0;for(let H=b.length-1;H>=0;H--){const Y=b[H]|0;z&&Y==D||(O[H]=Y,z=!1)}this.g=O}var x={};function m(b){return-128<=b&&b<128?l(b,function(D){return new f([D|0],D<0?-1:0)}):new f([b|0],b<0?-1:0)}function p(b){if(isNaN(b)||!isFinite(b))return _;if(b<0)return X(p(-b));const D=[];let O=1;for(let z=0;b>=O;z++)D[z]=b/O|0,O*=4294967296;return new f(D,0)}function E(b,D){if(b.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(b.charAt(0)=="-")return X(E(b.substring(1),D));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=p(Math.pow(D,8));let z=_;for(let Y=0;Y<b.length;Y+=8){var H=Math.min(8,b.length-Y);const U=parseInt(b.substring(Y,Y+H),D);H<8?(H=p(Math.pow(D,H)),z=z.j(H).add(p(U))):(z=z.j(O),z=z.add(p(U)))}return z}var _=m(0),S=m(1),P=m(16777216);t=f.prototype,t.m=function(){if(G(this))return-X(this).m();let b=0,D=1;for(let O=0;O<this.g.length;O++){const z=this.i(O);b+=(z>=0?z:4294967296+z)*D,D*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(V(this))return"0";if(G(this))return"-"+X(this).toString(b);const D=p(Math.pow(b,6));var O=this;let z="";for(;;){const H=K(O,D).g;O=j(O,H.j(D));let Y=((O.g.length>0?O.g[0]:O.h)>>>0).toString(b);if(O=H,V(O))return Y+z;for(;Y.length<6;)Y="0"+Y;z=Y+z}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function V(b){if(b.h!=0)return!1;for(let D=0;D<b.g.length;D++)if(b.g[D]!=0)return!1;return!0}function G(b){return b.h==-1}t.l=function(b){return b=j(this,b),G(b)?-1:V(b)?0:1};function X(b){const D=b.g.length,O=[];for(let z=0;z<D;z++)O[z]=~b.g[z];return new f(O,~b.h).add(S)}t.abs=function(){return G(this)?X(this):this},t.add=function(b){const D=Math.max(this.g.length,b.g.length),O=[];let z=0;for(let H=0;H<=D;H++){let Y=z+(this.i(H)&65535)+(b.i(H)&65535),U=(Y>>>16)+(this.i(H)>>>16)+(b.i(H)>>>16);z=U>>>16,Y&=65535,U&=65535,O[H]=U<<16|Y}return new f(O,O[O.length-1]&-2147483648?-1:0)};function j(b,D){return b.add(X(D))}t.j=function(b){if(V(this)||V(b))return _;if(G(this))return G(b)?X(this).j(X(b)):X(X(this).j(b));if(G(b))return X(this.j(X(b)));if(this.l(P)<0&&b.l(P)<0)return p(this.m()*b.m());const D=this.g.length+b.g.length,O=[];for(var z=0;z<2*D;z++)O[z]=0;for(z=0;z<this.g.length;z++)for(let H=0;H<b.g.length;H++){const Y=this.i(z)>>>16,U=this.i(z)&65535,He=b.i(H)>>>16,re=b.i(H)&65535;O[2*z+2*H]+=U*re,B(O,2*z+2*H),O[2*z+2*H+1]+=Y*re,B(O,2*z+2*H+1),O[2*z+2*H+1]+=U*He,B(O,2*z+2*H+1),O[2*z+2*H+2]+=Y*He,B(O,2*z+2*H+2)}for(b=0;b<D;b++)O[b]=O[2*b+1]<<16|O[2*b];for(b=D;b<2*D;b++)O[b]=0;return new f(O,0)};function B(b,D){for(;(b[D]&65535)!=b[D];)b[D+1]+=b[D]>>>16,b[D]&=65535,D++}function L(b,D){this.g=b,this.h=D}function K(b,D){if(V(D))throw Error("division by zero");if(V(b))return new L(_,_);if(G(b))return D=K(X(b),D),new L(X(D.g),X(D.h));if(G(D))return D=K(b,X(D)),new L(X(D.g),D.h);if(b.g.length>30){if(G(b)||G(D))throw Error("slowDivide_ only works with positive integers.");for(var O=S,z=D;z.l(b)<=0;)O=ae(O),z=ae(z);var H=te(O,1),Y=te(z,1);for(z=te(z,2),O=te(O,2);!V(z);){var U=Y.add(z);U.l(b)<=0&&(H=H.add(O),Y=U),z=te(z,1),O=te(O,1)}return D=j(b,H.j(D)),new L(H,D)}for(H=_;b.l(D)>=0;){for(O=Math.max(1,Math.floor(b.m()/D.m())),z=Math.ceil(Math.log(O)/Math.LN2),z=z<=48?1:Math.pow(2,z-48),Y=p(O),U=Y.j(D);G(U)||U.l(b)>0;)O-=z,Y=p(O),U=Y.j(D);V(Y)&&(Y=S),H=H.add(Y),b=j(b,U)}return new L(H,b)}t.B=function(b){return K(this,b).h},t.and=function(b){const D=Math.max(this.g.length,b.g.length),O=[];for(let z=0;z<D;z++)O[z]=this.i(z)&b.i(z);return new f(O,this.h&b.h)},t.or=function(b){const D=Math.max(this.g.length,b.g.length),O=[];for(let z=0;z<D;z++)O[z]=this.i(z)|b.i(z);return new f(O,this.h|b.h)},t.xor=function(b){const D=Math.max(this.g.length,b.g.length),O=[];for(let z=0;z<D;z++)O[z]=this.i(z)^b.i(z);return new f(O,this.h^b.h)};function ae(b){const D=b.g.length+1,O=[];for(let z=0;z<D;z++)O[z]=b.i(z)<<1|b.i(z-1)>>>31;return new f(O,b.h)}function te(b,D){const O=D>>5;D%=32;const z=b.g.length-O,H=[];for(let Y=0;Y<z;Y++)H[Y]=D>0?b.i(Y+O)>>>D|b.i(Y+O+1)<<32-D:b.i(Y+O);return new f(H,b.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Fy=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=E,As=f}).apply(typeof Qg<"u"?Qg:typeof self<"u"?self:typeof window<"u"?window:{});var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vy,rl,Uy,nu,Ad,jy,zy,Hy;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lc=="object"&&Lc];for(var A=0;A<g.length;++A){var I=g[A];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var i=n(this);function o(g,A){if(A)e:{var I=i;g=g.split(".");for(var M=0;M<g.length-1;M++){var q=g[M];if(!(q in I))break e;I=I[q]}g=g[g.length-1],M=I[g],A=A(M),A!=M&&A!=null&&e(I,g,{configurable:!0,writable:!0,value:A})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(A){var I=[],M;for(M in A)Object.prototype.hasOwnProperty.call(A,M)&&I.push([M,A[M]]);return I}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},f=this||self;function x(g){var A=typeof g;return A=="object"&&g!=null||A=="function"}function m(g,A,I){return g.call.apply(g.bind,arguments)}function p(g,A,I){return p=m,p.apply(null,arguments)}function E(g,A){var I=Array.prototype.slice.call(arguments,1);return function(){var M=I.slice();return M.push.apply(M,arguments),g.apply(this,M)}}function _(g,A){function I(){}I.prototype=A.prototype,g.Z=A.prototype,g.prototype=new I,g.prototype.constructor=g,g.Ob=function(M,q,J){for(var de=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)de[Le-2]=arguments[Le];return A.prototype[q].apply(M,de)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function P(g){const A=g.length;if(A>0){const I=Array(A);for(let M=0;M<A;M++)I[M]=g[M];return I}return[]}function V(g,A){for(let M=1;M<arguments.length;M++){const q=arguments[M];var I=typeof q;if(I=I!="object"?I:q?Array.isArray(q)?"array":I:"null",I=="array"||I=="object"&&typeof q.length=="number"){I=g.length||0;const J=q.length||0;g.length=I+J;for(let de=0;de<J;de++)g[I+de]=q[de]}else g.push(q)}}class G{constructor(A,I){this.i=A,this.j=I,this.h=0,this.g=null}get(){let A;return this.h>0?(this.h--,A=this.g,this.g=A.next,A.next=null):A=this.i(),A}}function X(g){f.setTimeout(()=>{throw g},0)}function j(){var g=b;let A=null;return g.g&&(A=g.g,g.g=g.g.next,g.g||(g.h=null),A.next=null),A}class B{constructor(){this.h=this.g=null}add(A,I){const M=L.get();M.set(A,I),this.h?this.h.next=M:this.g=M,this.h=M}}var L=new G(()=>new K,g=>g.reset());class K{constructor(){this.next=this.g=this.h=null}set(A,I){this.h=A,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,te=!1,b=new B,D=()=>{const g=Promise.resolve(void 0);ae=()=>{g.then(O)}};function O(){for(var g;g=j();){try{g.h.call(g.g)}catch(I){X(I)}var A=L;A.j(g),A.h<100&&(A.h++,g.next=A.g,A.g=g)}te=!1}function z(){this.u=this.u,this.C=this.C}z.prototype.u=!1,z.prototype.dispose=function(){this.u||(this.u=!0,this.N())},z.prototype[Symbol.dispose]=function(){this.dispose()},z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(g,A){this.type=g,this.g=this.target=A,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var g=!1,A=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const I=()=>{};f.addEventListener("test",I,A),f.removeEventListener("test",I,A)}catch{}return g}();function U(g){return/^[\s\xa0]*$/.test(g)}function He(g,A){H.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,A)}_(He,H),He.prototype.init=function(g,A){const I=this.type=g.type,M=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=A,A=g.relatedTarget,A||(I=="mouseover"?A=g.fromElement:I=="mouseout"&&(A=g.toElement)),this.relatedTarget=A,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),Rt=0;function be(g,A,I,M,q){this.listener=g,this.proxy=null,this.src=A,this.type=I,this.capture=!!M,this.ha=q,this.key=++Rt,this.da=this.fa=!1}function pe(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Te(g,A,I){for(const M in g)A.call(I,g[M],M,g)}function Ne(g,A){for(const I in g)A.call(void 0,g[I],I,g)}function pt(g){const A={};for(const I in g)A[I]=g[I];return A}const Ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ln(g,A){let I,M;for(let q=1;q<arguments.length;q++){M=arguments[q];for(I in M)g[I]=M[I];for(let J=0;J<Ve.length;J++)I=Ve[J],Object.prototype.hasOwnProperty.call(M,I)&&(g[I]=M[I])}}function dt(g){this.src=g,this.g={},this.h=0}dt.prototype.add=function(g,A,I,M,q){const J=g.toString();g=this.g[J],g||(g=this.g[J]=[],this.h++);const de=Ae(g,A,M,q);return de>-1?(A=g[de],I||(A.fa=!1)):(A=new be(A,this.src,J,!!M,q),A.fa=I,g.push(A)),A};function Pr(g,A){const I=A.type;if(I in g.g){var M=g.g[I],q=Array.prototype.indexOf.call(M,A,void 0),J;(J=q>=0)&&Array.prototype.splice.call(M,q,1),J&&(pe(A),g.g[I].length==0&&(delete g.g[I],g.h--))}}function Ae(g,A,I,M){for(let q=0;q<g.length;++q){const J=g[q];if(!J.da&&J.listener==A&&J.capture==!!I&&J.ha==M)return q}return-1}var mr="closure_lm_"+(Math.random()*1e6|0),Vt={};function Hi(g,A,I,M,q){if(M&&M.once)return Fs(g,A,I,M,q);if(Array.isArray(A)){for(let J=0;J<A.length;J++)Hi(g,A[J],I,M,q);return null}return I=Ue(I),g&&g[re]?g.J(A,I,x(M)?!!M.capture:!!M,q):Gi(g,A,I,!1,M,q)}function Gi(g,A,I,M,q,J){if(!A)throw Error("Invalid event type");const de=x(q)?!!q.capture:!!q;let Le=Ht(g);if(Le||(g[mr]=Le=new dt(g)),I=Le.add(A,I,M,de,J),I.proxy)return I;if(M=vn(),I.proxy=M,M.src=g,M.listener=I,g.addEventListener)Y||(q=de),q===void 0&&(q=!1),g.addEventListener(A.toString(),M,q);else if(g.attachEvent)g.attachEvent(ir(A.toString()),M);else if(g.addListener&&g.removeListener)g.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return I}function vn(){function g(I){return A.call(g.src,g.listener,I)}const A=Vs;return g}function Fs(g,A,I,M,q){if(Array.isArray(A)){for(let J=0;J<A.length;J++)Fs(g,A[J],I,M,q);return null}return I=Ue(I),g&&g[re]?g.K(A,I,x(M)?!!M.capture:!!M,q):Gi(g,A,I,!0,M,q)}function Xe(g,A,I,M,q){if(Array.isArray(A))for(var J=0;J<A.length;J++)Xe(g,A[J],I,M,q);else M=x(M)?!!M.capture:!!M,I=Ue(I),g&&g[re]?(g=g.i,J=String(A).toString(),J in g.g&&(A=g.g[J],I=Ae(A,I,M,q),I>-1&&(pe(A[I]),Array.prototype.splice.call(A,I,1),A.length==0&&(delete g.g[J],g.h--)))):g&&(g=Ht(g))&&(A=g.g[A.toString()],g=-1,A&&(g=Ae(A,I,M,q)),(I=g>-1?A[g]:null)&&Zr(I))}function Zr(g){if(typeof g!="number"&&g&&!g.da){var A=g.src;if(A&&A[re])Pr(A.i,g);else{var I=g.type,M=g.proxy;A.removeEventListener?A.removeEventListener(I,M,g.capture):A.detachEvent?A.detachEvent(ir(I),M):A.addListener&&A.removeListener&&A.removeListener(M),(I=Ht(A))?(Pr(I,g),I.h==0&&(I.src=null,A[mr]=null)):pe(g)}}}function ir(g){return g in Vt?Vt[g]:Vt[g]="on"+g}function Vs(g,A){if(g.da)g=!0;else{A=new He(A,this);const I=g.listener,M=g.ha||g.src;g.fa&&Zr(g),g=I.call(M,A)}return g}function Ht(g){return g=g[mr],g instanceof dt?g:null}var rt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ue(g){return typeof g=="function"?g:(g[rt]||(g[rt]=function(A){return g.handleEvent(A)}),g[rt])}function Gt(){z.call(this),this.i=new dt(this),this.M=this,this.G=null}_(Gt,z),Gt.prototype[re]=!0,Gt.prototype.removeEventListener=function(g,A,I,M){Xe(this,g,A,I,M)};function ge(g,A){var I,M=g.G;if(M)for(I=[];M;M=M.G)I.push(M);if(g=g.M,M=A.type||A,typeof A=="string")A=new H(A,g);else if(A instanceof H)A.target=A.target||g;else{var q=A;A=new H(M,g),Ln(A,q)}q=!0;let J,de;if(I)for(de=I.length-1;de>=0;de--)J=A.g=I[de],q=wi(J,M,!0,A)&&q;if(J=A.g=g,q=wi(J,M,!0,A)&&q,q=wi(J,M,!1,A)&&q,I)for(de=0;de<I.length;de++)J=A.g=I[de],q=wi(J,M,!1,A)&&q}Gt.prototype.N=function(){if(Gt.Z.N.call(this),this.i){var g=this.i;for(const A in g.g){const I=g.g[A];for(let M=0;M<I.length;M++)pe(I[M]);delete g.g[A],g.h--}}this.G=null},Gt.prototype.J=function(g,A,I,M){return this.i.add(String(g),A,!1,I,M)},Gt.prototype.K=function(g,A,I,M){return this.i.add(String(g),A,!0,I,M)};function wi(g,A,I,M){if(A=g.i.g[String(A)],!A)return!0;A=A.concat();let q=!0;for(let J=0;J<A.length;++J){const de=A[J];if(de&&!de.da&&de.capture==I){const Le=de.listener,Pt=de.ha||de.src;de.fa&&Pr(g.i,de),q=Le.call(Pt,M)!==!1&&q}}return q&&!M.defaultPrevented}function sc(g,A){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(A)>2147483647?-1:f.setTimeout(g,A||0)}function yr(g){g.g=sc(()=>{g.g=null,g.i&&(g.i=!1,yr(g))},g.l);const A=g.h;g.h=null,g.m.apply(null,A)}class Ra extends z{constructor(A,I){super(),this.m=A,this.l=I,this.h=null,this.i=!1,this.g=null}j(A){this.h=arguments,this.g?this.i=!0:yr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pn(g){z.call(this),this.h=g,this.g={}}_(pn,z);var ba=[];function kr(g){Te(g.g,function(A,I){this.g.hasOwnProperty(I)&&Zr(A)},g),g.g={}}pn.prototype.N=function(){pn.Z.N.call(this),kr(this)},pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var en=f.JSON.stringify,oc=f.JSON.parse,xo=class{stringify(g){return f.JSON.stringify(g,void 0)}parse(g){return f.JSON.parse(g,void 0)}};function ac(){}function Dt(){}var fe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mt(){H.call(this,"d")}_(Mt,H);function nt(){H.call(this,"c")}_(nt,H);var it={},Wi=null;function Yi(){return Wi=Wi||new Gt}it.Ia="serverreachability";function Da(g){H.call(this,it.Ia,g)}_(Da,H);function je(g){const A=Yi();ge(A,new Da(A))}it.STAT_EVENT="statevent";function $r(g,A){H.call(this,it.STAT_EVENT,g),this.stat=A}_($r,H);function on(g){const A=Yi();ge(A,new $r(A,g))}it.Ja="timingevent";function Ma(g,A){H.call(this,it.Ja,g),this.size=A}_(Ma,H);function mn(g,A){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){g()},A)}function Ei(){this.g=!0}Ei.prototype.ua=function(){this.g=!1};function an(g,A,I,M,q,J){g.info(function(){if(g.g)if(J){var de="",Le=J.split("&");for(let lt=0;lt<Le.length;lt++){var Pt=Le[lt].split("=");if(Pt.length>1){const Wt=Pt[0];Pt=Pt[1];const Ir=Wt.split("_");de=Ir.length>=2&&Ir[1]=="type"?de+(Wt+"="+Pt+"&"):de+(Wt+"=redacted&")}}}else de=null;else de=J;return"XMLHTTP REQ ("+M+") [attempt "+q+"]: "+A+`
`+I+`
`+de})}function Xi(g,A,I,M,q,J,de){g.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+q+"]: "+A+`
`+I+`
`+J+" "+de})}function Lr(g,A,I,M){g.info(function(){return"XMLHTTP TEXT ("+A+"): "+Rh(g,I)+(M?" "+M:"")})}function xr(g,A){g.info(function(){return"TIMEOUT: "+A})}Ei.prototype.info=function(){};function Rh(g,A){if(!g.g)return A;if(!A)return null;try{const J=JSON.parse(A);if(J){for(g=0;g<J.length;g++)if(Array.isArray(J[g])){var I=J[g];if(!(I.length<2)){var M=I[1];if(Array.isArray(M)&&!(M.length<1)){var q=M[0];if(q!="noop"&&q!="stop"&&q!="close")for(let de=1;de<M.length;de++)M[de]=""}}}}return en(J)}catch{return A}}var wr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},wo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yn;function Br(){}_(Br,ac),Br.prototype.g=function(){return new XMLHttpRequest},yn=new Br;function ln(g){return encodeURIComponent(String(g))}function me(g){var A=1;g=g.split(":");const I=[];for(;A>0&&g.length;)I.push(g.shift()),A--;return g.length&&I.push(g.join(":")),I}function Bn(g,A,I,M){this.j=g,this.i=A,this.l=I,this.S=M||1,this.V=new pn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Eo}function Eo(){this.i=null,this.g="",this.h=!1}var xn={},Jr={};function Qi(g,A,I){g.M=1,g.A=_o(st(A)),g.u=I,g.R=!0,Us(g,null)}function Us(g,A){g.F=Date.now(),Fn(g),g.B=st(g.A);var I=g.B,M=g.S;Array.isArray(M)||(M=[String(M)]),ka(I.i,"t",M),g.C=0,I=g.j.L,g.h=new Eo,g.g=Ut(g.j,I?A:null,!g.u),g.P>0&&(g.O=new Ra(p(g.Y,g,g.g),g.P)),A=g.V,I=g.g,M=g.ba;var q="readystatechange";Array.isArray(q)||(q&&(ba[0]=q.toString()),q=ba);for(let J=0;J<q.length;J++){const de=Hi(I,q[J],M||A.handleEvent,!1,A.h||A);if(!de)break;A.g[de.key]=de}A=g.J?pt(g.J):{},g.u?(g.v||(g.v="POST"),A["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,A)):(g.v="GET",g.g.ea(g.B,g.v,null,A)),je(),an(g.i,g.v,g.B,g.l,g.S,g.u)}Bn.prototype.ba=function(g){g=g.target;const A=this.O;A&&Yn(g)==3?A.j():this.Y(g)},Bn.prototype.Y=function(g){try{if(g==this.g)e:{const Le=Yn(this.g),Pt=this.g.ya(),lt=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||Ji(this.g)))){this.K||Le!=4||Pt==7||(Pt==8||lt<=0?je(3):je(2)),gt(this);var A=this.g.ca();this.X=A;var I=Er(this);if(this.o=A==200,Xi(this.i,this.v,this.B,this.l,this.S,Le,A),this.o){if(this.U&&!this.L){t:{if(this.g){var M,q=this.g;if((M=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(M)){var J=M;break t}}J=null}if(g=J)Lr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,js(this,g);else{this.o=!1,this.m=3,on(12),Sn(this),Ki(this);break e}}if(this.R){g=!0;let Wt;for(;!this.K&&this.C<I.length;)if(Wt=bh(this,I),Wt==Jr){Le==4&&(this.m=4,on(14),g=!1),Lr(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==xn){this.m=4,on(15),Lr(this.i,this.l,I,"[Invalid Chunk]"),g=!1;break}else Lr(this.i,this.l,Wt,null),js(this,Wt);if(lc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||I.length!=0||this.h.h||(this.m=1,on(16),g=!1),this.o=this.o&&g,!g)Lr(this.i,this.l,I,"[Invalid Chunked Response]"),Sn(this),Ki(this);else if(I.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+I.length),ke(de),de.P=!0,on(11))}}else Lr(this.i,this.l,I,null),js(this,I);Le==4&&Sn(this),this.o&&!this.K&&(Le==4?Va(this.j,this):(this.o=!1,Fn(this)))}else Nn(this.g),A==400&&I.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),Sn(this),Ki(this)}}}catch{}finally{}};function Er(g){if(!lc(g))return g.g.la();const A=Ji(g.g);if(A==="")return"";let I="";const M=A.length,q=Yn(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Sn(g),Ki(g),"";g.h.i=new f.TextDecoder}for(let J=0;J<M;J++)g.h.h=!0,I+=g.h.i.decode(A[J],{stream:!(q&&J==M-1)});return A.length=0,g.h.g+=I,g.C=0,g.h.g}function lc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function bh(g,A){var I=g.C,M=A.indexOf(`
`,I);return M==-1?Jr:(I=Number(A.substring(I,M)),isNaN(I)?xn:(M+=1,M+I>A.length?Jr:(A=A.slice(M,M+I),g.C=M+I,A)))}Bn.prototype.cancel=function(){this.K=!0,Sn(this)};function Fn(g){g.T=Date.now()+g.H,cn(g,g.H)}function cn(g,A){if(g.D!=null)throw Error("WatchDog timer not null");g.D=mn(p(g.aa,g),A)}function gt(g){g.D&&(f.clearTimeout(g.D),g.D=null)}Bn.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(xr(this.i,this.B),this.M!=2&&(je(),on(17)),Sn(this),this.m=2,Ki(this)):cn(this,this.T-g)};function Ki(g){g.j.I==0||g.K||Va(g.j,g)}function Sn(g){gt(g);var A=g.O;A&&typeof A.dispose=="function"&&A.dispose(),g.O=null,kr(g.V),g.g&&(A=g.g,g.g=null,A.abort(),A.dispose())}function js(g,A){try{var I=g.j;if(I.I!=0&&(I.g==g||Oa(I.h,g))){if(!g.L&&Oa(I.h,g)&&I.I==3){try{var M=I.Ba.g.parse(A)}catch{M=null}if(Array.isArray(M)&&M.length==3){var q=M;if(q[0]==0){e:if(!I.v){if(I.g)if(I.g.F+3e3<g.F)Ci(I),To(I);else break e;ee(I),on(18)}}else I.xa=q[1],0<I.xa-I.K&&q[2]<37500&&I.F&&I.A==0&&!I.C&&(I.C=mn(p(I.Va,I),6e3));Ai(I.h)<=1&&I.ta&&(I.ta=void 0)}else Ii(I,11)}else if((g.L||I.g==g)&&Ci(I),!U(A))for(q=I.Ba.g.parse(A),A=0;A<q.length;A++){let lt=q[A];const Wt=lt[0];if(!(Wt<=I.K))if(I.K=Wt,lt=lt[1],I.I==2)if(lt[0]=="c"){I.M=lt[1],I.ba=lt[2];const Ir=lt[3];Ir!=null&&(I.ka=Ir,I.j.info("VER="+I.ka));const Xn=lt[4];Xn!=null&&(I.za=Xn,I.j.info("SVER="+I.za));const Tr=lt[5];Tr!=null&&typeof Tr=="number"&&Tr>0&&(M=1.5*Tr,I.O=M,I.j.info("backChannelRequestTimeoutMs_="+M)),M=I;const ri=g.g;if(ri){const ii=ri.g?ri.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var J=M.h;J.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Qe(J,J.h),J.h=null))}if(M.G){const Ua=ri.g?ri.g.getResponseHeader("X-HTTP-Session-Id"):null;Ua&&(M.wa=Ua,qe(M.J,M.G,Ua))}}I.I=3,I.l&&I.l.ra(),I.aa&&(I.T=Date.now()-g.F,I.j.info("Handshake RTT: "+I.T+"ms")),M=I;var de=g;if(M.na=So(M,M.L?M.ba:null,M.W),de.L){Ke(M.h,de);var Le=de,Pt=M.O;Pt&&(Le.H=Pt),Le.D&&(gt(Le),Fn(Le)),M.g=de}else gc(M);I.i.length>0&&vo(I)}else lt[0]!="stop"&&lt[0]!="close"||Ii(I,7);else I.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Ii(I,7):Io(I):lt[0]!="noop"&&I.l&&I.l.qa(lt),I.A=0)}}je(4)}catch{}}var oe=class{constructor(g,A){this.g=g,this.map=A}};function cc(g){this.l=g||10,f.PerformanceNavigationTiming?(g=f.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _t(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ai(g){return g.h?1:g.g?g.g.size:0}function Oa(g,A){return g.h?g.h==A:g.g?g.g.has(A):!1}function Qe(g,A){g.g?g.g.add(A):g.h=A}function Ke(g,A){g.h&&g.h==A?g.h=null:g.g&&g.g.has(A)&&g.g.delete(A)}cc.prototype.cancel=function(){if(this.i=Fe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Fe(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let A=g.i;for(const I of g.g.values())A=A.concat(I.G);return A}return P(g.i)}var Ao=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pa(g,A){if(g){g=g.split("&");for(let I=0;I<g.length;I++){const M=g[I].indexOf("=");let q,J=null;M>=0?(q=g[I].substring(0,M),J=g[I].substring(M+1)):q=g[I],A(q,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Ar(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let A;g instanceof Ar?(this.l=g.l,Gn(this,g.j),this.o=g.o,this.g=g.g,zs(this,g.u),this.h=g.h,Ct(this,uc(g.i)),this.m=g.m):g&&(A=String(g).match(Ao))?(this.l=!1,Gn(this,A[1]||"",!0),this.o=_r(A[2]||""),this.g=_r(A[3]||"",!0),zs(this,A[4]),this.h=_r(A[5]||"",!0),Ct(this,A[6]||"",!0),this.m=_r(A[7]||"")):(this.l=!1,this.i=new Hs(null,this.l))}Ar.prototype.toString=function(){const g=[];var A=this.j;A&&g.push(tt(A,$,!0),":");var I=this.g;return(I||A=="file")&&(g.push("//"),(A=this.o)&&g.push(tt(A,$,!0),"@"),g.push(ln(I).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.u,I!=null&&g.push(":",String(I))),(I=this.h)&&(this.g&&I.charAt(0)!="/"&&g.push("/"),g.push(tt(I,I.charAt(0)=="/"?_e:k,!0))),(I=this.i.toString())&&g.push("?",I),(I=this.m)&&g.push("#",tt(I,Wn)),g.join("")},Ar.prototype.resolve=function(g){const A=st(this);let I=!!g.j;I?Gn(A,g.j):I=!!g.o,I?A.o=g.o:I=!!g.g,I?A.g=g.g:I=g.u!=null;var M=g.h;if(I)zs(A,g.u);else if(I=!!g.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var q=A.h.lastIndexOf("/");q!=-1&&(M=A.h.slice(0,q+1)+M)}if(q=M,q==".."||q==".")M="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){M=q.lastIndexOf("/",0)==0,q=q.split("/");const J=[];for(let de=0;de<q.length;){const Le=q[de++];Le=="."?M&&de==q.length&&J.push(""):Le==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),M&&de==q.length&&J.push("")):(J.push(Le),M=!0)}M=J.join("/")}else M=q}return I?A.h=M:I=g.i.toString()!=="",I?Ct(A,uc(g.i)):I=!!g.m,I&&(A.m=g.m),A};function st(g){return new Ar(g)}function Gn(g,A,I){g.j=I?_r(A,!0):A,g.j&&(g.j=g.j.replace(/:$/,""))}function zs(g,A){if(A){if(A=Number(A),isNaN(A)||A<0)throw Error("Bad port number "+A);g.u=A}else g.u=null}function Ct(g,A,I){A instanceof Hs?(g.i=A,Co(g.i,g.l)):(I||(A=tt(A,Qt)),g.i=new Hs(A,g.l))}function qe(g,A,I){g.i.set(A,I)}function _o(g){return qe(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function _r(g,A){return g?A?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function tt(g,A,I){return typeof g=="string"?(g=encodeURI(g).replace(A,un),I&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function un(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var $=/[#\/\?@]/g,k=/[#\?:]/g,_e=/[#\?]/g,Qt=/[#\?@]/g,Wn=/#/g;function Hs(g,A){this.h=this.g=null,this.i=g||null,this.j=!!A}function Fr(g){g.g||(g.g=new Map,g.h=0,g.i&&Pa(g.i,function(A,I){g.add(decodeURIComponent(A.replace(/\+/g," ")),I)}))}t=Hs.prototype,t.add=function(g,A){Fr(this),this.i=null,g=ei(this,g);let I=this.g.get(g);return I||this.g.set(g,I=[]),I.push(A),this.h+=1,this};function Vn(g,A){Fr(g),A=ei(g,A),g.g.has(A)&&(g.i=null,g.h-=g.g.get(A).length,g.g.delete(A))}function Ie(g,A){return Fr(g),A=ei(g,A),g.g.has(A)}t.forEach=function(g,A){Fr(this),this.g.forEach(function(I,M){I.forEach(function(q){g.call(A,q,M,this)},this)},this)};function wt(g,A){Fr(g);let I=[];if(typeof A=="string")Ie(g,A)&&(I=I.concat(g.g.get(ei(g,A))));else for(g=Array.from(g.g.values()),A=0;A<g.length;A++)I=I.concat(g[A]);return I}t.set=function(g,A){return Fr(this),this.i=null,g=ei(this,g),Ie(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[A]),this.h+=1,this},t.get=function(g,A){return g?(g=wt(this,g),g.length>0?String(g[0]):A):A};function ka(g,A,I){Vn(g,A),I.length>0&&(g.i=null,g.g.set(ei(g,A),P(I)),g.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],A=Array.from(this.g.keys());for(let M=0;M<A.length;M++){var I=A[M];const q=ln(I);I=wt(this,I);for(let J=0;J<I.length;J++){let de=q;I[J]!==""&&(de+="="+ln(I[J])),g.push(de)}}return this.i=g.join("&")};function uc(g){const A=new Hs;return A.i=g.i,g.g&&(A.g=new Map(g.g),A.h=g.h),A}function ei(g,A){return A=String(A),g.j&&(A=A.toLowerCase()),A}function Co(g,A){A&&!g.j&&(Fr(g),g.i=null,g.g.forEach(function(I,M){const q=M.toLowerCase();M!=q&&(Vn(this,M),ka(this,q,I))},g)),g.j=A}function La(g,A){const I=new Ei;if(f.Image){const M=new Image;M.onload=E(mt,I,"TestLoadImage: loaded",!0,A,M),M.onerror=E(mt,I,"TestLoadImage: error",!1,A,M),M.onabort=E(mt,I,"TestLoadImage: abort",!1,A,M),M.ontimeout=E(mt,I,"TestLoadImage: timeout",!1,A,M),f.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=g}else A(!1)}function Dh(g,A){const I=new Ei,M=new AbortController,q=setTimeout(()=>{M.abort(),mt(I,"TestPingServer: timeout",!1,A)},1e4);fetch(g,{signal:M.signal}).then(J=>{clearTimeout(q),J.ok?mt(I,"TestPingServer: ok",!0,A):mt(I,"TestPingServer: server error",!1,A)}).catch(()=>{clearTimeout(q),mt(I,"TestPingServer: error",!1,A)})}function mt(g,A,I,M,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),M(I)}catch{}}function Gs(){this.g=new xo}function Cr(g){this.i=g.Sb||null,this.h=g.ab||!1}_(Cr,ac),Cr.prototype.g=function(){return new Se(this.i,this.h)};function Se(g,A){Gt.call(this),this.H=g,this.o=A,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Se,Gt),t=Se.prototype,t.open=function(g,A){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=A,this.readyState=1,Ot(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const A={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(A.body=g),(this.H||f).fetch(new Request(this.D,A)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,De(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hc(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function hc(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var A=g.value?g.value:new Uint8Array(0);(A=this.B.decode(A,{stream:!g.done}))&&(this.response=this.responseText+=A)}g.done?De(this):Ot(this),this.readyState==3&&hc(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,De(this))},t.Na=function(g){this.g&&(this.response=g,De(this))},t.ga=function(){this.g&&De(this)};function De(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Ot(g)}t.setRequestHeader=function(g,A){this.A.append(g,A)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],A=this.h.entries();for(var I=A.next();!I.done;)I=I.value,g.push(I[0]+": "+I[1]),I=A.next();return g.join(`\r
`)};function Ot(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Se.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function fc(g){let A="";return Te(g,function(I,M){A+=M,A+=":",A+=I,A+=`\r
`}),A}function Ws(g,A,I){e:{for(M in I){var M=!1;break e}M=!0}M||(I=fc(I),typeof g=="string"?I!=null&&ln(I):qe(g,A,I))}function It(g){Gt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(It,Gt);var _i=/^https?$/i,Mh=["POST","PUT"];t=It.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,A,I,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);A=A?A.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yn.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(A,String(g),!0),this.B=!1}catch(J){qi(this,J);return}if(g=I||"",I=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var q in M)I.set(q,M[q]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const J of M.keys())I.set(J,M.get(J));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(I.keys()).find(J=>J.toLowerCase()=="content-type"),q=f.FormData&&g instanceof f.FormData,!(Array.prototype.indexOf.call(Mh,A,void 0)>=0)||M||q||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,de]of I)this.g.setRequestHeader(J,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(J){qi(this,J)}};function qi(g,A){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=A,g.o=5,Zi(g),Ys(g)}function Zi(g){g.A||(g.A=!0,ge(g,"complete"),ge(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,ge(this,"complete"),ge(this,"abort"),Ys(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ys(this,!0)),It.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?$i(this):this.Xa())},t.Xa=function(){$i(this)};function $i(g){if(g.h&&typeof l<"u"){if(g.v&&Yn(g)==4)setTimeout(g.Ca.bind(g),0);else if(ge(g,"readystatechange"),Yn(g)==4){g.h=!1;try{const J=g.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var A=!0;break e;default:A=!1}var I;if(!(I=A)){var M;if(M=J===0){let de=String(g.D).match(Ao)[1]||null;!de&&f.self&&f.self.location&&(de=f.self.location.protocol.slice(0,-1)),M=!_i.test(de?de.toLowerCase():"")}I=M}if(I)ge(g,"complete"),ge(g,"success");else{g.o=6;try{var q=Yn(g)>2?g.g.statusText:""}catch{q=""}g.l=q+" ["+g.ca()+"]",Zi(g)}}finally{Ys(g)}}}}function Ys(g,A){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const I=g.g;g.g=null,A||ge(g,"ready");try{I.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yn(g){return g.g?g.g.readyState:0}t.ca=function(){try{return Yn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var A=this.g.responseText;return g&&A.indexOf(g)==0&&(A=A.substring(g.length)),oc(A)}};function Ji(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Nn(g){const A={};g=(g.g&&Yn(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<g.length;M++){if(U(g[M]))continue;var I=me(g[M]);const q=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const J=A[q]||[];A[q]=J,J.push(I)}Ne(A,function(M){return M.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function es(g,A,I){return I&&I.internalChannelParams&&I.internalChannelParams[g]||A}function Ba(g){this.za=0,this.i=[],this.j=new Ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=es("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=es("baseRetryDelayMs",5e3,g),this.Za=es("retryDelaySeedMs",1e4,g),this.Ta=es("forwardChannelMaxRetries",2,g),this.va=es("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new cc(g&&g.concurrentRequestLimit),this.Ba=new Gs,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Ba.prototype,t.ka=8,t.I=1,t.connect=function(g,A,I,M){on(0),this.W=g,this.H=A||{},I&&M!==void 0&&(this.H.OSID=I,this.H.OAID=M),this.F=this.X,this.J=So(this,null,this.W),vo(this)};function Io(g){if(dc(g),g.I==3){var A=g.V++,I=st(g.J);if(qe(I,"SID",g.M),qe(I,"RID",A),qe(I,"TYPE","terminate"),ti(g,I),A=new Bn(g,g.j,A),A.M=2,A.A=_o(st(I)),I=!1,f.navigator&&f.navigator.sendBeacon)try{I=f.navigator.sendBeacon(A.A.toString(),"")}catch{}!I&&f.Image&&(new Image().src=A.A,I=!0),I||(A.g=Ut(A.j,null),A.g.ea(A.A)),A.F=Date.now(),Fn(A)}mc(g)}function To(g){g.g&&(ke(g),g.g.cancel(),g.g=null)}function dc(g){To(g),g.v&&(f.clearTimeout(g.v),g.v=null),Ci(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&f.clearTimeout(g.m),g.m=null)}function vo(g){if(!_t(g.h)&&!g.m){g.m=!0;var A=g.Ea;ae||D(),te||(ae(),te=!0),b.add(A,g),g.D=0}}function ot(g,A){return Ai(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=A.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=mn(p(g.Ea,g,A),pc(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const q=new Bn(this,this.j,g);let J=this.o;if(this.U&&(J?(J=pt(J),Ln(J,this.U)):J=this.U),this.u!==null||this.R||(q.J=J,J=null),this.S)e:{for(var A=0,I=0;I<this.i.length;I++){t:{var M=this.i[I];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(A+=M,A>4096){A=I;break e}if(A===4096||I===this.i.length-1){A=I+1;break e}}A=1e3}else A=1e3;A=Vr(this,q,A),I=st(this.J),qe(I,"RID",g),qe(I,"CVER",22),this.G&&qe(I,"X-HTTP-Session-Id",this.G),ti(this,I),J&&(this.R?A="headers="+ln(fc(J))+"&"+A:this.u&&Ws(I,this.u,J)),Qe(this.h,q),this.Ra&&qe(I,"TYPE","init"),this.S?(qe(I,"$req",A),qe(I,"SID","null"),q.U=!0,Qi(q,I,null)):Qi(q,I,A),this.I=2}}else this.I==3&&(g?Fa(this,g):this.i.length==0||_t(this.h)||Fa(this))};function Fa(g,A){var I;A?I=A.l:I=g.V++;const M=st(g.J);qe(M,"SID",g.M),qe(M,"RID",I),qe(M,"AID",g.K),ti(g,M),g.u&&g.o&&Ws(M,g.u,g.o),I=new Bn(g,g.j,I,g.D+1),g.u===null&&(I.J=g.o),A&&(g.i=A.G.concat(g.i)),A=Vr(g,I,1e3),I.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Qe(g.h,I),Qi(I,M,A)}function ti(g,A){g.H&&Te(g.H,function(I,M){qe(A,M,I)}),g.l&&Te({},function(I,M){qe(A,M,I)})}function Vr(g,A,I){I=Math.min(g.i.length,I);const M=g.l?p(g.l.Ka,g.l,g):null;e:{var q=g.i;let Le=-1;for(;;){const Pt=["count="+I];Le==-1?I>0?(Le=q[0].g,Pt.push("ofs="+Le)):Le=0:Pt.push("ofs="+Le);let lt=!0;for(let Wt=0;Wt<I;Wt++){var J=q[Wt].g;const Ir=q[Wt].map;if(J-=Le,J<0)Le=Math.max(0,q[Wt].g-100),lt=!1;else try{J="req"+J+"_"||"";try{var de=Ir instanceof Map?Ir:Object.entries(Ir);for(const[Xn,Tr]of de){let ri=Tr;x(Tr)&&(ri=en(Tr)),Pt.push(J+Xn+"="+encodeURIComponent(ri))}}catch(Xn){throw Pt.push(J+"type="+encodeURIComponent("_badmap")),Xn}}catch{M&&M(Ir)}}if(lt){de=Pt.join("&");break e}}de=void 0}return g=g.i.splice(0,I),A.G=g,de}function gc(g){if(!g.g&&!g.v){g.Y=1;var A=g.Da;ae||D(),te||(ae(),te=!0),b.add(A,g),g.A=0}}function ee(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=mn(p(g.Da,g),pc(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,Kt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=mn(p(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),To(this),Kt(this))};function ke(g){g.B!=null&&(f.clearTimeout(g.B),g.B=null)}function Kt(g){g.g=new Bn(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var A=st(g.na);qe(A,"RID","rpc"),qe(A,"SID",g.M),qe(A,"AID",g.K),qe(A,"CI",g.F?"0":"1"),!g.F&&g.ia&&qe(A,"TO",g.ia),qe(A,"TYPE","xmlhttp"),ti(g,A),g.u&&g.o&&Ws(A,g.u,g.o),g.O&&(g.g.H=g.O);var I=g.g;g=g.ba,I.M=1,I.A=_o(st(A)),I.u=null,I.R=!0,Us(I,g)}t.Va=function(){this.C!=null&&(this.C=null,To(this),ee(this),on(19))};function Ci(g){g.C!=null&&(f.clearTimeout(g.C),g.C=null)}function Va(g,A){var I=null;if(g.g==A){Ci(g),ke(g),g.g=null;var M=2}else if(Oa(g.h,A))I=A.G,Ke(g.h,A),M=1;else return;if(g.I!=0){if(A.o)if(M==1){I=A.u?A.u.length:0,A=Date.now()-A.F;var q=g.D;M=Yi(),ge(M,new Ma(M,I)),vo(g)}else gc(g);else if(q=A.m,q==3||q==0&&A.X>0||!(M==1&&ot(g,A)||M==2&&ee(g)))switch(I&&I.length>0&&(A=g.h,A.i=A.i.concat(I)),q){case 1:Ii(g,5);break;case 4:Ii(g,10);break;case 3:Ii(g,6);break;default:Ii(g,2)}}}function pc(g,A){let I=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(I*=2),I*A}function Ii(g,A){if(g.j.info("Error code "+A),A==2){var I=p(g.bb,g),M=g.Ua;const q=!M;M=new Ar(M||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Gn(M,"https"),_o(M),q?La(M.toString(),I):Dh(M.toString(),I)}else on(2);g.I=0,g.l&&g.l.pa(A),mc(g),dc(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function mc(g){if(g.I=0,g.ja=[],g.l){const A=Fe(g.h);(A.length!=0||g.i.length!=0)&&(V(g.ja,A),V(g.ja,g.i),g.h.i.length=0,P(g.i),g.i.length=0),g.l.oa()}}function So(g,A,I){var M=I instanceof Ar?st(I):new Ar(I);if(M.g!="")A&&(M.g=A+"."+M.g),zs(M,M.u);else{var q=f.location;M=q.protocol,A=A?A+"."+q.hostname:q.hostname,q=+q.port;const J=new Ar(null);M&&Gn(J,M),A&&(J.g=A),q&&zs(J,q),I&&(J.h=I),M=J}return I=g.G,A=g.wa,I&&A&&qe(M,I,A),qe(M,"VER",g.ka),ti(g,M),M}function Ut(g,A,I){if(A&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return A=g.Aa&&!g.ma?new It(new Cr({ab:I})):new It(g.ma),A.Fa(g.L),A}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function No(){}t=No.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function yt(){}yt.prototype.g=function(g,A){return new hn(g,A)};function hn(g,A){Gt.call(this),this.g=new Ba(A),this.l=g,this.h=A&&A.messageUrlParams||null,g=A&&A.messageHeaders||null,A&&A.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=A&&A.initMessageHeaders||null,A&&A.messageContentType&&(g?g["X-WebChannel-Content-Type"]=A.messageContentType:g={"X-WebChannel-Content-Type":A.messageContentType}),A&&A.sa&&(g?g["X-WebChannel-Client-Profile"]=A.sa:g={"X-WebChannel-Client-Profile":A.sa}),this.g.U=g,(g=A&&A.Qb)&&!U(g)&&(this.g.u=g),this.A=A&&A.supportsCrossDomainXhr||!1,this.v=A&&A.sendRawJson||!1,(A=A&&A.httpSessionIdParam)&&!U(A)&&(this.g.G=A,g=this.h,g!==null&&A in g&&(g=this.h,A in g&&delete g[A])),this.j=new Ce(this)}_(hn,Gt),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Io(this.g)},hn.prototype.o=function(g){var A=this.g;if(typeof g=="string"){var I={};I.__data__=g,g=I}else this.v&&(I={},I.__data__=en(g),g=I);A.i.push(new oe(A.Ya++,g)),A.I==3&&vo(A)},hn.prototype.N=function(){this.g.l=null,delete this.j,Io(this.g),delete this.g,hn.Z.N.call(this)};function ni(g){Mt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var A=g.__sm__;if(A){e:{for(const I in A){g=I;break e}g=void 0}(this.i=g)&&(g=this.i,A=A!==null&&g in A?A[g]:void 0),this.data=A}else this.data=g}_(ni,Mt);function at(){nt.call(this),this.status=1}_(at,nt);function Ce(g){this.g=g}_(Ce,No),Ce.prototype.ra=function(){ge(this.g,"a")},Ce.prototype.qa=function(g){ge(this.g,new ni(g))},Ce.prototype.pa=function(g){ge(this.g,new at)},Ce.prototype.oa=function(){ge(this.g,"b")},yt.prototype.createWebChannel=yt.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,Hy=function(){return new yt},zy=function(){return Yi()},jy=it,Ad={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},wr.NO_ERROR=0,wr.TIMEOUT=8,wr.HTTP_ERROR=6,nu=wr,wo.COMPLETE="complete",Uy=wo,Dt.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",Gt.prototype.listen=Gt.prototype.J,rl=Dt,It.prototype.listenOnce=It.prototype.K,It.prototype.getLastError=It.prototype.Ha,It.prototype.getLastErrorCode=It.prototype.ya,It.prototype.getStatus=It.prototype.ca,It.prototype.getResponseJson=It.prototype.La,It.prototype.getResponseText=It.prototype.la,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Fa,Vy=It}).apply(typeof Lc<"u"?Lc:typeof self<"u"?self:typeof window<"u"?window:{});const Kg="@firebase/firestore",qg="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ia="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=new My("@firebase/firestore");function Po(){return co.logLevel}function xe(t,...e){if(co.logLevel<=$e.DEBUG){const n=e.map(V1);co.debug(`Firestore (${Ia}): ${t}`,...n)}}function Ui(t,...e){if(co.logLevel<=$e.ERROR){const n=e.map(V1);co.error(`Firestore (${Ia}): ${t}`,...n)}}function ga(t,...e){if(co.logLevel<=$e.WARN){const n=e.map(V1);co.warn(`Firestore (${Ia}): ${t}`,...n)}}function V1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Gy(t,i,n)}function Gy(t,e,n){let i=`FIRESTORE (${Ia}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Ui(i),new Error(i)}function ct(t,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,t||Gy(e,o,i)}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Ca{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mn.UNAUTHENTICATED))}shutdown(){}}class a3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class l3{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let i=this.i;const o=m=>this.i!==i?(i=this.i,n(m)):Promise.resolve();let l=new _s;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new _s,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const m=l;e.enqueueRetryable(async()=>{await m.promise,await o(this.currentUser)})},x=m=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(m=>x(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?x(m):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new _s)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct(typeof i.accessToken=="string",31837,{l:i}),new Wy(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class c3{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u3{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new c3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,HC(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const i=l=>{l.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const f=l.token!==this.m;return this.m=l.token,xe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Zg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=f3(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<n&&(i+=e.charAt(o[l]%62))}return i}}function We(t,e){return t<e?-1:t>e?1:0}function _d(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const o=t.charAt(i),l=e.charAt(i);if(o!==l)return df(o)===df(l)?We(o,l):df(o)?1:-1}return We(t.length,e.length)}const d3=55296,g3=57343;function df(t){const e=t.charCodeAt(0);return e>=d3&&e<=g3}function pa(t,e,n){return t.length===e.length&&t.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="__name__";class ui{constructor(e,n,i){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Re(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ui.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ui?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const l=ui.compareSegments(e.get(o),n.get(o));if(l!==0)return l}return We(e.length,n.length)}static compareSegments(e,n){const i=ui.isNumericId(e),o=ui.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?ui.extractNumericId(e).compare(ui.extractNumericId(n)):_d(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return As.fromString(e.substring(4,e.length-2))}}class Et extends ui{construct(e,n,i){return new Et(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new Et(n)}static emptyPath(){return new Et([])}}const p3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends ui{construct(e,n,i){return new _n(e,n,i)}static isValidIdentifier(e){return p3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$g}static keyField(){return new _n([$g])}static fromServerFormat(e){const n=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ye(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let f=!1;for(;o<e.length;){const x=e[o];if(x==="\\"){if(o+1===e.length)throw new ye(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ye(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,o+=2}else x==="`"?(f=!f,o++):x!=="."||f?(i+=x,o++):(l(),o++)}if(l(),f)throw new ye(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(n)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Et.fromString(e))}static fromName(e){return new ve(Et.fromString(e).popFirst(5))}static empty(){return new ve(Et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Et.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Et(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t,e,n){if(!n)throw new ye(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function m3(t,e,n,i){if(e===!0&&i===!0)throw new ye(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jg(t){if(!ve.isDocumentKey(t))throw new ye(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ep(t){if(ve.isDocumentKey(t))throw new ye(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xy(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function dh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function uo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=dh(t);throw new ye(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Zl(t,e){if(!Xy(t))throw new ye(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const f=t[i];if(o&&typeof f!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&f!==l.value){n=`Expected '${i}' field to equal '${l.value}'`;break}}if(n)throw new ye(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=-62135596800,np=1e6;class St{static now(){return St.fromMillis(Date.now())}static fromDate(e){return St.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*np);return new St(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tp)throw new ye(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/np}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:St._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zl(e,St._jsonSchema))return new St(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:Jt("string",St._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new St(0,0))}static max(){return new Oe(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;function y3(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=Oe.fromTimestamp(i===1e9?new St(n+1,0):new St(n,i));return new vs(o,ve.empty(),e)}function x3(t){return new vs(t.readTime,t.key,Ul)}class vs{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new vs(Oe.min(),ve.empty(),Ul)}static max(){return new vs(Oe.max(),ve.empty(),Ul)}}function w3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==E3)throw t;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,i)=>{n(e)})}static reject(e){return new se((n,i)=>{i(e)})}static waitFor(e){return new se((n,i)=>{let o=0,l=0,f=!1;e.forEach(x=>{++o,x.next(()=>{++l,f&&l===o&&n()},m=>i(m))}),f=!0,l===o&&n()})}static or(e){let n=se.resolve(!1);for(const i of e)n=n.next(o=>o?se.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,l)=>{i.push(n.call(this,o,l))}),this.waitFor(i)}static mapArray(e,n){return new se((i,o)=>{const l=e.length,f=new Array(l);let x=0;for(let m=0;m<l;m++){const p=m;n(e[p]).next(E=>{f[p]=E,++x,x===l&&i(f)},E=>o(E))}})}static doWhile(e,n){return new se((i,o)=>{const l=()=>{e()===!0?n().next(()=>{l()},o):i()};l()})}}function _3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function va(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}gh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=-1;function ph(t){return t==null}function Lu(t){return t===0&&1/t==-1/0}function C3(t){return typeof t=="number"&&Number.isInteger(t)&&!Lu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="";function I3(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rp(e)),e=T3(t.get(n),e);return rp(e)}function T3(t,e){let n=e;const i=t.length;for(let o=0;o<i;o++){const l=t.charAt(o);switch(l){case"\0":n+="";break;case Qy:n+="";break;default:n+=l}}return n}function rp(t){return t+Qy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ky(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){this.comparator=e,this.root=n||An.EMPTY}insert(e,n){return new Ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,An.BLACK,null,null))}remove(e){return new Ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,An.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class An{constructor(e,n,i,o,l){this.key=e,this.value=n,this.color=i??An.RED,this.left=o??An.EMPTY,this.right=l??An.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,l){return new An(e??this.key,n??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,i),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return An.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return An.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,An.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,An.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}An.EMPTY=null,An.RED=!0,An.BLACK=!1;An.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,i,o,l){return this}insert(e,n,i){return new An(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.comparator=e,this.data=new Ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new sp(this.data.getIterator())}getIteratorFrom(e){return new sp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof sn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new sn(this.comparator);return n.data=e,n}}class sp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new hr([])}unionWith(e){let n=new sn(_n.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pa(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new qy("Invalid base64 string: "+l):l}}(e);return new Tn(n)}static fromUint8Array(e){const n=function(o){let l="";for(let f=0;f<o.length;++f)l+=String.fromCharCode(o[f]);return l}(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const v3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(t){if(ct(!!t,39018),typeof t=="string"){let e=0;const n=v3.exec(t);if(ct(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Yt(t.seconds),nanos:Yt(t.nanos)}}function Yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ns(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="server_timestamp",$y="__type__",Jy="__previous_value__",ex="__local_write_time__";function z1(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[$y])==null?void 0:i.stringValue)===Zy}function mh(t){const e=t.mapValue.fields[Jy];return z1(e)?mh(e):e}function jl(t){const e=Ss(t.mapValue.fields[ex].timestampValue);return new St(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,n,i,o,l,f,x,m,p,E){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=x,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=E}}const Bu="(default)";class zl{constructor(e,n){this.projectId=e,this.database=n||Bu}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===Bu}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="__type__",nx="__max__",Fc={mapValue:{fields:{__type__:{stringValue:nx}}}},rx="__vector__",Fu="value";function Rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?z1(t)?4:R3(t)?9007199254740991:N3(t)?10:11:Re(28295,{value:t})}function xi(t,e){if(t===e)return!0;const n=Rs(t);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jl(t).isEqual(jl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const f=Ss(o.timestampValue),x=Ss(l.timestampValue);return f.seconds===x.seconds&&f.nanos===x.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,l){return Ns(o.bytesValue).isEqual(Ns(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,l){return Yt(o.geoPointValue.latitude)===Yt(l.geoPointValue.latitude)&&Yt(o.geoPointValue.longitude)===Yt(l.geoPointValue.longitude)}(t,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Yt(o.integerValue)===Yt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const f=Yt(o.doubleValue),x=Yt(l.doubleValue);return f===x?Lu(f)===Lu(x):isNaN(f)&&isNaN(x)}return!1}(t,e);case 9:return pa(t.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:case 11:return function(o,l){const f=o.mapValue.fields||{},x=l.mapValue.fields||{};if(ip(f)!==ip(x))return!1;for(const m in f)if(f.hasOwnProperty(m)&&(x[m]===void 0||!xi(f[m],x[m])))return!1;return!0}(t,e);default:return Re(52216,{left:t})}}function Hl(t,e){return(t.values||[]).find(n=>xi(n,e))!==void 0}function ma(t,e){if(t===e)return 0;const n=Rs(t),i=Rs(e);if(n!==i)return We(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return function(l,f){const x=Yt(l.integerValue||l.doubleValue),m=Yt(f.integerValue||f.doubleValue);return x<m?-1:x>m?1:x===m?0:isNaN(x)?isNaN(m)?0:-1:1}(t,e);case 3:return op(t.timestampValue,e.timestampValue);case 4:return op(jl(t),jl(e));case 5:return _d(t.stringValue,e.stringValue);case 6:return function(l,f){const x=Ns(l),m=Ns(f);return x.compareTo(m)}(t.bytesValue,e.bytesValue);case 7:return function(l,f){const x=l.split("/"),m=f.split("/");for(let p=0;p<x.length&&p<m.length;p++){const E=We(x[p],m[p]);if(E!==0)return E}return We(x.length,m.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,f){const x=We(Yt(l.latitude),Yt(f.latitude));return x!==0?x:We(Yt(l.longitude),Yt(f.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ap(t.arrayValue,e.arrayValue);case 10:return function(l,f){var S,P,V,G;const x=l.fields||{},m=f.fields||{},p=(S=x[Fu])==null?void 0:S.arrayValue,E=(P=m[Fu])==null?void 0:P.arrayValue,_=We(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,((G=E==null?void 0:E.values)==null?void 0:G.length)||0);return _!==0?_:ap(p,E)}(t.mapValue,e.mapValue);case 11:return function(l,f){if(l===Fc.mapValue&&f===Fc.mapValue)return 0;if(l===Fc.mapValue)return 1;if(f===Fc.mapValue)return-1;const x=l.fields||{},m=Object.keys(x),p=f.fields||{},E=Object.keys(p);m.sort(),E.sort();for(let _=0;_<m.length&&_<E.length;++_){const S=_d(m[_],E[_]);if(S!==0)return S;const P=ma(x[m[_]],p[E[_]]);if(P!==0)return P}return We(m.length,E.length)}(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function op(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=Ss(t),i=Ss(e),o=We(n.seconds,i.seconds);return o!==0?o:We(n.nanos,i.nanos)}function ap(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const l=ma(n[o],i[o]);if(l)return l}return We(n.length,i.length)}function ya(t){return Cd(t)}function Cd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ss(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ns(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",o=!0;for(const l of n.values||[])o?o=!1:i+=",",i+=Cd(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const f of i)l?l=!1:o+=",",o+=`${f}:${Cd(n.fields[f])}`;return o+"}"}(t.mapValue):Re(61005,{value:t})}function ru(t){switch(Rs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mh(t);return e?16+ru(e):16;case 5:return 2*t.stringValue.length;case 6:return Ns(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+ru(l),0)}(t.arrayValue);case 10:case 11:return function(i){let o=0;return Ls(i.fields,(l,f)=>{o+=l.length+ru(f)}),o}(t.mapValue);default:throw Re(13486,{value:t})}}function lp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Id(t){return!!t&&"integerValue"in t}function H1(t){return!!t&&"arrayValue"in t}function cp(t){return!!t&&"nullValue"in t}function up(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function iu(t){return!!t&&"mapValue"in t}function N3(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tx])==null?void 0:i.stringValue)===rx}function yl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ls(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=yl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yl(t.arrayValue.values[n]);return e}return{...t}}function R3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!iu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yl(n)}setAll(e){let n=_n.emptyPath(),i={},o=[];e.forEach((f,x)=>{if(!n.isImmediateParentOf(x)){const m=this.getFieldsMap(n);this.applyChanges(m,i,o),i={},o=[],n=x.popLast()}f?i[x.lastSegment()]=yl(f):o.push(x.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,o)}delete(e){const n=this.field(e.popLast());iu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];iu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){Ls(n,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new $n(yl(this.value))}}function ix(t){const e=[];return Ls(t.fields,(n,i)=>{const o=new _n([n]);if(iu(i)){const l=ix(i.mapValue).fields;if(l.length===0)e.push(o);else for(const f of l)e.push(o.child(f))}else e.push(o)}),new hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,i,o,l,f,x){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=l,this.data=f,this.documentState=x}static newInvalidDocument(e){return new Pn(e,0,Oe.min(),Oe.min(),Oe.min(),$n.empty(),0)}static newFoundDocument(e,n,i,o){return new Pn(e,1,n,Oe.min(),i,o,0)}static newNoDocument(e,n){return new Pn(e,2,n,Oe.min(),Oe.min(),$n.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Oe.min(),Oe.min(),$n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.position=e,this.inclusive=n}}function hp(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const l=e[o],f=t.position[o];if(l.field.isKeyField()?i=ve.comparator(ve.fromName(f.referenceValue),n.key):i=ma(f,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function fp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n="asc"){this.field=e,this.dir=n}}function b3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{}class $t extends sx{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new M3(e,n,i):n==="array-contains"?new k3(e,i):n==="in"?new L3(e,i):n==="not-in"?new B3(e,i):n==="array-contains-any"?new F3(e,i):new $t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new O3(e,i):new P3(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ma(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(ma(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qr extends sx{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new qr(e,n)}matches(e){return ox(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ox(t){return t.op==="and"}function ax(t){return D3(t)&&ox(t)}function D3(t){for(const e of t.filters)if(e instanceof qr)return!1;return!0}function Td(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+ya(t.value);if(ax(t))return t.filters.map(e=>Td(e)).join(",");{const e=t.filters.map(n=>Td(n)).join(",");return`${t.op}(${e})`}}function lx(t,e){return t instanceof $t?function(i,o){return o instanceof $t&&i.op===o.op&&i.field.isEqual(o.field)&&xi(i.value,o.value)}(t,e):t instanceof qr?function(i,o){return o instanceof qr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,f,x)=>l&&lx(f,o.filters[x]),!0):!1}(t,e):void Re(19439)}function cx(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${ya(n.value)}`}(t):t instanceof qr?function(n){return n.op.toString()+" {"+n.getFilters().map(cx).join(" ,")+"}"}(t):"Filter"}class M3 extends $t{constructor(e,n,i){super(e,n,i),this.key=ve.fromName(i.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class O3 extends $t{constructor(e,n){super(e,"in",n),this.keys=ux("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class P3 extends $t{constructor(e,n){super(e,"not-in",n),this.keys=ux("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ux(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ve.fromName(i.referenceValue))}class k3 extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return H1(n)&&Hl(n.arrayValue,this.value)}}class L3 extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hl(this.value.arrayValue,n)}}class B3 extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hl(this.value.arrayValue,n)}}class F3 extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!H1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Hl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n=null,i=[],o=[],l=null,f=null,x=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=f,this.endAt=x,this.Te=null}}function dp(t,e=null,n=[],i=[],o=null,l=null,f=null){return new V3(t,e,n,i,o,l,f)}function G1(t){const e=Pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Td(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),ph(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ya(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ya(i)).join(",")),e.Te=n}return e.Te}function W1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!b3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fp(t.startAt,e.startAt)&&fp(t.endAt,e.endAt)}function vd(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n=null,i=[],o=[],l=null,f="F",x=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=f,this.startAt=x,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function U3(t,e,n,i,o,l,f,x){return new $l(t,e,n,i,o,l,f,x)}function hx(t){return new $l(t)}function gp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fx(t){return t.collectionGroup!==null}function xl(t){const e=Pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let x=new sn(_n.comparator);return f.filters.forEach(m=>{m.getFlattenedFilters().forEach(p=>{p.isInequality()&&(x=x.add(p.field))})}),x})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Uu(l,i))}),n.has(_n.keyField().canonicalString())||e.Ie.push(new Uu(_n.keyField(),i))}return e.Ie}function gi(t){const e=Pe(t);return e.Ee||(e.Ee=j3(e,xl(t))),e.Ee}function j3(t,e){if(t.limitType==="F")return dp(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Uu(o.field,l)});const n=t.endAt?new Vu(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Vu(t.startAt.position,t.startAt.inclusive):null;return dp(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Sd(t,e){const n=t.filters.concat([e]);return new $l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Nd(t,e,n){return new $l(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yh(t,e){return W1(gi(t),gi(e))&&t.limitType===e.limitType}function dx(t){return`${G1(gi(t))}|lt:${t.limitType}`}function ko(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>cx(o)).join(", ")}]`),ph(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>ya(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>ya(o)).join(",")),`Target(${i})`}(gi(t))}; limitType=${t.limitType})`}function xh(t,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ve.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(t,e)&&function(i,o){for(const l of xl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(t,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(t,e)&&function(i,o){return!(i.startAt&&!function(f,x,m){const p=hp(f,x,m);return f.inclusive?p<=0:p<0}(i.startAt,xl(i),o)||i.endAt&&!function(f,x,m){const p=hp(f,x,m);return f.inclusive?p>=0:p>0}(i.endAt,xl(i),o))}(t,e)}function z3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gx(t){return(e,n)=>{let i=!1;for(const o of xl(t)){const l=H3(o,e,n);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function H3(t,e,n){const i=t.field.isKeyField()?ve.comparator(e.key,n.key):function(l,f,x){const m=f.data.field(l),p=x.data.field(l);return m!==null&&p!==null?ma(m,p):Re(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,(n,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return Ky(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=new Ft(ve.comparator);function ji(){return G3}const px=new Ft(ve.comparator);function il(...t){let e=px;for(const n of t)e=e.insert(n.key,n);return e}function mx(t){let e=px;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function to(){return wl()}function yx(){return wl()}function wl(){return new mo(t=>t.toString(),(t,e)=>t.isEqual(e))}const W3=new Ft(ve.comparator),Y3=new sn(ve.comparator);function Ye(...t){let e=Y3;for(const n of t)e=e.add(n);return e}const X3=new sn(We);function Q3(){return X3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lu(e)?"-0":e}}function xx(t){return{integerValue:""+t}}function K3(t,e){return C3(e)?xx(e):Y1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this._=void 0}}function q3(t,e,n){return t instanceof ju?function(o,l){const f={fields:{[$y]:{stringValue:Zy},[ex]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&z1(l)&&(l=mh(l)),l&&(f.fields[Jy]=l),{mapValue:f}}(n,e):t instanceof Gl?Ex(t,e):t instanceof Wl?Ax(t,e):function(o,l){const f=wx(o,l),x=pp(f)+pp(o.Ae);return Id(f)&&Id(o.Ae)?xx(x):Y1(o.serializer,x)}(t,e)}function Z3(t,e,n){return t instanceof Gl?Ex(t,e):t instanceof Wl?Ax(t,e):n}function wx(t,e){return t instanceof zu?function(i){return Id(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class ju extends wh{}class Gl extends wh{constructor(e){super(),this.elements=e}}function Ex(t,e){const n=_x(e);for(const i of t.elements)n.some(o=>xi(o,i))||n.push(i);return{arrayValue:{values:n}}}class Wl extends wh{constructor(e){super(),this.elements=e}}function Ax(t,e){let n=_x(e);for(const i of t.elements)n=n.filter(o=>!xi(o,i));return{arrayValue:{values:n}}}class zu extends wh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function pp(t){return Yt(t.integerValue||t.doubleValue)}function _x(t){return H1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $3(t,e){return t.field.isEqual(e.field)&&function(i,o){return i instanceof Gl&&o instanceof Gl||i instanceof Wl&&o instanceof Wl?pa(i.elements,o.elements,xi):i instanceof zu&&o instanceof zu?xi(i.Ae,o.Ae):i instanceof ju&&o instanceof ju}(t.transform,e.transform)}class J3{constructor(e,n){this.version=e,this.transformResults=n}}class Qr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qr}static exists(e){return new Qr(void 0,e)}static updateTime(e){return new Qr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function su(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Eh{}function Cx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new X1(t.key,Qr.none()):new Jl(t.key,t.data,Qr.none());{const n=t.data,i=$n.empty();let o=new sn(_n.comparator);for(let l of e.fields)if(!o.has(l)){let f=n.field(l);f===null&&l.length>1&&(l=l.popLast(),f=n.field(l)),f===null?i.delete(l):i.set(l,f),o=o.add(l)}return new Bs(t.key,i,new hr(o.toArray()),Qr.none())}}function eI(t,e,n){t instanceof Jl?function(o,l,f){const x=o.value.clone(),m=yp(o.fieldTransforms,l,f.transformResults);x.setAll(m),l.convertToFoundDocument(f.version,x).setHasCommittedMutations()}(t,e,n):t instanceof Bs?function(o,l,f){if(!su(o.precondition,l))return void l.convertToUnknownDocument(f.version);const x=yp(o.fieldTransforms,l,f.transformResults),m=l.data;m.setAll(Ix(o)),m.setAll(x),l.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(t,e,n):function(o,l,f){l.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function El(t,e,n,i){return t instanceof Jl?function(l,f,x,m){if(!su(l.precondition,f))return x;const p=l.value.clone(),E=xp(l.fieldTransforms,m,f);return p.setAll(E),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof Bs?function(l,f,x,m){if(!su(l.precondition,f))return x;const p=xp(l.fieldTransforms,m,f),E=f.data;return E.setAll(Ix(l)),E.setAll(p),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),x===null?null:x.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(_=>_.field))}(t,e,n,i):function(l,f,x){return su(l.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):x}(t,e,n)}function tI(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),l=wx(i.transform,o||null);l!=null&&(n===null&&(n=$n.empty()),n.set(i.field,l))}return n||null}function mp(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&pa(i,o,(l,f)=>$3(l,f))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Jl extends Eh{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Bs extends Eh{constructor(e,n,i,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Ix(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function yp(t,e,n){const i=new Map;ct(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){const l=t[o],f=l.transform,x=e.data.field(l.field);i.set(l.field,Z3(f,x,n[o]))}return i}function xp(t,e,n){const i=new Map;for(const o of t){const l=o.transform,f=n.data.field(o.field);i.set(o.field,q3(l,f,e))}return i}class X1 extends Eh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nI extends Eh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&eI(l,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=El(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=El(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=yx();return this.mutations.forEach(o=>{const l=e.get(o.key),f=l.overlayedDocument;let x=this.applyToLocalView(f,l.mutatedFields);x=n.has(o.key)?null:x;const m=Cx(f,x);m!==null&&i.set(o.key,m),f.isValidDocument()||f.convertToNoDocument(Oe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ye())}isEqual(e){return this.batchId===e.batchId&&pa(this.mutations,e.mutations,(n,i)=>mp(n,i))&&pa(this.baseMutations,e.baseMutations,(n,i)=>mp(n,i))}}class Q1{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){ct(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=function(){return W3}();const l=e.mutations;for(let f=0;f<l.length;f++)o=o.insert(l[f].key,i[f].version);return new Q1(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Ze;function oI(t){switch(t){case ie.OK:return Re(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function Tx(t){if(t===void 0)return Ui("GRPC error has no .code"),ie.UNKNOWN;switch(t){case qt.OK:return ie.OK;case qt.CANCELLED:return ie.CANCELLED;case qt.UNKNOWN:return ie.UNKNOWN;case qt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case qt.INTERNAL:return ie.INTERNAL;case qt.UNAVAILABLE:return ie.UNAVAILABLE;case qt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case qt.NOT_FOUND:return ie.NOT_FOUND;case qt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case qt.ABORTED:return ie.ABORTED;case qt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case qt.DATA_LOSS:return ie.DATA_LOSS;default:return Re(39323,{code:t})}}(Ze=qt||(qt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new As([4294967295,4294967295],0);function wp(t){const e=aI().encode(t),n=new Fy;return n.update(e),new Uint8Array(n.digest())}function Ep(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new As([n,i],0),new As([o,l],0)]}class K1{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new sl(`Invalid padding: ${n}`);if(i<0)throw new sl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new sl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new sl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=As.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(As.fromNumber(i)));return o.compare(lI)===1&&(o=new As([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=wp(e),[i,o]=Ep(n);for(let l=0;l<this.hashCount;l++){const f=this.ye(i,o,l);if(!this.we(f))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),f=new K1(l,o,n);return i.forEach(x=>f.insert(x)),f}insert(e){if(this.ge===0)return;const n=wp(e),[i,o]=Ep(n);for(let l=0;l<this.hashCount;l++){const f=this.ye(i,o,l);this.Se(f)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class sl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,i,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,ec.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ah(Oe.min(),o,new Ft(We),ji(),Ye())}}class ec{constructor(e,n,i,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new ec(i,n,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class vx{constructor(e,n){this.targetId=e,this.Ce=n}}class Sx{constructor(e,n,i=Tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class Ap{constructor(){this.ve=0,this.Fe=_p(),this.Me=Tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ye(),n=Ye(),i=Ye();return this.Fe.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Re(38017,{changeType:l})}}),new ec(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=_p()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ji(),this.Je=Vc(),this.He=Vc(),this.Ye=new Ft(We)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const l=o.target;if(vd(l))if(i===0){const f=new ve(l.path);this.et(n,f,Pn.newNoDocument(f,Oe.min()))}else ct(i===1,20013,{expectedCount:i});else{const f=this._t(n);if(f!==i){const x=this.ut(e),m=x?this.ct(x,e,f):1;if(m!==0){this.it(n);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=n;let f,x;try{f=Ns(i).toUint8Array()}catch(m){if(m instanceof qy)return ga("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{x=new K1(f,o,l)}catch(m){return ga(m instanceof sl?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return x.ge===0?null:x}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach(l=>{const f=this.Ge.ht(),x=`projects/${f.projectId}/databases/${f.database}/documents/${l.path.canonicalString()}`;e.mightContain(x)||(this.et(n,l,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((l,f)=>{const x=this.ot(f);if(x){if(l.current&&vd(x.target)){const m=new ve(x.target.path);this.It(m).has(f)||this.Et(f,m)||this.et(f,m,Pn.newNoDocument(m,e))}l.Be&&(n.set(f,l.ke()),l.qe())}});let i=Ye();this.He.forEach((l,f)=>{let x=!0;f.forEachWhile(m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(x=!1,!1)}),x&&(i=i.add(l))}),this.je.forEach((l,f)=>f.setReadTime(e));const o=new Ah(e,n,this.Ye,this.je,i);return this.je=ji(),this.Je=Vc(),this.He=Vc(),this.Ye=new Ft(We),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Ap,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new sn(We),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new sn(We),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||xe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ap),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Vc(){return new Ft(ve.comparator)}function _p(){return new Ft(ve.comparator)}const uI=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),hI=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),fI=(()=>({and:"AND",or:"OR"}))();class dI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Rd(t,e){return t.useProto3Json||ph(e)?e:{value:e}}function Hu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gI(t,e){return Hu(t,e.toTimestamp())}function pi(t){return ct(!!t,49232),Oe.fromTimestamp(function(n){const i=Ss(n);return new St(i.seconds,i.nanos)}(t))}function q1(t,e){return bd(t,e).canonicalString()}function bd(t,e){const n=function(o){return new Et(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Rx(t){const e=Et.fromString(t);return ct(Px(e),10190,{key:e.toString()}),e}function Dd(t,e){return q1(t.databaseId,e.path)}function gf(t,e){const n=Rx(e);if(n.get(1)!==t.databaseId.projectId)throw new ye(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ye(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(Dx(n))}function bx(t,e){return q1(t.databaseId,e)}function pI(t){const e=Rx(t);return e.length===4?Et.emptyPath():Dx(e)}function Md(t){return new Et(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Dx(t){return ct(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Cp(t,e,n){return{name:Dd(t,e),fields:n.value.mapValue.fields}}function mI(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Re(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(p,E){return p.useProto3Json?(ct(E===void 0||typeof E=="string",58123),Tn.fromBase64String(E||"")):(ct(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Tn.fromUint8Array(E||new Uint8Array))}(t,e.targetChange.resumeToken),f=e.targetChange.cause,x=f&&function(p){const E=p.code===void 0?ie.UNKNOWN:Tx(p.code);return new ye(E,p.message||"")}(f);n=new Sx(i,o,l,x||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=gf(t,i.document.name),l=pi(i.document.updateTime),f=i.document.createTime?pi(i.document.createTime):Oe.min(),x=new $n({mapValue:{fields:i.document.fields}}),m=Pn.newFoundDocument(o,l,f,x),p=i.targetIds||[],E=i.removedTargetIds||[];n=new ou(p,E,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=gf(t,i.document),l=i.readTime?pi(i.readTime):Oe.min(),f=Pn.newNoDocument(o,l),x=i.removedTargetIds||[];n=new ou([],x,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=gf(t,i.document),l=i.removedTargetIds||[];n=new ou([],l,o,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,f=new sI(o,l),x=i.targetId;n=new vx(x,f)}}return n}function yI(t,e){let n;if(e instanceof Jl)n={update:Cp(t,e.key,e.value)};else if(e instanceof X1)n={delete:Dd(t,e.key)};else if(e instanceof Bs)n={update:Cp(t,e.key,e.data),updateMask:vI(e.fieldMask)};else{if(!(e instanceof nI))return Re(16599,{Vt:e.type});n={verify:Dd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(l,f){const x=f.transform;if(x instanceof ju)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(x instanceof Gl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:x.elements}};if(x instanceof Wl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:x.elements}};if(x instanceof zu)return{fieldPath:f.field.canonicalString(),increment:x.Ae};throw Re(20930,{transform:f.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:gI(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re(27497)}(t,e.precondition)),n}function xI(t,e){return t&&t.length>0?(ct(e!==void 0,14353),t.map(n=>function(o,l){let f=o.updateTime?pi(o.updateTime):pi(l);return f.isEqual(Oe.min())&&(f=pi(l)),new J3(f,o.transformResults||[])}(n,e))):[]}function wI(t,e){return{documents:[bx(t,e.path)]}}function EI(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=bx(t,o);const l=function(p){if(p.length!==0)return Ox(qr.create(p,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const f=function(p){if(p.length!==0)return p.map(E=>function(S){return{field:Lo(S.field),direction:CI(S.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const x=Rd(t,e.limit);return x!==null&&(n.structuredQuery.limit=x),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:o}}function AI(t){let e=pI(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){ct(i===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];n.where&&(l=function(_){const S=Mx(_);return S instanceof qr&&ax(S)?S.getFilters():[S]}(n.where));let f=[];n.orderBy&&(f=function(_){return _.map(S=>function(V){return new Uu(Bo(V.field),function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(S))}(n.orderBy));let x=null;n.limit&&(x=function(_){let S;return S=typeof _=="object"?_.value:_,ph(S)?null:S}(n.limit));let m=null;n.startAt&&(m=function(_){const S=!!_.before,P=_.values||[];return new Vu(P,S)}(n.startAt));let p=null;return n.endAt&&(p=function(_){const S=!_.before,P=_.values||[];return new Vu(P,S)}(n.endAt)),U3(e,o,f,l,x,"F",m,p)}function _I(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Mx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Bo(n.unaryFilter.field);return $t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Bo(n.unaryFilter.field);return $t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Bo(n.unaryFilter.field);return $t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Bo(n.unaryFilter.field);return $t.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}}(t):t.fieldFilter!==void 0?function(n){return $t.create(Bo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qr.create(n.compositeFilter.filters.map(i=>Mx(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}}(n.compositeFilter.op))}(t):Re(30097,{filter:t})}function CI(t){return uI[t]}function II(t){return hI[t]}function TI(t){return fI[t]}function Lo(t){return{fieldPath:t.canonicalString()}}function Bo(t){return _n.fromServerFormat(t.fieldPath)}function Ox(t){return t instanceof $t?function(n){if(n.op==="=="){if(up(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(cp(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(up(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(cp(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:II(n.op),value:n.value}}}(t):t instanceof qr?function(n){const i=n.getFilters().map(o=>Ox(o));return i.length===1?i[0]:{compositeFilter:{op:TI(n.op),filters:i}}}(t):Re(54877,{filter:t})}function vI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Px(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,i,o,l=Oe.min(),f=Oe.min(),x=Tn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=x,this.expectedCount=m}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.yt=e}}function NI(t){const e=AI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.Cn=new bI}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(vs.min())}updateCollectionGroup(e,n,i){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class bI{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new sn(Et.comparator),l=!o.has(i);return this.index[n]=o.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new sn(Et.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kx=41943040;class qn{static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(kx,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xa(0)}static cr(){return new xa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="LruGarbageCollector",DI=1048576;function vp([t,e],[n,i]){const o=We(t,n);return o===0?We(e,i):o}class MI{constructor(e){this.Ir=e,this.buffer=new sn(vp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();vp(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OI{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(Tp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){va(n)?xe(Tp,"Ignoring IndexedDB error during garbage collection: ",n):await Ta(n)}await this.Vr(3e5)})}}class PI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return se.resolve(gh.ce);const i=new MI(n);return this.mr.forEachTarget(e,o=>i.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>i.Ar(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Ip)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ip):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,l,f,x,m,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),o=this.params.maximumSequenceNumbersToCollect):o=_,f=Date.now(),this.nthSequenceNumber(e,o))).next(_=>(i=_,x=Date.now(),this.removeTargets(e,i,n))).next(_=>(l=_,m=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(p=Date.now(),Po()<=$e.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(x-f)+`ms
	Removed ${l} targets in `+(m-x)+`ms
	Removed ${_} documents in `+(p-m)+`ms
Total Duration: ${p-E}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:_})))}}function kI(t,e){return new PI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.changes=new mo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?se.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&El(i.mutation,o,hr.empty(),St.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ye()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ye()){const o=to();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(l=>{let f=il();return l.forEach((x,m)=>{f=f.insert(x,m.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const i=to();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ye()))}populateOverlays(e,n,i){const o=[];return i.forEach(l=>{n.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((f,x)=>{n.set(f,x)})})}computeViews(e,n,i,o){let l=ji();const f=wl(),x=function(){return wl()}();return n.forEach((m,p)=>{const E=i.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Bs)?l=l.insert(p.key,p):E!==void 0?(f.set(p.key,E.mutation.getFieldMask()),El(E.mutation,p,E.mutation.getFieldMask(),St.now())):f.set(p.key,hr.empty())}),this.recalculateAndSaveOverlays(e,l).next(m=>(m.forEach((p,E)=>f.set(p,E)),n.forEach((p,E)=>x.set(p,new BI(E,f.get(p)??null))),x))}recalculateAndSaveOverlays(e,n){const i=wl();let o=new Ft((f,x)=>f-x),l=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const x of f)x.keys().forEach(m=>{const p=n.get(m);if(p===null)return;let E=i.get(m)||hr.empty();E=x.applyToLocalView(p,E),i.set(m,E);const _=(o.get(x.batchId)||Ye()).add(m);o=o.insert(x.batchId,_)})}).next(()=>{const f=[],x=o.getReverseIterator();for(;x.hasNext();){const m=x.getNext(),p=m.key,E=m.value,_=yx();E.forEach(S=>{if(!l.has(S)){const P=Cx(n.get(S),i.get(S));P!==null&&_.set(S,P),l=l.add(S)}}),f.push(this.documentOverlayCache.saveOverlays(e,p,_))}return se.waitFor(f)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(f){return ve.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):fx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(l=>{const f=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-l.size):se.resolve(to());let x=Ul,m=l;return f.next(p=>se.forEach(p,(E,_)=>(x<_.largestBatchId&&(x=_.largestBatchId),l.get(E)?se.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{m=m.insert(E,S)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,m,p,Ye())).next(E=>({batchId:x,changes:mx(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(i=>{let o=il();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const l=n.collectionGroup;let f=il();return this.indexManager.getCollectionParents(e,l).next(x=>se.forEach(x,m=>{const p=function(_,S){return new $l(S,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,o).next(E=>{E.forEach((_,S)=>{f=f.insert(_,S)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(f=>(l=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,o))).next(f=>{l.forEach((m,p)=>{const E=p.getKey();f.get(E)===null&&(f=f.insert(E,Pn.newInvalidDocument(E)))});let x=il();return f.forEach((m,p)=>{const E=l.get(m);E!==void 0&&El(E.mutation,p,hr.empty(),St.now()),xh(n,p)&&(x=x.insert(m,p))}),x})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:pi(o.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:NI(o.bundledQuery),readTime:pi(o.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.overlays=new Ft(ve.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const i=to();return se.forEach(n,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,l)=>{this.St(e,n,l)}),se.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,n,i){const o=to(),l=n.length+1,f=new ve(n.child("")),x=this.overlays.getIteratorFrom(f);for(;x.hasNext();){const m=x.getNext().value,p=m.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&o.set(m.getKey(),m)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let l=new Ft((p,E)=>p-E);const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let E=l.get(p.largestBatchId);E===null&&(E=to(),l=l.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const x=to(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((p,E)=>x.set(p,E)),!(x.size()>=o)););return se.resolve(x)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new iI(n,i));let l=this.qr.get(n);l===void 0&&(l=Ye(),this.qr.set(n,l)),this.qr.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(){this.Qr=new sn(fn.$r),this.Ur=new sn(fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new fn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new fn(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ve(new Et([])),i=new fn(n,e),o=new fn(n,e+1),l=[];return this.Ur.forEachInRange([i,o],f=>{this.Gr(f),l.push(f.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ve(new Et([])),i=new fn(n,e),o=new fn(n,e+1);let l=Ye();return this.Ur.forEachInRange([i,o],f=>{l=l.add(f.key)}),l}containsKey(e){const n=new fn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class fn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ve.comparator(e.key,n.key)||We(e.Yr,n.Yr)}static Kr(e,n){return We(e.Yr,n.Yr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new sn(fn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new rI(l,n,i,o);this.mutationQueue.push(f);for(const x of o)this.Zr=this.Zr.add(new fn(x.key,l)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return se.resolve(f)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?j1:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new fn(n,0),o=new fn(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],f=>{const x=this.Xr(f.Yr);l.push(x)}),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new sn(We);return n.forEach(o=>{const l=new fn(o,0),f=new fn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,f],x=>{i=i.add(x.Yr)})}),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let l=i;ve.isDocumentKey(l)||(l=l.child(""));const f=new fn(new ve(l),0);let x=new sn(We);return this.Zr.forEachWhile(m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(x=x.add(m.Yr)),!0)},f),se.resolve(this.ti(x))}ti(e){const n=[];return e.forEach(i=>{const o=this.Xr(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(n.mutations,o=>{const l=new fn(o.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new fn(n,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.ri=e,this.docs=function(){return new Ft(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),l=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:f}),this.size+=f-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return se.resolve(i?i.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let i=ji();return n.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Pn.newInvalidDocument(o))}),se.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let l=ji();const f=n.path,x=new ve(f.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(x);for(;m.hasNext();){const{key:p,value:{document:E}}=m.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||w3(x3(E),i)<=0||(o.has(E.key)||xh(n,E))&&(l=l.insert(E.key,E.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,n,i,o){Re(9500)}ii(e,n){return se.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new GI(this)}getSize(e){return se.resolve(this.size)}}class GI extends LI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)}),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.persistence=e,this.si=new mo(n=>G1(n),W1),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new Z1,this.targetCount=0,this.ai=xa.ur()}forEachTarget(e,n){return this.si.forEach((i,o)=>n(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new xa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,i){let o=0;const l=[];return this.si.forEach((f,x)=>{x.sequenceNumber<=n&&i.get(x.targetId)===null&&(this.si.delete(f),l.push(this.removeMatchingKeysForTargetId(e,x.targetId)),o++)}),se.waitFor(l).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return se.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),se.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach(f=>{l.push(o.markPotentiallyOrphaned(e,f))}),se.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return se.resolve(i)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n){this.ui={},this.overlays={},this.ci=new gh(0),this.li=!1,this.li=!0,this.hi=new jI,this.referenceDelegate=e(this),this.Pi=new WI(this),this.indexManager=new RI,this.remoteDocumentCache=function(o){return new HI(o)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new SI(n),this.Ii=new VI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new zI(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){xe("MemoryPersistence","Starting transaction:",e);const o=new YI(this.ci.next());return this.referenceDelegate.Ei(),i(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ai(e,n){return se.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class YI extends A3{constructor(e){super(),this.currentSequenceNumber=e}}class $1{constructor(e){this.persistence=e,this.Ri=new Z1,this.Vi=null}static mi(e){return new $1(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),se.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(l=>this.fi.add(l.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,i=>{const o=ve.fromPath(i);return this.gi(e,o).next(l=>{l||n.removeEntry(o,Oe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Gu{constructor(e,n){this.persistence=e,this.pi=new mo(i=>I3(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=kI(this,n)}static mi(e,n){return new Gu(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return se.forEach(this.pi,(i,o)=>this.br(e,i,o).next(l=>l?se.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,f=>this.br(e,f,n).next(x=>{x||(i++,l.removeEntry(f,Oe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ru(e.data.value)),n}br(e,n,i){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=Ye(),o=Ye();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new J1(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return U_()?8:_3(F_())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const l={result:null};return this.ys(e,n).next(f=>{l.result=f}).next(()=>{if(!l.result)return this.ws(e,n,o,i).next(f=>{l.result=f})}).next(()=>{if(l.result)return;const f=new XI;return this.Ss(e,n,f).next(x=>{if(l.result=x,this.Vs)return this.bs(e,n,f,x.size)})}).next(()=>l.result)}bs(e,n,i,o){return i.documentReadCount<this.fs?(Po()<=$e.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",ko(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Po()<=$e.DEBUG&&xe("QueryEngine","Query:",ko(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Po()<=$e.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",ko(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gi(n))):se.resolve())}ys(e,n){if(gp(n))return se.resolve(null);let i=gi(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Nd(n,null,"F"),i=gi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const f=Ye(...l);return this.ps.getDocuments(e,f).next(x=>this.indexManager.getMinOffset(e,i).next(m=>{const p=this.Ds(n,x);return this.Cs(n,p,f,m.readTime)?this.ys(e,Nd(n,null,"F")):this.vs(e,p,n,m)}))})))}ws(e,n,i,o){return gp(n)||o.isEqual(Oe.min())?se.resolve(null):this.ps.getDocuments(e,i).next(l=>{const f=this.Ds(n,l);return this.Cs(n,f,i,o)?se.resolve(null):(Po()<=$e.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ko(n)),this.vs(e,f,n,y3(o,Ul)).next(x=>x))})}Ds(e,n){let i=new sn(gx(e));return n.forEach((o,l)=>{xh(e,l)&&(i=i.add(l))}),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,n,i){return Po()<=$e.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",ko(n)),this.ps.getDocumentsMatchingQuery(e,n,vs.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next(l=>(n.forEach(f=>{l=l.insert(f.key,f)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="LocalStore",KI=3e8;class qI{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Ft(We),this.xs=new mo(l=>G1(l),W1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new FI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function ZI(t,e,n,i){return new qI(t,e,n,i)}async function Bx(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const f=[],x=[];let m=Ye();for(const p of o){f.push(p.batchId);for(const E of p.mutations)m=m.add(E.key)}for(const p of l){x.push(p.batchId);for(const E of p.mutations)m=m.add(E.key)}return n.localDocuments.getDocuments(i,m).next(p=>({Ls:p,removedBatchIds:f,addedBatchIds:x}))})})}function $I(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return function(x,m,p,E){const _=p.batch,S=_.keys();let P=se.resolve();return S.forEach(V=>{P=P.next(()=>E.getEntry(m,V)).next(G=>{const X=p.docVersions.get(V);ct(X!==null,48541),G.version.compareTo(X)<0&&(_.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),E.addEntry(G)))})}),P.next(()=>x.mutationQueue.removeMutationBatch(m,_))}(n,i,e,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(x){let m=Ye();for(let p=0;p<x.mutationResults.length;++p)x.mutationResults[p].transformResults.length>0&&(m=m.add(x.batch.mutations[p].key));return m}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function Fx(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function JI(t,e){const n=Pe(t),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const x=[];e.targetChanges.forEach((E,_)=>{const S=o.get(_);if(!S)return;x.push(n.Pi.removeMatchingKeys(l,E.removedDocuments,_).next(()=>n.Pi.addMatchingKeys(l,E.addedDocuments,_)));let P=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?P=P.withResumeToken(Tn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,i)),o=o.insert(_,P),function(G,X,j){return G.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=KI?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0}(S,P,E)&&x.push(n.Pi.updateTargetData(l,P))});let m=ji(),p=Ye();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&x.push(n.persistence.referenceDelegate.updateLimboDocument(l,E))}),x.push(eT(l,f,e.documentUpdates).next(E=>{m=E.ks,p=E.qs})),!i.isEqual(Oe.min())){const E=n.Pi.getLastRemoteSnapshotVersion(l).next(_=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i));x.push(E)}return se.waitFor(x).next(()=>f.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,m,p)).next(()=>m)}).then(l=>(n.Ms=o,l))}function eT(t,e,n){let i=Ye(),o=Ye();return n.forEach(l=>i=i.add(l)),e.getEntries(t,i).next(l=>{let f=ji();return n.forEach((x,m)=>{const p=l.get(x);m.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(x)),m.isNoDocument()&&m.version.isEqual(Oe.min())?(e.removeEntry(x,m.readTime),f=f.insert(x,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),f=f.insert(x,m)):xe(e0,"Ignoring outdated watch update for ",x,". Current version:",p.version," Watch version:",m.version)}),{ks:f,qs:o}})}function tT(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=j1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function nT(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Pi.getTargetData(i,e).next(l=>l?(o=l,se.resolve(o)):n.Pi.allocateTargetId(i).next(f=>(o=new us(e,f,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function Od(t,e,n){const i=Pe(t),o=i.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,f=>i.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!va(f))throw f;xe(e0,`Failed to update sequence numbers for target ${e}: ${f}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function Sp(t,e,n){const i=Pe(t);let o=Oe.min(),l=Ye();return i.persistence.runTransaction("Execute query","readwrite",f=>function(m,p,E){const _=Pe(m),S=_.xs.get(E);return S!==void 0?se.resolve(_.Ms.get(S)):_.Pi.getTargetData(p,E)}(i,f,gi(e)).next(x=>{if(x)return o=x.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,x.targetId).next(m=>{l=m})}).next(()=>i.Fs.getDocumentsMatchingQuery(f,e,n?o:Oe.min(),n?l:Ye())).next(x=>(rT(i,z3(e),x),{documents:x,Qs:l})))}function rT(t,e,n){let i=t.Os.get(e)||Oe.min();n.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.Os.set(e,i)}class Np{constructor(){this.activeTargetIds=Q3()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iT{constructor(){this.Mo=new Np,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Np,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="ConnectivityMonitor";class bp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(Rp,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(Rp,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uc=null;function Pd(){return Uc===null?Uc=function(){return 268435456+Math.round(2147483648*Math.random())}():Uc++,"0x"+Uc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="RestConnection",oT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aT{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Bu?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,l){const f=Pd(),x=this.zo(e,n.toUriEncodedString());xe(pf,`Sending RPC '${e}' ${f}:`,x,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,o,l);const{host:p}=new URL(x),E=B1(p);return this.Jo(e,x,m,i,E).then(_=>(xe(pf,`Received RPC '${e}' ${f}: `,_),_),_=>{throw ga(pf,`RPC '${e}' ${f} failed with error: `,_,"url: ",x,"request:",i),_})}Ho(e,n,i,o,l,f){return this.Go(e,n,i,o,l)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ia}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,l)=>e[l]=o),i&&i.headers.forEach((o,l)=>e[l]=o)}zo(e,n){const i=oT[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="WebChannelConnection";class cT extends aT{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,l){const f=Pd();return new Promise((x,m)=>{const p=new Vy;p.setWithCredentials(!0),p.listenOnce(Uy.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case nu.NO_ERROR:const _=p.getResponseJson();xe(Dn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(_)),x(_);break;case nu.TIMEOUT:xe(Dn,`RPC '${e}' ${f} timed out`),m(new ye(ie.DEADLINE_EXCEEDED,"Request time out"));break;case nu.HTTP_ERROR:const S=p.getStatus();if(xe(Dn,`RPC '${e}' ${f} failed with status:`,S,"response text:",p.getResponseText()),S>0){let P=p.getResponseJson();Array.isArray(P)&&(P=P[0]);const V=P==null?void 0:P.error;if(V&&V.status&&V.message){const G=function(j){const B=j.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(B)>=0?B:ie.UNKNOWN}(V.status);m(new ye(G,V.message))}else m(new ye(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ye(ie.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:f,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{xe(Dn,`RPC '${e}' ${f} completed.`)}});const E=JSON.stringify(o);xe(Dn,`RPC '${e}' ${f} sending request:`,o),p.send(n,"POST",E,i,15)})}T_(e,n,i){const o=Pd(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Hy(),x=zy(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,n,i),m.encodeInitMessageHeaders=!0;const E=l.join("");xe(Dn,`Creating RPC '${e}' stream ${o}: ${E}`,m);const _=f.createWebChannel(E,m);this.I_(_);let S=!1,P=!1;const V=new lT({Yo:X=>{P?xe(Dn,`Not sending because RPC '${e}' stream ${o} is closed:`,X):(S||(xe(Dn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),S=!0),xe(Dn,`RPC '${e}' stream ${o} sending:`,X),_.send(X))},Zo:()=>_.close()}),G=(X,j,B)=>{X.listen(j,L=>{try{B(L)}catch(K){setTimeout(()=>{throw K},0)}})};return G(_,rl.EventType.OPEN,()=>{P||(xe(Dn,`RPC '${e}' stream ${o} transport opened.`),V.o_())}),G(_,rl.EventType.CLOSE,()=>{P||(P=!0,xe(Dn,`RPC '${e}' stream ${o} transport closed`),V.a_(),this.E_(_))}),G(_,rl.EventType.ERROR,X=>{P||(P=!0,ga(Dn,`RPC '${e}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),V.a_(new ye(ie.UNAVAILABLE,"The operation could not be completed")))}),G(_,rl.EventType.MESSAGE,X=>{var j;if(!P){const B=X.data[0];ct(!!B,16349);const L=B,K=(L==null?void 0:L.error)||((j=L[0])==null?void 0:j.error);if(K){xe(Dn,`RPC '${e}' stream ${o} received error:`,K);const ae=K.status;let te=function(O){const z=qt[O];if(z!==void 0)return Tx(z)}(ae),b=K.message;te===void 0&&(te=ie.INTERNAL,b="Unknown error status: "+ae+" with message "+K.message),P=!0,V.a_(new ye(te,b)),_.close()}else xe(Dn,`RPC '${e}' stream ${o} received:`,B),V.u_(B)}}),G(x,jy.STAT_EVENT,X=>{X.stat===Ad.PROXY?xe(Dn,`RPC '${e}' stream ${o} detected buffering proxy`):X.stat===Ad.NOPROXY&&xe(Dn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{V.__()},0),V}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function mf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t){return new dI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="PersistentStream";class Ux{constructor(e,n,i,o,l,f,x,m){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=x,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Vx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(Ui(n.toString()),Ui("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.D_===n&&this.G_(i,o)},i=>{e(()=>{const o=new ye(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{i(()=>this.z_(o))}),this.stream.onMessage(o=>{i(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return xe(Dp,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(xe(Dp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uT extends Ux{constructor(e,n,i,o,l,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,f),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=mI(this.serializer,e),i=function(l){if(!("targetChange"in l))return Oe.min();const f=l.targetChange;return f.targetIds&&f.targetIds.length?Oe.min():f.readTime?pi(f.readTime):Oe.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Md(this.serializer),n.addTarget=function(l,f){let x;const m=f.target;if(x=vd(m)?{documents:wI(l,m)}:{query:EI(l,m).ft},x.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){x.resumeToken=Nx(l,f.resumeToken);const p=Rd(l,f.expectedCount);p!==null&&(x.expectedCount=p)}else if(f.snapshotVersion.compareTo(Oe.min())>0){x.readTime=Hu(l,f.snapshotVersion.toTimestamp());const p=Rd(l,f.expectedCount);p!==null&&(x.expectedCount=p)}return x}(this.serializer,e);const i=_I(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Md(this.serializer),n.removeTarget=e,this.q_(n)}}class hT extends Ux{constructor(e,n,i,o,l,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,f),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xI(e.writeResults,e.commitTime),i=pi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Md(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>yI(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{}class dT extends fT{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.Go(e,bd(n,i),o,l,f)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(ie.UNKNOWN,l.toString())})}Ho(e,n,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,x])=>this.connection.Ho(e,bd(n,i),o,f,x,l)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ye(ie.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class gT{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ui(n),this.aa=!1):xe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="RemoteStore";class pT{constructor(e,n,i,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(f=>{i.enqueueAndForget(async()=>{yo(this)&&(xe(ho,"Restarting streams for network reachability change."),await async function(m){const p=Pe(m);p.Ea.add(4),await tc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Ch(p)}(this))})}),this.Ra=new gT(i,o)}}async function Ch(t){if(yo(t))for(const e of t.da)await e(!0)}async function tc(t){for(const e of t.da)await e(!1)}function jx(t,e){const n=Pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),i0(n)?r0(n):Sa(n).O_()&&n0(n,e))}function t0(t,e){const n=Pe(t),i=Sa(n);n.Ia.delete(e),i.O_()&&zx(n,e),n.Ia.size===0&&(i.O_()?i.L_():yo(n)&&n.Ra.set("Unknown"))}function n0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sa(t).Y_(e)}function zx(t,e){t.Va.Ue(e),Sa(t).Z_(e)}function r0(t){t.Va=new cI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sa(t).start(),t.Ra.ua()}function i0(t){return yo(t)&&!Sa(t).x_()&&t.Ia.size>0}function yo(t){return Pe(t).Ea.size===0}function Hx(t){t.Va=void 0}async function mT(t){t.Ra.set("Online")}async function yT(t){t.Ia.forEach((e,n)=>{n0(t,e)})}async function xT(t,e){Hx(t),i0(t)?(t.Ra.ha(e),r0(t)):t.Ra.set("Unknown")}async function wT(t,e,n){if(t.Ra.set("Online"),e instanceof Sx&&e.state===2&&e.cause)try{await async function(o,l){const f=l.cause;for(const x of l.targetIds)o.Ia.has(x)&&(await o.remoteSyncer.rejectListen(x,f),o.Ia.delete(x),o.Va.removeTarget(x))}(t,e)}catch(i){xe(ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Wu(t,i)}else if(e instanceof ou?t.Va.Ze(e):e instanceof vx?t.Va.st(e):t.Va.tt(e),!n.isEqual(Oe.min()))try{const i=await Fx(t.localStore);n.compareTo(i)>=0&&await function(l,f){const x=l.Va.Tt(f);return x.targetChanges.forEach((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const E=l.Ia.get(p);E&&l.Ia.set(p,E.withResumeToken(m.resumeToken,f))}}),x.targetMismatches.forEach((m,p)=>{const E=l.Ia.get(m);if(!E)return;l.Ia.set(m,E.withResumeToken(Tn.EMPTY_BYTE_STRING,E.snapshotVersion)),zx(l,m);const _=new us(E.target,m,p,E.sequenceNumber);n0(l,_)}),l.remoteSyncer.applyRemoteEvent(x)}(t,n)}catch(i){xe(ho,"Failed to raise snapshot:",i),await Wu(t,i)}}async function Wu(t,e,n){if(!va(e))throw e;t.Ea.add(1),await tc(t),t.Ra.set("Offline"),n||(n=()=>Fx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{xe(ho,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ch(t)})}function Gx(t,e){return e().catch(n=>Wu(t,n,e))}async function Ih(t){const e=Pe(t),n=bs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j1;for(;ET(e);)try{const o=await tT(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,AT(e,o)}catch(o){await Wu(e,o)}Wx(e)&&Yx(e)}function ET(t){return yo(t)&&t.Ta.length<10}function AT(t,e){t.Ta.push(e);const n=bs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Wx(t){return yo(t)&&!bs(t).x_()&&t.Ta.length>0}function Yx(t){bs(t).start()}async function _T(t){bs(t).ra()}async function CT(t){const e=bs(t);for(const n of t.Ta)e.ea(n.mutations)}async function IT(t,e,n){const i=t.Ta.shift(),o=Q1.from(i,e,n);await Gx(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await Ih(t)}async function TT(t,e){e&&bs(t).X_&&await async function(i,o){if(function(f){return oI(f)&&f!==ie.ABORTED}(o.code)){const l=i.Ta.shift();bs(i).B_(),await Gx(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Ih(i)}}(t,e),Wx(t)&&Yx(t)}async function Mp(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),xe(ho,"RemoteStore received new credentials");const i=yo(n);n.Ea.add(3),await tc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ch(n)}async function vT(t,e){const n=Pe(t);e?(n.Ea.delete(2),await Ch(n)):e||(n.Ea.add(2),await tc(n),n.Ra.set("Unknown"))}function Sa(t){return t.ma||(t.ma=function(n,i,o){const l=Pe(n);return l.sa(),new uT(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Xo:mT.bind(null,t),t_:yT.bind(null,t),r_:xT.bind(null,t),H_:wT.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),i0(t)?r0(t):t.Ra.set("Unknown")):(await t.ma.stop(),Hx(t))})),t.ma}function bs(t){return t.fa||(t.fa=function(n,i,o){const l=Pe(n);return l.sa(),new hT(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_T.bind(null,t),r_:TT.bind(null,t),ta:CT.bind(null,t),na:IT.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ih(t)):(await t.fa.stop(),t.Ta.length>0&&(xe(ho,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,n,i,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new _s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,l){const f=Date.now()+i,x=new s0(e,n,f,o,l);return x.start(i),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o0(t,e){if(Ui("AsyncQueue",`${e}: ${t}`),va(t))return new ye(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{static emptySet(e){return new ia(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ve.comparator(n.key,i.key):(n,i)=>ve.comparator(n.key,i.key),this.keyedMap=il(),this.sortedSet=new Ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ia)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ia;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(){this.ga=new Ft(ve.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class wa{constructor(e,n,i,o,l,f,x,m,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=x,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,o,l){const f=[];return n.forEach(x=>{f.push({type:0,doc:x})}),new wa(e,n,ia.emptySet(n),f,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class NT{constructor(){this.queries=Pp(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Pe(n),l=o.queries;o.queries=Pp(),l.forEach((f,x)=>{for(const m of x.Sa)m.onError(i)})})(this,new ye(ie.ABORTED,"Firestore shutting down"))}}function Pp(){return new mo(t=>dx(t),yh)}async function RT(t,e){const n=Pe(t);let i=3;const o=e.query;let l=n.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new ST,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await n.onListen(o,!0);break;case 1:l.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const x=o0(f,`Initialization of query '${ko(e.query)}' failed`);return void e.onError(x)}n.queries.set(o,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&a0(n)}async function bT(t,e){const n=Pe(t),i=e.query;let o=3;const l=n.queries.get(i);if(l){const f=l.Sa.indexOf(e);f>=0&&(l.Sa.splice(f,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function DT(t,e){const n=Pe(t);let i=!1;for(const o of e){const l=o.query,f=n.queries.get(l);if(f){for(const x of f.Sa)x.Fa(o)&&(i=!0);f.wa=o}}i&&a0(n)}function MT(t,e,n){const i=Pe(t),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(n);i.queries.delete(e)}function a0(t){t.Ca.forEach(e=>{e.next()})}var kd,kp;(kp=kd||(kd={})).Ma="default",kp.Cache="cache";class OT{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new wa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this.key=e}}class Qx{constructor(e){this.key=e}}class PT{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ye(),this.mutatedKeys=Ye(),this.eu=gx(e),this.tu=new ia(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new Op,o=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,f=o,x=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,_)=>{const S=o.get(E),P=xh(this.query,_)?_:null,V=!!S&&this.mutatedKeys.has(S.key),G=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let X=!1;S&&P?S.data.isEqual(P.data)?V!==G&&(i.track({type:3,doc:P}),X=!0):this.su(S,P)||(i.track({type:2,doc:P}),X=!0,(m&&this.eu(P,m)>0||p&&this.eu(P,p)<0)&&(x=!0)):!S&&P?(i.track({type:0,doc:P}),X=!0):S&&!P&&(i.track({type:1,doc:S}),X=!0,(m||p)&&(x=!0)),X&&(P?(f=f.add(P),l=G?l.add(E):l.delete(E)):(f=f.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{tu:f,iu:i,Cs:x,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort((E,_)=>function(P,V){const G=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:X})}};return G(P)-G(V)}(E.type,_.type)||this.eu(E.doc,_.doc)),this.ou(i),o=o??!1;const x=n&&!o?this._u():[],m=this.Xa.size===0&&this.current&&!o?1:0,p=m!==this.Za;return this.Za=m,f.length!==0||p?{snapshot:new wa(this.query,e.tu,l,f,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:x}:{au:x}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Op,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ye(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new Qx(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new Xx(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ye();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const l0="SyncEngine";class kT{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class LT{constructor(e){this.key=e,this.hu=!1}}class BT{constructor(e,n,i,o,l,f){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new mo(x=>dx(x),yh),this.Iu=new Map,this.Eu=new Set,this.du=new Ft(ve.comparator),this.Au=new Map,this.Ru=new Z1,this.Vu={},this.mu=new Map,this.fu=xa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FT(t,e,n=!0){const i=ew(t);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Kx(i,e,n,!0),o}async function VT(t,e){const n=ew(t);await Kx(n,e,!0,!1)}async function Kx(t,e,n,i){const o=await nT(t.localStore,gi(e)),l=o.targetId,f=t.sharedClientState.addLocalQueryTarget(l,n);let x;return i&&(x=await UT(t,e,l,f==="current",o.resumeToken)),t.isPrimaryClient&&n&&jx(t.remoteStore,o),x}async function UT(t,e,n,i,o){t.pu=(_,S,P)=>async function(G,X,j,B){let L=X.view.ru(j);L.Cs&&(L=await Sp(G.localStore,X.query,!1).then(({documents:b})=>X.view.ru(b,L)));const K=B&&B.targetChanges.get(X.targetId),ae=B&&B.targetMismatches.get(X.targetId)!=null,te=X.view.applyChanges(L,G.isPrimaryClient,K,ae);return Bp(G,X.targetId,te.au),te.snapshot}(t,_,S,P);const l=await Sp(t.localStore,e,!0),f=new PT(e,l.Qs),x=f.ru(l.documents),m=ec.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),p=f.applyChanges(x,t.isPrimaryClient,m);Bp(t,n,p.au);const E=new kT(e,n,f);return t.Tu.set(e,E),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function jT(t,e,n){const i=Pe(t),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter(f=>!yh(f,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Od(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&t0(i.remoteStore,o.targetId),Ld(i,o.targetId)}).catch(Ta)):(Ld(i,o.targetId),await Od(i.localStore,o.targetId,!0))}async function zT(t,e){const n=Pe(t),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),t0(n.remoteStore,i.targetId))}async function HT(t,e,n){const i=qT(t);try{const o=await function(f,x){const m=Pe(f),p=St.now(),E=x.reduce((P,V)=>P.add(V.key),Ye());let _,S;return m.persistence.runTransaction("Locally write mutations","readwrite",P=>{let V=ji(),G=Ye();return m.Ns.getEntries(P,E).next(X=>{V=X,V.forEach((j,B)=>{B.isValidDocument()||(G=G.add(j))})}).next(()=>m.localDocuments.getOverlayedDocuments(P,V)).next(X=>{_=X;const j=[];for(const B of x){const L=tI(B,_.get(B.key).overlayedDocument);L!=null&&j.push(new Bs(B.key,L,ix(L.value.mapValue),Qr.exists(!0)))}return m.mutationQueue.addMutationBatch(P,p,j,x)}).next(X=>{S=X;const j=X.applyToLocalDocumentSet(_,G);return m.documentOverlayCache.saveOverlays(P,X.batchId,j)})}).then(()=>({batchId:S.batchId,changes:mx(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(f,x,m){let p=f.Vu[f.currentUser.toKey()];p||(p=new Ft(We)),p=p.insert(x,m),f.Vu[f.currentUser.toKey()]=p}(i,o.batchId,n),await nc(i,o.changes),await Ih(i.remoteStore)}catch(o){const l=o0(o,"Failed to persist write");n.reject(l)}}async function qx(t,e){const n=Pe(t);try{const i=await JI(n.localStore,e);e.targetChanges.forEach((o,l)=>{const f=n.Au.get(l);f&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?ct(f.hu,14607):o.removedDocuments.size>0&&(ct(f.hu,42227),f.hu=!1))}),await nc(n,i,e)}catch(i){await Ta(i)}}function Lp(t,e,n){const i=Pe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach((l,f)=>{const x=f.view.va(e);x.snapshot&&o.push(x.snapshot)}),function(f,x){const m=Pe(f);m.onlineState=x;let p=!1;m.queries.forEach((E,_)=>{for(const S of _.Sa)S.va(x)&&(p=!0)}),p&&a0(m)}(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GT(t,e,n){const i=Pe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),l=o&&o.key;if(l){let f=new Ft(ve.comparator);f=f.insert(l,Pn.newNoDocument(l,Oe.min()));const x=Ye().add(l),m=new Ah(Oe.min(),new Map,new Ft(We),f,x);await qx(i,m),i.du=i.du.remove(l),i.Au.delete(e),c0(i)}else await Od(i.localStore,e,!1).then(()=>Ld(i,e,n)).catch(Ta)}async function WT(t,e){const n=Pe(t),i=e.batch.batchId;try{const o=await $I(n.localStore,e);$x(n,i,null),Zx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await nc(n,o)}catch(o){await Ta(o)}}async function YT(t,e,n){const i=Pe(t);try{const o=await function(f,x){const m=Pe(f);return m.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let E;return m.mutationQueue.lookupMutationBatch(p,x).next(_=>(ct(_!==null,37113),E=_.keys(),m.mutationQueue.removeMutationBatch(p,_))).next(()=>m.mutationQueue.performConsistencyCheck(p)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(p,E,x)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E)).next(()=>m.localDocuments.getDocuments(p,E))})}(i.localStore,e);$x(i,e,n),Zx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await nc(i,o)}catch(o){await Ta(o)}}function Zx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function $x(t,e,n){const i=Pe(t);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Ld(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||Jx(t,i)})}function Jx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(t0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),c0(t))}function Bp(t,e,n){for(const i of n)i instanceof Xx?(t.Ru.addReference(i.key,e),XT(t,i)):i instanceof Qx?(xe(l0,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||Jx(t,i.key)):Re(19791,{wu:i})}function XT(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(xe(l0,"New document in limbo: "+n),t.Eu.add(i),c0(t))}function c0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ve(Et.fromString(e)),i=t.fu.next();t.Au.set(i,new LT(n)),t.du=t.du.insert(n,i),jx(t.remoteStore,new us(gi(hx(n.path)),i,"TargetPurposeLimboResolution",gh.ce))}}async function nc(t,e,n){const i=Pe(t),o=[],l=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach((x,m)=>{f.push(i.pu(m,e,n).then(p=>{var E;if((p||n)&&i.isPrimaryClient){const _=p?!p.fromCache:(E=n==null?void 0:n.targetChanges.get(m.targetId))==null?void 0:E.current;i.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(p){o.push(p);const _=J1.As(m.targetId,p);l.push(_)}}))}),await Promise.all(f),i.Pu.H_(o),await async function(m,p){const E=Pe(m);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>se.forEach(p,S=>se.forEach(S.Es,P=>E.persistence.referenceDelegate.addReference(_,S.targetId,P)).next(()=>se.forEach(S.ds,P=>E.persistence.referenceDelegate.removeReference(_,S.targetId,P)))))}catch(_){if(!va(_))throw _;xe(e0,"Failed to update sequence numbers: "+_)}for(const _ of p){const S=_.targetId;if(!_.fromCache){const P=E.Ms.get(S),V=P.snapshotVersion,G=P.withLastLimboFreeSnapshotVersion(V);E.Ms=E.Ms.insert(S,G)}}}(i.localStore,l))}async function QT(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){xe(l0,"User change. New user:",e.toKey());const i=await Bx(n.localStore,e);n.currentUser=e,function(l,f){l.mu.forEach(x=>{x.forEach(m=>{m.reject(new ye(ie.CANCELLED,f))})}),l.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await nc(n,i.Ls)}}function KT(t,e){const n=Pe(t),i=n.Au.get(e);if(i&&i.hu)return Ye().add(i.key);{let o=Ye();const l=n.Iu.get(e);if(!l)return o;for(const f of l){const x=n.Tu.get(f);o=o.unionWith(x.view.nu)}return o}}function ew(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GT.bind(null,e),e.Pu.H_=DT.bind(null,e.eventManager),e.Pu.yu=MT.bind(null,e.eventManager),e}function qT(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YT.bind(null,e),e}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_h(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ZI(this.persistence,new QI,e.initialUser,this.serializer)}Cu(e){return new Lx($1.mi,this.serializer)}Du(e){return new iT}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class ZT extends Yu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ct(this.persistence.referenceDelegate instanceof Gu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new OI(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new Lx(i=>Gu.mi(i,n),this.serializer)}}class Bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Lp(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=QT.bind(null,this.syncEngine),await vT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NT}()}createDatastore(e){const n=_h(e.databaseInfo.databaseId),i=function(l){return new cT(l)}(e.databaseInfo);return function(l,f,x,m){return new dT(l,f,x,m)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,l,f,x){return new pT(i,o,l,f,x)}(this.localStore,this.datastore,e.asyncQueue,n=>Lp(this.syncEngine,n,0),function(){return bp.v()?new bp:new sT}())}createSyncEngine(e,n){return function(o,l,f,x,m,p,E){const _=new BT(o,l,f,x,m,p);return E&&(_.gu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const l=Pe(o);xe(ho,"RemoteStore shutting down."),l.Ea.add(5),await tc(l),l.Aa.shutdown(),l.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Bd.provider={build:()=>new Bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ui("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds="FirestoreClient";class JT{constructor(e,n,i,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=Mn.UNAUTHENTICATED,this.clientId=U1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async f=>{xe(Ds,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(i,f=>(xe(Ds,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=o0(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function yf(t,e){t.asyncQueue.verifyOperationInProgress(),xe(Ds,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async o=>{i.isEqual(o)||(await Bx(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Fp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ev(t);xe(Ds,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Mp(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>Mp(e.remoteStore,o)),t._onlineComponents=e}async function ev(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){xe(Ds,"Using user provided OfflineComponentProvider");try{await yf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;ga("Error using user provided cache. Falling back to memory cache: "+n),await yf(t,new Yu)}}else xe(Ds,"Using default OfflineComponentProvider"),await yf(t,new ZT(void 0));return t._offlineComponents}async function tw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(xe(Ds,"Using user provided OnlineComponentProvider"),await Fp(t,t._uninitializedComponentsProvider._online)):(xe(Ds,"Using default OnlineComponentProvider"),await Fp(t,new Bd))),t._onlineComponents}function tv(t){return tw(t).then(e=>e.syncEngine)}async function nv(t){const e=await tw(t),n=e.eventManager;return n.onListen=FT.bind(null,e.syncEngine),n.onUnlisten=jT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zT.bind(null,e.syncEngine),n}function rv(t,e,n={}){const i=new _s;return t.asyncQueue.enqueueAndForget(async()=>function(l,f,x,m,p){const E=new $T({next:S=>{E.Nu(),f.enqueueAndForget(()=>bT(l,_)),S.fromCache&&m.source==="server"?p.reject(new ye(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),_=new OT(x,E,{includeMetadataChanges:!0,qa:!0});return RT(l,_)}(await nv(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="firestore.googleapis.com",Up=!0;class jp{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rw,this.ssl=Up}else this.host=e.host,this.ssl=e.ssl??Up;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DI)throw new ye(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}m3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nw(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Th{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new o3;switch(i.type){case"firstParty":return new u3(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Vp.get(n);i&&(xe("ComponentProvider","Removing Datastore"),Vp.delete(n),i.terminate())}(this),Promise.resolve()}}function iv(t,e,n,i={}){var p;t=uo(t,Th);const o=B1(e),l=t._getSettings(),f={...l,emulatorOptions:t._getEmulatorOptions()},x=`${e}:${n}`;o&&(O_(`https://${x}`),B_("Firestore",!0)),l.host!==rw&&l.host!==x&&ga("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...l,host:x,ssl:o,emulatorOptions:i};if(!Ou(m,f)&&(t._setSettings(m),i.mockUserToken)){let E,_;if(typeof i.mockUserToken=="string")E=i.mockUserToken,_=Mn.MOCK_USER;else{E=P_(i.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new ye(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Mn(S)}t._authCredentials=new a3(new Wy(E,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Na(this.firestore,e,this._query)}}class rn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rn(this.firestore,e,this._key)}toJSON(){return{type:rn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Zl(n,rn._jsonSchema))return new rn(e,i||null,new ve(Et.fromString(n.referencePath)))}}rn._jsonSchemaVersion="firestore/documentReference/1.0",rn._jsonSchema={type:Jt("string",rn._jsonSchemaVersion),referencePath:Jt("string")};class Cs extends Na{constructor(e,n,i){super(e,n,hx(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rn(this.firestore,null,new ve(e))}withConverter(e){return new Cs(this.firestore,e,this._path)}}function u0(t,e,...n){if(t=Fi(t),Yy("collection","path",e),t instanceof Th){const i=Et.fromString(e,...n);return ep(i),new Cs(t,null,i)}{if(!(t instanceof rn||t instanceof Cs))throw new ye(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Et.fromString(e,...n));return ep(i),new Cs(t.firestore,null,i)}}function Zs(t,e,...n){if(t=Fi(t),arguments.length===1&&(e=U1.newId()),Yy("doc","path",e),t instanceof Th){const i=Et.fromString(e,...n);return Jg(i),new rn(t,null,new ve(i))}{if(!(t instanceof rn||t instanceof Cs))throw new ye(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Et.fromString(e,...n));return Jg(i),new rn(t.firestore,t instanceof Cs?t.converter:null,new ve(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="AsyncQueue";class Hp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Vx(this,"async_queue_retry"),this._c=()=>{const i=mf();i&&xe(zp,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=mf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=mf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new _s;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!va(e))throw e;xe(zp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Ui("INTERNAL UNHANDLED ERROR: ",Gp(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=s0.createAndSchedule(this,e,n,i,l=>this.hc(l));return this.tc.push(o),o}uc(){this.nc&&Re(47125,{Pc:Gp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Gp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class rc extends Th{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new Hp,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Hp(e),this._firestoreClient=void 0,await e}}}function sv(t,e){const n=typeof t=="object"?t:XC(),i=typeof t=="string"?t:e||Bu,o=zC(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=D_("firestore");l&&iv(o,...l)}return o}function iw(t){if(t._terminated)throw new ye(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ov(t),t._firestoreClient}function ov(t){var i,o,l;const e=t._freezeSettings(),n=function(x,m,p,E){return new S3(x,m,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,nw(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new JT(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(x){const m=x==null?void 0:x._online.build();return{_offline:x==null?void 0:x._offline.build(m),_online:m}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rr(Tn.fromBase64String(e))}catch(n){throw new ye(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rr(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zl(e,Rr._jsonSchema))return Rr.fromBase64String(e.bytes)}}Rr._jsonSchemaVersion="firestore/bytes/1.0",Rr._jsonSchema={type:Jt("string",Rr._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mi._jsonSchemaVersion}}static fromJSON(e){if(Zl(e,mi._jsonSchema))return new mi(e.latitude,e.longitude)}}mi._jsonSchemaVersion="firestore/geoPoint/1.0",mi._jsonSchema={type:Jt("string",mi._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zl(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yi(e.vectorValues);throw new ye(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:Jt("string",yi._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=/^__.*__$/;class lv{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Bs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jl(e,this.data,n,this.fieldTransforms)}}class sw{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Bs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ow(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class f0{constructor(e,n,i,o,l,f){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new f0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ow(this.Ac)&&av.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class cv{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||_h(e)}Cc(e,n,i,o=!1){return new f0({Ac:e,methodName:n,Dc:i,path:_n.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function d0(t){const e=t._freezeSettings(),n=_h(t._databaseId);return new cv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uv(t,e,n,i,o,l={}){const f=t.Cc(l.merge||l.mergeFields?2:0,e,n,o);g0("Data must be an object, but it was:",f,i);const x=aw(i,f);let m,p;if(l.merge)m=new hr(f.fieldMask),p=f.fieldTransforms;else if(l.mergeFields){const E=[];for(const _ of l.mergeFields){const S=Fd(e,_,n);if(!f.contains(S))throw new ye(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);cw(E,S)||E.push(S)}m=new hr(E),p=f.fieldTransforms.filter(_=>m.covers(_.field))}else m=null,p=f.fieldTransforms;return new lv(new $n(x),m,p)}class Sh extends h0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sh}}function hv(t,e,n,i){const o=t.Cc(1,e,n);g0("Data must be an object, but it was:",o,i);const l=[],f=$n.empty();Ls(i,(m,p)=>{const E=p0(e,m,n);p=Fi(p);const _=o.yc(E);if(p instanceof Sh)l.push(E);else{const S=ic(p,_);S!=null&&(l.push(E),f.set(E,S))}});const x=new hr(l);return new sw(f,x,o.fieldTransforms)}function fv(t,e,n,i,o,l){const f=t.Cc(1,e,n),x=[Fd(e,i,n)],m=[o];if(l.length%2!=0)throw new ye(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)x.push(Fd(e,l[S])),m.push(l[S+1]);const p=[],E=$n.empty();for(let S=x.length-1;S>=0;--S)if(!cw(p,x[S])){const P=x[S];let V=m[S];V=Fi(V);const G=f.yc(P);if(V instanceof Sh)p.push(P);else{const X=ic(V,G);X!=null&&(p.push(P),E.set(P,X))}}const _=new hr(p);return new sw(E,_,f.fieldTransforms)}function dv(t,e,n,i=!1){return ic(n,t.Cc(i?4:3,e))}function ic(t,e){if(lw(t=Fi(t)))return g0("Unsupported field value:",e,t),aw(t,e);if(t instanceof h0)return function(i,o){if(!ow(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,o){const l=[];let f=0;for(const x of i){let m=ic(x,o.wc(f));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),f++}return{arrayValue:{values:l}}}(t,e)}return function(i,o){if((i=Fi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return K3(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=St.fromDate(i);return{timestampValue:Hu(o.serializer,l)}}if(i instanceof St){const l=new St(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hu(o.serializer,l)}}if(i instanceof mi)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Rr)return{bytesValue:Nx(o.serializer,i._byteString)};if(i instanceof rn){const l=o.databaseId,f=i.firestore._databaseId;if(!f.isEqual(l))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:q1(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof yi)return function(f,x){return{mapValue:{fields:{[tx]:{stringValue:rx},[Fu]:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw x.Sc("VectorValues must only contain numeric values.");return Y1(x.serializer,p)})}}}}}}(i,o);throw o.Sc(`Unsupported field value: ${dh(i)}`)}(t,e)}function aw(t,e){const n={};return Ky(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(t,(i,o)=>{const l=ic(o,e.mc(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function lw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof St||t instanceof mi||t instanceof Rr||t instanceof rn||t instanceof h0||t instanceof yi)}function g0(t,e,n){if(!lw(n)||!Xy(n)){const i=dh(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Fd(t,e,n){if((e=Fi(e))instanceof vh)return e._internalPath;if(typeof e=="string")return p0(t,e);throw Xu("Field path arguments must be of type string or ",t,!1,void 0,n)}const gv=new RegExp("[~\\*/\\[\\]]");function p0(t,e,n){if(e.search(gv)>=0)throw Xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vh(...e.split("."))._internalPath}catch{throw Xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xu(t,e,n,i,o){const l=i&&!i.isEmpty(),f=o!==void 0;let x=`Function ${e}() called with invalid data`;n&&(x+=" (via `toFirestore()`)"),x+=". ";let m="";return(l||f)&&(m+=" (found",l&&(m+=` in field ${i}`),f&&(m+=` in document ${o}`),m+=")"),new ye(ie.INVALID_ARGUMENT,x+t+m)}function cw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n,i,o,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(m0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class pv extends uw{data(){return super.data()}}function m0(t,e){return typeof e=="string"?p0(t,e):e instanceof vh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class y0{}class yv extends y0{}function Mo(t,e,...n){let i=[];e instanceof y0&&i.push(e),i=i.concat(n),function(l){const f=l.filter(m=>m instanceof x0).length,x=l.filter(m=>m instanceof Nh).length;if(f>1||f>0&&x>0)throw new ye(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)t=o._apply(t);return t}class Nh extends yv{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Nh(e,n,i)}_apply(e){const n=this._parse(e);return hw(e._query,n),new Na(e.firestore,e.converter,Sd(e._query,n))}_parse(e){const n=d0(e.firestore);return function(l,f,x,m,p,E,_){let S;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ye(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Yp(_,E);const V=[];for(const G of _)V.push(Wp(m,l,G));S={arrayValue:{values:V}}}else S=Wp(m,l,_)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Yp(_,E),S=dv(x,f,_,E==="in"||E==="not-in");return $t.create(p,E,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xs(t,e,n){const i=e,o=m0("where",t);return Nh._create(o,i,n)}class x0 extends y0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new x0(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:qr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,l){let f=o;const x=l.getFlattenedFilters();for(const m of x)hw(f,m),f=Sd(f,m)}(e._query,n),new Na(e.firestore,e.converter,Sd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Wp(t,e,n){if(typeof(n=Fi(n))=="string"){if(n==="")throw new ye(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fx(e)&&n.indexOf("/")!==-1)throw new ye(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Et.fromString(n));if(!ve.isDocumentKey(i))throw new ye(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return lp(t,new ve(i))}if(n instanceof rn)return lp(t,n._key);throw new ye(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dh(n)}.`)}function Yp(t,e){if(!Array.isArray(t)||t.length===0)throw new ye(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hw(t,e){const n=function(o,l){for(const f of o)for(const x of f.getFlattenedFilters())if(l.indexOf(x.op)>=0)return x.op;return null}(t.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ye(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xv{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return Ls(e,(o,l)=>{i[o]=this.convertValue(l,n)}),i}convertVectorValue(e){var i,o,l;const n=(l=(o=(i=e.fields)==null?void 0:i[Fu].arrayValue)==null?void 0:o.values)==null?void 0:l.map(f=>Yt(f.doubleValue));return new yi(n)}convertGeoPoint(e){return new mi(Yt(e.latitude),Yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=mh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(jl(e));default:return null}}convertTimestamp(e){const n=Ss(e);return new St(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Et.fromString(e);ct(Px(i),9688,{name:e});const o=new zl(i.get(1),i.get(3)),l=new ve(i.popFirst(5));return o.isEqual(n)||Ui(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class jc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sa extends uw{constructor(e,n,i,o,l,f){super(e,n,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new au(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(m0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=sa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}sa._jsonSchemaVersion="firestore/documentSnapshot/1.0",sa._jsonSchema={type:Jt("string",sa._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class au extends sa{data(e={}){return super.data(e)}}class oa{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new jc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new au(this._firestore,this._userDataWriter,i.key,i,new jc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(x=>{const m=new au(o._firestore,o._userDataWriter,x.doc.key,x.doc,new jc(o._snapshot.mutatedKeys.has(x.doc.key),o._snapshot.fromCache),o.query.converter);return x.doc,{type:"added",doc:m,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(x=>l||x.type!==3).map(x=>{const m=new au(o._firestore,o._userDataWriter,x.doc.key,x.doc,new jc(o._snapshot.mutatedKeys.has(x.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return x.type!==0&&(p=f.indexOf(x.doc.key),f=f.delete(x.doc.key)),x.type!==1&&(f=f.add(x.doc),E=f.indexOf(x.doc.key)),{type:Ev(x.type),doc:m,oldIndex:p,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=U1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(n.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Ev(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}oa._jsonSchemaVersion="firestore/querySnapshot/1.0",oa._jsonSchema={type:Jt("string",oa._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class Av extends xv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function Ti(t){t=uo(t,Na);const e=uo(t.firestore,rc),n=iw(e),i=new Av(e);return mv(t._query),rv(n,t._query).then(o=>new oa(e,i,t,o))}function zc(t,e,n,...i){t=uo(t,rn);const o=uo(t.firestore,rc),l=d0(o);let f;return f=typeof(e=Fi(e))=="string"||e instanceof vh?fv(l,"updateDoc",t._key,e,n,i):hv(l,"updateDoc",t._key,e),w0(o,[f.toMutation(t._key,Qr.exists(!0))])}function Xp(t){return w0(uo(t.firestore,rc),[new X1(t._key,Qr.none())])}function xf(t,e){const n=uo(t.firestore,rc),i=Zs(t),o=wv(t.converter,e);return w0(n,[uv(d0(t.firestore),"addDoc",i._key,o,t.converter!==null,{}).toMutation(i._key,Qr.exists(!1))]).then(()=>i)}function w0(t,e){return function(i,o){const l=new _s;return i.asyncQueue.enqueueAndForget(async()=>HT(await tv(i),o,l)),l.promise}(iw(t),e)}(function(e,n=!0){(function(o){Ia=o})(YC),ku(new Fl("firestore",(i,{instanceIdentifier:o,options:l})=>{const f=i.getProvider("app").getImmediate(),x=new rc(new l3(i.getProvider("auth-internal")),new h3(f,i.getProvider("app-check-internal")),function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ye(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(p.options.projectId,E)}(f,o),f);return l={useFetchStreams:n,...l},x._setSettings(l),x},"PUBLIC").setMultipleInstances(!0)),ra(Kg,qg,e),ra(Kg,qg,"esm2020")})();var Di=(t=>(t.AVAILABLE="AVAILABLE",t.BORROWED="BORROWED",t.LOST="LOST",t))(Di||{});const _v={apiKey:"AIzaSyBwlK6cJQdiBuxSzKCeV25VzWtsYD6Wd1I",authDomain:"libratech-db.firebaseapp.com",projectId:"libratech-db",storageBucket:"libratech-db.firebasestorage.app",messagingSenderId:"766487965530",appId:"1:766487965530:web:34ab9cc14f5ff6296e0d63"},Cv=ky(_v),Ni=sv(Cv),Za=u0(Ni,"books"),Hc=u0(Ni,"students"),wf=u0(Ni,"transactions"),Oo=t=>({id:t.id,...t.data()}),er={getBooks:async()=>(await Ti(Za)).docs.map(e=>Oo(e)),addBook:async t=>{try{const e=Mo(Za,Xs("isbn","==",t.isbn));if(!(await Ti(e)).empty)return{success:!1,message:"Bu ISBN numarasna sahip bir kitap zaten var."};const i={...t,status:Di.AVAILABLE,addedDate:new Date().toISOString()};return await xf(Za,i),{success:!0,message:"Kitap baaryla eklendi."}}catch(e){return{success:!1,message:"Hata: "+e.message}}},deleteBook:async t=>{await Xp(Zs(Ni,"books",t))},getStudents:async()=>(await Ti(Hc)).docs.map(e=>Oo(e)),addStudent:async t=>{try{const e=Mo(Hc,Xs("studentNumber","==",t.studentNumber));if(!(await Ti(e)).empty)return{success:!1,message:"Bu numaraya sahip bir renci zaten kaytl."};const i={...t,readingHistory:[]};return await xf(Hc,i),{success:!0,message:"renci baaryla eklendi."}}catch(e){return{success:!1,message:"Hata: "+e.message}}},deleteStudent:async t=>{await Xp(Zs(Ni,"students",t))},getActiveTransactions:async()=>{const n=(await Ti(wf)).docs.map(l=>Oo(l)).filter(l=>!l.isReturned);if(n.length===0)return[];const[i,o]=await Promise.all([er.getBooks(),er.getStudents()]);return n.map(l=>{const f=i.find(m=>m.id===l.bookId),x=o.find(m=>m.id===l.studentId);return!f||!x?null:{...l,book:f,student:x}}).filter(l=>l!==null)},issueBook:async(t,e,n)=>{try{const i=Mo(Za,Xs("isbn","==",t)),o=await Ti(i);if(o.empty)return{success:!1,message:"Bu ISBN/QR kodu ile kitap bulunamad."};const l=o.docs[0],f=Oo(l),x=Mo(Hc,Xs("studentNumber","==",e)),m=await Ti(x);if(m.empty)return{success:!1,message:"Bu numara/QR ile renci bulunamad."};const p=m.docs[0],E=Oo(p);if(f.status!==Di.AVAILABLE)return{success:!1,message:"Kitap u anda bakasnda dnte."};const _=E.readingHistory&&E.readingHistory.includes(f.id);let S;_&&(S=`Dikkat! ${E.name} isimli renci "${f.title}" kitabn daha nce okumu.`);const P={bookId:f.id,studentId:E.id,issueDate:new Date().toISOString(),dueDate:new Date(Date.now()+n*24*60*60*1e3).toISOString(),isReturned:!1};await xf(wf,P),await zc(Zs(Ni,"books",f.id),{status:Di.BORROWED});const V=E.readingHistory||[];return await zc(Zs(Ni,"students",E.id),{readingHistory:[...V,f.id]}),{success:!0,message:"Kitap baaryla dn verildi.",warning:S}}catch(i){return{success:!1,message:"lem Baarsz: "+i.message}}},returnBook:async t=>{try{const e=Mo(Za,Xs("isbn","==",t)),n=await Ti(e);if(n.empty)return{success:!1,message:"Kitap bulunamad."};const i=n.docs[0],o=Oo(i),l=Mo(wf,Xs("bookId","==",o.id),Xs("isReturned","==",!1)),f=await Ti(l);if(f.empty)return{success:!1,message:"Bu kitap u anda dnte grnmyor."};const x=f.docs[0];return await zc(Zs(Ni,"transactions",x.id),{isReturned:!0,returnDate:new Date().toISOString()}),await zc(Zs(Ni,"books",o.id),{status:Di.AVAILABLE}),{success:!0,message:"Kitap envantere baaryla iade edildi."}}catch(e){return{success:!1,message:"ade Baarsz: "+e.message}}},resetDatabase:async()=>{console.warn("Reset Database functionality is disabled in Remote DB mode for safety."),alert("Bulut veritabannda toplu silme ilemi gvenlik nedeniyle devre d braklmtr. Verileri manuel siliniz.")}},Iv=({children:t,currentPage:e,onNavigate:n,onLogout:i,user:o})=>{const[l,f]=Me.useState(!1),x=[{id:"dashboard",label:"Panel",icon:d_},{id:"circulation",label:"dn lemleri",icon:o_},{id:"books",label:"Kitap Envanteri",icon:c_},{id:"students",label:"renciler",icon:E_}],m=()=>{window.confirm("TM VERLER SLNECEK ve fabrika ayarlarna dnlecek. Onaylyor musunuz?")&&er.resetDatabase()},p=E=>{n(E),f(!1)};return R.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden flex-col md:flex-row",children:[R.jsxs("div",{className:"md:hidden bg-indigo-900 text-white p-4 flex justify-between items-center shadow-md z-20 no-print",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx(gd,{size:24}),R.jsx("span",{className:"font-bold text-lg",children:"LibraTech"})]}),R.jsx("button",{onClick:()=>f(!l),className:"p-1 hover:bg-indigo-800 rounded focus:outline-none",children:l?R.jsx(pd,{size:24}):R.jsx(m_,{size:24})})]}),l&&R.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden transition-opacity",onClick:()=>f(!1)}),R.jsxs("div",{className:`
        fixed md:static inset-y-0 left-0 z-40 w-64 bg-indigo-900 text-white flex flex-col shadow-xl 
        transform transition-transform duration-300 ease-in-out md:translate-x-0 no-print
        ${l?"translate-x-0":"-translate-x-full"}
      `,children:[R.jsxs("div",{className:"hidden md:flex p-6 items-center space-x-3 border-b border-indigo-800",children:[R.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg",children:R.jsx(gd,{size:24})}),R.jsxs("div",{children:[R.jsx("h1",{className:"font-bold text-lg",children:"LibraTech"}),R.jsx("p",{className:"text-xs text-indigo-300",children:"Okul Ktphanesi"})]})]}),R.jsxs("div",{className:"md:hidden p-4 border-b border-indigo-800 flex items-center justify-between bg-indigo-950",children:[R.jsx("span",{className:"font-bold text-sm uppercase tracking-wider text-indigo-400",children:"Men"}),R.jsx("button",{onClick:()=>f(!1),children:R.jsx(pd,{size:20})})]}),R.jsx("nav",{className:"flex-1 p-4 space-y-2",children:x.map(E=>{const _=E.icon,S=e===E.id;return R.jsxs("button",{onClick:()=>p(E.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${S?"bg-indigo-700 text-white shadow-md":"text-indigo-200 hover:bg-indigo-800 hover:text-white"}`,children:[R.jsx(_,{size:20}),R.jsx("span",{className:"font-medium",children:E.label})]},E.id)})}),R.jsxs("div",{className:"p-4 border-t border-indigo-800 space-y-2",children:[R.jsxs("div",{className:"flex items-center space-x-3 px-4 py-3 mb-2",children:[R.jsx("img",{src:`https://ui-avatars.com/api/?name=${o.name}&background=random`,alt:"Profile",className:"w-8 h-8 rounded-full"}),R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("p",{className:"text-sm font-medium truncate",children:o.name}),R.jsx("p",{className:"text-xs text-indigo-300 truncate",children:o.email})]})]}),R.jsxs("button",{onClick:m,className:"w-full flex items-center space-x-3 px-4 py-2 text-indigo-300 hover:bg-indigo-950 hover:text-white rounded-lg transition-colors",title:"Veritabann Sfrla",children:[R.jsx(y_,{size:18}),R.jsx("span",{className:"text-xs",children:"Verileri Sfrla"})]}),R.jsxs("button",{onClick:i,className:"w-full flex items-center space-x-3 px-4 py-2 text-red-300 hover:bg-indigo-950 hover:text-red-200 rounded-lg transition-colors",children:[R.jsx(p_,{size:18}),R.jsx("span",{children:"k Yap"})]})]})]}),R.jsx("main",{className:"flex-1 overflow-auto w-full relative bg-gray-50",children:R.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-8 pb-20 md:pb-8",children:t})})]})},Tv=({onLogin:t})=>R.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:R.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 space-y-8",children:[R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"mx-auto bg-indigo-600 w-16 h-16 rounded-xl flex items-center justify-center text-white mb-4",children:R.jsx(gd,{size:32})}),R.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Ktphane Ynetimi"}),R.jsx("p",{className:"mt-2 text-gray-600",children:"Ynetmek iin giri yapn"})]}),R.jsxs("div",{className:"space-y-4",children:[R.jsx("button",{onClick:t,className:"w-full flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors shadow-lg shadow-indigo-200",children:"Google ile Giri Yap"}),R.jsx("button",{onClick:t,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Email ile Giri Yap"})]}),R.jsx("p",{className:"text-center text-xs text-gray-400",children:"Demo Uygulamas - Herhangi bir butona basarak Admin olarak giri yapabilirsiniz."})]})}),Qp=()=>{const[t,e]=Me.useState([]),[n,i]=Me.useState(!0),o=async()=>{i(!0);const x=await er.getActiveTransactions();e(x),i(!1)};Me.useEffect(()=>{o()},[]);const l=x=>{const m=new Date(x),E=Math.abs(new Date().getTime()-m.getTime());return Math.ceil(E/(1e3*60*60*24))},f=x=>new Date>new Date(x);return n?R.jsx("div",{className:"p-8 text-center",children:"Panel verileri ykleniyor..."}):R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Ktphane Paneli"}),R.jsx("button",{onClick:o,className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Verileri Yenile"})]}),R.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[R.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Aktif dnler"}),R.jsx("h3",{className:"text-3xl font-bold text-gray-800 mt-1",children:t.length})]}),R.jsx("div",{className:"bg-blue-50 p-3 rounded-lg text-blue-600",children:R.jsx(f_,{size:24})})]})}),R.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Gecikmi Kitaplar"}),R.jsx("h3",{className:"text-3xl font-bold text-red-600 mt-1",children:t.filter(x=>f(x.dueDate)).length})]}),R.jsx("div",{className:"bg-red-50 p-3 rounded-lg text-red-600",children:R.jsx(s_,{size:24})})]})}),R.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Zamannda Teslimler"}),R.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-1",children:t.filter(x=>!f(x.dueDate)).length})]}),R.jsx("div",{className:"bg-green-50 p-3 rounded-lg text-green-600",children:R.jsx(h_,{size:24})})]})})]}),R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[R.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50",children:R.jsx("h3",{className:"font-semibold text-gray-800",children:"u An dnte Olan Kitaplar"})}),R.jsx("div",{className:"overflow-x-auto",children:R.jsxs("table",{className:"w-full text-left",children:[R.jsx("thead",{children:R.jsxs("tr",{className:"bg-gray-50 text-gray-500 text-sm border-b border-gray-100",children:[R.jsx("th",{className:"px-6 py-3 font-medium",children:"renci"}),R.jsx("th",{className:"px-6 py-3 font-medium",children:"Kitap Ad"}),R.jsx("th",{className:"px-6 py-3 font-medium",children:"Verili Tarihi"}),R.jsx("th",{className:"px-6 py-3 font-medium",children:"Teslim Tarihi"}),R.jsx("th",{className:"px-6 py-3 font-medium",children:"Geen Gn"}),R.jsx("th",{className:"px-6 py-3 font-medium",children:"Durum"})]})}),R.jsx("tbody",{className:"divide-y divide-gray-100",children:t.length===0?R.jsx("tr",{children:R.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-400",children:"u anda dn verilmi kitap yok."})}):t.map(x=>{const m=f(x.dueDate),p=l(x.issueDate);return R.jsxs("tr",{className:`transition-colors ${m?"bg-red-50 hover:bg-red-100":"hover:bg-gray-50"}`,children:[R.jsxs("td",{className:"px-6 py-4",children:[R.jsx("div",{className:"font-medium text-gray-900",children:x.student.name}),R.jsx("div",{className:"text-xs text-gray-500",children:x.student.studentNumber})]}),R.jsxs("td",{className:"px-6 py-4",children:[R.jsx("div",{className:"text-gray-900",children:x.book.title}),R.jsxs("div",{className:"text-xs text-gray-500",children:["ISBN: ",x.book.isbn]})]}),R.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(x.issueDate).toLocaleDateString("tr-TR")}),R.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(x.dueDate).toLocaleDateString("tr-TR")}),R.jsxs("td",{className:"px-6 py-4 text-sm font-medium",children:[p," gn"]}),R.jsx("td",{className:"px-6 py-4",children:R.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:m?"Gecikmi":"Zamannda"})})]},x.id)})})]})})]})]})};var we;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(we||(we={}));var Kp=new Map([[we.QR_CODE,"QR_CODE"],[we.AZTEC,"AZTEC"],[we.CODABAR,"CODABAR"],[we.CODE_39,"CODE_39"],[we.CODE_93,"CODE_93"],[we.CODE_128,"CODE_128"],[we.DATA_MATRIX,"DATA_MATRIX"],[we.MAXICODE,"MAXICODE"],[we.ITF,"ITF"],[we.EAN_13,"EAN_13"],[we.EAN_8,"EAN_8"],[we.PDF_417,"PDF_417"],[we.RSS_14,"RSS_14"],[we.RSS_EXPANDED,"RSS_EXPANDED"],[we.UPC_A,"UPC_A"],[we.UPC_E,"UPC_E"],[we.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),qp;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(qp||(qp={}));function vv(t){return Object.values(we).includes(t)}var Ms;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ms||(Ms={}));var Gr=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Ms.SCAN_TYPE_CAMERA,Ms.SCAN_TYPE_FILE],t}(),fw=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Kp.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Kp.get(e))},t}(),Zp=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Vd;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Vd||(Vd={}));var dw=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Vd.UNKWOWN_ERROR}},t}(),gw=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function ci(t){return typeof t>"u"||t===null}function Sv(t,e,n){return t>n?n:t<e?e:t}var qo=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),ut=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),$p=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),pw=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),f=Object.keys(e),x=0,m=f;x<m.length;x++){var p=m[x];if(l.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t}(),Ud={exports:{}};(function(t,e){(function(n,i){i(e)})(za,function(n){function i(T){return T==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,r){T.__proto__=r}||function(T,r){for(var s in r)r.hasOwnProperty(s)&&(T[s]=r[s])};function l(T,r){o(T,r);function s(){this.constructor=T}T.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(T,r){var s=Object.setPrototypeOf;s?s(T,r):T.__proto__=r}function x(T,r){r===void 0&&(r=T.constructor);var s=Error.captureStackTrace;s&&s(T,r)}var m=function(T){l(r,T);function r(s){var a=this.constructor,c=T.call(this,s)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),f(c,a.prototype),x(c),c}return r}(Error);class p extends m{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}p.kind="Exception";class E extends p{}E.kind="ArgumentException";class _ extends p{}_.kind="IllegalArgumentException";class S{constructor(r){if(this.binarizer=r,r===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,a,c){const u=this.binarizer.getLuminanceSource().crop(r,s,a,c);return new S(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class P extends p{static getChecksumInstance(){return new P}}P.kind="ChecksumException";class V{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class G{static arraycopy(r,s,a,c,u){for(;u--;)a[c++]=r[s++]}static currentTimeMillis(){return Date.now()}}class X extends p{}X.kind="IndexOutOfBoundsException";class j extends X{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}j.kind="ArrayIndexOutOfBoundsException";class B{static fill(r,s){for(let a=0,c=r.length;a<c;a++)r[a]=s}static fillWithin(r,s,a,c){B.rangeCheck(r.length,s,a);for(let u=s;u<a;u++)r[u]=c}static rangeCheck(r,s,a){if(s>a)throw new _("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new j(s);if(a>r)throw new j(a)}static asList(...r){return r}static create(r,s,a){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(a))}static createInt32Array(r,s,a){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(a))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let a=0,c=r.length;a<c;a++)if(r[a]!==s[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const a of r)s=31*s+a;return s}static fillUint8Array(r,s){for(let a=0;a!==r.length;a++)r[a]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const a=new Uint8Array(s);return a.set(r),a}return r.slice(0,s)}static copyOfRange(r,s,a){const c=a-s,u=new Int32Array(c);return G.arraycopy(r,s,u,0,c),u}static binarySearch(r,s,a){a===void 0&&(a=B.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const h=u+c>>1,d=a(s,r[h]);if(d>0)c=h+1;else if(d<0)u=h-1;else return h}return-c-1}static numberComparator(r,s){return r-s}}class L{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let a=31;return s=r<<16,s!==0&&(a-=16,r=s),s=r<<8,s!==0&&(a-=8,r=s),s=r<<4,s!==0&&(a-=4,r=s),s=r<<2,s!==0&&(a-=2,r=s),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}L.MIN_VALUE_32_BITS=-2147483648,L.MAX_VALUE=Number.MAX_SAFE_INTEGER;class K{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=K.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=K.makeArray(r);G.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=a[c];u&=~((1<<(r&31))-1);const h=a.length;for(;u===0;){if(++c===h)return s;u=a[c]}const d=c*32+L.numberOfTrailingZeros(u);return d>s?s:d}getNextUnset(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=~a[c];u&=~((1<<(r&31))-1);const h=a.length;for(;u===0;){if(++c===h)return s;u=~a[c]}const d=c*32+L.numberOfTrailingZeros(u);return d>s?s:d}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new _;if(s===r)return;s--;const a=Math.floor(r/32),c=Math.floor(s/32),u=this.bits;for(let h=a;h<=c;h++){const d=h>a?0:r&31,w=(2<<(h<c?31:s&31))-(1<<d);u[h]|=w}}clear(){const r=this.bits.length,s=this.bits;for(let a=0;a<r;a++)s[a]=0}isRange(r,s,a){if(s<r||r<0||s>this.size)throw new _;if(s===r)return!0;s--;const c=Math.floor(r/32),u=Math.floor(s/32),h=this.bits;for(let d=c;d<=u;d++){const y=d>c?0:r&31,C=(2<<(d<u?31:s&31))-(1<<y)&4294967295;if((h[d]&C)!==(a?C:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new _("Sizes don't match");const s=this.bits;for(let a=0,c=s.length;a<c;a++)s[a]^=r.bits[a]}toBytes(r,s,a,c){for(let u=0;u<c;u++){let h=0;for(let d=0;d<8;d++)this.get(r)&&(h|=1<<7-d),r++;s[a+u]=h}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,c=this.bits;for(let u=0;u<a;u++){let h=c[u];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,r[s-u]=h}if(this.size!==a*32){const u=a*32-this.size;let h=r[0]>>>u;for(let d=1;d<a;d++){const y=r[d];h|=y<<32-u,r[d-1]=h,h=y>>>u}r[a-1]=h}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof K))return!1;const s=r;return this.size===s.size&&B.equals(this.bits,s.bits)}hashCode(){return 31*this.size+B.hashCode(this.bits)}toString(){let r="";for(let s=0,a=this.size;s<a;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new K(this.size,this.bits.slice())}}var ae;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(ae||(ae={}));var te=ae;class b extends p{static getFormatInstance(){return new b}}b.kind="FormatException";var D;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(D||(D={}));class O{constructor(r,s,a,...c){this.valueIdentifier=r,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,O.VALUE_IDENTIFIER_TO_ECI.set(r,this),O.NAME_TO_ECI.set(a,this);const u=this.values;for(let h=0,d=u.length;h!==d;h++){const y=u[h];O.VALUES_TO_ECI.set(y,this)}for(const h of c)O.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new b("incorect value");const s=O.VALUES_TO_ECI.get(r);if(s===void 0)throw new b("incorect value");return s}static getCharacterSetECIByName(r){const s=O.NAME_TO_ECI.get(r);if(s===void 0)throw new b("incorect value");return s}equals(r){if(!(r instanceof O))return!1;const s=r;return this.getName()===s.getName()}}O.VALUE_IDENTIFIER_TO_ECI=new Map,O.VALUES_TO_ECI=new Map,O.NAME_TO_ECI=new Map,O.Cp437=new O(D.Cp437,Int32Array.from([0,2]),"Cp437"),O.ISO8859_1=new O(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),O.ISO8859_2=new O(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),O.ISO8859_3=new O(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),O.ISO8859_4=new O(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),O.ISO8859_5=new O(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),O.ISO8859_6=new O(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),O.ISO8859_7=new O(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),O.ISO8859_8=new O(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),O.ISO8859_9=new O(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),O.ISO8859_10=new O(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),O.ISO8859_11=new O(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),O.ISO8859_13=new O(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),O.ISO8859_14=new O(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),O.ISO8859_15=new O(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),O.ISO8859_16=new O(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),O.SJIS=new O(D.SJIS,20,"SJIS","Shift_JIS"),O.Cp1250=new O(D.Cp1250,21,"Cp1250","windows-1250"),O.Cp1251=new O(D.Cp1251,22,"Cp1251","windows-1251"),O.Cp1252=new O(D.Cp1252,23,"Cp1252","windows-1252"),O.Cp1256=new O(D.Cp1256,24,"Cp1256","windows-1256"),O.UnicodeBigUnmarked=new O(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),O.UTF8=new O(D.UTF8,26,"UTF8","UTF-8"),O.ASCII=new O(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),O.Big5=new O(D.Big5,28,"Big5"),O.GB18030=new O(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),O.EUC_KR=new O(D.EUC_KR,30,"EUC_KR","EUC-KR");class z extends p{}z.kind="UnsupportedOperationException";class H{static decode(r,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!H.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof O?r:O.getCharacterSetECIByName(r)}static decodeFallback(r,s){const a=this.encodingCharacterSet(s);if(H.isDecodeFallbackSupported(a)){let c="";for(let u=0,h=r.length;u<h;u++){let d=r[u].toString(16);d.length<2&&(d="0"+d),c+="%"+d}return decodeURIComponent(c)}if(a.equals(O.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new z(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(O.UTF8)||r.equals(O.ISO8859_1)||r.equals(O.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class Y{static castAsNonUtf8Char(r,s=null){const a=s?s.getName():this.ISO88591;return H.decode(new Uint8Array([r]),a)}static guessEncoding(r,s){if(s!=null&&s.get(te.CHARACTER_SET)!==void 0)return s.get(te.CHARACTER_SET).toString();const a=r.length;let c=!0,u=!0,h=!0,d=0,y=0,w=0,C=0,v=0,N=0,F=0,W=0,Q=0,Z=0,ne=0;const ue=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let he=0;he<a&&(c||u||h);he++){const le=r[he]&255;h&&(d>0?le&128?d--:h=!1:le&128&&(le&64?(d++,le&32?(d++,le&16?(d++,le&8?h=!1:C++):w++):y++):h=!1)),c&&(le>127&&le<160?c=!1:le>159&&(le<192||le===215||le===247)&&ne++),u&&(v>0?le<64||le===127||le>252?u=!1:v--:le===128||le===160||le>239?u=!1:le>160&&le<224?(N++,W=0,F++,F>Q&&(Q=F)):le>127?(v++,F=0,W++,W>Z&&(Z=W)):(F=0,W=0))}return h&&d>0&&(h=!1),u&&v>0&&(u=!1),h&&(ue||y+w+C>0)?Y.UTF8:u&&(Y.ASSUME_SHIFT_JIS||Q>=3||Z>=3)?Y.SHIFT_JIS:c&&u?Q===2&&N===2||ne*10>=a?Y.SHIFT_JIS:Y.ISO88591:c?Y.ISO88591:u?Y.SHIFT_JIS:h?Y.UTF8:Y.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let a=-1;function c(h,d,y,w,C,v){if(h==="%%")return"%";if(s[++a]===void 0)return;h=w?parseInt(w.substr(1)):void 0;let N=C?parseInt(C.substr(1)):void 0,F;switch(v){case"s":F=s[a];break;case"c":F=s[a][0];break;case"f":F=parseFloat(s[a]).toFixed(h);break;case"p":F=parseFloat(s[a]).toPrecision(h);break;case"e":F=parseFloat(s[a]).toExponential(h);break;case"x":F=parseInt(s[a]).toString(N||16);break;case"d":F=parseFloat(parseInt(s[a],N||10).toPrecision(h)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(N);let W=parseInt(y),Q=y&&y[0]+""=="0"?"0":" ";for(;F.length<W;)F=d!==void 0?F+Q:Q+F;return F}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,s){return H.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}Y.SHIFT_JIS=O.SJIS.getName(),Y.GB2312="GB2312",Y.ISO88591=O.ISO8859_1.getName(),Y.EUC_JP="EUC_JP",Y.UTF8=O.UTF8.getName(),Y.PLATFORM_DEFAULT_ENCODING=Y.UTF8,Y.ASSUME_SHIFT_JIS=!1;class U{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=Y.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,a){for(let c=s;s<s+a;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class He{constructor(r,s,a,c){if(this.width=r,this.height=s,this.rowSize=a,this.bits=c,s==null&&(s=r),this.height=s,r<1||s<1)throw new _("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,a=r[0].length,c=new He(a,s);for(let u=0;u<s;u++){const h=r[u];for(let d=0;d<a;d++)h[d]&&c.set(d,u)}return c}static parseFromString(r,s,a){if(r===null)throw new _("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,h=0,d=-1,y=0,w=0;for(;w<r.length;)if(r.charAt(w)===`
`||r.charAt(w)==="\r"){if(u>h){if(d===-1)d=u-h;else if(u-h!==d)throw new _("row lengths do not match");h=u,y++}w++}else if(r.substring(w,w+s.length)===s)w+=s.length,c[u]=!0,u++;else if(r.substring(w,w+a.length)===a)w+=a.length,c[u]=!1,u++;else throw new _("illegal character encountered: "+r.substring(w));if(u>h){if(d===-1)d=u-h;else if(u-h!==d)throw new _("row lengths do not match");y++}const C=new He(d,y);for(let v=0;v<u;v++)c[v]&&C.set(Math.floor(v%d),Math.floor(v/d));return C}get(r,s){const a=s*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new _("input matrix dimensions do not match");const s=new K(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,h=this.height;u<h;u++){const d=u*a,y=r.getRow(u,s).getBitArray();for(let w=0;w<a;w++)c[d+w]^=y[w]}}clear(){const r=this.bits,s=r.length;for(let a=0;a<s;a++)r[a]=0}setRegion(r,s,a,c){if(s<0||r<0)throw new _("Left and top must be nonnegative");if(c<1||a<1)throw new _("Height and width must be at least 1");const u=r+a,h=s+c;if(h>this.height||u>this.width)throw new _("The region must fit inside the matrix");const d=this.rowSize,y=this.bits;for(let w=s;w<h;w++){const C=w*d;for(let v=r;v<u;v++)y[C+Math.floor(v/32)]|=1<<(v&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new K(this.width):s.clear();const a=this.rowSize,c=this.bits,u=r*a;for(let h=0;h<a;h++)s.setBulk(h*32,c[u+h]);return s}setRow(r,s){G.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let a=new K(r),c=new K(r);for(let u=0,h=Math.floor((s+1)/2);u<h;u++)a=this.getRow(u,a),c=this.getRow(s-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(s-1-u,a)}getEnclosingRectangle(){const r=this.width,s=this.height,a=this.rowSize,c=this.bits;let u=r,h=s,d=-1,y=-1;for(let w=0;w<s;w++)for(let C=0;C<a;C++){const v=c[w*a+C];if(v!==0){if(w<h&&(h=w),w>y&&(y=w),C*32<u){let N=0;for(;!(v<<31-N&4294967295);)N++;C*32+N<u&&(u=C*32+N)}if(C*32+31>d){let N=31;for(;!(v>>>N);)N--;C*32+N>d&&(d=C*32+N)}}}return d<u||y<h?null:Int32Array.from([u,h,d-u+1,y-h+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const c=a/r;let u=a%r*32;const h=s[a];let d=0;for(;!(h<<31-d&4294967295);)d++;return u+=d,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/r);let u=Math.floor(a%r)*32;const h=s[a];let d=31;for(;!(h>>>d);)d--;return u+=d,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof He))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&B.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+B.hashCode(this.bits),r}toString(r="X ",s="  ",a=`
`){return this.buildToString(r,s,a)}buildToString(r,s,a){let c=new U;for(let u=0,h=this.height;u<h;u++){for(let d=0,y=this.width;d<y;d++)c.append(this.get(d,u)?r:s);c.append(a)}return c.toString()}clone(){return new He(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends p{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class Rt extends V{constructor(r){super(r),this.luminances=Rt.EMPTY,this.buckets=new Int32Array(Rt.LUMINANCE_BUCKETS)}getBlackRow(r,s){const a=this.getLuminanceSource(),c=a.getWidth();s==null||s.getSize()<c?s=new K(c):s.clear(),this.initArrays(c);const u=a.getRow(r,this.luminances),h=this.buckets;for(let y=0;y<c;y++)h[(u[y]&255)>>Rt.LUMINANCE_SHIFT]++;const d=Rt.estimateBlackPoint(h);if(c<3)for(let y=0;y<c;y++)(u[y]&255)<d&&s.set(y);else{let y=u[0]&255,w=u[1]&255;for(let C=1;C<c-1;C++){const v=u[C+1]&255;(w*4-y-v)/2<d&&s.set(C),y=w,w=v}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight(),c=new He(s,a);this.initArrays(s);const u=this.buckets;for(let y=1;y<5;y++){const w=Math.floor(a*y/5),C=r.getRow(w,this.luminances),v=Math.floor(s*4/5);for(let N=Math.floor(s/5);N<v;N++){const F=C[N]&255;u[F>>Rt.LUMINANCE_SHIFT]++}}const h=Rt.estimateBlackPoint(u),d=r.getMatrix();for(let y=0;y<a;y++){const w=y*s;for(let C=0;C<s;C++)(d[w+C]&255)<h&&c.set(C,y)}return c}createBinarizer(r){return new Rt(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let a=0;a<Rt.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(r){const s=r.length;let a=0,c=0,u=0;for(let C=0;C<s;C++)r[C]>u&&(c=C,u=r[C]),r[C]>a&&(a=r[C]);let h=0,d=0;for(let C=0;C<s;C++){const v=C-c,N=r[C]*v*v;N>d&&(h=C,d=N)}if(c>h){const C=c;c=h,h=C}if(h-c<=s/16)throw new re;let y=h-1,w=-1;for(let C=h-1;C>c;C--){const v=C-c,N=v*v*(h-C)*(a-r[C]);N>w&&(y=C,w=N)}return y<<Rt.LUMINANCE_SHIFT}}Rt.LUMINANCE_BITS=5,Rt.LUMINANCE_SHIFT=8-Rt.LUMINANCE_BITS,Rt.LUMINANCE_BUCKETS=1<<Rt.LUMINANCE_BITS,Rt.EMPTY=Uint8ClampedArray.from([0]);class be extends Rt{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight();if(s>=be.MINIMUM_DIMENSION&&a>=be.MINIMUM_DIMENSION){const c=r.getMatrix();let u=s>>be.BLOCK_SIZE_POWER;s&be.BLOCK_SIZE_MASK&&u++;let h=a>>be.BLOCK_SIZE_POWER;a&be.BLOCK_SIZE_MASK&&h++;const d=be.calculateBlackPoints(c,u,h,s,a),y=new He(s,a);be.calculateThresholdForBlock(c,u,h,s,a,d,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new be(r)}static calculateThresholdForBlock(r,s,a,c,u,h,d){const y=u-be.BLOCK_SIZE,w=c-be.BLOCK_SIZE;for(let C=0;C<a;C++){let v=C<<be.BLOCK_SIZE_POWER;v>y&&(v=y);const N=be.cap(C,2,a-3);for(let F=0;F<s;F++){let W=F<<be.BLOCK_SIZE_POWER;W>w&&(W=w);const Q=be.cap(F,2,s-3);let Z=0;for(let ue=-2;ue<=2;ue++){const he=h[N+ue];Z+=he[Q-2]+he[Q-1]+he[Q]+he[Q+1]+he[Q+2]}const ne=Z/25;be.thresholdBlock(r,W,v,ne,c,d)}}}static cap(r,s,a){return r<s?s:r>a?a:r}static thresholdBlock(r,s,a,c,u,h){for(let d=0,y=a*u+s;d<be.BLOCK_SIZE;d++,y+=u)for(let w=0;w<be.BLOCK_SIZE;w++)(r[y+w]&255)<=c&&h.set(s+w,a+d)}static calculateBlackPoints(r,s,a,c,u){const h=u-be.BLOCK_SIZE,d=c-be.BLOCK_SIZE,y=new Array(a);for(let w=0;w<a;w++){y[w]=new Int32Array(s);let C=w<<be.BLOCK_SIZE_POWER;C>h&&(C=h);for(let v=0;v<s;v++){let N=v<<be.BLOCK_SIZE_POWER;N>d&&(N=d);let F=0,W=255,Q=0;for(let ne=0,ue=C*c+N;ne<be.BLOCK_SIZE;ne++,ue+=c){for(let he=0;he<be.BLOCK_SIZE;he++){const le=r[ue+he]&255;F+=le,le<W&&(W=le),le>Q&&(Q=le)}if(Q-W>be.MIN_DYNAMIC_RANGE)for(ne++,ue+=c;ne<be.BLOCK_SIZE;ne++,ue+=c)for(let he=0;he<be.BLOCK_SIZE;he++)F+=r[ue+he]&255}let Z=F>>be.BLOCK_SIZE_POWER*2;if(Q-W<=be.MIN_DYNAMIC_RANGE&&(Z=W/2,w>0&&v>0)){const ne=(y[w-1][v]+2*y[w][v-1]+y[w-1][v-1])/4;W<ne&&(Z=ne)}y[w][v]=Z}}return y}}be.BLOCK_SIZE_POWER=3,be.BLOCK_SIZE=1<<be.BLOCK_SIZE_POWER,be.BLOCK_SIZE_MASK=be.BLOCK_SIZE-1,be.MINIMUM_DIMENSION=be.BLOCK_SIZE*5,be.MIN_DYNAMIC_RANGE=24;class pe{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,a,c){throw new z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new z("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new U;for(let a=0;a<this.height;a++){const c=this.getRow(a,r);for(let u=0;u<this.width;u++){const h=c[u]&255;let d;h<64?d="#":h<128?d="+":h<192?d=".":d=" ",s.append(d)}s.append(`
`)}return s.toString()}}class Te extends pe{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const a=this.delegate.getRow(r,s),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let c=0;c<s;c++)a[c]=255-(r[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,a,c){return new Te(this.delegate.crop(r,s,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Te(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Te(this.delegate.rotateCounterClockwise45())}}class Ne extends pe{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=Ne.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return Ne.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,a){const c=new Uint8ClampedArray(s*a);for(let u=0,h=0,d=r.length;u<d;u+=4,h++){let y;if(r[u+3]===0)y=255;else{const C=r[u],v=r[u+1],N=r[u+2];y=306*C+601*v+117*N+512>>10}c[h]=y}return c}getRow(r,s){if(r<0||r>=this.getHeight())throw new _("Requested row is outside the image: "+r);const a=this.getWidth(),c=r*a;return s===null?s=this.buffer.slice(c,c+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(c,c+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,a,c){return super.crop(r,s,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),a=s.getContext("2d"),c=r*Ne.DEGREE_TO_RADIANS,u=this.canvas.width,h=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*h),y=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*h);return s.width=d,s.height=y,a.translate(d/2,y/2),a.rotate(c),a.drawImage(this.canvas,u/-2,h/-2),this.buffer=Ne.makeBufferFromCanvasImageData(s),this}invert(){return new Te(this)}}Ne.DEGREE_TO_RADIANS=Math.PI/180;class pt{constructor(r,s,a){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ve=(globalThis||za||self||window||void 0)&&(globalThis||za||self||window||void 0).__awaiter||function(T,r,s,a){function c(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function d(C){try{w(a.next(C))}catch(v){h(v)}}function y(C){try{w(a.throw(C))}catch(v){h(v)}}function w(C){C.done?u(C.value):c(C.value).then(d,y)}w((a=a.apply(T,r||[])).next())})};class Ln{constructor(r,s=500,a){this.reader=r,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Ve(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of r){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,h=a.label||`Video device ${s.length+1}`,d=a.groupId,y={deviceId:u,label:h,kind:c,groupId:d};s.push(y)}return s})}getVideoInputDevices(){return Ve(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new pt(s.deviceId,s.label))})}findDeviceById(r){return Ve(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Ve(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Ve(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(r,s){return Ve(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(r,s){return Ve(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,s,a){return Ve(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,a)})}decodeFromVideoDevice(r,s,a){return Ve(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,s,a)})}decodeFromConstraints(r,s,a){return Ve(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,s,a)})}decodeFromStream(r,s,a){return Ve(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Ve(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((s,a)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Ve(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const a=document.getElementById(r);if(!a)throw new E(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new E(`element with id '${r}' must be an ${s} element`);return a}decodeFromImage(r,s){if(!r&&!s)throw new E("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new E("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,a){if(r===void 0&&s===void 0)throw new E("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new E("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(r){if(!r)throw new E("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new E("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=r,a}decodeFromVideoUrl(r){if(!r)throw new E("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=r,a}decodeFromVideoUrlContinuously(r,s){if(!r)throw new E("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,s);return a.src=r,c}_decodeOnLoadImage(r){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Ve(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Ve(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,h)=>{if(this._stopAsyncDecode){h(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(r);u(d)}catch(d){const y=s&&d instanceof re,C=(d instanceof P||d instanceof b)&&a;if(y||C)return setTimeout(c,this._timeBetweenDecodingAttempts,u,h);h(d)}};return new Promise((u,h)=>c(u,h))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);s(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){s(null,c);const u=c instanceof P||c instanceof b,h=c instanceof re;(u||h)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,a){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),a=new Ne(s),c=new be(a);return new S(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),s.style.width=a+"px",s.style.height=c+"px",s.width=a,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class dt{constructor(r,s,a=s==null?0:8*s.length,c,u,h=G.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=h,this.text=r,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,h==null?this.timestamp=G.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(s.length+r.length);G.arraycopy(s,0,a,0,s.length),G.arraycopy(r,0,a,s.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Pr;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Pr||(Pr={}));var Ae=Pr,mr;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(mr||(mr={}));var Vt=mr;class Hi{constructor(r,s,a,c,u=-1,h=-1){this.rawBytes=r,this.text=s,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=h,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Gi{exp(r){return this.expTable[r]}log(r){if(r===0)throw new _;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class vn{constructor(r,s){if(s.length===0)throw new _;this.field=r;const a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),G.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(r===1){a=0;for(let h=0,d=s.length;h!==d;h++){const y=s[h];a=Gi.addOrSubtract(a,y)}return a}a=s[0];const c=s.length,u=this.field;for(let h=1;h<c;h++)a=Gi.addOrSubtract(u.multiply(r,a),s[h]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){const h=s;s=a,a=h}let c=new Int32Array(a.length);const u=a.length-s.length;G.arraycopy(a,0,c,0,u);for(let h=u;h<a.length;h++)c[h]=Gi.addOrSubtract(s[h-u],a[h]);return new vn(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,h=new Int32Array(a+u-1),d=this.field;for(let y=0;y<a;y++){const w=s[y];for(let C=0;C<u;C++)h[y+C]=Gi.addOrSubtract(h[y+C],d.multiply(w,c[C]))}return new vn(d,h)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,a=this.field,c=new Int32Array(s),u=this.coefficients;for(let h=0;h<s;h++)c[h]=a.multiply(u[h],r);return new vn(a,c)}multiplyByMonomial(r,s){if(r<0)throw new _;if(s===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+r),h=this.field;for(let d=0;d<c;d++)u[d]=h.multiply(a[d],s);return new vn(h,u)}divide(r){if(!this.field.equals(r.field))throw new _("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new _("Divide by 0");const s=this.field;let a=s.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),h=s.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const d=c.getDegree()-r.getDegree(),y=s.multiply(c.getCoefficient(c.getDegree()),h),w=r.multiplyByMonomial(d,y),C=s.buildMonomial(d,y);a=a.addOrSubtract(C),c=c.addOrSubtract(w)}return[a,c]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),s===0||a!==1){const c=this.field.log(a);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Fs extends p{}Fs.kind="ArithmeticException";class Xe extends Gi{constructor(r,s,a){super(),this.primitive=r,this.size=s,this.generatorBase=a;const c=new Int32Array(s);let u=1;for(let d=0;d<s;d++)c[d]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=c;const h=new Int32Array(s);for(let d=0;d<s-1;d++)h[c[d]]=d;this.logTable=h,this.zero=new vn(this,Int32Array.from([0])),this.one=new vn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new _;if(s===0)return this.zero;const a=new Int32Array(r+1);return a[0]=s,new vn(this,a)}inverse(r){if(r===0)throw new Fs;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+L.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Xe.AZTEC_DATA_12=new Xe(4201,4096,1),Xe.AZTEC_DATA_10=new Xe(1033,1024,1),Xe.AZTEC_DATA_6=new Xe(67,64,1),Xe.AZTEC_PARAM=new Xe(19,16,1),Xe.QR_CODE_FIELD_256=new Xe(285,256,0),Xe.DATA_MATRIX_FIELD_256=new Xe(301,256,1),Xe.AZTEC_DATA_8=Xe.DATA_MATRIX_FIELD_256,Xe.MAXICODE_FIELD_64=Xe.AZTEC_DATA_6;class Zr extends p{}Zr.kind="ReedSolomonException";class ir extends p{}ir.kind="IllegalStateException";class Vs{constructor(r){this.field=r}decode(r,s){const a=this.field,c=new vn(a,r),u=new Int32Array(s);let h=!0;for(let F=0;F<s;F++){const W=c.evaluateAt(a.exp(F+a.getGeneratorBase()));u[u.length-1-F]=W,W!==0&&(h=!1)}if(h)return;const d=new vn(a,u),y=this.runEuclideanAlgorithm(a.buildMonomial(s,1),d,s),w=y[0],C=y[1],v=this.findErrorLocations(w),N=this.findErrorMagnitudes(C,v);for(let F=0;F<v.length;F++){const W=r.length-1-a.log(v[F]);if(W<0)throw new Zr("Bad error location");r[W]=Xe.addOrSubtract(r[W],N[F])}}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){const F=r;r=s,s=F}const c=this.field;let u=r,h=s,d=c.getZero(),y=c.getOne();for(;h.getDegree()>=(a/2|0);){let F=u,W=d;if(u=h,d=y,u.isZero())throw new Zr("r_{i-1} was zero");h=F;let Q=c.getZero();const Z=u.getCoefficient(u.getDegree()),ne=c.inverse(Z);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){const ue=h.getDegree()-u.getDegree(),he=c.multiply(h.getCoefficient(h.getDegree()),ne);Q=Q.addOrSubtract(c.buildMonomial(ue,he)),h=h.addOrSubtract(u.multiplyByMonomial(ue,he))}if(y=Q.multiply(d).addOrSubtract(W),h.getDegree()>=u.getDegree())throw new ir("Division algorithm failed to reduce polynomial?")}const w=y.getCoefficient(0);if(w===0)throw new Zr("sigmaTilde(0) was zero");const C=c.inverse(w),v=y.multiplyScalar(C),N=h.multiplyScalar(C);return[v,N]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(s);let c=0;const u=this.field;for(let h=1;h<u.getSize()&&c<s;h++)r.evaluateAt(h)===0&&(a[c]=u.inverse(h),c++);if(c!==s)throw new Zr("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,s){const a=s.length,c=new Int32Array(a),u=this.field;for(let h=0;h<a;h++){const d=u.inverse(s[h]);let y=1;for(let w=0;w<a;w++)if(h!==w){const C=u.multiply(s[w],d),v=C&1?C&-2:C|1;y=u.multiply(y,v)}c[h]=u.multiply(r.evaluateAt(d),u.inverse(y)),u.getGeneratorBase()!==0&&(c[h]=u.multiply(c[h],d))}return c}}var Ht;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(Ht||(Ht={}));class rt{decode(r){this.ddata=r;let s=r.getBits(),a=this.extractBits(s),c=this.correctBits(a),u=rt.convertBoolArrayToByteArray(c),h=rt.getEncodedData(c),d=new Hi(u,h,null,null);return d.setNumBits(c.length),d}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,a=Ht.UPPER,c=Ht.UPPER,u="",h=0;for(;h<s;)if(c===Ht.BINARY){if(s-h<5)break;let d=rt.readCode(r,h,5);if(h+=5,d===0){if(s-h<11)break;d=rt.readCode(r,h,11)+31,h+=11}for(let y=0;y<d;y++){if(s-h<8){h=s;break}const w=rt.readCode(r,h,8);u+=Y.castAsNonUtf8Char(w),h+=8}c=a}else{let d=c===Ht.DIGIT?4:5;if(s-h<d)break;let y=rt.readCode(r,h,d);h+=d;let w=rt.getCharacter(c,y);w.startsWith("CTRL_")?(a=c,c=rt.getTable(w.charAt(5)),w.charAt(6)==="L"&&(a=c)):(u+=w,c=a)}return u}static getTable(r){switch(r){case"L":return Ht.LOWER;case"P":return Ht.PUNCT;case"M":return Ht.MIXED;case"D":return Ht.DIGIT;case"B":return Ht.BINARY;case"U":default:return Ht.UPPER}}static getCharacter(r,s){switch(r){case Ht.UPPER:return rt.UPPER_TABLE[s];case Ht.LOWER:return rt.LOWER_TABLE[s];case Ht.MIXED:return rt.MIXED_TABLE[s];case Ht.PUNCT:return rt.PUNCT_TABLE[s];case Ht.DIGIT:return rt.DIGIT_TABLE[s];default:throw new ir("Bad table")}}correctBits(r){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=Xe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=Xe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=Xe.AZTEC_DATA_10):(a=12,s=Xe.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/a;if(u<c)throw new b;let h=r.length%a,d=new Int32Array(u);for(let N=0;N<u;N++,h+=a)d[N]=rt.readCode(r,h,a);try{new Vs(s).decode(d,u-c)}catch(N){throw new b(N)}let y=(1<<a)-1,w=0;for(let N=0;N<c;N++){let F=d[N];if(F===0||F===y)throw new b;(F===1||F===y-1)&&w++}let C=new Array(c*a-w),v=0;for(let N=0;N<c;N++){let F=d[N];if(F===1||F===y-1)C.fill(F>1,v,v+a-1),v+=a-1;else for(let W=a-1;W>=0;--W)C[v++]=(F&1<<W)!==0}return C}extractBits(r){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(s?11:14)+a*4,u=new Int32Array(c),h=new Array(this.totalBitsInLayer(a,s));if(s)for(let d=0;d<u.length;d++)u[d]=d;else{let d=c+1+2*L.truncDivision(L.truncDivision(c,2)-1,15),y=c/2,w=L.truncDivision(d,2);for(let C=0;C<y;C++){let v=C+L.truncDivision(C,15);u[y-C-1]=w-v-1,u[y+C]=w+v+1}}for(let d=0,y=0;d<a;d++){let w=(a-d)*4+(s?9:12),C=d*2,v=c-1-C;for(let N=0;N<w;N++){let F=N*2;for(let W=0;W<2;W++)h[y+F+W]=r.get(u[C+W],u[C+N]),h[y+2*w+F+W]=r.get(u[C+N],u[v-W]),h[y+4*w+F+W]=r.get(u[v-W],u[v-N]),h[y+6*w+F+W]=r.get(u[v-N],u[C+W])}y+=w*8}return h}static readCode(r,s,a){let c=0;for(let u=s;u<s+a;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,s){let a=r.length-s;return a>=8?rt.readCode(r,s,8):rt.readCode(r,s,a)<<8-a}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let a=0;a<s.length;a++)s[a]=rt.readByte(r,8*a);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ue{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,a,c){const u=r-a,h=s-c;return Math.sqrt(u*u+h*h)}static sum(r){let s=0;for(let a=0,c=r.length;a!==c;a++){const u=r[a];s+=u}return s}}class Gt{static floatToIntBits(r){return r}}Gt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ge{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof ge){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Gt.floatToIntBits(this.x)+Gt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,h,d;if(a>=s&&a>=c?(h=r[0],u=r[1],d=r[2]):c>=a&&c>=s?(h=r[1],u=r[0],d=r[2]):(h=r[2],u=r[0],d=r[1]),this.crossProductZ(u,h,d)<0){const y=u;u=d,d=y}r[0]=u,r[1]=h,r[2]=d}static distance(r,s){return Ue.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,a){const c=s.x,u=s.y;return(a.x-c)*(r.y-u)-(a.y-u)*(r.x-c)}}class wi{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class sc extends wi{constructor(r,s,a,c,u){super(r,s),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class yr{constructor(r,s,a,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=yr.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let r=this.leftInit,s=this.rightInit,a=this.upInit,c=this.downInit,u=!1,h=!0,d=!1,y=!1,w=!1,C=!1,v=!1;const N=this.width,F=this.height;for(;h;){h=!1;let W=!0;for(;(W||!y)&&s<N;)W=this.containsBlackPoint(a,c,s,!1),W?(s++,h=!0,y=!0):y||s++;if(s>=N){u=!0;break}let Q=!0;for(;(Q||!w)&&c<F;)Q=this.containsBlackPoint(r,s,c,!0),Q?(c++,h=!0,w=!0):w||c++;if(c>=F){u=!0;break}let Z=!0;for(;(Z||!C)&&r>=0;)Z=this.containsBlackPoint(a,c,r,!1),Z?(r--,h=!0,C=!0):C||r--;if(r<0){u=!0;break}let ne=!0;for(;(ne||!v)&&a>=0;)ne=this.containsBlackPoint(r,s,a,!0),ne?(a--,h=!0,v=!0):v||a--;if(a<0){u=!0;break}h&&(d=!0)}if(!u&&d){const W=s-r;let Q=null;for(let he=1;Q===null&&he<W;he++)Q=this.getBlackPointOnSegment(r,c-he,r+he,c);if(Q==null)throw new re;let Z=null;for(let he=1;Z===null&&he<W;he++)Z=this.getBlackPointOnSegment(r,a+he,r+he,a);if(Z==null)throw new re;let ne=null;for(let he=1;ne===null&&he<W;he++)ne=this.getBlackPointOnSegment(s,a+he,s-he,a);if(ne==null)throw new re;let ue=null;for(let he=1;ue===null&&he<W;he++)ue=this.getBlackPointOnSegment(s,c-he,s-he,c);if(ue==null)throw new re;return this.centerEdges(ue,Q,ne,Z)}else throw new re}getBlackPointOnSegment(r,s,a,c){const u=Ue.round(Ue.distance(r,s,a,c)),h=(a-r)/u,d=(c-s)/u,y=this.image;for(let w=0;w<u;w++){const C=Ue.round(r+w*h),v=Ue.round(s+w*d);if(y.get(C,v))return new ge(C,v)}return null}centerEdges(r,s,a,c){const u=r.getX(),h=r.getY(),d=s.getX(),y=s.getY(),w=a.getX(),C=a.getY(),v=c.getX(),N=c.getY(),F=yr.CORR;return u<this.width/2?[new ge(v-F,N+F),new ge(d+F,y+F),new ge(w-F,C-F),new ge(u+F,h-F)]:[new ge(v+F,N+F),new ge(d+F,y-F),new ge(w-F,C+F),new ge(u-F,h-F)]}containsBlackPoint(r,s,a,c){const u=this.image;if(c){for(let h=r;h<=s;h++)if(u.get(h,a))return!0}else for(let h=r;h<=s;h++)if(u.get(a,h))return!0;return!1}}yr.INIT_SIZE=10,yr.CORR=1;class Ra{static checkAndNudgePoints(r,s){const a=r.getWidth(),c=r.getHeight();let u=!0;for(let h=0;h<s.length&&u;h+=2){const d=Math.floor(s[h]),y=Math.floor(s[h+1]);if(d<-1||d>a||y<-1||y>c)throw new re;u=!1,d===-1?(s[h]=0,u=!0):d===a&&(s[h]=a-1,u=!0),y===-1?(s[h+1]=0,u=!0):y===c&&(s[h+1]=c-1,u=!0)}u=!0;for(let h=s.length-2;h>=0&&u;h-=2){const d=Math.floor(s[h]),y=Math.floor(s[h+1]);if(d<-1||d>a||y<-1||y>c)throw new re;u=!1,d===-1?(s[h]=0,u=!0):d===a&&(s[h]=a-1,u=!0),y===-1?(s[h+1]=0,u=!0):y===c&&(s[h+1]=c-1,u=!0)}}}class pn{constructor(r,s,a,c,u,h,d,y,w){this.a11=r,this.a21=s,this.a31=a,this.a12=c,this.a22=u,this.a32=h,this.a13=d,this.a23=y,this.a33=w}static quadrilateralToQuadrilateral(r,s,a,c,u,h,d,y,w,C,v,N,F,W,Q,Z){const ne=pn.quadrilateralToSquare(r,s,a,c,u,h,d,y);return pn.squareToQuadrilateral(w,C,v,N,F,W,Q,Z).times(ne)}transformPoints(r){const s=r.length,a=this.a11,c=this.a12,u=this.a13,h=this.a21,d=this.a22,y=this.a23,w=this.a31,C=this.a32,v=this.a33;for(let N=0;N<s;N+=2){const F=r[N],W=r[N+1],Q=u*F+y*W+v;r[N]=(a*F+h*W+w)/Q,r[N+1]=(c*F+d*W+C)/Q}}transformPointsWithValues(r,s){const a=this.a11,c=this.a12,u=this.a13,h=this.a21,d=this.a22,y=this.a23,w=this.a31,C=this.a32,v=this.a33,N=r.length;for(let F=0;F<N;F++){const W=r[F],Q=s[F],Z=u*W+y*Q+v;r[F]=(a*W+h*Q+w)/Z,s[F]=(c*W+d*Q+C)/Z}}static squareToQuadrilateral(r,s,a,c,u,h,d,y){const w=r-a+u-d,C=s-c+h-y;if(w===0&&C===0)return new pn(a-r,u-a,r,c-s,h-c,s,0,0,1);{const v=a-u,N=d-u,F=c-h,W=y-h,Q=v*W-N*F,Z=(w*W-N*C)/Q,ne=(v*C-w*F)/Q;return new pn(a-r+Z*a,d-r+ne*d,r,c-s+Z*c,y-s+ne*y,s,Z,ne,1)}}static quadrilateralToSquare(r,s,a,c,u,h,d,y){return pn.squareToQuadrilateral(r,s,a,c,u,h,d,y).buildAdjoint()}buildAdjoint(){return new pn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new pn(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class ba extends Ra{sampleGrid(r,s,a,c,u,h,d,y,w,C,v,N,F,W,Q,Z,ne,ue,he){const le=pn.quadrilateralToQuadrilateral(c,u,h,d,y,w,C,v,N,F,W,Q,Z,ne,ue,he);return this.sampleGridWithTransform(r,s,a,le)}sampleGridWithTransform(r,s,a,c){if(s<=0||a<=0)throw new re;const u=new He(s,a),h=new Float32Array(2*s);for(let d=0;d<a;d++){const y=h.length,w=d+.5;for(let C=0;C<y;C+=2)h[C]=C/2+.5,h[C+1]=w;c.transformPoints(h),Ra.checkAndNudgePoints(r,h);try{for(let C=0;C<y;C+=2)r.get(Math.floor(h[C]),Math.floor(h[C+1]))&&u.set(C/2,d)}catch{throw new re}}return u}}class kr{static setGridSampler(r){kr.gridSampler=r}static getInstance(){return kr.gridSampler}}kr.gridSampler=new ba;class en{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new ge(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class oc{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(r){let h=a[0];a[0]=a[2],a[2]=h}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new sc(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new re;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(a,s);let c=0;for(let h=0;h<4;h++){let d=a[(this.shift+h)%4];this.compact?(c<<=7,c+=d>>1&127):(c<<=10,c+=(d>>2&992)+(d>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let a=0;r.forEach((c,u,h)=>{let d=(c>>s-2<<1)+(c&1);a=(a<<3)+d}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(L.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new re}getCorrectedParameterData(r,s){let a,c;s?(a=7,c=2):(a=10,c=4);let u=a-c,h=new Int32Array(a);for(let y=a-1;y>=0;--y)h[y]=r&15,r>>=4;try{new Vs(Xe.AZTEC_PARAM).decode(h,u)}catch{throw new re}let d=0;for(let y=0;y<c;y++)d=(d<<4)+h[y];return d}getBullsEyeCorners(r){let s=r,a=r,c=r,u=r,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let v=this.getFirstDifferent(s,h,1,-1),N=this.getFirstDifferent(a,h,1,1),F=this.getFirstDifferent(c,h,-1,1),W=this.getFirstDifferent(u,h,-1,-1);if(this.nbCenterLayers>2){let Q=this.distancePoint(W,v)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(Q<.75||Q>1.25||!this.isWhiteOrBlackRectangle(v,N,F,W))break}s=v,a=N,c=F,u=W,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let d=new ge(s.getX()+.5,s.getY()-.5),y=new ge(a.getX()+.5,a.getY()+.5),w=new ge(c.getX()-.5,c.getY()+.5),C=new ge(u.getX()-.5,u.getY()-.5);return this.expandSquare([d,y,w,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,a,c;try{let d=new yr(this.image).detect();r=d[0],s=d[1],a=d[2],c=d[3]}catch{let y=this.image.getWidth()/2,w=this.image.getHeight()/2;r=this.getFirstDifferent(new en(y+7,w-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new en(y+7,w+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new en(y-7,w+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new en(y-7,w-7),!1,-1,-1).toResultPoint()}let u=Ue.round((r.getX()+c.getX()+s.getX()+a.getX())/4),h=Ue.round((r.getY()+c.getY()+s.getY()+a.getY())/4);try{let d=new yr(this.image,15,u,h).detect();r=d[0],s=d[1],a=d[2],c=d[3]}catch{r=this.getFirstDifferent(new en(u+7,h-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new en(u+7,h+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new en(u-7,h+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new en(u-7,h-7),!1,-1,-1).toResultPoint()}return u=Ue.round((r.getX()+c.getX()+s.getX()+a.getX())/4),h=Ue.round((r.getY()+c.getY()+s.getY()+a.getY())/4),new en(u,h)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,a,c,u){let h=kr.getInstance(),d=this.getDimension(),y=d/2-this.nbCenterLayers,w=d/2+this.nbCenterLayers;return h.sampleGrid(r,d,d,y,y,w,y,w,w,y,w,s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,s,a){let c=0,u=this.distanceResultPoint(r,s),h=u/a,d=r.getX(),y=r.getY(),w=h*(s.getX()-r.getX())/u,C=h*(s.getY()-r.getY())/u;for(let v=0;v<a;v++)this.image.get(Ue.round(d+v*w),Ue.round(y+v*C))&&(c|=1<<a-v-1);return c}isWhiteOrBlackRectangle(r,s,a,c){let u=3;r=new en(r.getX()-u,r.getY()+u),s=new en(s.getX()-u,s.getY()-u),a=new en(a.getX()+u,a.getY()-u),c=new en(c.getX()+u,c.getY()+u);let h=this.getColor(c,r);if(h===0)return!1;let d=this.getColor(r,s);return d!==h||(d=this.getColor(s,a),d!==h)?!1:(d=this.getColor(a,c),d===h)}getColor(r,s){let a=this.distancePoint(r,s),c=(s.getX()-r.getX())/a,u=(s.getY()-r.getY())/a,h=0,d=r.getX(),y=r.getY(),w=this.image.get(r.getX(),r.getY()),C=Math.ceil(a);for(let N=0;N<C;N++)d+=c,y+=u,this.image.get(Ue.round(d),Ue.round(y))!==w&&h++;let v=h/a;return v>.1&&v<.9?0:v<=.1===w?1:-1}getFirstDifferent(r,s,a,c){let u=r.getX()+a,h=r.getY()+c;for(;this.isValid(u,h)&&this.image.get(u,h)===s;)u+=a,h+=c;for(u-=a,h-=c;this.isValid(u,h)&&this.image.get(u,h)===s;)u+=a;for(u-=a;this.isValid(u,h)&&this.image.get(u,h)===s;)h+=c;return h-=c,new en(u,h)}expandSquare(r,s,a){let c=a/(2*s),u=r[0].getX()-r[2].getX(),h=r[0].getY()-r[2].getY(),d=(r[0].getX()+r[2].getX())/2,y=(r[0].getY()+r[2].getY())/2,w=new ge(d+c*u,y+c*h),C=new ge(d-c*u,y-c*h);u=r[1].getX()-r[3].getX(),h=r[1].getY()-r[3].getY(),d=(r[1].getX()+r[3].getX())/2,y=(r[1].getY()+r[3].getY())/2;let v=new ge(d+c*u,y+c*h),N=new ge(d-c*u,y-c*h);return[w,v,C,N]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=Ue.round(r.getX()),a=Ue.round(r.getY());return this.isValid(s,a)}distancePoint(r,s){return Ue.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return Ue.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(L.truncDivision(this.nbLayers-4,8)+1)+15}}class xo{decode(r,s=null){let a=null,c=new oc(r.getBlackMatrix()),u=null,h=null;try{let C=c.detectMirror(!1);u=C.getPoints(),this.reportFoundResultPoints(s,u),h=new rt().decode(C)}catch(C){a=C}if(h==null)try{let C=c.detectMirror(!0);u=C.getPoints(),this.reportFoundResultPoints(s,u),h=new rt().decode(C)}catch(C){throw a??C}let d=new dt(h.getText(),h.getRawBytes(),h.getNumBits(),u,Ae.AZTEC,G.currentTimeMillis()),y=h.getByteSegments();y!=null&&d.putMetadata(Vt.BYTE_SEGMENTS,y);let w=h.getECLevel();return w!=null&&d.putMetadata(Vt.ERROR_CORRECTION_LEVEL,w),d}reportFoundResultPoints(r,s){if(r!=null){let a=r.get(te.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((c,u,h)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class ac extends Ln{constructor(r=500){super(new xo,r)}}class Dt{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(te.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),h=this.doDecode(u,s),d=h.getResultMetadata();let y=270;d!==null&&d.get(Vt.ORIENTATION)===!0&&(y=y+d.get(Vt.ORIENTATION)%360),h.putMetadata(Vt.ORIENTATION,y);const w=h.getResultPoints();if(w!==null){const C=u.getHeight();for(let v=0;v<w.length;v++)w[v]=new ge(C-w[v].getY()-1,w[v].getX())}return h}else throw new re}}reset(){}doDecode(r,s){const a=r.getWidth(),c=r.getHeight();let u=new K(a);const h=s&&s.get(te.TRY_HARDER)===!0,d=Math.max(1,c>>(h?8:5));let y;h?y=c:y=15;const w=Math.trunc(c/2);for(let C=0;C<y;C++){const v=Math.trunc((C+1)/2),N=(C&1)===0,F=w+d*(N?v:-v);if(F<0||F>=c)break;try{u=r.getBlackRow(F,u)}catch{continue}for(let W=0;W<2;W++){if(W===1&&(u.reverse(),s&&s.get(te.NEED_RESULT_POINT_CALLBACK)===!0)){const Q=new Map;s.forEach((Z,ne)=>Q.set(ne,Z)),Q.delete(te.NEED_RESULT_POINT_CALLBACK),s=Q}try{const Q=this.decodeRow(F,u,s);if(W===1){Q.putMetadata(Vt.ORIENTATION,180);const Z=Q.getResultPoints();Z!==null&&(Z[0]=new ge(a-Z[0].getX()-1,Z[0].getY()),Z[1]=new ge(a-Z[1].getX()-1,Z[1].getY()))}return Q}catch{}}}throw new re}static recordPattern(r,s,a){const c=a.length;for(let w=0;w<c;w++)a[w]=0;const u=r.getSize();if(s>=u)throw new re;let h=!r.get(s),d=0,y=s;for(;y<u;){if(r.get(y)!==h)a[d]++;else{if(++d===c)break;a[d]=1,h=!h}y++}if(!(d===c||d===c-1&&y===u))throw new re}static recordPatternInReverse(r,s,a){let c=a.length,u=r.get(s);for(;s>0&&c>=0;)r.get(--s)!==u&&(c--,u=!u);if(c>=0)throw new re;Dt.recordPattern(r,s+1,a)}static patternMatchVariance(r,s,a){const c=r.length;let u=0,h=0;for(let w=0;w<c;w++)u+=r[w],h+=s[w];if(u<h)return Number.POSITIVE_INFINITY;const d=u/h;a*=d;let y=0;for(let w=0;w<c;w++){const C=r[w],v=s[w]*d,N=C>v?C-v:v-C;if(N>a)return Number.POSITIVE_INFINITY;y+=N}return y/u}}class fe extends Dt{static findStartPattern(r){const s=r.getSize(),a=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),h=a,d=!1;const y=6;for(let w=a;w<s;w++)if(r.get(w)!==d)u[c]++;else{if(c===y-1){let C=fe.MAX_AVG_VARIANCE,v=-1;for(let N=fe.CODE_START_A;N<=fe.CODE_START_C;N++){const F=Dt.patternMatchVariance(u,fe.CODE_PATTERNS[N],fe.MAX_INDIVIDUAL_VARIANCE);F<C&&(C=F,v=N)}if(v>=0&&r.isRange(Math.max(0,h-(w-h)/2),h,!1))return Int32Array.from([h,w,v]);h+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,d=!d}throw new re}static decodeCode(r,s,a){Dt.recordPattern(r,a,s);let c=fe.MAX_AVG_VARIANCE,u=-1;for(let h=0;h<fe.CODE_PATTERNS.length;h++){const d=fe.CODE_PATTERNS[h],y=this.patternMatchVariance(s,d,fe.MAX_INDIVIDUAL_VARIANCE);y<c&&(c=y,u=h)}if(u>=0)return u;throw new re}decodeRow(r,s,a){const c=a&&a.get(te.ASSUME_GS1)===!0,u=fe.findStartPattern(s),h=u[2];let d=0;const y=new Uint8Array(20);y[d++]=h;let w;switch(h){case fe.CODE_START_A:w=fe.CODE_CODE_A;break;case fe.CODE_START_B:w=fe.CODE_CODE_B;break;case fe.CODE_START_C:w=fe.CODE_CODE_C;break;default:throw new b}let C=!1,v=!1,N="",F=u[0],W=u[1];const Q=Int32Array.from([0,0,0,0,0,0]);let Z=0,ne=0,ue=h,he=0,le=!0,Ge=!1,Be=!1;for(;!C;){const bo=v;switch(v=!1,Z=ne,ne=fe.decodeCode(s,Q,W),y[d++]=ne,ne!==fe.CODE_STOP&&(le=!0),ne!==fe.CODE_STOP&&(he++,ue+=he*ne),F=W,W+=Q.reduce((Sw,Nw)=>Sw+Nw,0),ne){case fe.CODE_START_A:case fe.CODE_START_B:case fe.CODE_START_C:throw new b}switch(w){case fe.CODE_CODE_A:if(ne<64)Be===Ge?N+=String.fromCharCode(" ".charCodeAt(0)+ne):N+=String.fromCharCode(" ".charCodeAt(0)+ne+128),Be=!1;else if(ne<96)Be===Ge?N+=String.fromCharCode(ne-64):N+=String.fromCharCode(ne+64),Be=!1;else switch(ne!==fe.CODE_STOP&&(le=!1),ne){case fe.CODE_FNC_1:c&&(N.length===0?N+="]C1":N+=String.fromCharCode(29));break;case fe.CODE_FNC_2:case fe.CODE_FNC_3:break;case fe.CODE_FNC_4_A:!Ge&&Be?(Ge=!0,Be=!1):Ge&&Be?(Ge=!1,Be=!1):Be=!0;break;case fe.CODE_SHIFT:v=!0,w=fe.CODE_CODE_B;break;case fe.CODE_CODE_B:w=fe.CODE_CODE_B;break;case fe.CODE_CODE_C:w=fe.CODE_CODE_C;break;case fe.CODE_STOP:C=!0;break}break;case fe.CODE_CODE_B:if(ne<96)Be===Ge?N+=String.fromCharCode(" ".charCodeAt(0)+ne):N+=String.fromCharCode(" ".charCodeAt(0)+ne+128),Be=!1;else switch(ne!==fe.CODE_STOP&&(le=!1),ne){case fe.CODE_FNC_1:c&&(N.length===0?N+="]C1":N+=String.fromCharCode(29));break;case fe.CODE_FNC_2:case fe.CODE_FNC_3:break;case fe.CODE_FNC_4_B:!Ge&&Be?(Ge=!0,Be=!1):Ge&&Be?(Ge=!1,Be=!1):Be=!0;break;case fe.CODE_SHIFT:v=!0,w=fe.CODE_CODE_A;break;case fe.CODE_CODE_A:w=fe.CODE_CODE_A;break;case fe.CODE_CODE_C:w=fe.CODE_CODE_C;break;case fe.CODE_STOP:C=!0;break}break;case fe.CODE_CODE_C:if(ne<100)ne<10&&(N+="0"),N+=ne;else switch(ne!==fe.CODE_STOP&&(le=!1),ne){case fe.CODE_FNC_1:c&&(N.length===0?N+="]C1":N+=String.fromCharCode(29));break;case fe.CODE_CODE_A:w=fe.CODE_CODE_A;break;case fe.CODE_CODE_B:w=fe.CODE_CODE_B;break;case fe.CODE_STOP:C=!0;break}break}bo&&(w=w===fe.CODE_CODE_A?fe.CODE_CODE_B:fe.CODE_CODE_A)}const Qn=W-F;if(W=s.getNextUnset(W),!s.isRange(W,Math.min(s.getSize(),W+(W-F)/2),!1))throw new re;if(ue-=he*Z,ue%103!==Z)throw new P;const Ur=N.length;if(Ur===0)throw new re;Ur>0&&le&&(w===fe.CODE_CODE_C?N=N.substring(0,Ur-2):N=N.substring(0,Ur-1));const Kn=(u[1]+u[0])/2,xt=F+Qn/2,wn=y.length,sr=new Uint8Array(wn);for(let bo=0;bo<wn;bo++)sr[bo]=y[bo];const Ro=[new ge(Kn,r),new ge(xt,r)];return new dt(N,sr,0,Ro,Ae.CODE_128,new Date().getTime())}}fe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],fe.MAX_AVG_VARIANCE=.25,fe.MAX_INDIVIDUAL_VARIANCE=.7,fe.CODE_SHIFT=98,fe.CODE_CODE_C=99,fe.CODE_CODE_B=100,fe.CODE_CODE_A=101,fe.CODE_FNC_1=102,fe.CODE_FNC_2=97,fe.CODE_FNC_3=96,fe.CODE_FNC_4_A=101,fe.CODE_FNC_4_B=100,fe.CODE_START_A=103,fe.CODE_START_B=104,fe.CODE_START_C=105,fe.CODE_STOP=106;class Mt extends Dt{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Mt.findAsteriskPattern(s,c),h=s.getNextSet(u[1]),d=s.getSize(),y,w;do{Mt.recordPattern(s,h,c);let Q=Mt.toNarrowWidePattern(c);if(Q<0)throw new re;y=Mt.patternToChar(Q),this.decodeRowResult+=y,w=h;for(let Z of c)h+=Z;h=s.getNextSet(h)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let Q of c)C+=Q;let v=h-w-C;if(h!==d&&v*2<C)throw new re;if(this.usingCheckDigit){let Q=this.decodeRowResult.length-1,Z=0;for(let ne=0;ne<Q;ne++)Z+=Mt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ne));if(this.decodeRowResult.charAt(Q)!==Mt.ALPHABET_STRING.charAt(Z%43))throw new P;this.decodeRowResult=this.decodeRowResult.substring(0,Q)}if(this.decodeRowResult.length===0)throw new re;let N;this.extendedMode?N=Mt.decodeExtended(this.decodeRowResult):N=this.decodeRowResult;let F=(u[1]+u[0])/2,W=w+C/2;return new dt(N,null,0,[new ge(F,r),new ge(W,r)],Ae.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let a=r.getSize(),c=r.getNextSet(0),u=0,h=c,d=!1,y=s.length;for(let w=c;w<a;w++)if(r.get(w)!==d)s[u]++;else{if(u===y-1){if(this.toNarrowWidePattern(s)===Mt.ASTERISK_ENCODING&&r.isRange(Math.max(0,h-Math.floor((w-h)/2)),h,!1))return[h,w];h+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,d=!d}throw new re}static toNarrowWidePattern(r){let s=r.length,a=0,c;do{let u=2147483647;for(let y of r)y<u&&y>a&&(u=y);a=u,c=0;let h=0,d=0;for(let y=0;y<s;y++){let w=r[y];w>a&&(d|=1<<s-1-y,c++,h+=w)}if(c===3){for(let y=0;y<s&&c>0;y++){let w=r[y];if(w>a&&(c--,w*2>=h))return-1}return d}}while(c>3);return-1}static patternToChar(r){for(let s=0;s<Mt.CHARACTER_ENCODINGS.length;s++)if(Mt.CHARACTER_ENCODINGS[s]===r)return Mt.ALPHABET_STRING.charAt(s);if(r===Mt.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(r){let s=r.length,a="";for(let c=0;c<s;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let h=r.charAt(c+1),d="\0";switch(u){case"+":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)+32);else throw new b;break;case"$":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)-64);else throw new b;break;case"%":if(h>="A"&&h<="E")d=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")d=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")d=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")d="\0";else if(h==="V")d="@";else if(h==="W")d="`";else if(h==="X"||h==="Y"||h==="Z")d="";else throw new b;break;case"/":if(h>="A"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")d=":";else throw new b;break}a+=d,c++}else a+=u}return a}}Mt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Mt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Mt.ASTERISK_ENCODING=148;class nt extends Dt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,a){let c=this.decodeStart(s),u=this.decodeEnd(s),h=new U;nt.decodeMiddle(s,c[1],u[0],h);let d=h.toString(),y=null;a!=null&&(y=a.get(te.ALLOWED_LENGTHS)),y==null&&(y=nt.DEFAULT_ALLOWED_LENGTHS);let w=d.length,C=!1,v=0;for(let W of y){if(w===W){C=!0;break}W>v&&(v=W)}if(!C&&w>v&&(C=!0),!C)throw new b;const N=[new ge(c[1],r),new ge(u[0],r)];return new dt(d,null,0,N,Ae.ITF,new Date().getTime())}static decodeMiddle(r,s,a,c){let u=new Int32Array(10),h=new Int32Array(5),d=new Int32Array(5);for(u.fill(0),h.fill(0),d.fill(0);s<a;){Dt.recordPattern(r,s,u);for(let w=0;w<5;w++){let C=2*w;h[w]=u[C],d[w]=u[C+1]}let y=nt.decodeDigit(h);c.append(y.toString()),y=this.decodeDigit(d),c.append(y.toString()),u.forEach(function(w){s+=w})}}decodeStart(r){let s=nt.skipWhiteSpace(r),a=nt.findGuardPattern(r,s,nt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let c=s-1;a>0&&c>=0&&!r.get(c);c--)a--;if(a!==0)throw new re}static skipWhiteSpace(r){const s=r.getSize(),a=r.getNextSet(0);if(a===s)throw new re;return a}decodeEnd(r){r.reverse();try{let s=nt.skipWhiteSpace(r),a;try{a=nt.findGuardPattern(r,s,nt.END_PATTERN_REVERSED[0])}catch(u){u instanceof re&&(a=nt.findGuardPattern(r,s,nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let c=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-c,a}finally{r.reverse()}}static findGuardPattern(r,s,a){let c=a.length,u=new Int32Array(c),h=r.getSize(),d=!1,y=0,w=s;u.fill(0);for(let C=s;C<h;C++)if(r.get(C)!==d)u[y]++;else{if(y===c-1){if(Dt.patternMatchVariance(u,a,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return[w,C];w+=u[0]+u[1],G.arraycopy(u,2,u,0,y-1),u[y-1]=0,u[y]=0,y--}else y++;u[y]=1,d=!d}throw new re}static decodeDigit(r){let s=nt.MAX_AVG_VARIANCE,a=-1,c=nt.PATTERNS.length;for(let u=0;u<c;u++){let h=nt.PATTERNS[u],d=Dt.patternMatchVariance(r,h,nt.MAX_INDIVIDUAL_VARIANCE);d<s?(s=d,a=u):d===s&&(a=-1)}if(a>=0)return a%10;throw new re}}nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],nt.MAX_AVG_VARIANCE=.38,nt.MAX_INDIVIDUAL_VARIANCE=.5,nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],nt.START_PATTERN=Int32Array.from([1,1,1,1]),nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class it extends Dt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),a=it.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let h=a[0];c=a[1];let d=h-(c-h);d>=0&&(s=r.isRange(d,h,!1))}return a}static checkChecksum(r){return it.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return it.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new b;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new b;a+=u}return(1e3-a)%10}static decodeEnd(r,s){return it.findGuardPattern(r,s,!1,it.START_END_PATTERN,new Int32Array(it.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,a,c){return this.findGuardPattern(r,s,a,c,new Int32Array(c.length))}static findGuardPattern(r,s,a,c,u){let h=r.getSize();s=a?r.getNextUnset(s):r.getNextSet(s);let d=0,y=s,w=c.length,C=a;for(let v=s;v<h;v++)if(r.get(v)!==C)u[d]++;else{if(d===w-1){if(Dt.patternMatchVariance(u,c,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return Int32Array.from([y,v]);y+=u[0]+u[1];let N=u.slice(2,u.length-1);for(let F=0;F<d-1;F++)u[F]=N[F];u[d-1]=0,u[d]=0,d--}else d++;u[d]=1,C=!C}throw new re}static decodeDigit(r,s,a,c){this.recordPattern(r,a,s);let u=this.MAX_AVG_VARIANCE,h=-1,d=c.length;for(let y=0;y<d;y++){let w=c[y],C=Dt.patternMatchVariance(s,w,it.MAX_INDIVIDUAL_VARIANCE);C<u&&(u=C,h=y)}if(h>=0)return h;throw new re}}it.MAX_AVG_VARIANCE=.48,it.MAX_INDIVIDUAL_VARIANCE=.7,it.START_END_PATTERN=Int32Array.from([1,1,1]),it.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),it.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),it.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Wi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),h=c.toString(),d=Wi.parseExtensionString(h),y=[new ge((a[0]+a[1])/2,r),new ge(u,r)],w=new dt(h,null,0,y,Ae.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&w.putAllMetadata(d),w}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1],d=0;for(let w=0;w<5&&h<u;w++){let C=it.decodeDigit(r,c,h,it.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let v of c)h+=v;C>=10&&(d|=1<<4-w),w!==4&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(a.length!==5)throw new re;let y=this.determineCheckDigit(d);if(Wi.extensionChecksum(a.toString())!==y)throw new re;return h}static extensionChecksum(r){let s=r.length,a=0;for(let c=s-2;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);a*=3;for(let c=s-1;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);return a*=3,a%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new re}static parseExtensionString(r){if(r.length!==5)return null;let s=Wi.parseExtension5String(r);return s==null?null:new Map([[Vt.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(r.substring(1)),c=(a/100).toString(),u=a%100,h=u<10?"0"+u:u.toString();return s+c+"."+h}}class Yi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),h=c.toString(),d=Yi.parseExtensionString(h),y=[new ge((a[0]+a[1])/2,r),new ge(u,r)],w=new dt(h,null,0,y,Ae.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&w.putAllMetadata(d),w}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1],d=0;for(let y=0;y<2&&h<u;y++){let w=it.decodeDigit(r,c,h,it.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+w%10);for(let C of c)h+=C;w>=10&&(d|=1<<1-y),y!==1&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(a.length!==2)throw new re;if(parseInt(a.toString())%4!==d)throw new re;return h}static parseExtensionString(r){return r.length!==2?null:new Map([[Vt.ISSUE_NUMBER,parseInt(r)]])}}class Da{static decodeRow(r,s,a){let c=it.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Wi().decodeRow(r,s,c)}catch{return new Yi().decodeRow(r,s,c)}}}Da.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class je extends it{constructor(){super(),this.decodeRowStringBuffer="",je.L_AND_G_PATTERNS=je.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=je.L_PATTERNS[r-10],a=new Int32Array(s.length);for(let c=0;c<s.length;c++)a[c]=s[s.length-c-1];je.L_AND_G_PATTERNS[r]=a}}decodeRow(r,s,a){let c=je.findStartGuardPattern(s),u=a==null?null:a.get(te.NEED_RESULT_POINT_CALLBACK);if(u!=null){const le=new ge((c[0]+c[1])/2,r);u.foundPossibleResultPoint(le)}let h=this.decodeMiddle(s,c,this.decodeRowStringBuffer),d=h.rowOffset,y=h.resultString;if(u!=null){const le=new ge(d,r);u.foundPossibleResultPoint(le)}let w=this.decodeEnd(s,d);if(u!=null){const le=new ge((w[0]+w[1])/2,r);u.foundPossibleResultPoint(le)}let C=w[1],v=C+(C-w[0]);if(v>=s.getSize()||!s.isRange(C,v,!1))throw new re;let N=y.toString();if(N.length<8)throw new b;if(!je.checkChecksum(N))throw new P;let F=(c[1]+c[0])/2,W=(w[1]+w[0])/2,Q=this.getBarcodeFormat(),Z=[new ge(F,r),new ge(W,r)],ne=new dt(N,null,0,Z,Q,new Date().getTime()),ue=0;try{let le=Da.decodeRow(r,s,w[1]);ne.putMetadata(Vt.UPC_EAN_EXTENSION,le.getText()),ne.putAllMetadata(le.getResultMetadata()),ne.addResultPoints(le.getResultPoints()),ue=le.getText().length}catch{}let he=a==null?null:a.get(te.ALLOWED_EAN_EXTENSIONS);if(he!=null){let le=!1;for(let Ge in he)if(ue.toString()===Ge){le=!0;break}if(!le)throw new re}return ne}decodeEnd(r,s){return je.findGuardPattern(r,s,!1,je.START_END_PATTERN,new Int32Array(je.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return je.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return je.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new b;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new b;a+=u}return(1e3-a)%10}}class $r extends je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1],d=0;for(let w=0;w<6&&h<u;w++){let C=je.decodeDigit(r,c,h,je.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let v of c)h+=v;C>=10&&(d|=1<<5-w)}a=$r.determineFirstDigit(a,d),h=je.findGuardPattern(r,h,!0,je.MIDDLE_PATTERN,new Int32Array(je.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&h<u;w++){let C=je.decodeDigit(r,c,h,je.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+C);for(let v of c)h+=v}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return Ae.EAN_13}static determineFirstDigit(r,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode("0".charCodeAt(0)+a)+r,r;throw new re}}$r.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class on extends je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1];for(let y=0;y<4&&h<u;y++){let w=je.decodeDigit(r,c,h,je.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+w);for(let C of c)h+=C}h=je.findGuardPattern(r,h,!0,je.MIDDLE_PATTERN,new Int32Array(je.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&h<u;y++){let w=je.decodeDigit(r,c,h,je.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+w);for(let C of c)h+=C}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return Ae.EAN_8}}class Ma extends je{constructor(){super(...arguments),this.ean13Reader=new $r}getBarcodeFormat(){return Ae.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,a))}decodeMiddle(r,s,a){return this.ean13Reader.decodeMiddle(r,s,a)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let a=new dt(s.substring(1),null,null,r.getResultPoints(),Ae.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new re}reset(){this.ean13Reader.reset()}}class mn extends je{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters.map(w=>w);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let h=s[1],d=0;for(let w=0;w<6&&h<u;w++){const C=mn.decodeDigit(r,c,h,mn.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let v of c)h+=v;C>=10&&(d|=1<<5-w)}let y=mn.determineNumSysAndCheckDigit(a,d);return{rowOffset:h,resultString:y}}decodeEnd(r,s){return mn.findGuardPatternWithoutCounters(r,s,!0,mn.MIDDLE_END_PATTERN)}checkChecksum(r){return je.checkChecksum(mn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode("0".charCodeAt(0)+a),h=String.fromCharCode("0".charCodeAt(0)+c);return u+r+h}throw re.getNotFoundInstance()}getBarcodeFormat(){return Ae.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new U;a.append(r.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(c),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(c);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}mn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),mn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ei extends Dt{constructor(r){super();let s=r==null?null:r.get(te.POSSIBLE_FORMATS),a=[];i(s)?(a.push(new $r),a.push(new Ma),a.push(new on),a.push(new mn)):(s.indexOf(Ae.EAN_13)>-1&&a.push(new $r),s.indexOf(Ae.UPC_A)>-1&&a.push(new Ma),s.indexOf(Ae.EAN_8)>-1&&a.push(new on),s.indexOf(Ae.UPC_E)>-1&&a.push(new mn)),this.readers=a}decodeRow(r,s,a){for(let c of this.readers)try{const u=c.decodeRow(r,s,a),h=u.getBarcodeFormat()===Ae.EAN_13&&u.getText().charAt(0)==="0",d=a==null?null:a.get(te.POSSIBLE_FORMATS),y=d==null||d.includes(Ae.UPC_A);if(h&&y){const w=u.getRawBytes(),C=new dt(u.getText().substring(1),w,w?w.length:null,u.getResultPoints(),Ae.UPC_A);return C.putAllMetadata(u.getResultMetadata()),C}return u}catch{}throw new re}reset(){for(let r of this.readers)r.reset()}}class an extends Dt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let a=0;a<s.length;a++)if(Dt.patternMatchVariance(r,s[a],an.MAX_INDIVIDUAL_VARIANCE)<an.MAX_AVG_VARIANCE)return a;throw new re}static count(r){return Ue.sum(new Int32Array(r))}static increment(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]>c&&(c=s[u],a=u);r[a]++}static decrement(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]<c&&(c=s[u],a=u);r[a]--}static isFinderPattern(r){let s=r[0]+r[1],a=s+r[2]+r[3],c=s/a;if(c>=an.MIN_FINDER_PATTERN_RATIO&&c<=an.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let d of r)d>h&&(h=d),d<u&&(u=d);return h<10*u}return!1}}an.MAX_AVG_VARIANCE=.2,an.MAX_INDIVIDUAL_VARIANCE=.45,an.MIN_FINDER_PATTERN_RATIO=9.5/12,an.MAX_FINDER_PATTERN_RATIO=12.5/14;class Xi{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof Xi))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Lr{constructor(r,s,a,c,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new ge(a,u)),this.resultPoints.push(new ge(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Lr))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class xr{constructor(){}static getRSSvalue(r,s,a){let c=0;for(let y of r)c+=y;let u=0,h=0,d=r.length;for(let y=0;y<d-1;y++){let w;for(w=1,h|=1<<y;w<r[y];w++,h&=~(1<<y)){let C=xr.combins(c-w-1,d-y-2);if(a&&h===0&&c-w-(d-y-1)>=d-y-1&&(C-=xr.combins(c-w-(d-y),d-y-2)),d-y-1>1){let v=0;for(let N=c-w-(d-y-2);N>s;N--)v+=xr.combins(c-w-N-1,d-y-3);C-=v*(d-1-y)}else c-w>s&&C--;u+=C}c-=w}return u}static combins(r,s){let a,c;r-s>s?(c=s,a=r-s):(c=r-s,a=s);let u=1,h=1;for(let d=r;d>a;d--)u*=d,h<=c&&(u/=h,h++);for(;h<=c;)u/=h,h++;return u}}class Rh{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let a=12*s,c=new K(a),u=0,d=r[0].getRightChar().getValue();for(let y=11;y>=0;--y)d&1<<y&&c.set(u),u++;for(let y=1;y<r.length;++y){let w=r[y],C=w.getLeftChar().getValue();for(let v=11;v>=0;--v)C&1<<v&&c.set(u),u++;if(w.getRightChar()!=null){let v=w.getRightChar().getValue();for(let N=11;N>=0;--N)v&1<<N&&c.set(u),u++}}return c}}class wr{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class wo{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class yn extends wo{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===yn.FNC1}}yn.FNC1="$";class Br extends wo{constructor(r,s,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ln extends wo{constructor(r,s,a){if(super(r),s<0||s>10||a<0||a>10)throw new b;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ln.FNC1}isSecondDigitFNC1(){return this.secondDigit===ln.FNC1}isAnyFNC1(){return this.firstDigit===ln.FNC1||this.secondDigit===ln.FNC1}}ln.FNC1=10;class me{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new re;let s=r.substring(0,2);for(let u of me.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===me.VARIABLE_LENGTH?me.processVariableAI(2,u[2],r):me.processFixedAI(2,u[1],r);if(r.length<3)throw new re;let a=r.substring(0,3);for(let u of me.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===me.VARIABLE_LENGTH?me.processVariableAI(3,u[2],r):me.processFixedAI(3,u[1],r);for(let u of me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,u[2],r):me.processFixedAI(4,u[1],r);if(r.length<4)throw new re;let c=r.substring(0,4);for(let u of me.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,u[2],r):me.processFixedAI(4,u[1],r);throw new re}static processFixedAI(r,s,a){if(a.length<r)throw new re;let c=a.substring(0,r);if(a.length<r+s)throw new re;let u=a.substring(r,r+s),h=a.substring(r+s),d="("+c+")"+u,y=me.parseFieldsInGeneralPurpose(h);return y==null?d:d+y}static processVariableAI(r,s,a){let c=a.substring(0,r),u;a.length<r+s?u=a.length:u=r+s;let h=a.substring(r,u),d=a.substring(u),y="("+c+")"+h,w=me.parseFieldsInGeneralPurpose(d);return w==null?y:y+w}}me.VARIABLE_LENGTH=[],me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",me.VARIABLE_LENGTH,20],["22",me.VARIABLE_LENGTH,29],["30",me.VARIABLE_LENGTH,8],["37",me.VARIABLE_LENGTH,8],["90",me.VARIABLE_LENGTH,30],["91",me.VARIABLE_LENGTH,30],["92",me.VARIABLE_LENGTH,30],["93",me.VARIABLE_LENGTH,30],["94",me.VARIABLE_LENGTH,30],["95",me.VARIABLE_LENGTH,30],["96",me.VARIABLE_LENGTH,30],["97",me.VARIABLE_LENGTH,3],["98",me.VARIABLE_LENGTH,30],["99",me.VARIABLE_LENGTH,30]],me.THREE_DIGIT_DATA_LENGTH=[["240",me.VARIABLE_LENGTH,30],["241",me.VARIABLE_LENGTH,30],["242",me.VARIABLE_LENGTH,6],["250",me.VARIABLE_LENGTH,30],["251",me.VARIABLE_LENGTH,30],["253",me.VARIABLE_LENGTH,17],["254",me.VARIABLE_LENGTH,20],["400",me.VARIABLE_LENGTH,30],["401",me.VARIABLE_LENGTH,30],["402",17],["403",me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",me.VARIABLE_LENGTH,20],["421",me.VARIABLE_LENGTH,15],["422",3],["423",me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",me.VARIABLE_LENGTH,15],["391",me.VARIABLE_LENGTH,18],["392",me.VARIABLE_LENGTH,15],["393",me.VARIABLE_LENGTH,18],["703",me.VARIABLE_LENGTH,30]],me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",me.VARIABLE_LENGTH,20],["8003",me.VARIABLE_LENGTH,30],["8004",me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",me.VARIABLE_LENGTH,30],["8008",me.VARIABLE_LENGTH,12],["8018",18],["8020",me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",me.VARIABLE_LENGTH,70],["8200",me.VARIABLE_LENGTH,70]];class Bn{constructor(r){this.buffer=new U,this.information=r}decodeAllCodes(r,s){let a=s,c=null;do{let u=this.decodeGeneralPurposeField(a,c),h=me.parseFieldsInGeneralPurpose(u.getNewString());if(h!=null&&r.append(h),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new ln(this.information.getSize(),ln.FNC1,ln.FNC1):new ln(this.information.getSize(),u-1,ln.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),a=(s-8)/11,c=(s-8)%11;return new ln(r+7,a,c)}extractNumericValueFromBitArray(r,s){return Bn.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,a){let c=0;for(let u=0;u<a;++u)r.get(s+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Br(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Br(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Br(this.current.getPosition(),this.buffer.toString()):s=new Br(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new wr(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Br(this.current.getPosition(),this.buffer.toString());return new wr(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new wr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Br(this.current.getPosition(),this.buffer.toString());return new wr(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new wr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Br(this.current.getPosition(),this.buffer.toString());return new wr(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new wr(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new yn(r+5,yn.FNC1);if(s>=5&&s<15)return new yn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new yn(r+7,""+(a+1));if(a>=90&&a<116)return new yn(r+7,""+(a+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new b}return new yn(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new yn(r+5,yn.FNC1);if(s>=5&&s<15)return new yn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new yn(r+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new ir("Decoding invalid alphanumeric value: "+a)}return new yn(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class Eo{constructor(r){this.information=r,this.generalDecoder=new Bn(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class xn extends Eo{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,a)}encodeCompressedGtinWithoutAI(r,s,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}xn.appendCheckDigit(r,a)}static appendCheckDigit(r,s){let a=0;for(let c=0;c<13;c++){let u=r.charAt(c+s).charCodeAt(0)-"0".charCodeAt(0);a+=c&1?u:3*u}a=10-a%10,a===10&&(a=0),r.append(a)}}xn.GTIN_SIZE=40;class Jr extends xn{constructor(r){super(r)}parseInformation(){let r=new U;r.append("(01)");let s=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(Jr.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,Jr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Jr.HEADER_SIZE+44)}}Jr.HEADER_SIZE=1+1+2;class Qi extends Eo{constructor(r){super(r)}parseInformation(){let r=new U;return this.getGeneralDecoder().decodeAllCodes(r,Qi.HEADER_SIZE)}}Qi.HEADER_SIZE=2+1+2;class Us extends xn{constructor(r){super(r)}encodeCompressedWeight(r,s,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(r,c);let u=this.checkWeight(c),h=1e5;for(let d=0;d<5;++d)u/h===0&&r.append("0"),h/=10;r.append(u)}}class Er extends Us{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Er.HEADER_SIZE+Us.GTIN_SIZE+Er.WEIGHT_SIZE)throw new re;let r=new U;return this.encodeCompressedGtin(r,Er.HEADER_SIZE),this.encodeCompressedWeight(r,Er.HEADER_SIZE+Us.GTIN_SIZE,Er.WEIGHT_SIZE),r.toString()}}Er.HEADER_SIZE=4+1,Er.WEIGHT_SIZE=15;class lc extends Er{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class bh extends Er{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Fn extends xn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Fn.HEADER_SIZE+xn.GTIN_SIZE)throw new re;let r=new U;this.encodeCompressedGtin(r,Fn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Fn.HEADER_SIZE+xn.GTIN_SIZE,Fn.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Fn.HEADER_SIZE+xn.GTIN_SIZE+Fn.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}Fn.HEADER_SIZE=5+1+2,Fn.LAST_DIGIT_SIZE=2;class cn extends xn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<cn.HEADER_SIZE+xn.GTIN_SIZE)throw new re;let r=new U;this.encodeCompressedGtin(r,cn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+xn.GTIN_SIZE,cn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(cn.HEADER_SIZE+xn.GTIN_SIZE+cn.LAST_DIGIT_SIZE,cn.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(cn.HEADER_SIZE+xn.GTIN_SIZE+cn.LAST_DIGIT_SIZE+cn.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}cn.HEADER_SIZE=5+1+2,cn.LAST_DIGIT_SIZE=2,cn.FIRST_THREE_DIGITS_SIZE=10;class gt extends Us{constructor(r,s,a){super(r),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=gt.HEADER_SIZE+gt.GTIN_SIZE+gt.WEIGHT_SIZE+gt.DATE_SIZE)throw new re;let r=new U;return this.encodeCompressedGtin(r,gt.HEADER_SIZE),this.encodeCompressedWeight(r,gt.HEADER_SIZE+gt.GTIN_SIZE,gt.WEIGHT_SIZE),this.encodeCompressedDate(r,gt.HEADER_SIZE+gt.GTIN_SIZE+gt.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,gt.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let h=a;h/10==0&&r.append("0"),r.append(h),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}gt.HEADER_SIZE=7+1,gt.WEIGHT_SIZE=20,gt.DATE_SIZE=16;function Ki(T){try{if(T.get(1))return new Jr(T);if(!T.get(2))return new Qi(T);switch(Bn.extractNumericValueFromBitArray(T,1,4)){case 4:return new lc(T);case 5:return new bh(T)}switch(Bn.extractNumericValueFromBitArray(T,1,5)){case 12:return new Fn(T);case 13:return new cn(T)}switch(Bn.extractNumericValueFromBitArray(T,1,7)){case 56:return new gt(T,"310","11");case 57:return new gt(T,"320","11");case 58:return new gt(T,"310","13");case 59:return new gt(T,"320","13");case 60:return new gt(T,"310","15");case 61:return new gt(T,"320","15");case 62:return new gt(T,"310","17");case 63:return new gt(T,"320","17")}}catch(r){throw console.log(r),new ir("unknown decoder: "+T)}}class Sn{constructor(r,s,a,c){this.leftchar=r,this.rightchar=s,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Sn?Sn.equalsOrNull(r.leftchar,s.leftchar)&&Sn.equalsOrNull(r.rightchar,s.rightchar)&&Sn.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Sn.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class js{constructor(r,s,a){this.pairs=r,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof js?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let a;return r.forEach((c,u)=>{s.forEach(h=>{c.getLeftChar().getValue()===h.getLeftChar().getValue()&&c.getRightChar().getValue()===h.getRightChar().getValue()&&c.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(a=!0)})}),a}}class oe extends an{constructor(r){super(...arguments),this.pairs=new Array(oe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,a){this.pairs.length=0,this.startFromEven=!1;try{return oe.constructResult(this.decodeRow2pairs(r,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,oe.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof re){if(!this.pairs.length)throw new re;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new re}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let a=s;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let h of r)this.pairs.push(h.getPairs());if(this.pairs.push(c.getPairs()),!oe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,a+1)}catch(h){this.verbose&&console.log(h)}}throw new re}static isValidSequence(r){for(let s of oe.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let a=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=s[c]){a=!1;break}if(a)return!0}return!1}storeRow(r,s){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let h=this.rows[a];if(h.getRowNumber()>r){u=h.isEquivalent(this.pairs);break}c=h.isEquivalent(this.pairs),a++}u||c||oe.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new js(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let a of s)if(a.getPairs().length!==r.length){for(let c of a.getPairs())for(let u of r)if(Sn.equals(c,u))break}}static isPartialRow(r,s){for(let a of s){let c=!0;for(let u of r){let h=!1;for(let d of a.getPairs())if(u.equals(d)){h=!0;break}if(!h){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=Rh.buildBitArray(r),c=Ki(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),h=r[r.length-1].getFinderPattern().getResultPoints(),d=[u[0],u[1],h[0],h[1]];return new dt(c,null,null,d,Ae.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let d=1;d<this.pairs.size();++d){let y=this.pairs.get(d);c+=y.getLeftChar().getChecksumPortion(),u++;let w=y.getRightChar();w!=null&&(c+=w.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==s.getValue()}static getNextSecondBar(r,s){let a;return r.get(s)?(a=r.getNextUnset(s),a=r.getNextSet(a)):(a=r.getNextSet(s),a=r.getNextUnset(a)),a}retrieveNextPair(r,s,a){let c=s.length%2==0;this.startFromEven&&(c=!c);let u,h=!0,d=-1;do this.findNextPair(r,s,d),u=this.parseFoundFinderPattern(r,a,c),u==null?d=oe.getNextSecondBar(r,this.startEnd[0]):h=!1;while(h);let y=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new re;let w;try{w=this.decodeDataCharacter(r,u,c,!1)}catch(C){w=null,this.verbose&&console.log(C)}return new Sn(y,w,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h;a>=0?h=a:this.isEmptyPair(s)?h=0:h=s[s.length-1].getFinderPattern().getStartEnd()[1];let d=s.length%2!=0;this.startFromEven&&(d=!d);let y=!1;for(;h<u&&(y=!r.get(h),!!y);)h++;let w=0,C=h;for(let v=h;v<u;v++)if(r.get(v)!=y)c[w]++;else{if(w==3){if(d&&oe.reverseCounters(c),oe.isFinderPattern(c)){this.startEnd[0]=C,this.startEnd[1]=v;return}d&&oe.reverseCounters(c),C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,y=!y}throw new re}static reverseCounters(r){let s=r.length;for(let a=0;a<s/2;++a){let c=r[a];r[a]=r[s-a-1],r[s-a-1]=c}}parseFoundFinderPattern(r,s,a){let c,u,h;if(a){let w=this.startEnd[0]-1;for(;w>=0&&!r.get(w);)w--;w++,c=this.startEnd[0]-w,u=w,h=this.startEnd[1]}else u=this.startEnd[0],h=r.getNextUnset(this.startEnd[1]+1),c=h-this.startEnd[1];let d=this.getDecodeFinderCounters();G.arraycopy(d,0,d,1,d.length-1),d[0]=c;let y;try{y=this.parseFinderValue(d,oe.FINDER_PATTERNS)}catch{return null}return new Lr(y,[u,h],u,h,s)}decodeDataCharacter(r,s,a,c){let u=this.getDataCharacterCounters();for(let xt=0;xt<u.length;xt++)u[xt]=0;if(c)oe.recordPatternInReverse(r,s.getStartEnd()[0],u);else{oe.recordPattern(r,s.getStartEnd()[1],u);for(let xt=0,wn=u.length-1;xt<wn;xt++,wn--){let sr=u[xt];u[xt]=u[wn],u[wn]=sr}}let h=17,d=Ue.sum(new Int32Array(u))/h,y=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(d-y)/y>.3)throw new re;let w=this.getOddCounts(),C=this.getEvenCounts(),v=this.getOddRoundingErrors(),N=this.getEvenRoundingErrors();for(let xt=0;xt<u.length;xt++){let wn=1*u[xt]/d,sr=wn+.5;if(sr<1){if(wn<.3)throw new re;sr=1}else if(sr>8){if(wn>8.7)throw new re;sr=8}let Ro=xt/2;xt&1?(C[Ro]=sr,N[Ro]=wn-sr):(w[Ro]=sr,v[Ro]=wn-sr)}this.adjustOddEvenCounts(h);let F=4*s.getValue()+(a?0:2)+(c?0:1)-1,W=0,Q=0;for(let xt=w.length-1;xt>=0;xt--){if(oe.isNotA1left(s,a,c)){let wn=oe.WEIGHTS[F][2*xt];Q+=w[xt]*wn}W+=w[xt]}let Z=0;for(let xt=C.length-1;xt>=0;xt--)if(oe.isNotA1left(s,a,c)){let wn=oe.WEIGHTS[F][2*xt+1];Z+=C[xt]*wn}let ne=Q+Z;if(W&1||W>13||W<4)throw new re;let ue=(13-W)/2,he=oe.SYMBOL_WIDEST[ue],le=9-he,Ge=xr.getRSSvalue(w,he,!0),Be=xr.getRSSvalue(C,le,!1),Qn=oe.EVEN_TOTAL_SUBSET[ue],Ur=oe.GSUM[ue],Kn=Ge*Qn+Be+Ur;return new Xi(Kn,ne)}static isNotA1left(r,s,a){return!(r.getValue()==0&&s&&a)}adjustOddEvenCounts(r){let s=Ue.sum(new Int32Array(this.getOddCounts())),a=Ue.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;s>13?u=!0:s<4&&(c=!0);let h=!1,d=!1;a>13?d=!0:a<4&&(h=!0);let y=s+a-r,w=(s&1)==1,C=(a&1)==0;if(y==1)if(w){if(C)throw new re;u=!0}else{if(!C)throw new re;d=!0}else if(y==-1)if(w){if(C)throw new re;c=!0}else{if(!C)throw new re;h=!0}else if(y==0){if(w){if(!C)throw new re;s<a?(c=!0,d=!0):(u=!0,h=!0)}else if(C)throw new re}else throw new re;if(c){if(u)throw new re;oe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&oe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(d)throw new re;oe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&oe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}oe.SYMBOL_WIDEST=[7,5,4,3,1],oe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],oe.GSUM=[0,348,1388,2948,3988],oe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],oe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],oe.FINDER_PAT_A=0,oe.FINDER_PAT_B=1,oe.FINDER_PAT_C=2,oe.FINDER_PAT_D=3,oe.FINDER_PAT_E=4,oe.FINDER_PAT_F=5,oe.FINDER_PATTERN_SEQUENCES=[[oe.FINDER_PAT_A,oe.FINDER_PAT_A],[oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B],[oe.FINDER_PAT_A,oe.FINDER_PAT_C,oe.FINDER_PAT_B,oe.FINDER_PAT_D],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_C],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_D,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_D],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_E],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F]],oe.MAX_PAIRS=11;class cc extends Xi{constructor(r,s,a){super(r,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class _t extends an{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,a){const c=this.decodePair(s,!1,r,a);_t.addOrTally(this.possibleLeftPairs,c),s.reverse();let u=this.decodePair(s,!0,r,a);_t.addOrTally(this.possibleRightPairs,u),s.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&_t.checkChecksum(h,d))return _t.constructResult(h,d)}throw new re}static addOrTally(r,s){if(s==null)return;let a=!1;for(let c of r)if(c.getValue()===s.getValue()){c.incrementCount(),a=!0;break}a||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let a=4537077*r.getValue()+s.getValue(),c=new String(a).toString(),u=new U;for(let w=13-c.length;w>0;w--)u.append("0");u.append(c);let h=0;for(let w=0;w<13;w++){let C=u.charAt(w).charCodeAt(0)-"0".charCodeAt(0);h+=w&1?C:3*C}h=10-h%10,h===10&&(h=0),u.append(h.toString());let d=r.getFinderPattern().getResultPoints(),y=s.getFinderPattern().getResultPoints();return new dt(u.toString(),null,0,[d[0],d[1],y[0],y[1]],Ae.RSS_14,new Date().getTime())}static checkChecksum(r,s){let a=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(r,s,a,c){try{let u=this.findFinderPattern(r,s),h=this.parseFoundFinderPattern(r,a,s,u),d=c==null?null:c.get(te.NEED_RESULT_POINT_CALLBACK);if(d!=null){let C=(u[0]+u[1])/2;s&&(C=r.getSize()-1-C),d.foundPossibleResultPoint(new ge(C,a))}let y=this.decodeDataCharacter(r,h,!0),w=this.decodeDataCharacter(r,h,!1);return new cc(1597*y.getValue()+w.getValue(),y.getChecksumPortion()+4*w.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(r,s,a){let c=this.getDataCharacterCounters();for(let Z=0;Z<c.length;Z++)c[Z]=0;if(a)Dt.recordPatternInReverse(r,s.getStartEnd()[0],c);else{Dt.recordPattern(r,s.getStartEnd()[1]+1,c);for(let Z=0,ne=c.length-1;Z<ne;Z++,ne--){let ue=c[Z];c[Z]=c[ne],c[ne]=ue}}let u=a?16:15,h=Ue.sum(new Int32Array(c))/u,d=this.getOddCounts(),y=this.getEvenCounts(),w=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let Z=0;Z<c.length;Z++){let ne=c[Z]/h,ue=Math.floor(ne+.5);ue<1?ue=1:ue>8&&(ue=8);let he=Math.floor(Z/2);Z&1?(y[he]=ue,C[he]=ne-ue):(d[he]=ue,w[he]=ne-ue)}this.adjustOddEvenCounts(a,u);let v=0,N=0;for(let Z=d.length-1;Z>=0;Z--)N*=9,N+=d[Z],v+=d[Z];let F=0,W=0;for(let Z=y.length-1;Z>=0;Z--)F*=9,F+=y[Z],W+=y[Z];let Q=N+3*F;if(a){if(v&1||v>12||v<4)throw new re;let Z=(12-v)/2,ne=_t.OUTSIDE_ODD_WIDEST[Z],ue=9-ne,he=xr.getRSSvalue(d,ne,!1),le=xr.getRSSvalue(y,ue,!0),Ge=_t.OUTSIDE_EVEN_TOTAL_SUBSET[Z],Be=_t.OUTSIDE_GSUM[Z];return new Xi(he*Ge+le+Be,Q)}else{if(W&1||W>10||W<4)throw new re;let Z=(10-W)/2,ne=_t.INSIDE_ODD_WIDEST[Z],ue=9-ne,he=xr.getRSSvalue(d,ne,!0),le=xr.getRSSvalue(y,ue,!1),Ge=_t.INSIDE_ODD_TOTAL_SUBSET[Z],Be=_t.INSIDE_GSUM[Z];return new Xi(le*Ge+he+Be,Q)}}findFinderPattern(r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),u=!1,h=0;for(;h<c&&(u=!r.get(h),s!==u);)h++;let d=0,y=h;for(let w=h;w<c;w++)if(r.get(w)!==u)a[d]++;else{if(d===3){if(an.isFinderPattern(a))return[y,w];y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,d--}else d++;a[d]=1,u=!u}throw new re}parseFoundFinderPattern(r,s,a,c){let u=r.get(c[0]),h=c[0]-1;for(;h>=0&&u!==r.get(h);)h--;h++;const d=c[0]-h,y=this.getDecodeFinderCounters(),w=new Int32Array(y.length);G.arraycopy(y,0,w,1,y.length-1),w[0]=d;const C=this.parseFinderValue(w,_t.FINDER_PATTERNS);let v=h,N=c[1];return a&&(v=r.getSize()-1-v,N=r.getSize()-1-N),new Lr(C,[h,c[1]],v,N,s)}adjustOddEvenCounts(r,s){let a=Ue.sum(new Int32Array(this.getOddCounts())),c=Ue.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1,d=!1,y=!1;r?(a>12?h=!0:a<4&&(u=!0),c>12?y=!0:c<4&&(d=!0)):(a>11?h=!0:a<5&&(u=!0),c>10?y=!0:c<4&&(d=!0));let w=a+c-s,C=(a&1)===(r?1:0),v=(c&1)===1;if(w===1)if(C){if(v)throw new re;h=!0}else{if(!v)throw new re;y=!0}else if(w===-1)if(C){if(v)throw new re;u=!0}else{if(!v)throw new re;d=!0}else if(w===0){if(C){if(!v)throw new re;a<c?(u=!0,y=!0):(h=!0,d=!0)}else if(v)throw new re}else throw new re;if(u){if(h)throw new re;an.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&an.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(y)throw new re;an.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&an.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}_t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],_t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],_t.OUTSIDE_GSUM=[0,161,961,2015,2715],_t.INSIDE_GSUM=[0,336,1036,1516],_t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],_t.INSIDE_ODD_WIDEST=[2,4,6,8],_t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ai extends Dt{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const a=r?r.get(te.POSSIBLE_FORMATS):null,c=r&&r.get(te.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(Ae.EAN_13)||a.includes(Ae.UPC_A)||a.includes(Ae.EAN_8)||a.includes(Ae.UPC_E))&&this.readers.push(new Ei(r)),a.includes(Ae.CODE_39)&&this.readers.push(new Mt(c)),a.includes(Ae.CODE_128)&&this.readers.push(new fe),a.includes(Ae.ITF)&&this.readers.push(new nt),a.includes(Ae.RSS_14)&&this.readers.push(new _t),a.includes(Ae.RSS_EXPANDED)&&this.readers.push(new oe(this.verbose))):(this.readers.push(new Ei(r)),this.readers.push(new Mt),this.readers.push(new Ei(r)),this.readers.push(new fe),this.readers.push(new nt),this.readers.push(new _t),this.readers.push(new oe(this.verbose)))}decodeRow(r,s,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,s,a)}catch{}throw new re}reset(){this.readers.forEach(r=>r.reset())}}class Oa extends Ln{constructor(r=500,s){super(new Ai(s),r,s)}}class Qe{constructor(r,s,a){this.ecCodewords=r,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ke{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Fe{constructor(r,s,a,c,u,h){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=h;let d=0;const y=h.getECCodewords(),w=h.getECBlocks();for(let C of w)d+=C.getCount()*(C.getDataCodewords()+y);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new b;for(let a of Fe.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===s)return a;throw new b}toString(){return""+this.versionNumber}static buildVersions(){return[new Fe(1,10,10,8,8,new Qe(5,new Ke(1,3))),new Fe(2,12,12,10,10,new Qe(7,new Ke(1,5))),new Fe(3,14,14,12,12,new Qe(10,new Ke(1,8))),new Fe(4,16,16,14,14,new Qe(12,new Ke(1,12))),new Fe(5,18,18,16,16,new Qe(14,new Ke(1,18))),new Fe(6,20,20,18,18,new Qe(18,new Ke(1,22))),new Fe(7,22,22,20,20,new Qe(20,new Ke(1,30))),new Fe(8,24,24,22,22,new Qe(24,new Ke(1,36))),new Fe(9,26,26,24,24,new Qe(28,new Ke(1,44))),new Fe(10,32,32,14,14,new Qe(36,new Ke(1,62))),new Fe(11,36,36,16,16,new Qe(42,new Ke(1,86))),new Fe(12,40,40,18,18,new Qe(48,new Ke(1,114))),new Fe(13,44,44,20,20,new Qe(56,new Ke(1,144))),new Fe(14,48,48,22,22,new Qe(68,new Ke(1,174))),new Fe(15,52,52,24,24,new Qe(42,new Ke(2,102))),new Fe(16,64,64,14,14,new Qe(56,new Ke(2,140))),new Fe(17,72,72,16,16,new Qe(36,new Ke(4,92))),new Fe(18,80,80,18,18,new Qe(48,new Ke(4,114))),new Fe(19,88,88,20,20,new Qe(56,new Ke(4,144))),new Fe(20,96,96,22,22,new Qe(68,new Ke(4,174))),new Fe(21,104,104,24,24,new Qe(56,new Ke(6,136))),new Fe(22,120,120,18,18,new Qe(68,new Ke(6,175))),new Fe(23,132,132,20,20,new Qe(62,new Ke(8,163))),new Fe(24,144,144,22,22,new Qe(62,new Ke(8,156),new Ke(2,155))),new Fe(25,8,18,6,16,new Qe(7,new Ke(1,5))),new Fe(26,8,32,6,14,new Qe(11,new Ke(1,10))),new Fe(27,12,26,10,24,new Qe(14,new Ke(1,16))),new Fe(28,12,36,10,16,new Qe(18,new Ke(1,22))),new Fe(29,16,36,14,16,new Qe(24,new Ke(1,32))),new Fe(30,16,48,14,22,new Qe(28,new Ke(1,49)))]}}Fe.VERSIONS=Fe.buildVersions();class Ao{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new b;this.version=Ao.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new He(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),a=r.getWidth();return Fe.getVersionForDimensions(s,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let d=!1,y=!1,w=!1,C=!1;do if(a===u&&c===0&&!d)r[s++]=this.readCorner1(u,h)&255,a-=2,c+=2,d=!0;else if(a===u-2&&c===0&&h&3&&!y)r[s++]=this.readCorner2(u,h)&255,a-=2,c+=2,y=!0;else if(a===u+4&&c===2&&!(h&7)&&!w)r[s++]=this.readCorner3(u,h)&255,a-=2,c+=2,w=!0;else if(a===u-2&&c===0&&(h&7)===4&&!C)r[s++]=this.readCorner4(u,h)&255,a-=2,c+=2,C=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,h)&255),a-=2,c+=2;while(a>=0&&c<h);a+=1,c+=3;do a>=0&&c<h&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,h)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<h);if(s!==this.version.getTotalCodewords())throw new b;return r}readModule(r,s,a,c){return r<0&&(r+=a,s+=4-(a+4&7)),s<0&&(s+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,a,c){let u=0;return this.readModule(r-2,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-2,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s,a,c)&&(u|=1),u<<=1,this.readModule(r,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r,s,a,c)&&(u|=1),u}readCorner1(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,1,r,s)&&(a|=1),a<<=1,this.readModule(r-1,2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}readCorner2(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-4,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner3(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-3,r,s)&&(a|=1),a<<=1,this.readModule(1,s-2,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner4(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new _("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),h=s/c|0,d=a/u|0,y=h*c,w=d*u,C=new He(w,y);for(let v=0;v<h;++v){const N=v*c;for(let F=0;F<d;++F){const W=F*u;for(let Q=0;Q<c;++Q){const Z=v*(c+2)+1+Q,ne=N+Q;for(let ue=0;ue<u;++ue){const he=F*(u+2)+1+ue;if(r.get(he,Z)){const le=W+ue;C.set(le,ne)}}}}}return C}}class Pa{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const a=s.getECBlocks();let c=0;const u=a.getECBlocks();for(let Q of u)c+=Q.getCount();const h=new Array(c);let d=0;for(let Q of u)for(let Z=0;Z<Q.getCount();Z++){const ne=Q.getDataCodewords(),ue=a.getECCodewords()+ne;h[d++]=new Pa(ne,new Uint8Array(ue))}const w=h[0].codewords.length-a.getECCodewords(),C=w-1;let v=0;for(let Q=0;Q<C;Q++)for(let Z=0;Z<d;Z++)h[Z].codewords[Q]=r[v++];const N=s.getVersionNumber()===24,F=N?8:d;for(let Q=0;Q<F;Q++)h[Q].codewords[w-1]=r[v++];const W=h[0].codewords.length;for(let Q=w;Q<W;Q++)for(let Z=0;Z<d;Z++){const ne=N?(Z+8)%d:Z,ue=N&&ne>7?Q-1:Q;h[ne].codewords[ue]=r[v++]}if(v!==r.length)throw new _;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ar{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new _(""+r);let s=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const h=8-a,d=r<h?r:h,y=h-d,w=255>>8-d<<y;s=(u[c]&w)>>y,r-=d,a+=d,a===8&&(a=0,c++)}if(r>0){for(;r>=8;)s=s<<8|u[c]&255,c++,r-=8;if(r>0){const h=8-r,d=255>>h<<h;s=s<<r|(u[c]&d)>>h,a+=r}}return this.bitOffset=a,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var st;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(st||(st={}));class Gn{static decode(r){const s=new Ar(r),a=new U,c=new U,u=new Array;let h=st.ASCII_ENCODE;do if(h===st.ASCII_ENCODE)h=this.decodeAsciiSegment(s,a,c);else{switch(h){case st.C40_ENCODE:this.decodeC40Segment(s,a);break;case st.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case st.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case st.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case st.BASE256_ENCODE:this.decodeBase256Segment(s,a,u);break;default:throw new b}h=st.ASCII_ENCODE}while(h!==st.PAD_ENCODE&&s.available()>0);return c.length()>0&&a.append(c.toString()),new Hi(r,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,a){let c=!1;do{let u=r.readBits(8);if(u===0)throw new b;if(u<=128)return c&&(u+=128),s.append(String.fromCharCode(u-1)),st.ASCII_ENCODE;if(u===129)return st.PAD_ENCODE;if(u<=229){const h=u-130;h<10&&s.append("0"),s.append(""+h)}else switch(u){case 230:return st.C40_ENCODE;case 231:return st.BASE256_ENCODE;case 232:s.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return st.ANSIX12_ENCODE;case 239:return st.TEXT_ENCODE;case 240:return st.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new b;break}}while(r.available()>0);return st.ASCII_ENCODE}static decodeC40Segment(r,s){let a=!1;const c=[];let u=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),c);for(let d=0;d<3;d++){const y=c[d];switch(u){case 0:if(y<3)u=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[y];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else throw new b;break;case 1:a?(s.append(String.fromCharCode(y+128)),a=!1):s.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[y];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else switch(y){case 27:s.append(String.fromCharCode(29));break;case 30:a=!0;break;default:throw new b}u=0;break;case 3:a?(s.append(String.fromCharCode(y+224)),a=!1):s.append(String.fromCharCode(y+96)),u=0;break;default:throw new b}}}while(r.available()>0)}static decodeTextSegment(r,s){let a=!1,c=[],u=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),c);for(let d=0;d<3;d++){const y=c[d];switch(u){case 0:if(y<3)u=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[y];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else throw new b;break;case 1:a?(s.append(String.fromCharCode(y+128)),a=!1):s.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[y];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else switch(y){case 27:s.append(String.fromCharCode(29));break;case 30:a=!0;break;default:throw new b}u=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[y];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w),u=0}else throw new b;break;default:throw new b}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const a=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),a);for(let u=0;u<3;u++){const h=a[u];switch(h){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(h<14)s.append(String.fromCharCode(h+44));else if(h<40)s.append(String.fromCharCode(h+51));else throw new b;break}}}while(r.available()>0)}static parseTwoBytes(r,s,a){let c=(r<<8)+s-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,s,a){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let h;if(u===0?h=r.available()/8|0:u<250?h=u:h=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),h<0)throw new b;const d=new Uint8Array(h);for(let y=0;y<h;y++){if(r.available()<8)throw new b;d[y]=this.unrandomize255State(r.readBits(8),c++)}a.push(d);try{s.append(H.decode(d,Y.ISO88591))}catch(y){throw new ir("Platform does not support required encoding: "+y.message)}}static unrandomize255State(r,s){const a=149*s%255+1,c=r-a;return c>=0?c:c+256}}Gn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Gn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Gn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Gn.TEXT_SHIFT2_SET_CHARS=Gn.C40_SHIFT2_SET_CHARS,Gn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class zs{constructor(){this.rsDecoder=new Vs(Xe.DATA_MATRIX_FIELD_256)}decode(r){const s=new Ao(r),a=s.getVersion(),c=s.readCodewords(),u=Pa.getDataBlocks(c,a);let h=0;for(let w of u)h+=w.getNumDataCodewords();const d=new Uint8Array(h),y=u.length;for(let w=0;w<y;w++){const C=u[w],v=C.getCodewords(),N=C.getNumDataCodewords();this.correctErrors(v,N);for(let F=0;F<N;F++)d[F*y+w]=v[F]}return Gn.decode(d)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new P}for(let c=0;c<s;c++)r[c]=a[c]}}class Ct{constructor(r){this.image=r,this.rectangleDetector=new yr(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new re;s=this.shiftToModuleCenter(s);const a=s[0],c=s[1],u=s[2],h=s[3];let d=this.transitionsBetween(a,h)+1,y=this.transitionsBetween(u,h)+1;(d&1)===1&&(d+=1),(y&1)===1&&(y+=1),4*d<7*y&&4*y<7*d&&(d=y=Math.max(d,y));let w=Ct.sampleGrid(this.image,a,c,u,h,d,y);return new wi(w,[a,c,u,h])}static shiftPoint(r,s,a){let c=(s.getX()-r.getX())/(a+1),u=(s.getY()-r.getY())/(a+1);return new ge(r.getX()+c,r.getY()+u)}static moveAway(r,s,a){let c=r.getX(),u=r.getY();return c<s?c-=1:c+=1,u<a?u-=1:u+=1,new ge(c,u)}detectSolid1(r){let s=r[0],a=r[1],c=r[3],u=r[2],h=this.transitionsBetween(s,a),d=this.transitionsBetween(a,c),y=this.transitionsBetween(c,u),w=this.transitionsBetween(u,s),C=h,v=[u,s,a,c];return C>d&&(C=d,v[0]=s,v[1]=a,v[2]=c,v[3]=u),C>y&&(C=y,v[0]=a,v[1]=c,v[2]=u,v[3]=s),C>w&&(v[0]=c,v[1]=u,v[2]=s,v[3]=a),v}detectSolid2(r){let s=r[0],a=r[1],c=r[2],u=r[3],h=this.transitionsBetween(s,u),d=Ct.shiftPoint(a,c,(h+1)*4),y=Ct.shiftPoint(c,a,(h+1)*4),w=this.transitionsBetween(d,s),C=this.transitionsBetween(y,u);return w<C?(r[0]=s,r[1]=a,r[2]=c,r[3]=u):(r[0]=a,r[1]=c,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],a=r[1],c=r[2],u=r[3],h=this.transitionsBetween(s,u),d=this.transitionsBetween(a,u),y=Ct.shiftPoint(s,a,(d+1)*4),w=Ct.shiftPoint(c,a,(h+1)*4);h=this.transitionsBetween(y,u),d=this.transitionsBetween(w,u);let C=new ge(u.getX()+(c.getX()-a.getX())/(h+1),u.getY()+(c.getY()-a.getY())/(h+1)),v=new ge(u.getX()+(s.getX()-a.getX())/(d+1),u.getY()+(s.getY()-a.getY())/(d+1));if(!this.isValid(C))return this.isValid(v)?v:null;if(!this.isValid(v))return C;let N=this.transitionsBetween(y,C)+this.transitionsBetween(w,C),F=this.transitionsBetween(y,v)+this.transitionsBetween(w,v);return N>F?C:v}shiftToModuleCenter(r){let s=r[0],a=r[1],c=r[2],u=r[3],h=this.transitionsBetween(s,u)+1,d=this.transitionsBetween(c,u)+1,y=Ct.shiftPoint(s,a,d*4),w=Ct.shiftPoint(c,a,h*4);h=this.transitionsBetween(y,u)+1,d=this.transitionsBetween(w,u)+1,(h&1)===1&&(h+=1),(d&1)===1&&(d+=1);let C=(s.getX()+a.getX()+c.getX()+u.getX())/4,v=(s.getY()+a.getY()+c.getY()+u.getY())/4;s=Ct.moveAway(s,C,v),a=Ct.moveAway(a,C,v),c=Ct.moveAway(c,C,v),u=Ct.moveAway(u,C,v);let N,F;return y=Ct.shiftPoint(s,a,d*4),y=Ct.shiftPoint(y,u,h*4),N=Ct.shiftPoint(a,s,d*4),N=Ct.shiftPoint(N,c,h*4),w=Ct.shiftPoint(c,u,d*4),w=Ct.shiftPoint(w,a,h*4),F=Ct.shiftPoint(u,c,d*4),F=Ct.shiftPoint(F,s,h*4),[y,N,w,F]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,a,c,u,h,d){return kr.getInstance().sampleGrid(r,h,d,.5,.5,h-.5,.5,h-.5,d-.5,.5,d-.5,s.getX(),s.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(r,s){let a=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(s.getX()),h=Math.trunc(s.getY()),d=Math.abs(h-c)>Math.abs(u-a);if(d){let Q=a;a=c,c=Q,Q=u,u=h,h=Q}let y=Math.abs(u-a),w=Math.abs(h-c),C=-y/2,v=c<h?1:-1,N=a<u?1:-1,F=0,W=this.image.get(d?c:a,d?a:c);for(let Q=a,Z=c;Q!==u;Q+=N){let ne=this.image.get(d?Z:Q,d?Q:Z);if(ne!==W&&(F++,W=ne),C+=w,C>0){if(Z===h)break;Z+=v,C-=y}}return F}}class qe{constructor(){this.decoder=new zs}decode(r,s=null){let a,c;if(s!=null&&s.has(te.PURE_BARCODE)){const w=qe.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(w),c=qe.NO_POINTS}else{const w=new Ct(r.getBlackMatrix()).detect();a=this.decoder.decode(w.getBits()),c=w.getPoints()}const u=a.getRawBytes(),h=new dt(a.getText(),u,8*u.length,c,Ae.DATA_MATRIX,G.currentTimeMillis()),d=a.getByteSegments();d!=null&&h.putMetadata(Vt.BYTE_SEGMENTS,d);const y=a.getECLevel();return y!=null&&h.putMetadata(Vt.ERROR_CORRECTION_LEVEL,y),h}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s==null||a==null)throw new re;const c=this.moduleSize(s,r);let u=s[1];const h=a[1];let d=s[0];const w=(a[0]-d+1)/c,C=(h-u+1)/c;if(w<=0||C<=0)throw new re;const v=c/2;u+=v,d+=v;const N=new He(w,C);for(let F=0;F<C;F++){const W=u+F*c;for(let Q=0;Q<w;Q++)r.get(d+Q*c,W)&&N.set(Q,F)}return N}static moduleSize(r,s){const a=s.getWidth();let c=r[0];const u=r[1];for(;c<a&&s.get(c,u);)c++;if(c===a)throw new re;const h=c-r[0];if(h===0)throw new re;return h}}qe.NO_POINTS=[];class _o extends Ln{constructor(r=500){super(new qe,r)}}var _r;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(_r||(_r={}));class tt{constructor(r,s,a){this.value=r,this.stringValue=s,this.bits=a,tt.FOR_BITS.set(a,this),tt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return tt.L;case"M":return tt.M;case"Q":return tt.Q;case"H":return tt.H;default:throw new E(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof tt))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=tt.FOR_BITS.size)throw new _;return tt.FOR_BITS.get(r)}}tt.FOR_BITS=new Map,tt.FOR_VALUE=new Map,tt.L=new tt(_r.L,"L",1),tt.M=new tt(_r.M,"M",0),tt.Q=new tt(_r.Q,"Q",3),tt.H=new tt(_r.H,"H",2);class un{constructor(r){this.errorCorrectionLevel=tt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return L.bitCount(r^s)}static decodeFormatInformation(r,s){const a=un.doDecodeFormatInformation(r,s);return a!==null?a:un.doDecodeFormatInformation(r^un.FORMAT_INFO_MASK_QR,s^un.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of un.FORMAT_INFO_DECODE_LOOKUP){const h=u[0];if(h===r||h===s)return new un(u[1]);let d=un.numBitsDiffering(r,h);d<a&&(c=u[1],a=d),r!==s&&(d=un.numBitsDiffering(s,h),d<a&&(c=u[1],a=d))}return a<=3?new un(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof un))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}un.FORMAT_INFO_MASK_QR=21522,un.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ${constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const a of s)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class k{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class _e{constructor(r,s,...a){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();for(const d of h)c+=d.getCount()*(d.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new b;try{return this.getVersionForNumber((r-17)/4)}catch{throw new b}}static getVersionForNumber(r){if(r<1||r>40)throw new _;return _e.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<_e.VERSION_DECODE_INFO.length;c++){const u=_e.VERSION_DECODE_INFO[c];if(u===r)return _e.getVersionForNumber(c+7);const h=un.numBitsDiffering(r,u);h<s&&(a=c+7,s=h)}return s<=3?_e.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new He(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let h=0;h<a;h++)c===0&&(h===0||h===a-1)||c===a-1&&h===0||s.setRegion(this.alignmentPatternCenters[h]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}_e.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),_e.VERSIONS=[new _e(1,new Int32Array(0),new $(7,new k(1,19)),new $(10,new k(1,16)),new $(13,new k(1,13)),new $(17,new k(1,9))),new _e(2,Int32Array.from([6,18]),new $(10,new k(1,34)),new $(16,new k(1,28)),new $(22,new k(1,22)),new $(28,new k(1,16))),new _e(3,Int32Array.from([6,22]),new $(15,new k(1,55)),new $(26,new k(1,44)),new $(18,new k(2,17)),new $(22,new k(2,13))),new _e(4,Int32Array.from([6,26]),new $(20,new k(1,80)),new $(18,new k(2,32)),new $(26,new k(2,24)),new $(16,new k(4,9))),new _e(5,Int32Array.from([6,30]),new $(26,new k(1,108)),new $(24,new k(2,43)),new $(18,new k(2,15),new k(2,16)),new $(22,new k(2,11),new k(2,12))),new _e(6,Int32Array.from([6,34]),new $(18,new k(2,68)),new $(16,new k(4,27)),new $(24,new k(4,19)),new $(28,new k(4,15))),new _e(7,Int32Array.from([6,22,38]),new $(20,new k(2,78)),new $(18,new k(4,31)),new $(18,new k(2,14),new k(4,15)),new $(26,new k(4,13),new k(1,14))),new _e(8,Int32Array.from([6,24,42]),new $(24,new k(2,97)),new $(22,new k(2,38),new k(2,39)),new $(22,new k(4,18),new k(2,19)),new $(26,new k(4,14),new k(2,15))),new _e(9,Int32Array.from([6,26,46]),new $(30,new k(2,116)),new $(22,new k(3,36),new k(2,37)),new $(20,new k(4,16),new k(4,17)),new $(24,new k(4,12),new k(4,13))),new _e(10,Int32Array.from([6,28,50]),new $(18,new k(2,68),new k(2,69)),new $(26,new k(4,43),new k(1,44)),new $(24,new k(6,19),new k(2,20)),new $(28,new k(6,15),new k(2,16))),new _e(11,Int32Array.from([6,30,54]),new $(20,new k(4,81)),new $(30,new k(1,50),new k(4,51)),new $(28,new k(4,22),new k(4,23)),new $(24,new k(3,12),new k(8,13))),new _e(12,Int32Array.from([6,32,58]),new $(24,new k(2,92),new k(2,93)),new $(22,new k(6,36),new k(2,37)),new $(26,new k(4,20),new k(6,21)),new $(28,new k(7,14),new k(4,15))),new _e(13,Int32Array.from([6,34,62]),new $(26,new k(4,107)),new $(22,new k(8,37),new k(1,38)),new $(24,new k(8,20),new k(4,21)),new $(22,new k(12,11),new k(4,12))),new _e(14,Int32Array.from([6,26,46,66]),new $(30,new k(3,115),new k(1,116)),new $(24,new k(4,40),new k(5,41)),new $(20,new k(11,16),new k(5,17)),new $(24,new k(11,12),new k(5,13))),new _e(15,Int32Array.from([6,26,48,70]),new $(22,new k(5,87),new k(1,88)),new $(24,new k(5,41),new k(5,42)),new $(30,new k(5,24),new k(7,25)),new $(24,new k(11,12),new k(7,13))),new _e(16,Int32Array.from([6,26,50,74]),new $(24,new k(5,98),new k(1,99)),new $(28,new k(7,45),new k(3,46)),new $(24,new k(15,19),new k(2,20)),new $(30,new k(3,15),new k(13,16))),new _e(17,Int32Array.from([6,30,54,78]),new $(28,new k(1,107),new k(5,108)),new $(28,new k(10,46),new k(1,47)),new $(28,new k(1,22),new k(15,23)),new $(28,new k(2,14),new k(17,15))),new _e(18,Int32Array.from([6,30,56,82]),new $(30,new k(5,120),new k(1,121)),new $(26,new k(9,43),new k(4,44)),new $(28,new k(17,22),new k(1,23)),new $(28,new k(2,14),new k(19,15))),new _e(19,Int32Array.from([6,30,58,86]),new $(28,new k(3,113),new k(4,114)),new $(26,new k(3,44),new k(11,45)),new $(26,new k(17,21),new k(4,22)),new $(26,new k(9,13),new k(16,14))),new _e(20,Int32Array.from([6,34,62,90]),new $(28,new k(3,107),new k(5,108)),new $(26,new k(3,41),new k(13,42)),new $(30,new k(15,24),new k(5,25)),new $(28,new k(15,15),new k(10,16))),new _e(21,Int32Array.from([6,28,50,72,94]),new $(28,new k(4,116),new k(4,117)),new $(26,new k(17,42)),new $(28,new k(17,22),new k(6,23)),new $(30,new k(19,16),new k(6,17))),new _e(22,Int32Array.from([6,26,50,74,98]),new $(28,new k(2,111),new k(7,112)),new $(28,new k(17,46)),new $(30,new k(7,24),new k(16,25)),new $(24,new k(34,13))),new _e(23,Int32Array.from([6,30,54,78,102]),new $(30,new k(4,121),new k(5,122)),new $(28,new k(4,47),new k(14,48)),new $(30,new k(11,24),new k(14,25)),new $(30,new k(16,15),new k(14,16))),new _e(24,Int32Array.from([6,28,54,80,106]),new $(30,new k(6,117),new k(4,118)),new $(28,new k(6,45),new k(14,46)),new $(30,new k(11,24),new k(16,25)),new $(30,new k(30,16),new k(2,17))),new _e(25,Int32Array.from([6,32,58,84,110]),new $(26,new k(8,106),new k(4,107)),new $(28,new k(8,47),new k(13,48)),new $(30,new k(7,24),new k(22,25)),new $(30,new k(22,15),new k(13,16))),new _e(26,Int32Array.from([6,30,58,86,114]),new $(28,new k(10,114),new k(2,115)),new $(28,new k(19,46),new k(4,47)),new $(28,new k(28,22),new k(6,23)),new $(30,new k(33,16),new k(4,17))),new _e(27,Int32Array.from([6,34,62,90,118]),new $(30,new k(8,122),new k(4,123)),new $(28,new k(22,45),new k(3,46)),new $(30,new k(8,23),new k(26,24)),new $(30,new k(12,15),new k(28,16))),new _e(28,Int32Array.from([6,26,50,74,98,122]),new $(30,new k(3,117),new k(10,118)),new $(28,new k(3,45),new k(23,46)),new $(30,new k(4,24),new k(31,25)),new $(30,new k(11,15),new k(31,16))),new _e(29,Int32Array.from([6,30,54,78,102,126]),new $(30,new k(7,116),new k(7,117)),new $(28,new k(21,45),new k(7,46)),new $(30,new k(1,23),new k(37,24)),new $(30,new k(19,15),new k(26,16))),new _e(30,Int32Array.from([6,26,52,78,104,130]),new $(30,new k(5,115),new k(10,116)),new $(28,new k(19,47),new k(10,48)),new $(30,new k(15,24),new k(25,25)),new $(30,new k(23,15),new k(25,16))),new _e(31,Int32Array.from([6,30,56,82,108,134]),new $(30,new k(13,115),new k(3,116)),new $(28,new k(2,46),new k(29,47)),new $(30,new k(42,24),new k(1,25)),new $(30,new k(23,15),new k(28,16))),new _e(32,Int32Array.from([6,34,60,86,112,138]),new $(30,new k(17,115)),new $(28,new k(10,46),new k(23,47)),new $(30,new k(10,24),new k(35,25)),new $(30,new k(19,15),new k(35,16))),new _e(33,Int32Array.from([6,30,58,86,114,142]),new $(30,new k(17,115),new k(1,116)),new $(28,new k(14,46),new k(21,47)),new $(30,new k(29,24),new k(19,25)),new $(30,new k(11,15),new k(46,16))),new _e(34,Int32Array.from([6,34,62,90,118,146]),new $(30,new k(13,115),new k(6,116)),new $(28,new k(14,46),new k(23,47)),new $(30,new k(44,24),new k(7,25)),new $(30,new k(59,16),new k(1,17))),new _e(35,Int32Array.from([6,30,54,78,102,126,150]),new $(30,new k(12,121),new k(7,122)),new $(28,new k(12,47),new k(26,48)),new $(30,new k(39,24),new k(14,25)),new $(30,new k(22,15),new k(41,16))),new _e(36,Int32Array.from([6,24,50,76,102,128,154]),new $(30,new k(6,121),new k(14,122)),new $(28,new k(6,47),new k(34,48)),new $(30,new k(46,24),new k(10,25)),new $(30,new k(2,15),new k(64,16))),new _e(37,Int32Array.from([6,28,54,80,106,132,158]),new $(30,new k(17,122),new k(4,123)),new $(28,new k(29,46),new k(14,47)),new $(30,new k(49,24),new k(10,25)),new $(30,new k(24,15),new k(46,16))),new _e(38,Int32Array.from([6,32,58,84,110,136,162]),new $(30,new k(4,122),new k(18,123)),new $(28,new k(13,46),new k(32,47)),new $(30,new k(48,24),new k(14,25)),new $(30,new k(42,15),new k(32,16))),new _e(39,Int32Array.from([6,26,54,82,110,138,166]),new $(30,new k(20,117),new k(4,118)),new $(28,new k(40,47),new k(7,48)),new $(30,new k(43,24),new k(22,25)),new $(30,new k(10,15),new k(67,16))),new _e(40,Int32Array.from([6,30,58,86,114,142,170]),new $(30,new k(19,118),new k(6,119)),new $(28,new k(18,47),new k(31,48)),new $(30,new k(34,24),new k(34,25)),new $(30,new k(20,15),new k(61,16)))];var Qt;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(Qt||(Qt={}));class Wn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let a=0;a<s;a++)for(let c=0;c<s;c++)this.isMasked(a,c)&&r.flip(c,a)}}Wn.values=new Map([[Qt.DATA_MASK_000,new Wn(Qt.DATA_MASK_000,(T,r)=>(T+r&1)===0)],[Qt.DATA_MASK_001,new Wn(Qt.DATA_MASK_001,(T,r)=>(T&1)===0)],[Qt.DATA_MASK_010,new Wn(Qt.DATA_MASK_010,(T,r)=>r%3===0)],[Qt.DATA_MASK_011,new Wn(Qt.DATA_MASK_011,(T,r)=>(T+r)%3===0)],[Qt.DATA_MASK_100,new Wn(Qt.DATA_MASK_100,(T,r)=>(Math.floor(T/2)+Math.floor(r/3)&1)===0)],[Qt.DATA_MASK_101,new Wn(Qt.DATA_MASK_101,(T,r)=>T*r%6===0)],[Qt.DATA_MASK_110,new Wn(Qt.DATA_MASK_110,(T,r)=>T*r%6<3)],[Qt.DATA_MASK_111,new Wn(Qt.DATA_MASK_111,(T,r)=>(T+r+T*r%3&1)===0)]]);class Hs{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new b;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let a=0;const c=s-7;for(let u=s-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=s-8;u<s;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=un.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new b}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return _e.getVersionForNumber(s);let a=0;const c=r-11;for(let h=5;h>=0;h--)for(let d=r-9;d>=c;d--)a=this.copyBit(d,h,a);let u=_e.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;a=0;for(let h=5;h>=0;h--)for(let d=r-9;d>=c;d--)a=this.copyBit(h,d,a);if(u=_e.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new b}copyBit(r,s,a){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),a=Wn.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=s.buildFunctionPattern();let h=!0;const d=new Uint8Array(s.getTotalCodewords());let y=0,w=0,C=0;for(let v=c-1;v>0;v-=2){v===6&&v--;for(let N=0;N<c;N++){const F=h?c-1-N:N;for(let W=0;W<2;W++)u.get(v-W,F)||(C++,w<<=1,this.bitMatrix.get(v-W,F)&&(w|=1),C===8&&(d[y++]=w,C=0,w=0))}h=!h}if(y!==s.getTotalCodewords())throw new b;return d}remask(){if(this.parsedFormatInfo===null)return;const r=Wn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,a=r.getWidth();s<a;s++)for(let c=s+1,u=r.getHeight();c<u;c++)r.get(s,c)!==r.get(c,s)&&(r.flip(c,s),r.flip(s,c))}}class Fr{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,a){if(r.length!==s.getTotalCodewords())throw new _;const c=s.getECBlocksForLevel(a);let u=0;const h=c.getECBlocks();for(const W of h)u+=W.getCount();const d=new Array(u);let y=0;for(const W of h)for(let Q=0;Q<W.getCount();Q++){const Z=W.getDataCodewords(),ne=c.getECCodewordsPerBlock()+Z;d[y++]=new Fr(Z,new Uint8Array(ne))}const w=d[0].codewords.length;let C=d.length-1;for(;C>=0&&d[C].codewords.length!==w;)C--;C++;const v=w-c.getECCodewordsPerBlock();let N=0;for(let W=0;W<v;W++)for(let Q=0;Q<y;Q++)d[Q].codewords[W]=r[N++];for(let W=C;W<y;W++)d[W].codewords[v]=r[N++];const F=d[0].codewords.length;for(let W=v;W<F;W++)for(let Q=0;Q<y;Q++){const Z=Q<C?W:W+1;d[Q].codewords[Z]=r[N++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Vn;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(Vn||(Vn={}));class Ie{constructor(r,s,a,c){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=c,Ie.FOR_BITS.set(c,this),Ie.FOR_VALUE.set(r,this)}static forBits(r){const s=Ie.FOR_BITS.get(r);if(s===void 0)throw new _;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Ie))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}Ie.FOR_BITS=new Map,Ie.FOR_VALUE=new Map,Ie.TERMINATOR=new Ie(Vn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ie.NUMERIC=new Ie(Vn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ie.ALPHANUMERIC=new Ie(Vn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ie.STRUCTURED_APPEND=new Ie(Vn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ie.BYTE=new Ie(Vn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ie.ECI=new Ie(Vn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ie.KANJI=new Ie(Vn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ie.FNC1_FIRST_POSITION=new Ie(Vn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ie.FNC1_SECOND_POSITION=new Ie(Vn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ie.HANZI=new Ie(Vn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class wt{static decode(r,s,a,c){const u=new Ar(r);let h=new U;const d=new Array;let y=-1,w=-1;try{let C=null,v=!1,N;do{if(u.available()<4)N=Ie.TERMINATOR;else{const F=u.readBits(4);N=Ie.forBits(F)}switch(N){case Ie.TERMINATOR:break;case Ie.FNC1_FIRST_POSITION:case Ie.FNC1_SECOND_POSITION:v=!0;break;case Ie.STRUCTURED_APPEND:if(u.available()<16)throw new b;y=u.readBits(8),w=u.readBits(8);break;case Ie.ECI:const F=wt.parseECIValue(u);if(C=O.getCharacterSetECIByValue(F),C===null)throw new b;break;case Ie.HANZI:const W=u.readBits(4),Q=u.readBits(N.getCharacterCountBits(s));W===wt.GB2312_SUBSET&&wt.decodeHanziSegment(u,h,Q);break;default:const Z=u.readBits(N.getCharacterCountBits(s));switch(N){case Ie.NUMERIC:wt.decodeNumericSegment(u,h,Z);break;case Ie.ALPHANUMERIC:wt.decodeAlphanumericSegment(u,h,Z,v);break;case Ie.BYTE:wt.decodeByteSegment(u,h,Z,C,d,c);break;case Ie.KANJI:wt.decodeKanjiSegment(u,h,Z);break;default:throw new b}break}}while(N!==Ie.TERMINATOR)}catch{throw new b}return new Hi(r,h.toString(),d.length===0?null:d,a===null?null:a.toString(),y,w)}static decodeHanziSegment(r,s,a){if(a*13>r.available())throw new b;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const h=r.readBits(13);let d=h/96<<8&4294967295|h%96;d<959?d+=41377:d+=42657,c[u]=d>>8&255,c[u+1]=d&255,u+=2,a--}try{s.append(H.decode(c,Y.GB2312))}catch(h){throw new b(h)}}static decodeKanjiSegment(r,s,a){if(a*13>r.available())throw new b;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const h=r.readBits(13);let d=h/192<<8&4294967295|h%192;d<7936?d+=33088:d+=49472,c[u]=d>>8,c[u+1]=d,u+=2,a--}try{s.append(H.decode(c,Y.SHIFT_JIS))}catch(h){throw new b(h)}}static decodeByteSegment(r,s,a,c,u,h){if(8*a>r.available())throw new b;const d=new Uint8Array(a);for(let w=0;w<a;w++)d[w]=r.readBits(8);let y;c===null?y=Y.guessEncoding(d,h):y=c.getName();try{s.append(H.decode(d,y))}catch(w){throw new b(w)}u.push(d)}static toAlphaNumericChar(r){if(r>=wt.ALPHANUMERIC_CHARS.length)throw new b;return wt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,a,c){const u=s.length();for(;a>1;){if(r.available()<11)throw new b;const h=r.readBits(11);s.append(wt.toAlphaNumericChar(Math.floor(h/45))),s.append(wt.toAlphaNumericChar(h%45)),a-=2}if(a===1){if(r.available()<6)throw new b;s.append(wt.toAlphaNumericChar(r.readBits(6)))}if(c)for(let h=u;h<s.length();h++)s.charAt(h)==="%"&&(h<s.length()-1&&s.charAt(h+1)==="%"?s.deleteCharAt(h+1):s.setCharAt(h,String.fromCharCode(29)))}static decodeNumericSegment(r,s,a){for(;a>=3;){if(r.available()<10)throw new b;const c=r.readBits(10);if(c>=1e3)throw new b;s.append(wt.toAlphaNumericChar(Math.floor(c/100))),s.append(wt.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(wt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(r.available()<7)throw new b;const c=r.readBits(7);if(c>=100)throw new b;s.append(wt.toAlphaNumericChar(Math.floor(c/10))),s.append(wt.toAlphaNumericChar(c%10))}else if(a===1){if(r.available()<4)throw new b;const c=r.readBits(4);if(c>=10)throw new b;s.append(wt.toAlphaNumericChar(c))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=r.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=r.readBits(16);return(s&31)<<16&4294967295|a}throw new b}}wt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",wt.GB2312_SUBSET=1;class ka{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class uc{constructor(){this.rsDecoder=new Vs(Xe.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(He.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const a=new Hs(r);let c=null;try{return this.decodeBitMatrixParser(a,s)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,s);return u.setOther(new ka(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,s){const a=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),h=Fr.getDataBlocks(u,a,c);let d=0;for(const C of h)d+=C.getNumDataCodewords();const y=new Uint8Array(d);let w=0;for(const C of h){const v=C.getCodewords(),N=C.getNumDataCodewords();this.correctErrors(v,N);for(let F=0;F<N;F++)y[w++]=v[F]}return wt.decode(y,a,c,s)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new P}for(let c=0;c<s;c++)r[c]=a[c]}}class ei extends ge{constructor(r,s,a){super(r,s),this.estimatedModuleSize=a}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=(this.getX()+s)/2,u=(this.getY()+r)/2,h=(this.estimatedModuleSize+a)/2;return new ei(c,u,h)}}class Co{constructor(r,s,a,c,u,h,d){this.image=r,this.startX=s,this.startY=a,this.width=c,this.height=u,this.moduleSize=h,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,a=this.width,c=r+a,u=this.startY+s/2,h=new Int32Array(3),d=this.image;for(let y=0;y<s;y++){const w=u+(y&1?-Math.floor((y+1)/2):Math.floor((y+1)/2));h[0]=0,h[1]=0,h[2]=0;let C=r;for(;C<c&&!d.get(C,w);)C++;let v=0;for(;C<c;){if(d.get(C,w))if(v===1)h[1]++;else if(v===2){if(this.foundPatternCross(h)){const N=this.handlePossibleCenter(h,w,C);if(N!==null)return N}h[0]=h[2],h[1]=1,h[2]=0,v=1}else h[++v]++;else v===1&&v++,h[v]++;C++}if(this.foundPatternCross(h)){const N=this.handlePossibleCenter(h,w,c);if(N!==null)return N}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,a=s/2;for(let c=0;c<3;c++)if(Math.abs(s-r[c])>=a)return!1;return!0}crossCheckVertical(r,s,a,c){const u=this.image,h=u.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let y=r;for(;y>=0&&u.get(s,y)&&d[1]<=a;)d[1]++,y--;if(y<0||d[1]>a)return NaN;for(;y>=0&&!u.get(s,y)&&d[0]<=a;)d[0]++,y--;if(d[0]>a)return NaN;for(y=r+1;y<h&&u.get(s,y)&&d[1]<=a;)d[1]++,y++;if(y===h||d[1]>a)return NaN;for(;y<h&&!u.get(s,y)&&d[2]<=a;)d[2]++,y++;if(d[2]>a)return NaN;const w=d[0]+d[1]+d[2];return 5*Math.abs(w-c)>=2*c?NaN:this.foundPatternCross(d)?Co.centerFromEnd(d,y):NaN}handlePossibleCenter(r,s,a){const c=r[0]+r[1]+r[2],u=Co.centerFromEnd(r,a),h=this.crossCheckVertical(s,u,2*r[1],c);if(!isNaN(h)){const d=(r[0]+r[1]+r[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(d,h,u))return w.combineEstimate(h,u,d);const y=new ei(u,h,d);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class La extends ge{constructor(r,s,a,c){super(r,s),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=this.count+1,u=(this.count*this.getX()+s)/c,h=(this.count*this.getY()+r)/c,d=(this.count*this.estimatedModuleSize+a)/c;return new La(u,h,d,c)}}class Dh{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class mt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(te.TRY_HARDER)!==void 0,a=r!=null&&r.get(te.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),h=c.getWidth();let d=Math.floor(3*u/(4*mt.MAX_MODULES));(d<mt.MIN_SKIP||s)&&(d=mt.MIN_SKIP);let y=!1;const w=new Int32Array(5);for(let v=d-1;v<u&&!y;v+=d){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let N=0;for(let F=0;F<h;F++)if(c.get(F,v))(N&1)===1&&N++,w[N]++;else if(N&1)w[N]++;else if(N===4)if(mt.foundPatternCross(w)){if(this.handlePossibleCenter(w,v,F,a)===!0)if(d=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const Q=this.findRowSkip();Q>w[2]&&(v+=Q-w[2]-d,F=h-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,N=3;continue}N=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,N=3;else w[++N]++;mt.foundPatternCross(w)&&this.handlePossibleCenter(w,v,h,a)===!0&&(d=w[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return ge.orderBestPatterns(C),new Dh(C)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const h=r[u];if(h===0)return!1;s+=h}if(s<7)return!1;const a=s/7,c=a/2;return Math.abs(a-r[0])<c&&Math.abs(a-r[1])<c&&Math.abs(3*a-r[2])<3*c&&Math.abs(a-r[3])<c&&Math.abs(a-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,a,c){const u=this.getCrossCheckStateCount();let h=0;const d=this.image;for(;r>=h&&s>=h&&d.get(s-h,r-h);)u[2]++,h++;if(r<h||s<h)return!1;for(;r>=h&&s>=h&&!d.get(s-h,r-h)&&u[1]<=a;)u[1]++,h++;if(r<h||s<h||u[1]>a)return!1;for(;r>=h&&s>=h&&d.get(s-h,r-h)&&u[0]<=a;)u[0]++,h++;if(u[0]>a)return!1;const y=d.getHeight(),w=d.getWidth();for(h=1;r+h<y&&s+h<w&&d.get(s+h,r+h);)u[2]++,h++;if(r+h>=y||s+h>=w)return!1;for(;r+h<y&&s+h<w&&!d.get(s+h,r+h)&&u[3]<a;)u[3]++,h++;if(r+h>=y||s+h>=w||u[3]>=a)return!1;for(;r+h<y&&s+h<w&&d.get(s+h,r+h)&&u[4]<a;)u[4]++,h++;if(u[4]>=a)return!1;const C=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(C-c)<2*c&&mt.foundPatternCross(u)}crossCheckVertical(r,s,a,c){const u=this.image,h=u.getHeight(),d=this.getCrossCheckStateCount();let y=r;for(;y>=0&&u.get(s,y);)d[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(s,y)&&d[1]<=a;)d[1]++,y--;if(y<0||d[1]>a)return NaN;for(;y>=0&&u.get(s,y)&&d[0]<=a;)d[0]++,y--;if(d[0]>a)return NaN;for(y=r+1;y<h&&u.get(s,y);)d[2]++,y++;if(y===h)return NaN;for(;y<h&&!u.get(s,y)&&d[3]<a;)d[3]++,y++;if(y===h||d[3]>=a)return NaN;for(;y<h&&u.get(s,y)&&d[4]<a;)d[4]++,y++;if(d[4]>=a)return NaN;const w=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(w-c)>=2*c?NaN:mt.foundPatternCross(d)?mt.centerFromEnd(d,y):NaN}crossCheckHorizontal(r,s,a,c){const u=this.image,h=u.getWidth(),d=this.getCrossCheckStateCount();let y=r;for(;y>=0&&u.get(y,s);)d[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(y,s)&&d[1]<=a;)d[1]++,y--;if(y<0||d[1]>a)return NaN;for(;y>=0&&u.get(y,s)&&d[0]<=a;)d[0]++,y--;if(d[0]>a)return NaN;for(y=r+1;y<h&&u.get(y,s);)d[2]++,y++;if(y===h)return NaN;for(;y<h&&!u.get(y,s)&&d[3]<a;)d[3]++,y++;if(y===h||d[3]>=a)return NaN;for(;y<h&&u.get(y,s)&&d[4]<a;)d[4]++,y++;if(d[4]>=a)return NaN;const w=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(w-c)>=c?NaN:mt.foundPatternCross(d)?mt.centerFromEnd(d,y):NaN}handlePossibleCenter(r,s,a,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let h=mt.centerFromEnd(r,a),d=this.crossCheckVertical(s,Math.floor(h),r[2],u);if(!isNaN(d)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(d),r[2],u),!isNaN(h)&&(!c||this.crossCheckDiagonal(Math.floor(d),Math.floor(h),r[2],u)))){const y=u/7;let w=!1;const C=this.possibleCenters;for(let v=0,N=C.length;v<N;v++){const F=C[v];if(F.aboutEquals(y,d,h)){C[v]=F.combineEstimate(d,h,y),w=!0;break}}if(!w){const v=new La(h,d,y);C.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=mt.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const a=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=mt.CENTER_QUORUM&&(r++,s+=h.getEstimatedModuleSize());if(r<3)return!1;const c=s/a;let u=0;for(const h of this.possibleCenters)u+=Math.abs(h.getEstimatedModuleSize()-c);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new re;const s=this.possibleCenters;let a;if(r>3){let c=0,u=0;for(const y of this.possibleCenters){const w=y.getEstimatedModuleSize();c+=w,u+=w*w}a=c/r;let h=Math.sqrt(u/r-a*a);s.sort((y,w)=>{const C=Math.abs(w.getEstimatedModuleSize()-a),v=Math.abs(y.getEstimatedModuleSize()-a);return C<v?-1:C>v?1:0});const d=Math.max(.2*a,h);for(let y=0;y<s.length&&s.length>3;y++){const w=s[y];Math.abs(w.getEstimatedModuleSize()-a)>d&&(s.splice(y,1),y--)}}if(s.length>3){let c=0;for(const u of s)c+=u.getEstimatedModuleSize();a=c/s.length,s.sort((u,h)=>{if(h.getCount()===u.getCount()){const d=Math.abs(h.getEstimatedModuleSize()-a),y=Math.abs(u.getEstimatedModuleSize()-a);return d<y?1:d>y?-1:0}else return h.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}mt.CENTER_QUORUM=2,mt.MIN_SKIP=3,mt.MAX_MODULES=57;class Gs{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(te.NEED_RESULT_POINT_CALLBACK);const a=new mt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const s=r.getTopLeft(),a=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(s,a,c);if(u<1)throw new re("No pattern found in proccess finder.");const h=Gs.computeDimension(s,a,c,u),d=_e.getProvisionalVersionForDimension(h),y=d.getDimensionForVersion()-7;let w=null;if(d.getAlignmentPatternCenters().length>0){const F=a.getX()-s.getX()+c.getX(),W=a.getY()-s.getY()+c.getY(),Q=1-3/y,Z=Math.floor(s.getX()+Q*(F-s.getX())),ne=Math.floor(s.getY()+Q*(W-s.getY()));for(let ue=4;ue<=16;ue<<=1)try{w=this.findAlignmentInRegion(u,Z,ne,ue);break}catch(he){if(!(he instanceof re))throw he}}const C=Gs.createTransform(s,a,c,w,h),v=Gs.sampleGrid(this.image,C,h);let N;return w===null?N=[c,s,a]:N=[c,s,a,w],new wi(v,N)}static createTransform(r,s,a,c,u){const h=u-3.5;let d,y,w,C;return c!==null?(d=c.getX(),y=c.getY(),w=h-3,C=w):(d=s.getX()-r.getX()+a.getX(),y=s.getY()-r.getY()+a.getY(),w=h,C=h),pn.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,w,C,3.5,h,r.getX(),r.getY(),s.getX(),s.getY(),d,y,a.getX(),a.getY())}static sampleGrid(r,s,a){return kr.getInstance().sampleGridWithTransform(r,a,a,s)}static computeDimension(r,s,a,c){const u=Ue.round(ge.distance(r,s)/c),h=Ue.round(ge.distance(r,a)/c);let d=Math.floor((u+h)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new re("Dimensions could be not found.")}return d}calculateModuleSize(r,s,a){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,a,c){let u=this.sizeOfBlackWhiteBlackRun(r,s,a,c),h=1,d=r-(a-r);d<0?(h=r/(r-d),d=0):d>=this.image.getWidth()&&(h=(this.image.getWidth()-1-r)/(d-r),d=this.image.getWidth()-1);let y=Math.floor(s-(c-s)*h);return h=1,y<0?(h=s/(s-y),y=0):y>=this.image.getHeight()&&(h=(this.image.getHeight()-1-s)/(y-s),y=this.image.getHeight()-1),d=Math.floor(r+(d-r)*h),u+=this.sizeOfBlackWhiteBlackRun(r,s,d,y),u-1}sizeOfBlackWhiteBlackRun(r,s,a,c){const u=Math.abs(c-s)>Math.abs(a-r);if(u){let F=r;r=s,s=F,F=a,a=c,c=F}const h=Math.abs(a-r),d=Math.abs(c-s);let y=-h/2;const w=r<a?1:-1,C=s<c?1:-1;let v=0;const N=a+w;for(let F=r,W=s;F!==N;F+=w){const Q=u?W:F,Z=u?F:W;if(v===1===this.image.get(Q,Z)){if(v===2)return Ue.distance(F,W,r,s);v++}if(y+=d,y>0){if(W===c)break;W+=C,y-=h}}return v===2?Ue.distance(a+w,c,r,s):NaN}findAlignmentInRegion(r,s,a,c){const u=Math.floor(c*r),h=Math.max(0,s-u),d=Math.min(this.image.getWidth()-1,s+u);if(d-h<r*3)throw new re("Alignment top exceeds estimated module size.");const y=Math.max(0,a-u),w=Math.min(this.image.getHeight()-1,a+u);if(w-y<r*3)throw new re("Alignment bottom exceeds estimated module size.");return new Co(this.image,h,y,d-h,w-y,r,this.resultPointCallback).find()}}class Cr{constructor(){this.decoder=new uc}getDecoder(){return this.decoder}decode(r,s){let a,c;if(s!=null&&s.get(te.PURE_BARCODE)!==void 0){const y=Cr.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(y,s),c=Cr.NO_POINTS}else{const y=new Gs(r.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(y.getBits(),s),c=y.getPoints()}a.getOther()instanceof ka&&a.getOther().applyMirroredCorrection(c);const u=new dt(a.getText(),a.getRawBytes(),void 0,c,Ae.QR_CODE,void 0),h=a.getByteSegments();h!==null&&u.putMetadata(Vt.BYTE_SEGMENTS,h);const d=a.getECLevel();return d!==null&&u.putMetadata(Vt.ERROR_CORRECTION_LEVEL,d),a.hasStructuredAppend()&&(u.putMetadata(Vt.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(Vt.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s===null||a===null)throw new re;const c=this.moduleSize(s,r);let u=s[1],h=a[1],d=s[0],y=a[0];if(d>=y||u>=h)throw new re;if(h-u!==y-d&&(y=d+(h-u),y>=r.getWidth()))throw new re;const w=Math.round((y-d+1)/c),C=Math.round((h-u+1)/c);if(w<=0||C<=0)throw new re;if(C!==w)throw new re;const v=Math.floor(c/2);u+=v,d+=v;const N=d+Math.floor((w-1)*c)-y;if(N>0){if(N>v)throw new re;d-=N}const F=u+Math.floor((C-1)*c)-h;if(F>0){if(F>v)throw new re;u-=F}const W=new He(w,C);for(let Q=0;Q<C;Q++){const Z=u+Math.floor(Q*c);for(let ne=0;ne<w;ne++)r.get(d+Math.floor(ne*c),Z)&&W.set(ne,Q)}return W}static moduleSize(r,s){const a=s.getHeight(),c=s.getWidth();let u=r[0],h=r[1],d=!0,y=0;for(;u<c&&h<a;){if(d!==s.get(u,h)){if(++y===5)break;d=!d}u++,h++}if(u===c||h===a)throw new re;return(u-r[0])/7}}Cr.NO_POINTS=new Array;class Se{PDF417Common(){}static getBitCountSum(r){return Ue.sum(r)}static toIntArray(r){if(r==null||!r.length)return Se.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let a=0;for(const c of r)s[a++]=c;return s}static getCodeword(r){const s=B.binarySearch(Se.SYMBOL_TABLE,r&262143);return s<0?-1:(Se.CODEWORD_TABLE[s]-1)%Se.NUMBER_OF_CODEWORDS}}Se.NUMBER_OF_CODEWORDS=929,Se.MAX_CODEWORDS_IN_BARCODE=Se.NUMBER_OF_CODEWORDS-1,Se.MIN_ROWS_IN_BARCODE=3,Se.MAX_ROWS_IN_BARCODE=90,Se.MODULES_IN_CODEWORD=17,Se.MODULES_IN_STOP_PATTERN=18,Se.BARS_IN_MODULE=8,Se.EMPTY_INT_ARRAY=new Int32Array([]),Se.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Se.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class hc{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class De{static detectMultiple(r,s,a){let c=r.getBlackMatrix(),u=De.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=De.detect(a,c)),new hc(c,u)}static detect(r,s){const a=new Array;let c=0,u=0,h=!1;for(;c<s.getHeight();){const d=De.findVertices(s,c,u);if(d[0]==null&&d[3]==null){if(!h)break;h=!1,u=0;for(const y of a)y[1]!=null&&(c=Math.trunc(Math.max(c,y[1].getY()))),y[3]!=null&&(c=Math.max(c,Math.trunc(y[3].getY())));c+=De.ROW_STEP;continue}if(h=!0,a.push(d),!r)break;d[2]!=null?(u=Math.trunc(d[2].getX()),c=Math.trunc(d[2].getY())):(u=Math.trunc(d[4].getX()),c=Math.trunc(d[4].getY()))}return a}static findVertices(r,s,a){const c=r.getHeight(),u=r.getWidth(),h=new Array(8);return De.copyToResult(h,De.findRowsWithPattern(r,c,u,s,a,De.START_PATTERN),De.INDEXES_START_PATTERN),h[4]!=null&&(a=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY())),De.copyToResult(h,De.findRowsWithPattern(r,c,u,s,a,De.STOP_PATTERN),De.INDEXES_STOP_PATTERN),h}static copyToResult(r,s,a){for(let c=0;c<a.length;c++)r[a[c]]=s[c]}static findRowsWithPattern(r,s,a,c,u,h){const d=new Array(4);let y=!1;const w=new Int32Array(h.length);for(;c<s;c+=De.ROW_STEP){let v=De.findGuardPattern(r,u,c,a,!1,h,w);if(v!=null){for(;c>0;){const N=De.findGuardPattern(r,u,--c,a,!1,h,w);if(N!=null)v=N;else{c++;break}}d[0]=new ge(v[0],c),d[1]=new ge(v[1],c),y=!0;break}}let C=c+1;if(y){let v=0,N=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;C<s;C++){const F=De.findGuardPattern(r,N[0],C,a,!1,h,w);if(F!=null&&Math.abs(N[0]-F[0])<De.MAX_PATTERN_DRIFT&&Math.abs(N[1]-F[1])<De.MAX_PATTERN_DRIFT)N=F,v=0;else{if(v>De.SKIPPED_ROW_COUNT_MAX)break;v++}}C-=v+1,d[2]=new ge(N[0],C),d[3]=new ge(N[1],C)}return C-c<De.BARCODE_MIN_HEIGHT&&B.fill(d,null),d}static findGuardPattern(r,s,a,c,u,h,d){B.fillWithin(d,0,d.length,0);let y=s,w=0;for(;r.get(y,a)&&y>0&&w++<De.MAX_PIXEL_DRIFT;)y--;let C=y,v=0,N=h.length;for(let F=u;C<c;C++)if(r.get(C,a)!==F)d[v]++;else{if(v===N-1){if(De.patternMatchVariance(d,h,De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE)return new Int32Array([y,C]);y+=d[0]+d[1],G.arraycopy(d,2,d,0,v-1),d[v-1]=0,d[v]=0,v--}else v++;d[v]=1,F=!F}return v===N-1&&De.patternMatchVariance(d,h,De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE?new Int32Array([y,C-1]):null}static patternMatchVariance(r,s,a){let c=r.length,u=0,h=0;for(let w=0;w<c;w++)u+=r[w],h+=s[w];if(u<h)return 1/0;let d=u/h;a*=d;let y=0;for(let w=0;w<c;w++){let C=r[w],v=s[w]*d,N=C>v?C-v:v-C;if(N>a)return 1/0;y+=N}return y/u}}De.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),De.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),De.MAX_AVG_VARIANCE=.42,De.MAX_INDIVIDUAL_VARIANCE=.8,De.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),De.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),De.MAX_PIXEL_DRIFT=3,De.MAX_PATTERN_DRIFT=5,De.SKIPPED_ROW_COUNT_MAX=25,De.ROW_STEP=5,De.BARCODE_MIN_HEIGHT=10;class Ot{constructor(r,s){if(s.length===0)throw new _;this.field=r;let a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),G.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let s=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)s=this.field.add(this.field.multiply(r,s),this.coefficients[c]);return s}add(r){if(!this.field.equals(r.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){let h=s;s=a,a=h}let c=new Int32Array(a.length),u=a.length-s.length;G.arraycopy(a,0,c,0,u);for(let h=u;h<a.length;h++)c[h]=this.field.add(s[h-u],a[h]);return new Ot(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new _("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Ot?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Ot(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,h=new Int32Array(a+u-1);for(let d=0;d<a;d++){let y=s[d];for(let w=0;w<u;w++)h[d+w]=this.field.add(h[d+w],this.field.multiply(y,c[w]))}return new Ot(this.field,h)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new Ot(this.field,s)}multiplyScalar(r){if(r===0)return new Ot(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],r);return new Ot(this.field,a)}multiplyByMonomial(r,s){if(r<0)throw new _;if(s===0)return new Ot(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+r);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new Ot(this.field,c)}toString(){let r=new U;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(s===0||a!==1)&&r.append(a),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class fc{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new _;return this.logTable[r]}inverse(r){if(r===0)throw new Fs;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Ws extends fc{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let c=0;c<r;c++)this.expTable[c]=a,a=a*s%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Ot(this,new Int32Array([0])),this.one=new Ot(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new _;if(s===0)return this.zero;let a=new Int32Array(r+1);return a[0]=s,new Ot(this,a)}}Ws.PDF417_GF=new Ws(Se.NUMBER_OF_CODEWORDS,3);class It{constructor(){this.field=Ws.PDF417_GF}decode(r,s,a){let c=new Ot(this.field,r),u=new Int32Array(s),h=!1;for(let W=s;W>0;W--){let Q=c.evaluateAt(this.field.exp(W));u[s-W]=Q,Q!==0&&(h=!0)}if(!h)return 0;let d=this.field.getOne();if(a!=null)for(const W of a){let Q=this.field.exp(r.length-1-W),Z=new Ot(this.field,new Int32Array([this.field.subtract(0,Q),1]));d=d.multiply(Z)}let y=new Ot(this.field,u),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),y,s),C=w[0],v=w[1],N=this.findErrorLocations(C),F=this.findErrorMagnitudes(v,C,N);for(let W=0;W<N.length;W++){let Q=r.length-1-this.field.log(N[W]);if(Q<0)throw P.getChecksumInstance();r[Q]=this.field.subtract(r[Q],F[W])}return N.length}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){let N=r;r=s,s=N}let c=r,u=s,h=this.field.getZero(),d=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let N=c,F=h;if(c=u,h=d,c.isZero())throw P.getChecksumInstance();u=N;let W=this.field.getZero(),Q=c.getCoefficient(c.getDegree()),Z=this.field.inverse(Q);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let ne=u.getDegree()-c.getDegree(),ue=this.field.multiply(u.getCoefficient(u.getDegree()),Z);W=W.add(this.field.buildMonomial(ne,ue)),u=u.subtract(c.multiplyByMonomial(ne,ue))}d=W.multiply(h).subtract(F).negative()}let y=d.getCoefficient(0);if(y===0)throw P.getChecksumInstance();let w=this.field.inverse(y),C=d.multiply(w),v=u.multiply(w);return[C,v]}findErrorLocations(r){let s=r.getDegree(),a=new Int32Array(s),c=0;for(let u=1;u<this.field.getSize()&&c<s;u++)r.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==s)throw P.getChecksumInstance();return a}findErrorMagnitudes(r,s,a){let c=s.getDegree(),u=new Int32Array(c);for(let w=1;w<=c;w++)u[c-w]=this.field.multiply(w,s.getCoefficient(w));let h=new Ot(this.field,u),d=a.length,y=new Int32Array(d);for(let w=0;w<d;w++){let C=this.field.inverse(a[w]),v=this.field.subtract(0,r.evaluateAt(C)),N=this.field.inverse(h.evaluateAt(C));y[w]=this.field.multiply(v,N)}return y}}class _i{constructor(r,s,a,c,u){r instanceof _i?this.constructor_2(r):this.constructor_1(r,s,a,c,u)}constructor_1(r,s,a,c,u){const h=s==null||a==null,d=c==null||u==null;if(h&&d)throw new re;h?(s=new ge(0,c.getY()),a=new ge(0,u.getY())):d&&(c=new ge(r.getWidth()-1,s.getY()),u=new ge(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=s,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new _i(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,a){let c=this.topLeft,u=this.bottomLeft,h=this.topRight,d=this.bottomRight;if(r>0){let y=a?this.topLeft:this.topRight,w=Math.trunc(y.getY()-r);w<0&&(w=0);let C=new ge(y.getX(),w);a?c=C:h=C}if(s>0){let y=a?this.bottomLeft:this.bottomRight,w=Math.trunc(y.getY()+s);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let C=new ge(y.getX(),w);a?u=C:d=C}return new _i(this.image,c,u,h,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Mh{constructor(r,s,a,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qi{constructor(){this.buffer=""}static form(r,s){let a=-1;function c(h,d,y,w,C,v){if(h==="%%")return"%";if(s[++a]===void 0)return;h=w?parseInt(w.substr(1)):void 0;let N=C?parseInt(C.substr(1)):void 0,F;switch(v){case"s":F=s[a];break;case"c":F=s[a][0];break;case"f":F=parseFloat(s[a]).toFixed(h);break;case"p":F=parseFloat(s[a]).toPrecision(h);break;case"e":F=parseFloat(s[a]).toExponential(h);break;case"x":F=parseInt(s[a]).toString(N||16);break;case"d":F=parseFloat(parseInt(s[a],N||10).toPrecision(h)).toFixed(0);break}F=typeof F=="object"?JSON.stringify(F):(+F).toString(N);let W=parseInt(y),Q=y&&y[0]+""=="0"?"0":" ";for(;F.length<W;)F=d!==void 0?F+Q:Q+F;return F}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...s){this.buffer+=qi.form(r,s)}toString(){return this.buffer}}class Zi{constructor(r){this.boundingBox=new _i(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let a=1;a<Zi.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(r)-a;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(r)+a,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new qi;let s=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return r.toString()}}Zi.MAX_NEARBY_DISTANCE=5;class $i{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return Se.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class Ys extends Zi{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=-1,w=1,C=0;for(let v=h;v<d;v++){if(s[v]==null)continue;let N=s[v],F=N.getRowNumber()-y;if(F===0)C++;else if(F===1)w=Math.max(w,C),C=1,y=N.getRowNumber();else if(F<0||N.getRowNumber()>=r.getRowCount()||F>v)s[v]=null;else{let W;w>2?W=(w-2)*F:W=F;let Q=W>=v;for(let Z=1;Z<=W&&!Q;Z++)Q=s[v-Z]!=null;Q?s[v]=null:(y=N.getRowNumber(),C=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),d=this.getCodewords(),y=-1;for(let w=u;w<h;w++){if(d[w]==null)continue;let C=d[w];C.setRowNumberAsRowIndicatorColumn();let v=C.getRowNumber()-y;v===0||(v===1?y=C.getRowNumber():C.getRowNumber()>=r.getRowCount()?d[w]=null:y=C.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new $i,a=new $i,c=new $i,u=new $i;for(let d of r){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let y=d.getValue()%30,w=d.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:a.setValue(y*3+1);break;case 1:u.setValue(y/3),c.setValue(y%3);break;case 2:s.setValue(y+1);break}}if(s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<Se.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>Se.MAX_ROWS_IN_BARCODE)return null;let h=new Mh(s.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,h),h}removeIncorrectCodewords(r,s){for(let a=0;a<r.length;a++){let c=r[a];if(r[a]==null)continue;let u=c.getValue()%30,h=c.getRowNumber();if(h>s.getRowCount()){r[a]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[a]=null);break;case 2:u+1!==s.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Yn{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Se.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&s[a]!=null&&r[a].getRowNumber()===s[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(r[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let h=this.barcodeColumnCount+1;h>0&&u<this.ADJUST_ROW_NUMBER_SKIP;h--){let d=this.detectionResultColumns[h].getCodewords()[a];d!=null&&(u=Yn.adjustRowNumberIfValid(c,u,d),d.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let h=1;h<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;h++){let d=this.detectionResultColumns[h].getCodewords()[a];d!=null&&(u=Yn.adjustRowNumberIfValid(c,u,d),d.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,a){if(!this.detectionResultColumns[r-1])return;let c=a[s],u=this.detectionResultColumns[r-1].getCodewords(),h=u;this.detectionResultColumns[r+1]!=null&&(h=this.detectionResultColumns[r+1].getCodewords());let d=new Array(14);d[2]=u[s],d[3]=h[s],s>0&&(d[0]=a[s-1],d[4]=u[s-1],d[5]=h[s-1]),s>1&&(d[8]=a[s-2],d[10]=u[s-2],d[11]=h[s-2]),s<a.length-1&&(d[1]=a[s+1],d[6]=u[s+1],d[7]=h[s+1]),s<a.length-2&&(d[9]=a[s+2],d[12]=u[s+2],d[13]=h[s+2]);for(let y of d)if(Yn.adjustRowNumber(c,y))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new qi;for(let a=0;a<r.getCodewords().length;a++){s.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class Ji{constructor(r,s,a,c){this.rowNumber=Ji.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==Ji.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}Ji.BARCODE_ROW_UNKNOWN=-1;class Nn{static initialize(){for(let r=0;r<Se.SYMBOL_TABLE.length;r++){let s=Se.SYMBOL_TABLE[r],a=s&1;for(let c=0;c<Se.BARS_IN_MODULE;c++){let u=0;for(;(s&1)===a;)u+=1,s>>=1;a=s&1,Nn.RATIOS_TABLE[r]||(Nn.RATIOS_TABLE[r]=new Array(Se.BARS_IN_MODULE)),Nn.RATIOS_TABLE[r][Se.BARS_IN_MODULE-c-1]=Math.fround(u/Se.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=Nn.getDecodedCodewordValue(Nn.sampleBitCounts(r));return s!==-1?s:Nn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=Ue.sum(r),a=new Int32Array(Se.BARS_IN_MODULE),c=0,u=0;for(let h=0;h<Se.MODULES_IN_CODEWORD;h++){let d=s/(2*Se.MODULES_IN_CODEWORD)+h*s/Se.MODULES_IN_CODEWORD;u+r[c]<=d&&(u+=r[c],c++),a[c]++}return a}static getDecodedCodewordValue(r){let s=Nn.getBitValue(r);return Se.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let a=0;a<r.length;a++)for(let c=0;c<r[a];c++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=Ue.sum(r),a=new Array(Se.BARS_IN_MODULE);if(s>1)for(let h=0;h<a.length;h++)a[h]=Math.fround(r[h]/s);let c=Gt.MAX_VALUE,u=-1;this.bSymbolTableReady||Nn.initialize();for(let h=0;h<Nn.RATIOS_TABLE.length;h++){let d=0,y=Nn.RATIOS_TABLE[h];for(let w=0;w<Se.BARS_IN_MODULE;w++){let C=Math.fround(y[w]-a[w]);if(d+=Math.fround(C*C),d>=c)break}d<c&&(c=d,u=Se.SYMBOL_TABLE[h])}return u}}Nn.bSymbolTableReady=!1,Nn.RATIOS_TABLE=new Array(Se.SYMBOL_TABLE.length).map(T=>new Array(Se.BARS_IN_MODULE));class es{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class Ba{static parseLong(r,s=void 0){return parseInt(r,s)}}class Io extends p{}Io.kind="NullPointerException";class To{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,a){if(r==null)throw new Io;if(s<0||s>r.length||a<0||s+a>r.length||s+a<0)throw new X;if(a===0)return;for(let c=0;c<a;c++)this.write(r[s+c])}flush(){}close(){}}class dc extends p{}class vo extends To{constructor(r=32){if(super(),this.count=0,r<0)throw new _("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new dc;a=L.MAX_VALUE}this.buf=B.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,a){if(s<0||s>r.length||a<0||s+a-r.length>0)throw new X;this.ensureCapacity(this.count+a),G.arraycopy(r,s,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return B.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var ot;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ot||(ot={}));function Fa(){if(typeof window<"u")return window.BigInt||null;if(typeof za<"u")return za.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ti;function Vr(T){if(typeof ti>"u"&&(ti=Fa()),ti===null)throw new Error("BigInt is not supported!");return ti(T)}function gc(){let T=[];T[0]=Vr(1);let r=Vr(900);T[1]=r;for(let s=2;s<16;s++)T[s]=T[s-1]*r;return T}class ee{static decode(r,s){let a=new U(""),c=O.ISO8859_1;a.enableDecoding(c);let u=1,h=r[u++],d=new es;for(;u<r[0];){switch(h){case ee.TEXT_COMPACTION_MODE_LATCH:u=ee.textCompaction(r,u,a);break;case ee.BYTE_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:u=ee.byteCompaction(h,r,c,u,a);break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u++]);break;case ee.NUMERIC_COMPACTION_MODE_LATCH:u=ee.numericCompaction(r,u,a);break;case ee.ECI_CHARSET:O.getCharacterSetECIByValue(r[u++]);break;case ee.ECI_GENERAL_PURPOSE:u+=2;break;case ee.ECI_USER_DEFINED:u++;break;case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=ee.decodeMacroBlock(r,u,d);break;case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:throw new b;default:u--,u=ee.textCompaction(r,u,a);break}if(u<r.length)h=r[u++];else throw b.getFormatInstance()}if(a.length()===0)throw b.getFormatInstance();let y=new Hi(null,a.toString(),null,s);return y.setOther(d),y}static decodeMacroBlock(r,s,a){if(s+ee.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw b.getFormatInstance();let c=new Int32Array(ee.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<ee.NUMBER_OF_SEQUENCE_CODEWORDS;d++,s++)c[d]=r[s];a.setSegmentIndex(L.parseInt(ee.decodeBase900toBase10(c,ee.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new U;s=ee.textCompaction(r,s,u),a.setFileId(u.toString());let h=-1;for(r[s]===ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=s+1);s<r[0];)switch(r[s]){case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new U;s=ee.textCompaction(r,s+1,d),a.setFileName(d.toString());break;case ee.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new U;s=ee.textCompaction(r,s+1,y),a.setSender(y.toString());break;case ee.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new U;s=ee.textCompaction(r,s+1,w),a.setAddressee(w.toString());break;case ee.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new U;s=ee.numericCompaction(r,s+1,C),a.setSegmentCount(L.parseInt(C.toString()));break;case ee.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let v=new U;s=ee.numericCompaction(r,s+1,v),a.setTimestamp(Ba.parseLong(v.toString()));break;case ee.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let N=new U;s=ee.numericCompaction(r,s+1,N),a.setChecksum(L.parseInt(N.toString()));break;case ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let F=new U;s=ee.numericCompaction(r,s+1,F),a.setFileSize(Ba.parseLong(F.toString()));break;default:throw b.getFormatInstance()}break;case ee.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw b.getFormatInstance()}if(h!==-1){let d=s-h;a.isLastSegment()&&d--,a.setOptionalData(B.copyOfRange(r,h,h+d))}return s}static textCompaction(r,s,a){let c=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),h=0,d=!1;for(;s<r[0]&&!d;){let y=r[s++];if(y<ee.TEXT_COMPACTION_MODE_LATCH)c[h]=y/30,c[h+1]=y%30,h+=2;else switch(y){case ee.TEXT_COMPACTION_MODE_LATCH:c[h++]=ee.TEXT_COMPACTION_MODE_LATCH;break;case ee.BYTE_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.NUMERIC_COMPACTION_MODE_LATCH:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:s--,d=!0;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[h]=ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=r[s++],u[h]=y,h++;break}}return ee.decodeTextCompaction(c,u,h,a),s}static decodeTextCompaction(r,s,a,c){let u=ot.ALPHA,h=ot.ALPHA,d=0;for(;d<a;){let y=r[d],w="";switch(u){case ot.ALPHA:if(y<26)w=String.fromCharCode(65+y);else switch(y){case 26:w=" ";break;case ee.LL:u=ot.LOWER;break;case ee.ML:u=ot.MIXED;break;case ee.PS:h=u,u=ot.PUNCT_SHIFT;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case ee.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.LOWER:if(y<26)w=String.fromCharCode(97+y);else switch(y){case 26:w=" ";break;case ee.AS:h=u,u=ot.ALPHA_SHIFT;break;case ee.ML:u=ot.MIXED;break;case ee.PS:h=u,u=ot.PUNCT_SHIFT;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case ee.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.MIXED:if(y<ee.PL)w=ee.MIXED_CHARS[y];else switch(y){case ee.PL:u=ot.PUNCT;break;case 26:w=" ";break;case ee.LL:u=ot.LOWER;break;case ee.AL:u=ot.ALPHA;break;case ee.PS:h=u,u=ot.PUNCT_SHIFT;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case ee.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.PUNCT:if(y<ee.PAL)w=ee.PUNCT_CHARS[y];else switch(y){case ee.PAL:u=ot.ALPHA;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case ee.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.ALPHA_SHIFT:if(u=h,y<26)w=String.fromCharCode(65+y);else switch(y){case 26:w=" ";break;case ee.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.PUNCT_SHIFT:if(u=h,y<ee.PAL)w=ee.PUNCT_CHARS[y];else switch(y){case ee.PAL:u=ot.ALPHA;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case ee.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break}w!==""&&c.append(w),d++}}static byteCompaction(r,s,a,c,u){let h=new vo,d=0,y=0,w=!1;switch(r){case ee.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),v=s[c++];for(;c<s[0]&&!w;)switch(C[d++]=v,y=900*y+v,v=s[c++],v){case ee.TEXT_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH:case ee.NUMERIC_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:c--,w=!0;break;default:if(d%5===0&&d>0){for(let N=0;N<6;++N)h.write(Number(Vr(y)>>Vr(8*(5-N))));y=0,d=0}break}c===s[0]&&v<ee.TEXT_COMPACTION_MODE_LATCH&&(C[d++]=v);for(let N=0;N<d;N++)h.write(C[N]);break;case ee.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!w;){let N=s[c++];if(N<ee.TEXT_COMPACTION_MODE_LATCH)d++,y=900*y+N;else switch(N){case ee.TEXT_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH:case ee.NUMERIC_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:c--,w=!0;break}if(d%5===0&&d>0){for(let F=0;F<6;++F)h.write(Number(Vr(y)>>Vr(8*(5-F))));y=0,d=0}}break}return u.append(H.decode(h.toByteArray(),a)),c}static numericCompaction(r,s,a){let c=0,u=!1,h=new Int32Array(ee.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let d=r[s++];if(s===r[0]&&(u=!0),d<ee.TEXT_COMPACTION_MODE_LATCH)h[c]=d,c++;else switch(d){case ee.TEXT_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(c%ee.MAX_NUMERIC_CODEWORDS===0||d===ee.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(ee.decodeBase900toBase10(h,c)),c=0)}return s}static decodeBase900toBase10(r,s){let a=Vr(0);for(let u=0;u<s;u++)a+=ee.EXP900[s-u-1]*Vr(r[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new b;return c.substring(1)}}ee.TEXT_COMPACTION_MODE_LATCH=900,ee.BYTE_COMPACTION_MODE_LATCH=901,ee.NUMERIC_COMPACTION_MODE_LATCH=902,ee.BYTE_COMPACTION_MODE_LATCH_6=924,ee.ECI_USER_DEFINED=925,ee.ECI_GENERAL_PURPOSE=926,ee.ECI_CHARSET=927,ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ee.MACRO_PDF417_TERMINATOR=922,ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ee.MAX_NUMERIC_CODEWORDS=15,ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ee.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ee.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ee.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ee.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ee.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ee.PL=25,ee.LL=27,ee.AS=27,ee.ML=28,ee.AL=28,ee.PS=29,ee.PAL=29,ee.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ee.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ee.EXP900=Fa()?gc():[],ee.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ke{constructor(){}static decode(r,s,a,c,u,h,d){let y=new _i(r,s,a,c,u),w=null,C=null,v;for(let W=!0;;W=!1){if(s!=null&&(w=ke.getRowIndicatorColumn(r,y,s,!0,h,d)),c!=null&&(C=ke.getRowIndicatorColumn(r,y,c,!1,h,d)),v=ke.merge(w,C),v==null)throw re.getNotFoundInstance();let Q=v.getBoundingBox();if(W&&Q!=null&&(Q.getMinY()<y.getMinY()||Q.getMaxY()>y.getMaxY()))y=Q;else break}v.setBoundingBox(y);let N=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,w),v.setDetectionResultColumn(N,C);let F=w!=null;for(let W=1;W<=N;W++){let Q=F?W:N-W;if(v.getDetectionResultColumn(Q)!==void 0)continue;let Z;Q===0||Q===N?Z=new Ys(y,Q===0):Z=new Zi(y),v.setDetectionResultColumn(Q,Z);let ne=-1,ue=ne;for(let he=y.getMinY();he<=y.getMaxY();he++){if(ne=ke.getStartColumn(v,Q,he,F),ne<0||ne>y.getMaxX()){if(ue===-1)continue;ne=ue}let le=ke.detectCodeword(r,y.getMinX(),y.getMaxX(),F,ne,he,h,d);le!=null&&(Z.setCodeword(he,le),ue=ne,h=Math.min(h,le.getWidth()),d=Math.max(d,le.getWidth()))}}return ke.createDecoderResult(v)}static merge(r,s){if(r==null&&s==null)return null;let a=ke.getBarcodeMetadata(r,s);if(a==null)return null;let c=_i.merge(ke.adjustBoundingBox(r),ke.adjustBoundingBox(s));return new Yn(a,c)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let a=ke.getMax(s),c=0;for(let d of s)if(c+=a-d,d>0)break;let u=r.getCodewords();for(let d=0;c>0&&u[d]==null;d++)c--;let h=0;for(let d=s.length-1;d>=0&&(h+=a-s[d],!(s[d]>0));d--);for(let d=u.length-1;h>0&&u[d]==null;d--)h--;return r.getBoundingBox().addMissingRows(c,h,r.isLeft())}static getMax(r){let s=-1;for(let a of r)s=Math.max(s,a);return s}static getBarcodeMetadata(r,s){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(r,s,a,c,u,h){let d=new Ys(s,c);for(let y=0;y<2;y++){let w=y===0?1:-1,C=Math.trunc(Math.trunc(a.getX()));for(let v=Math.trunc(Math.trunc(a.getY()));v<=s.getMaxY()&&v>=s.getMinY();v+=w){let N=ke.detectCodeword(r,0,r.getWidth(),c,C,v,u,h);N!=null&&(d.setCodeword(v,N),c?C=N.getStartX():C=N.getEndX())}}return d}static adjustCodewordCount(r,s){let a=s[0][1],c=a.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-ke.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>Se.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(r){let s=ke.createBarcodeMatrix(r);ke.adjustCodewordCount(r,s);let a=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],h=new Array;for(let y=0;y<r.getBarcodeRowCount();y++)for(let w=0;w<r.getBarcodeColumnCount();w++){let C=s[y][w+1].getValue(),v=y*r.getBarcodeColumnCount()+w;C.length===0?a.push(v):C.length===1?c[v]=C[0]:(h.push(v),u.push(C))}let d=new Array(u.length);for(let y=0;y<d.length;y++)d[y]=u[y];return ke.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,Se.toIntArray(a),Se.toIntArray(h),d)}static createDecoderResultFromAmbiguousValues(r,s,a,c,u){let h=new Int32Array(c.length),d=100;for(;d-- >0;){for(let y=0;y<h.length;y++)s[c[y]]=u[y][h[y]];try{return ke.decodeCodewords(s,r,a)}catch(y){if(!(y instanceof P))throw y}if(h.length===0)throw P.getChecksumInstance();for(let y=0;y<h.length;y++)if(h[y]<u[y].length-1){h[y]++;break}else if(h[y]=0,y===h.length-1)throw P.getChecksumInstance()}throw P.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let u=0;u<s[c].length;u++)s[c][u]=new $i;let a=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let h=u.getRowNumber();if(h>=0){if(h>=s.length)continue;s[h][a].setValue(u.getValue())}}}a++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,a,c){let u=c?1:-1,h=null;if(ke.isValidBarcodeColumn(r,s-u)&&(h=r.getDetectionResultColumn(s-u).getCodeword(a)),h!=null)return c?h.getEndX():h.getStartX();if(h=r.getDetectionResultColumn(s).getCodewordNearby(a),h!=null)return c?h.getStartX():h.getEndX();if(ke.isValidBarcodeColumn(r,s-u)&&(h=r.getDetectionResultColumn(s-u).getCodewordNearby(a)),h!=null)return c?h.getEndX():h.getStartX();let d=0;for(;ke.isValidBarcodeColumn(r,s-u);){s-=u;for(let y of r.getDetectionResultColumn(s).getCodewords())if(y!=null)return(c?y.getEndX():y.getStartX())+u*d*(y.getEndX()-y.getStartX());d++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,a,c,u,h,d,y){u=ke.adjustCodewordStartColumn(r,s,a,c,u,h);let w=ke.getModuleBitCount(r,s,a,c,u,h);if(w==null)return null;let C,v=Ue.sum(w);if(c)C=u+v;else{for(let W=0;W<w.length/2;W++){let Q=w[W];w[W]=w[w.length-1-W],w[w.length-1-W]=Q}C=u,u=C-v}if(!ke.checkCodewordSkew(v,d,y))return null;let N=Nn.getDecodedValue(w),F=Se.getCodeword(N);return F===-1?null:new Ji(u,C,ke.getCodewordBucketNumber(N),F)}static getModuleBitCount(r,s,a,c,u,h){let d=u,y=new Int32Array(8),w=0,C=c?1:-1,v=c;for(;(c?d<a:d>=s)&&w<y.length;)r.get(d,h)===v?(y[w]++,d+=C):(w++,v=!v);return w===y.length||d===(c?a:s)&&w===y.length-1?y:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,a,c,u,h){let d=u,y=c?-1:1;for(let w=0;w<2;w++){for(;(c?d>=s:d<a)&&c===r.get(d,h);){if(Math.abs(u-d)>ke.CODEWORD_SKEW_SIZE)return u;d+=y}y=-y,c=!c}return d}static checkCodewordSkew(r,s,a){return s-ke.CODEWORD_SKEW_SIZE<=r&&r<=a+ke.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,a){if(r.length===0)throw b.getFormatInstance();let c=1<<s+1,u=ke.correctErrors(r,a,c);ke.verifyCodewordCount(r,c);let h=ee.decode(r,""+s);return h.setErrorsCorrected(u),h.setErasures(a.length),h}static correctErrors(r,s,a){if(s!=null&&s.length>a/2+ke.MAX_ERRORS||a<0||a>ke.MAX_EC_CODEWORDS)throw P.getChecksumInstance();return ke.errorCorrection.decode(r,a,s)}static verifyCodewordCount(r,s){if(r.length<4)throw b.getFormatInstance();let a=r[0];if(a>r.length)throw b.getFormatInstance();if(a===0)if(s<r.length)r[0]=r.length-s;else throw b.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),a=0,c=s.length-1;for(;!((r&1)!==a&&(a=r&1,c--,c<0));)s[c]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return ke.getCodewordBucketNumber(ke.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new qi;for(let a=0;a<r.length;a++){s.format("Row %2d: ",a);for(let c=0;c<r[a].length;c++){let u=r[a][c];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}ke.CODEWORD_SKEW_SIZE=2,ke.MAX_ERRORS=3,ke.MAX_EC_CODEWORDS=512,ke.errorCorrection=new It;class Kt{decode(r,s=null){let a=Kt.decode(r,s,!1);if(a==null||a.length===0||a[0]==null)throw re.getNotFoundInstance();return a[0]}decodeMultiple(r,s=null){try{return Kt.decode(r,s,!0)}catch(a){throw a instanceof b||a instanceof P?re.getNotFoundInstance():a}}static decode(r,s,a){const c=new Array,u=De.detectMultiple(r,s,a);for(const h of u.getPoints()){const d=ke.decode(u.getBits(),h[4],h[5],h[6],h[7],Kt.getMinCodewordWidth(h),Kt.getMaxCodewordWidth(h)),y=new dt(d.getText(),d.getRawBytes(),void 0,h,Ae.PDF_417);y.putMetadata(Vt.ERROR_CORRECTION_LEVEL,d.getECLevel());const w=d.getOther();w!=null&&y.putMetadata(Vt.PDF417_EXTRA_METADATA,w),c.push(y)}return c.map(h=>h)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?L.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Kt.getMaxWidth(r[0],r[4]),Kt.getMaxWidth(r[6],r[2])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN),Math.max(Kt.getMaxWidth(r[1],r[5]),Kt.getMaxWidth(r[7],r[3])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Kt.getMinWidth(r[0],r[4]),Kt.getMinWidth(r[6],r[2])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN),Math.min(Kt.getMinWidth(r[1],r[5]),Kt.getMinWidth(r[7],r[3])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ci extends p{}Ci.kind="ReaderException";class Va{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(te.TRY_HARDER)===!0,a=i(r)?null:r.get(te.POSSIBLE_FORMATS),c=new Array;if(!i(a)){const u=a.some(h=>h===Ae.UPC_A||h===Ae.UPC_E||h===Ae.EAN_13||h===Ae.EAN_8||h===Ae.CODABAR||h===Ae.CODE_39||h===Ae.CODE_93||h===Ae.CODE_128||h===Ae.ITF||h===Ae.RSS_14||h===Ae.RSS_EXPANDED);u&&!s&&c.push(new Ai(r,this.verbose)),a.includes(Ae.QR_CODE)&&c.push(new Cr),a.includes(Ae.DATA_MATRIX)&&c.push(new qe),a.includes(Ae.AZTEC)&&c.push(new xo),a.includes(Ae.PDF_417)&&c.push(new Kt),u&&s&&c.push(new Ai(r,this.verbose))}c.length===0&&(s||c.push(new Ai(r,this.verbose)),c.push(new Cr),c.push(new qe),c.push(new xo),c.push(new Kt),s&&c.push(new Ai(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Ci("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(a){if(a instanceof Ci)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class pc extends Ln{constructor(r=null,s=500){const a=new Va;a.setHints(r),super(a,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class Ii extends Ln{constructor(r=500){super(new Kt,r)}}class mc extends Ln{constructor(r=500){super(new Cr,r)}}var So;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(So||(So={}));var Ut=So;class No{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new vn(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let a=s[s.length-1];const c=this.field;for(let u=s.length;u<=r;u++){const h=a.multiply(new vn(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));s.push(h),a=h}}return s[r]}encode(r,s){if(s===0)throw new _("No error correction bytes");const a=r.length-s;if(a<=0)throw new _("No data bytes provided");const c=this.buildGenerator(s),u=new Int32Array(a);G.arraycopy(r,0,u,0,a);let h=new vn(this.field,u);h=h.multiplyByMonomial(s,1);const y=h.divide(c)[1].getCoefficients(),w=s-y.length;for(let C=0;C<w;C++)r[a+C]=0;G.arraycopy(y,0,r,a+w,y.length)}}class yt{constructor(){}static applyMaskPenaltyRule1(r){return yt.applyMaskPenaltyRule1Internal(r,!0)+yt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let h=0;h<u-1;h++){const d=a[h];for(let y=0;y<c-1;y++){const w=d[y];w===d[y+1]&&w===a[h+1][y]&&w===a[h+1][y+1]&&s++}}return yt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let h=0;h<u;h++)for(let d=0;d<c;d++){const y=a[h];d+6<c&&y[d]===1&&y[d+1]===0&&y[d+2]===1&&y[d+3]===1&&y[d+4]===1&&y[d+5]===0&&y[d+6]===1&&(yt.isWhiteHorizontal(y,d-4,d)||yt.isWhiteHorizontal(y,d+7,d+11))&&s++,h+6<u&&a[h][d]===1&&a[h+1][d]===0&&a[h+2][d]===1&&a[h+3][d]===1&&a[h+4][d]===1&&a[h+5][d]===0&&a[h+6][d]===1&&(yt.isWhiteVertical(a,d,h-4,h)||yt.isWhiteVertical(a,d,h+7,h+11))&&s++}return s*yt.N3}static isWhiteHorizontal(r,s,a){s=Math.max(s,0),a=Math.min(a,r.length);for(let c=s;c<a;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,s,a,c){a=Math.max(a,0),c=Math.min(c,r.length);for(let u=a;u<c;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let y=0;y<u;y++){const w=a[y];for(let C=0;C<c;C++)w[C]===1&&s++}const h=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-h)*10/h)*yt.N4}static getDataMaskBit(r,s,a){let c,u;switch(r){case 0:c=a+s&1;break;case 1:c=a&1;break;case 2:c=s%3;break;case 3:c=(a+s)%3;break;case 4:c=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:u=a*s,c=(u&1)+u%3;break;case 6:u=a*s,c=(u&1)+u%3&1;break;case 7:u=a*s,c=u%3+(a+s&1)&1;break;default:throw new _("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,s){let a=0;const c=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),h=r.getArray();for(let d=0;d<c;d++){let y=0,w=-1;for(let C=0;C<u;C++){const v=s?h[d][C]:h[C][d];v===w?y++:(y>=5&&(a+=yt.N1+(y-5)),y=1,w=v)}y>=5&&(a+=yt.N1+(y-5))}return a}}yt.N1=3,yt.N2=3,yt.N3=40,yt.N4=10;class hn{constructor(r,s){this.width=r,this.height=s;const a=new Array(s);for(let c=0;c!==s;c++)a[c]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,a){this.bytes[s][r]=a}setBoolean(r,s,a){this.bytes[s][r]=a?1:0}clear(r){for(const s of this.bytes)B.fill(s,r)}equals(r){if(!(r instanceof hn))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],h=s.bytes[a];for(let d=0,y=this.width;d<y;++d)if(u[d]!==h[d])return!1}return!0}toString(){const r=new U;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s];for(let u=0,h=this.width;u<h;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class ni{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new U;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<ni.NUM_MASK_PATTERNS}}ni.NUM_MASK_PATTERNS=8;class at extends p{}at.kind="WriterException";class Ce{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,a,c,u){Ce.clearMatrix(u),Ce.embedBasicPatterns(a,u),Ce.embedTypeInfo(s,c,u),Ce.maybeEmbedVersionInfo(a,u),Ce.embedDataBits(r,c,u)}static embedBasicPatterns(r,s){Ce.embedPositionDetectionPatternsAndSeparators(s),Ce.embedDarkDotAtLeftBottomCorner(s),Ce.maybeEmbedPositionAdjustmentPatterns(r,s),Ce.embedTimingPatterns(s)}static embedTypeInfo(r,s,a){const c=new K;Ce.makeTypeInfoBits(r,s,c);for(let u=0,h=c.getSize();u<h;++u){const d=c.get(c.getSize()-1-u),y=Ce.TYPE_INFO_COORDINATES[u],w=y[0],C=y[1];if(a.setBoolean(w,C,d),u<8){const v=a.getWidth()-u-1,N=8;a.setBoolean(v,N,d)}else{const N=a.getHeight()-7+(u-8);a.setBoolean(8,N,d)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const a=new K;Ce.makeVersionInfoBits(r,a);let c=6*3-1;for(let u=0;u<6;++u)for(let h=0;h<3;++h){const d=a.get(c);c--,s.setBoolean(u,s.getHeight()-11+h,d),s.setBoolean(s.getHeight()-11+h,u,d)}}static embedDataBits(r,s,a){let c=0,u=-1,h=a.getWidth()-1,d=a.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);d>=0&&d<a.getHeight();){for(let y=0;y<2;++y){const w=h-y;if(!Ce.isEmpty(a.get(w,d)))continue;let C;c<r.getSize()?(C=r.get(c),++c):C=!1,s!==255&&yt.getDataMaskBit(s,w,d)&&(C=!C),a.setBoolean(w,d,C)}d+=u}u=-u,d+=u,h-=2}if(c!==r.getSize())throw new at("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-L.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new _("0 polynomial");const a=Ce.findMSBSet(s);for(r<<=a-1;Ce.findMSBSet(r)>=a;)r^=s<<Ce.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,s,a){if(!ni.isValidMaskPattern(s))throw new at("Invalid mask pattern");const c=r.getBits()<<3|s;a.appendBits(c,5);const u=Ce.calculateBCHCode(c,Ce.TYPE_INFO_POLY);a.appendBits(u,10);const h=new K;if(h.appendBits(Ce.TYPE_INFO_MASK_PATTERN,15),a.xor(h),a.getSize()!==15)throw new at("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const a=Ce.calculateBCHCode(r.getVersionNumber(),Ce.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new at("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const a=(s+1)%2;Ce.isEmpty(r.get(s,6))&&r.setNumber(s,6,a),Ce.isEmpty(r.get(6,s))&&r.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new at;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,a){for(let c=0;c<8;++c){if(!Ce.isEmpty(a.get(r+c,s)))throw new at;a.setNumber(r+c,s,0)}}static embedVerticalSeparationPattern(r,s,a){for(let c=0;c<7;++c){if(!Ce.isEmpty(a.get(r,s+c)))throw new at;a.setNumber(r,s+c,0)}}static embedPositionAdjustmentPattern(r,s,a){for(let c=0;c<5;++c){const u=Ce.POSITION_ADJUSTMENT_PATTERN[c];for(let h=0;h<5;++h)a.setNumber(r+h,s+c,u[h])}}static embedPositionDetectionPattern(r,s,a){for(let c=0;c<7;++c){const u=Ce.POSITION_DETECTION_PATTERN[c];for(let h=0;h<7;++h)a.setNumber(r+h,s+c,u[h])}}static embedPositionDetectionPatternsAndSeparators(r){const s=Ce.POSITION_DETECTION_PATTERN[0].length;Ce.embedPositionDetectionPattern(0,0,r),Ce.embedPositionDetectionPattern(r.getWidth()-s,0,r),Ce.embedPositionDetectionPattern(0,r.getWidth()-s,r);const a=8;Ce.embedHorizontalSeparationPattern(0,a-1,r),Ce.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),Ce.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const c=7;Ce.embedVerticalSeparationPattern(c,0,r),Ce.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),Ce.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,c=Ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,h=c.length;u!==h;u++){const d=c[u];if(d>=0)for(let y=0;y!==h;y++){const w=c[y];w>=0&&Ce.isEmpty(s.get(w,d))&&Ce.embedPositionAdjustmentPattern(w-2,d-2,s)}}}}Ce.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ce.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ce.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ce.VERSION_INFO_POLY=7973,Ce.TYPE_INFO_POLY=1335,Ce.TYPE_INFO_MASK_PATTERN=21522;class g{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class A{constructor(){}static calculateMaskPenalty(r){return yt.applyMaskPenaltyRule1(r)+yt.applyMaskPenaltyRule2(r)+yt.applyMaskPenaltyRule3(r)+yt.applyMaskPenaltyRule4(r)}static encode(r,s,a=null){let c=A.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(Ut.CHARACTER_SET)!==void 0;u&&(c=a.get(Ut.CHARACTER_SET).toString());const h=this.chooseMode(r,c),d=new K;if(h===Ie.BYTE&&(u||A.DEFAULT_BYTE_MODE_ENCODING!==c)){const he=O.getCharacterSetECIByName(c);he!==void 0&&this.appendECI(he,d)}this.appendModeInfo(h,d);const y=new K;this.appendBytes(r,h,y,c);let w;if(a!==null&&a.get(Ut.QR_VERSION)!==void 0){const he=Number.parseInt(a.get(Ut.QR_VERSION).toString(),10);w=_e.getVersionForNumber(he);const le=this.calculateBitsNeeded(h,d,y,w);if(!this.willFit(le,w,s))throw new at("Data too big for requested version")}else w=this.recommendVersion(s,h,d,y);const C=new K;C.appendBitArray(d);const v=h===Ie.BYTE?y.getSizeInBytes():r.length;this.appendLengthInfo(v,w,h,C),C.appendBitArray(y);const N=w.getECBlocksForLevel(s),F=w.getTotalCodewords()-N.getTotalECCodewords();this.terminateBits(F,C);const W=this.interleaveWithECBytes(C,w.getTotalCodewords(),F,N.getNumBlocks()),Q=new ni;Q.setECLevel(s),Q.setMode(h),Q.setVersion(w);const Z=w.getDimensionForVersion(),ne=new hn(Z,Z),ue=this.chooseMaskPattern(W,s,w,ne);return Q.setMaskPattern(ue),Ce.buildMatrix(W,s,w,ue,ne),Q.setMatrix(ne),Q}static recommendVersion(r,s,a,c){const u=this.calculateBitsNeeded(s,a,c,_e.getVersionForNumber(1)),h=this.chooseVersion(u,r),d=this.calculateBitsNeeded(s,a,c,h);return this.chooseVersion(d,r)}static calculateBitsNeeded(r,s,a,c){return s.getSize()+r.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(r){return r<A.ALPHANUMERIC_TABLE.length?A.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(O.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return Ie.KANJI;let a=!1,c=!1;for(let u=0,h=r.length;u<h;++u){const d=r.charAt(u);if(A.isDigit(d))a=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)c=!0;else return Ie.BYTE}return c?Ie.ALPHANUMERIC:a?Ie.NUMERIC:Ie.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=H.encode(r,O.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=s[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,a,c){let u=Number.MAX_SAFE_INTEGER,h=-1;for(let d=0;d<ni.NUM_MASK_PATTERNS;d++){Ce.buildMatrix(r,s,a,d,c);let y=this.calculateMaskPenalty(c);y<u&&(u=y,h=d)}return h}static chooseVersion(r,s){for(let a=1;a<=40;a++){const c=_e.getVersionForNumber(a);if(A.willFit(r,c,s))return c}throw new at("Data too big")}static willFit(r,s,a){const c=s.getTotalCodewords(),h=s.getECBlocksForLevel(a).getTotalECCodewords(),d=c-h,y=(r+7)/8;return d>=y}static terminateBits(r,s){const a=r*8;if(s.getSize()>a)throw new at("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let h=0;h<4&&s.getSize()<a;++h)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let h=c;h<8;h++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let h=0;h<u;++h)s.appendBits(h&1?17:236,8);if(s.getSize()!==a)throw new at("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,a,c,u,h){if(c>=a)throw new at("Block ID too large");const d=r%a,y=a-d,w=Math.floor(r/a),C=w+1,v=Math.floor(s/a),N=v+1,F=w-v,W=C-N;if(F!==W)throw new at("EC bytes mismatch");if(a!==y+d)throw new at("RS blocks mismatch");if(r!==(v+F)*y+(N+W)*d)throw new at("Total bytes mismatch");c<y?(u[0]=v,h[0]=F):(u[0]=N,h[0]=W)}static interleaveWithECBytes(r,s,a,c){if(r.getSizeInBytes()!==a)throw new at("Number of bits and data bytes does not match");let u=0,h=0,d=0;const y=new Array;for(let C=0;C<c;++C){const v=new Int32Array(1),N=new Int32Array(1);A.getNumDataBytesAndNumECBytesForBlockID(s,a,c,C,v,N);const F=v[0],W=new Uint8Array(F);r.toBytes(8*u,W,0,F);const Q=A.generateECBytes(W,N[0]);y.push(new g(W,Q)),h=Math.max(h,F),d=Math.max(d,Q.length),u+=v[0]}if(a!==u)throw new at("Data bytes does not match offset");const w=new K;for(let C=0;C<h;++C)for(const v of y){const N=v.getDataBytes();C<N.length&&w.appendBits(N[C],8)}for(let C=0;C<d;++C)for(const v of y){const N=v.getErrorCorrectionBytes();C<N.length&&w.appendBits(N[C],8)}if(s!==w.getSizeInBytes())throw new at("Interleaving error: "+s+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(r,s){const a=r.length,c=new Int32Array(a+s);for(let h=0;h<a;h++)c[h]=r[h]&255;new No(Xe.QR_CODE_FIELD_256).encode(c,s);const u=new Uint8Array(s);for(let h=0;h<s;h++)u[h]=c[a+h];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,a,c){const u=a.getCharacterCountBits(s);if(r>=1<<u)throw new at(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,s,a,c){switch(s){case Ie.NUMERIC:A.appendNumericBytes(r,a);break;case Ie.ALPHANUMERIC:A.appendAlphanumericBytes(r,a);break;case Ie.BYTE:A.append8BitBytes(r,a,c);break;case Ie.KANJI:A.appendKanjiBytes(r,a);break;default:throw new at("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=A.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=A.getDigit(r.charAt(c));if(c+2<a){const h=A.getDigit(r.charAt(c+1)),d=A.getDigit(r.charAt(c+2));s.appendBits(u*100+h*10+d,10),c+=3}else if(c+1<a){const h=A.getDigit(r.charAt(c+1));s.appendBits(u*10+h,7),c+=2}else s.appendBits(u,4),c++}}static appendAlphanumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=A.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new at;if(c+1<a){const h=A.getAlphanumericCode(r.charCodeAt(c+1));if(h===-1)throw new at;s.appendBits(u*45+h,11),c+=2}else s.appendBits(u,6),c++}}static append8BitBytes(r,s,a){let c;try{c=H.encode(r,a)}catch(u){throw new at(u)}for(let u=0,h=c.length;u!==h;u++){const d=c[u];s.appendBits(d,8)}}static appendKanjiBytes(r,s){let a;try{a=H.encode(r,O.SJIS)}catch(u){throw new at(u)}const c=a.length;for(let u=0;u<c;u+=2){const h=a[u]&255,d=a[u+1]&255,y=h<<8&4294967295|d;let w=-1;if(y>=33088&&y<=40956?w=y-33088:y>=57408&&y<=60351&&(w=y-49472),w===-1)throw new at("Invalid byte sequence");const C=(w>>8)*192+(w&255);s.appendBits(C,13)}}static appendECI(r,s){s.appendBits(Ie.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}A.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),A.DEFAULT_BYTE_MODE_ENCODING=O.UTF8.getName();class I{write(r,s,a,c=null){if(r.length===0)throw new _("Found empty contents");if(s<0||a<0)throw new _("Requested dimensions are too small: "+s+"x"+a);let u=tt.L,h=I.QUIET_ZONE_SIZE;c!==null&&(c.get(Ut.ERROR_CORRECTION)!==void 0&&(u=tt.fromString(c.get(Ut.ERROR_CORRECTION).toString())),c.get(Ut.MARGIN)!==void 0&&(h=Number.parseInt(c.get(Ut.MARGIN).toString(),10)));const d=A.encode(r,u,c);return this.renderResult(d,s,a,h)}writeToDom(r,s,a,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const h=this.write(s,a,c,u);r&&r.appendChild(h)}renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new ir;const h=u.getWidth(),d=u.getHeight(),y=h+c*2,w=d+c*2,C=Math.max(s,y),v=Math.max(a,w),N=Math.min(Math.floor(C/y),Math.floor(v/w)),F=Math.floor((C-h*N)/2),W=Math.floor((v-d*N)/2),Q=this.createSVGElement(C,v);for(let Z=0,ne=W;Z<d;Z++,ne+=N)for(let ue=0,he=F;ue<h;ue++,he+=N)if(u.get(ue,Z)===1){const le=this.createSvgRectElement(he,ne,N,N);Q.appendChild(le)}return Q}createSVGElement(r,s){const a=document.createElementNS(I.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(r,s,a,c){const u=document.createElementNS(I.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}I.QUIET_ZONE_SIZE=4,I.SVG_NS="http://www.w3.org/2000/svg";class M{encode(r,s,a,c,u){if(r.length===0)throw new _("Found empty contents");if(s!==Ae.QR_CODE)throw new _("Can only encode QR_CODE, but got "+s);if(a<0||c<0)throw new _(`Requested dimensions are too small: ${a}x${c}`);let h=tt.L,d=M.QUIET_ZONE_SIZE;u!==null&&(u.get(Ut.ERROR_CORRECTION)!==void 0&&(h=tt.fromString(u.get(Ut.ERROR_CORRECTION).toString())),u.get(Ut.MARGIN)!==void 0&&(d=Number.parseInt(u.get(Ut.MARGIN).toString(),10)));const y=A.encode(r,h,u);return M.renderResult(y,a,c,d)}static renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new ir;const h=u.getWidth(),d=u.getHeight(),y=h+c*2,w=d+c*2,C=Math.max(s,y),v=Math.max(a,w),N=Math.min(Math.floor(C/y),Math.floor(v/w)),F=Math.floor((C-h*N)/2),W=Math.floor((v-d*N)/2),Q=new He(C,v);for(let Z=0,ne=W;Z<d;Z++,ne+=N)for(let ue=0,he=F;ue<h;ue++,he+=N)u.get(ue,Z)===1&&Q.setRegion(he,ne,N,N);return Q}}M.QUIET_ZONE_SIZE=4;class q{encode(r,s,a,c,u){let h;switch(s){case Ae.QR_CODE:h=new M;break;default:throw new _("No encoder available for format "+s)}return h.encode(r,s,a,c,u)}}class J extends pe{constructor(r,s,a,c,u,h,d,y){if(super(h,d),this.yuvData=r,this.dataWidth=s,this.dataHeight=a,this.left=c,this.top=u,c+h>s||u+d>a)throw new _("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(h,d)}getRow(r,s){if(r<0||r>=this.getHeight())throw new _("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return G.arraycopy(this.yuvData,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return G.arraycopy(this.yuvData,u,c,0,a),c;for(let h=0;h<s;h++){const d=h*r;G.arraycopy(this.yuvData,u,c,d,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new J(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,a,c,!1)}renderThumbnail(){const r=this.getWidth()/J.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/J.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*s),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let h=0;h<s;h++){const d=h*r;for(let y=0;y<r;y++){const w=c[u+y*J.THUMBNAIL_SCALE_FACTOR]&255;a[d+y]=4278190080|w*65793}u+=this.dataWidth*J.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/J.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/J.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<s;c++,u+=this.dataWidth){const h=u+r/2;for(let d=u,y=u+r-1;d<h;d++,y--){const w=a[d];a[d]=a[y],a[y]=w}}}invert(){return new Te(this)}}J.THUMBNAIL_SCALE_FACTOR=2;class de extends pe{constructor(r,s,a,c,u,h,d){if(super(s,a),this.dataWidth=c,this.dataHeight=u,this.left=h,this.top=d,r.BYTES_PER_ELEMENT===4){const y=s*a,w=new Uint8ClampedArray(y);for(let C=0;C<y;C++){const v=r[C],N=v>>16&255,F=v>>7&510,W=v&255;w[C]=(N+F+W)/4&255}this.luminances=w}else this.luminances=r;if(c===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=a),h===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new _("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return G.arraycopy(this.luminances,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return G.arraycopy(this.luminances,u,c,0,a),c;for(let h=0;h<s;h++){const d=h*r;G.arraycopy(this.luminances,u,c,d,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new de(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new Te(this)}}class Le extends O{static forName(r){return this.getCharacterSetECIByName(r)}}class Pt{}Pt.ISO_8859_1=O.ISO8859_1;class lt{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class Wt{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Ir{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Xn extends Ir{constructor(r,s,a){super(r),this.value=s,this.bitCount=a}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new Xn(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Xn(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+L.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Tr extends Xn{constructor(r,s,a){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(r,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(r,s){return new Tr(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ri(T,r,s){return new Tr(T,r,s)}function ii(T,r,s){return new Xn(T,r,s)}const Ua=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],ts=0,yc=1,vr=2,_0=3,si=4,Iw=new Xn(null,0,0),Oh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])];function Tw(T){for(let r of T)B.fill(r,-1);return T[ts][si]=0,T[yc][si]=0,T[yc][ts]=28,T[_0][si]=0,T[vr][si]=0,T[vr][ts]=15,T}const C0=Tw(B.createInt32Array(6,6));class oi{constructor(r,s,a,c){this.token=r,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let a=this.bitCount,c=this.token;if(r!==this.mode){let h=Oh[this.mode][r];c=ii(c,h&65535,h>>16),a+=h>>16}let u=r===vr?4:5;return c=ii(c,s,u),new oi(c,r,0,a+u)}shiftAndAppend(r,s){let a=this.token,c=this.mode===vr?4:5;return a=ii(a,C0[this.mode][r],c),a=ii(a,s,5),new oi(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let s=this.token,a=this.mode,c=this.bitCount;if(this.mode===si||this.mode===vr){let d=Oh[a][ts];s=ii(s,d&65535,d>>16),c+=d>>16,a=ts}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new oi(s,a,this.binaryShiftByteCount+1,c+u);return h.binaryShiftByteCount===2047+31&&(h=h.endBinaryShift(r+1)),h}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=ri(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new oi(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Oh[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=oi.calculateBinaryShiftCost(r)-oi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())s.unshift(c);let a=new K;for(const c of s)c.appendTo(a,r);return a}toString(){return Y.format("%s bits=%d bytes=%d",Ua[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}oi.INITIAL_STATE=new oi(Iw,ts,0,0);function vw(T){const r=Y.getCharCode(" "),s=Y.getCharCode("."),a=Y.getCharCode(",");T[ts][r]=1;const c=Y.getCharCode("Z"),u=Y.getCharCode("A");for(let N=u;N<=c;N++)T[ts][N]=N-u+2;T[yc][r]=1;const h=Y.getCharCode("z"),d=Y.getCharCode("a");for(let N=d;N<=h;N++)T[yc][N]=N-d+2;T[vr][r]=1;const y=Y.getCharCode("9"),w=Y.getCharCode("0");for(let N=w;N<=y;N++)T[vr][N]=N-w+2;T[vr][a]=12,T[vr][s]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let N=0;N<C.length;N++)T[_0][Y.getCharCode(C[N])]=N;const v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let N=0;N<v.length;N++)Y.getCharCode(v[N])>0&&(T[si][Y.getCharCode(v[N])]=N);return T}const Ph=vw(B.createInt32Array(5,256));class ja{constructor(r){this.text=r}encode(){const r=Y.getCharCode(" "),s=Y.getCharCode(`
`);let a=Wt.singletonList(oi.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let h,d=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case Y.getCharCode("\r"):h=d===s?2:0;break;case Y.getCharCode("."):h=d===r?3:0;break;case Y.getCharCode(","):h=d===r?4:0;break;case Y.getCharCode(":"):h=d===r?5:0;break;default:h=0}h>0?(a=ja.updateStateListForPair(a,u,h),u++):a=this.updateStateListForChar(a,u)}return Wt.min(a,(u,h)=>u.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const a=[];for(let c of r)this.updateStateForChar(c,s,a);return ja.simplifyStates(a)}updateStateForChar(r,s,a){let c=this.text[s]&255,u=Ph[r.getMode()][c]>0,h=null;for(let d=0;d<=si;d++){let y=Ph[d][c];if(y>0){if(h==null&&(h=r.endBinaryShift(s)),!u||d===r.getMode()||d===vr){const w=h.latchAndAppend(d,y);a.push(w)}if(!u&&C0[r.getMode()][d]>=0){const w=h.shiftAndAppend(d,y);a.push(w)}}}if(r.getBinaryShiftByteCount()>0||Ph[r.getMode()][c]===0){let d=r.addBinaryShiftChar(s);a.push(d)}}static updateStateListForPair(r,s,a){const c=[];for(let u of r)this.updateStateForPair(u,s,a,c);return this.simplifyStates(c)}static updateStateForPair(r,s,a,c){let u=r.endBinaryShift(s);if(c.push(u.latchAndAppend(si,a)),r.getMode()!==si&&c.push(u.shiftAndAppend(si,a)),a===3||a===4){let h=u.latchAndAppend(vr,16-a).latchAndAppend(vr,1);c.push(h)}if(r.getBinaryShiftByteCount()>0){let h=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(h)}}static simplifyStates(r){let s=[];for(const a of r){let c=!0;for(const u of s){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(s=s.filter(h=>h!==u))}c&&s.push(a)}return s}}class Je{constructor(){}static encodeBytes(r){return Je.encode(r,Je.DEFAULT_EC_PERCENT,Je.DEFAULT_AZTEC_LAYERS)}static encode(r,s,a){let c=new ja(r).encode(),u=L.truncDivision(c.getSize()*s,100)+11,h=c.getSize()+u,d,y,w,C,v;if(a!==Je.DEFAULT_AZTEC_LAYERS){if(d=a<0,y=Math.abs(a),y>(d?Je.MAX_NB_BITS_COMPACT:Je.MAX_NB_BITS))throw new _(Y.format("Illegal value %s for layers",a));w=Je.totalBitsInLayer(y,d),C=Je.WORD_SIZE[y];let le=w-w%C;if(v=Je.stuffBits(c,C),v.getSize()+u>le)throw new _("Data to large for user specified layer");if(d&&v.getSize()>C*64)throw new _("Data to large for user specified layer")}else{C=0,v=null;for(let le=0;;le++){if(le>Je.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(d=le<=3,y=d?le+1:le,w=Je.totalBitsInLayer(y,d),h>w)continue;(v==null||C!==Je.WORD_SIZE[y])&&(C=Je.WORD_SIZE[y],v=Je.stuffBits(c,C));let Ge=w-w%C;if(!(d&&v.getSize()>C*64)&&v.getSize()+u<=Ge)break}}let N=Je.generateCheckWords(v,w,C),F=v.getSize()/C,W=Je.generateModeMessage(d,y,F),Q=(d?11:14)+y*4,Z=new Int32Array(Q),ne;if(d){ne=Q;for(let le=0;le<Z.length;le++)Z[le]=le}else{ne=Q+1+2*L.truncDivision(L.truncDivision(Q,2)-1,15);let le=L.truncDivision(Q,2),Ge=L.truncDivision(ne,2);for(let Be=0;Be<le;Be++){let Qn=Be+L.truncDivision(Be,15);Z[le-Be-1]=Ge-Qn-1,Z[le+Be]=Ge+Qn+1}}let ue=new He(ne);for(let le=0,Ge=0;le<y;le++){let Be=(y-le)*4+(d?9:12);for(let Qn=0;Qn<Be;Qn++){let Ur=Qn*2;for(let Kn=0;Kn<2;Kn++)N.get(Ge+Ur+Kn)&&ue.set(Z[le*2+Kn],Z[le*2+Qn]),N.get(Ge+Be*2+Ur+Kn)&&ue.set(Z[le*2+Qn],Z[Q-1-le*2-Kn]),N.get(Ge+Be*4+Ur+Kn)&&ue.set(Z[Q-1-le*2-Kn],Z[Q-1-le*2-Qn]),N.get(Ge+Be*6+Ur+Kn)&&ue.set(Z[Q-1-le*2-Qn],Z[le*2+Kn])}Ge+=Be*8}if(Je.drawModeMessage(ue,d,ne,W),d)Je.drawBullsEye(ue,L.truncDivision(ne,2),5);else{Je.drawBullsEye(ue,L.truncDivision(ne,2),7);for(let le=0,Ge=0;le<L.truncDivision(Q,2)-1;le+=15,Ge+=16)for(let Be=L.truncDivision(ne,2)&1;Be<ne;Be+=2)ue.set(L.truncDivision(ne,2)-Ge,Be),ue.set(L.truncDivision(ne,2)+Ge,Be),ue.set(Be,L.truncDivision(ne,2)-Ge),ue.set(Be,L.truncDivision(ne,2)+Ge)}let he=new lt;return he.setCompact(d),he.setSize(ne),he.setLayers(y),he.setCodeWords(F),he.setMatrix(ue),he}static drawBullsEye(r,s,a){for(let c=0;c<a;c+=2)for(let u=s-c;u<=s+c;u++)r.set(u,s-c),r.set(u,s+c),r.set(s-c,u),r.set(s+c,u);r.set(s-a,s-a),r.set(s-a+1,s-a),r.set(s-a,s-a+1),r.set(s+a,s-a),r.set(s+a,s-a+1),r.set(s+a,s+a-1)}static generateModeMessage(r,s,a){let c=new K;return r?(c.appendBits(s-1,2),c.appendBits(a-1,6),c=Je.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(a-1,11),c=Je.generateCheckWords(c,40,4)),c}static drawModeMessage(r,s,a,c){let u=L.truncDivision(a,2);if(s)for(let h=0;h<7;h++){let d=u-3+h;c.get(h)&&r.set(d,u-5),c.get(h+7)&&r.set(u+5,d),c.get(20-h)&&r.set(d,u+5),c.get(27-h)&&r.set(u-5,d)}else for(let h=0;h<10;h++){let d=u-5+h+L.truncDivision(h,5);c.get(h)&&r.set(d,u-7),c.get(h+10)&&r.set(u+7,d),c.get(29-h)&&r.set(d,u+7),c.get(39-h)&&r.set(u-7,d)}}static generateCheckWords(r,s,a){let c=r.getSize()/a,u=new No(Je.getGF(a)),h=L.truncDivision(s,a),d=Je.bitsToWords(r,a,h);u.encode(d,h-c);let y=s%a,w=new K;w.appendBits(0,y);for(const C of Array.from(d))w.appendBits(C,a);return w}static bitsToWords(r,s,a){let c=new Int32Array(a),u,h;for(u=0,h=r.getSize()/s;u<h;u++){let d=0;for(let y=0;y<s;y++)d|=r.get(u*s+y)?1<<s-y-1:0;c[u]=d}return c}static getGF(r){switch(r){case 4:return Xe.AZTEC_PARAM;case 6:return Xe.AZTEC_DATA_6;case 8:return Xe.AZTEC_DATA_8;case 10:return Xe.AZTEC_DATA_10;case 12:return Xe.AZTEC_DATA_12;default:throw new _("Unsupported word size "+r)}}static stuffBits(r,s){let a=new K,c=r.getSize(),u=(1<<s)-2;for(let h=0;h<c;h+=s){let d=0;for(let y=0;y<s;y++)(h+y>=c||r.get(h+y))&&(d|=1<<s-1-y);(d&u)===u?(a.appendBits(d&u,s),h--):d&u?a.appendBits(d,s):(a.appendBits(d|1,s),h--)}return a}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Je.DEFAULT_EC_PERCENT=33,Je.DEFAULT_AZTEC_LAYERS=0,Je.MAX_NB_BITS=32,Je.MAX_NB_BITS_COMPACT=4,Je.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class xc{encode(r,s,a,c){return this.encodeWithHints(r,s,a,c,null)}encodeWithHints(r,s,a,c,u){let h=Pt.ISO_8859_1,d=Je.DEFAULT_EC_PERCENT,y=Je.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Ut.CHARACTER_SET)&&(h=Le.forName(u.get(Ut.CHARACTER_SET).toString())),u.has(Ut.ERROR_CORRECTION)&&(d=L.parseInt(u.get(Ut.ERROR_CORRECTION).toString())),u.has(Ut.AZTEC_LAYERS)&&(y=L.parseInt(u.get(Ut.AZTEC_LAYERS).toString()))),xc.encodeLayers(r,s,a,c,h,d,y)}static encodeLayers(r,s,a,c,u,h,d){if(s!==Ae.AZTEC)throw new _("Can only encode AZTEC, but got "+s);let y=Je.encode(Y.getBytes(r,u),h,d);return xc.renderResult(y,a,c)}static renderResult(r,s,a){let c=r.getMatrix();if(c==null)throw new ir;let u=c.getWidth(),h=c.getHeight(),d=Math.max(s,u),y=Math.max(a,h),w=Math.min(d/u,y/h),C=(d-u*w)/2,v=(y-h*w)/2,N=new He(d,y);for(let F=0,W=v;F<h;F++,W+=w)for(let Q=0,Z=C;Q<u;Q++,Z+=w)c.get(Q,F)&&N.setRegion(Z,W,w,w);return N}}n.AbstractExpandedDecoder=Eo,n.ArgumentException=E,n.ArithmeticException=Fs,n.AztecCode=lt,n.AztecCodeReader=xo,n.AztecCodeWriter=xc,n.AztecDecoder=rt,n.AztecDetector=oc,n.AztecDetectorResult=sc,n.AztecEncoder=Je,n.AztecHighLevelEncoder=ja,n.AztecPoint=en,n.BarcodeFormat=Ae,n.Binarizer=V,n.BinaryBitmap=S,n.BitArray=K,n.BitMatrix=He,n.BitSource=Ar,n.BrowserAztecCodeReader=ac,n.BrowserBarcodeReader=Oa,n.BrowserCodeReader=Ln,n.BrowserDatamatrixCodeReader=_o,n.BrowserMultiFormatReader=pc,n.BrowserPDF417Reader=Ii,n.BrowserQRCodeReader=mc,n.BrowserQRCodeSvgWriter=I,n.CharacterSetECI=O,n.ChecksumException=P,n.Code128Reader=fe,n.Code39Reader=Mt,n.DataMatrixDecodedBitStreamParser=Gn,n.DataMatrixReader=qe,n.DecodeHintType=te,n.DecoderResult=Hi,n.DefaultGridSampler=ba,n.DetectorResult=wi,n.EAN13Reader=$r,n.EncodeHintType=Ut,n.Exception=p,n.FormatException=b,n.GenericGF=Xe,n.GenericGFPoly=vn,n.GlobalHistogramBinarizer=Rt,n.GridSampler=Ra,n.GridSamplerInstance=kr,n.HTMLCanvasElementLuminanceSource=Ne,n.HybridBinarizer=be,n.ITFReader=nt,n.IllegalArgumentException=_,n.IllegalStateException=ir,n.InvertedLuminanceSource=Te,n.LuminanceSource=pe,n.MathUtils=Ue,n.MultiFormatOneDReader=Ai,n.MultiFormatReader=Va,n.MultiFormatWriter=q,n.NotFoundException=re,n.OneDReader=Dt,n.PDF417DecodedBitStreamParser=ee,n.PDF417DecoderErrorCorrection=It,n.PDF417Reader=Kt,n.PDF417ResultMetadata=es,n.PerspectiveTransform=pn,n.PlanarYUVLuminanceSource=J,n.QRCodeByteMatrix=hn,n.QRCodeDataMask=Wn,n.QRCodeDecodedBitStreamParser=wt,n.QRCodeDecoderErrorCorrectionLevel=tt,n.QRCodeDecoderFormatInformation=un,n.QRCodeEncoder=A,n.QRCodeEncoderQRCode=ni,n.QRCodeMaskUtil=yt,n.QRCodeMatrixUtil=Ce,n.QRCodeMode=Ie,n.QRCodeReader=Cr,n.QRCodeVersion=_e,n.QRCodeWriter=M,n.RGBLuminanceSource=de,n.RSS14Reader=_t,n.RSSExpandedReader=oe,n.ReaderException=Ci,n.ReedSolomonDecoder=Vs,n.ReedSolomonEncoder=No,n.ReedSolomonException=Zr,n.Result=dt,n.ResultMetadataType=Vt,n.ResultPoint=ge,n.StringUtils=Y,n.UnsupportedOperationException=z,n.VideoInputDevice=pt,n.WhiteRectangleDetector=yr,n.WriterException=at,n.ZXingArrays=B,n.ZXingCharset=Le,n.ZXingInteger=L,n.ZXingStandardCharsets=Pt,n.ZXingStringBuilder=U,n.ZXingStringEncoding=H,n.ZXingSystem=G,n.createAbstractExpandedDecoder=Ki,Object.defineProperty(n,"__esModule",{value:!0})})})(Ud,Ud.exports);var vt=Ud.exports;const Nv=hm(vt),Rv=Rw({__proto__:null,default:Nv},[vt]);var Jp=function(){function t(e,n,i){if(this.formatMap=new Map([[we.QR_CODE,vt.BarcodeFormat.QR_CODE],[we.AZTEC,vt.BarcodeFormat.AZTEC],[we.CODABAR,vt.BarcodeFormat.CODABAR],[we.CODE_39,vt.BarcodeFormat.CODE_39],[we.CODE_93,vt.BarcodeFormat.CODE_93],[we.CODE_128,vt.BarcodeFormat.CODE_128],[we.DATA_MATRIX,vt.BarcodeFormat.DATA_MATRIX],[we.MAXICODE,vt.BarcodeFormat.MAXICODE],[we.ITF,vt.BarcodeFormat.ITF],[we.EAN_13,vt.BarcodeFormat.EAN_13],[we.EAN_8,vt.BarcodeFormat.EAN_8],[we.PDF_417,vt.BarcodeFormat.PDF_417],[we.RSS_14,vt.BarcodeFormat.RSS_14],[we.RSS_EXPANDED,vt.BarcodeFormat.RSS_EXPANDED],[we.UPC_A,vt.BarcodeFormat.UPC_A],[we.UPC_E,vt.BarcodeFormat.UPC_E],[we.UPC_EAN_EXTENSION,vt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Rv)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var o=this.createZXingFormats(e),l=new Map;l.set(vt.DecodeHintType.POSSIBLE_FORMATS,o),l.set(vt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,o){try{i(n.decode(e))}catch(l){o(l)}})},t.prototype.decode=function(e){var n=new vt.MultiFormatReader(this.verbose,this.hints),i=new vt.HTMLCanvasElementLuminanceSource(e),o=new vt.BinaryBitmap(new vt.HybridBinarizer(i)),l=n.decode(o);return{text:l.text,format:fw.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),bv=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function x(E){try{p(i.next(E))}catch(_){f(_)}}function m(E){try{p(i.throw(E))}catch(_){f(_)}}function p(E){E.done?l(E.value):o(E.value).then(x,m)}p((i=i.apply(t,e||[])).next())})},Dv=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(p){return function(E){return m([p,E])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},em=function(){function t(e,n,i){if(this.formatMap=new Map([[we.QR_CODE,"qr_code"],[we.AZTEC,"aztec"],[we.CODABAR,"codabar"],[we.CODE_39,"code_39"],[we.CODE_93,"code_93"],[we.CODE_128,"code_128"],[we.DATA_MATRIX,"data_matrix"],[we.ITF,"itf"],[we.EAN_13,"ean_13"],[we.EAN_8,"ean_8"],[we.PDF_417,"pdf417"],[we.UPC_A,"upc_a"],[we.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return bv(this,void 0,void 0,function(){var n,i;return Dv(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:fw.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,o=0,l=e;o<l.length;o++){var f=l[o],x=f.boundingBox.width*f.boundingBox.height;x>i&&(i=x,n=f)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),tm=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function x(E){try{p(i.next(E))}catch(_){f(_)}}function m(E){try{p(i.throw(E))}catch(_){f(_)}}function p(E){E.done?l(E.value):o(E.value).then(x,m)}p((i=i.apply(t,e||[])).next())})},nm=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(p){return function(E){return m([p,E])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Mv=function(){function t(e,n,i,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&em.isSupported()?(this.primaryDecoder=new em(e,i,o),this.secondaryDecoder=new Jp(e,i,o)):this.primaryDecoder=new Jp(e,i,o)}return t.prototype.decodeAsync=function(e){return tm(this,void 0,void 0,function(){var n;return nm(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return tm(this,void 0,void 0,function(){var n,i;return nm(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(i=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var o=i[n];e+=o}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),E0=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Qu=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function x(E){try{p(i.next(E))}catch(_){f(_)}}function m(E){try{p(i.throw(E))}catch(_){f(_)}}function p(E){E.done?l(E.value):o(E.value).then(x,m)}p((i=i.apply(t,e||[])).next())})},Ku=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(p){return function(E){return m([p,E])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},mw=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),Ov=function(t){E0(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var o={advanced:[i]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(mw),Pv=function(t){E0(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(Ov),kv=function(t){E0(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(mw),Lv=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new Pv(this.track)},t.prototype.torchFeature=function(){return new kv(this.track)},t}(),Bv=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,o),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,o){return Qu(this,void 0,void 0,function(){var l,f;return Ku(this,function(x){switch(x.label){case 0:return l=new t(e,n,o),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:x.sent(),x.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Qu(this,void 0,void 0,function(){return Ku(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var o=e.mediaStream.getVideoTracks(),l=o.length,f=0;e.mediaStream.getVideoTracks().forEach(function(x){e.mediaStream.removeTrack(x),x.stop(),++f,f>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new Lv(this.getFirstTrackOrFail())},t}(),Fv=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return Qu(this,void 0,void 0,function(){return Ku(this,function(o){return[2,Bv.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return Qu(this,void 0,void 0,function(){var n,i;return Ku(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[2,new t(i)]}})})},t}(),rm=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function x(E){try{p(i.next(E))}catch(_){f(_)}}function m(E){try{p(i.throw(E))}catch(_){f(_)}}function p(E){E.done?l(E.value):o(E.value).then(x,m)}p((i=i.apply(t,e||[])).next())})},im=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(p){return function(E){return m([p,E])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Vv=function(){function t(){}return t.failIfNotSupported=function(){return rm(this,void 0,void 0,function(){return im(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return rm(this,void 0,void 0,function(){return im(this,function(n){return[2,Fv.create(e)]})})},t}(),Uv=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function x(E){try{p(i.next(E))}catch(_){f(_)}}function m(E){try{p(i.throw(E))}catch(_){f(_)}}function p(E){E.done?l(E.value):o(E.value).then(x,m)}p((i=i.apply(t,e||[])).next())})},jv=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(p){return function(E){return m([p,E])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},zv=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=qo.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=qo.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return Uv(this,void 0,void 0,function(){var e,n,i,o,l,f,x;return jv(this,function(m){switch(m.label){case 0:return e=function(p){for(var E=p.getVideoTracks(),_=0,S=E;_<S.length;_++){var P=S[_];P.enabled=!1,P.stop(),p.removeTrack(P)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=m.sent(),o=[],l=0,f=i;l<f.length;l++)x=f[l],x.kind==="videoinput"&&o.push({id:x.deviceId,label:x.label});return e(n),[2,o]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(l){for(var f=[],x=0,m=l;x<m.length;x++){var p=m[x];p.kind==="video"&&f.push({id:p.id,label:p.label})}e(f)},o=MediaStreamTrack;o.getSources(i)})},t}(),jt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(jt||(jt={}));var Hv=function(){function t(){this.state=jt.NOT_STARTED,this.onGoingTransactionNewState=jt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===jt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=jt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===jt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=jt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==jt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case jt.UNKNOWN:throw"Transition from unknown is not allowed";case jt.NOT_STARTED:this.failIfNewStateIs(e,[jt.PAUSED]);break;case jt.SCANNING:break;case jt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,o=n;i<o.length;i++){var l=o[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),Gv=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===jt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==jt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===jt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===jt.PAUSED},t}(),Wv=function(){function t(){}return t.create=function(){return new Gv(new Hv)},t}(),Yv=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),or=function(t){Yv(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Gr),Xv=function(){function t(e,n){this.logger=n,this.fps=or.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=or.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?pw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ci(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),jd=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new gw(this.verbose),this.qrcode=new Mv(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Wv.create()}return t.prototype.start=function(e,n,i,o){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;o?f=o:f=this.verbose?this.logger.log:function(){};var x=Xv.create(n,this.logger);this.clearElement();var m=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=m,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:or.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var _=this,S=this.stateManagerProxy.startTransition(jt.SCANNING);return new Promise(function(P,V){var G=p?x.videoConstraints:_.createVideoConstraints(e);if(!G){S.cancel(),V("videoConstraints should be defined");return}var X={};(!p||x.aspectRatio)&&(X.aspectRatio=x.aspectRatio);var j={onRenderSurfaceReady:function(B,L){_.setupUi(B,L,x),_.isScanning=!0,_.foreverScan(x,i,f)}};Vv.failIfNotSupported().then(function(B){B.create(G).then(function(L){return L.render(l.element,X,j).then(function(K){_.renderedCamera=K,S.execute(),P(null)}).catch(function(K){S.cancel(),V(K)})}).catch(function(L){S.cancel(),V(qo.errorGettingUserMedia(L))})}).catch(function(B){S.cancel(),V(qo.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(jt.PAUSED),this.showPausedState(),(ci(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(jt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(jt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(or.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),i(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ci(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var x=f.width,m=f.height,p=document.getElementById(i.elementId),E=p.clientWidth?p.clientWidth:or.DEFAULT_WIDTH,_=Math.max(p.clientHeight?p.clientHeight:m,or.FILE_SCAN_MIN_HEIGHT),S=i.computeCanvasDrawConfig(x,m,E,_);if(n){var P=i.createCanvasElement(E,_,"qr-canvas-visible");P.style.display="inline-block",p.appendChild(P);var V=P.getContext("2d");if(!V)throw"Unable to get 2d context from canvas";V.canvas.width=E,V.canvas.height=_,V.drawImage(f,0,0,x,m,S.x,S.y,S.width,S.height)}var G=or.FILE_SCAN_HIDDEN_CANVAS_PADDING,X=Math.max(f.width,S.width),j=Math.max(f.height,S.height),B=X+2*G,L=j+2*G,K=i.createCanvasElement(B,L);p.appendChild(K);var ae=K.getContext("2d");if(!ae)throw"Unable to get 2d context from canvas";ae.canvas.width=B,ae.canvas.height=L,ae.drawImage(f,0,0,x,m,G,G,X,j);try{i.qrcode.decodeRobustlyAsync(K).then(function(te){o(Zp.createFromQrcodeResult(te))}).catch(l)}catch(te){l("QR code parse error, error = ".concat(te))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return zv.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!pw.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[we.QR_CODE,we.AZTEC,we.CODABAR,we.CODE_39,we.CODE_93,we.CODE_128,we.DATA_MATRIX,we.MAXICODE,we.ITF,we.EAN_13,we.EAN_8,we.PDF_417,we.RSS_14,we.RSS_EXPANDED,we.UPC_A,we.UPC_E,we.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],o=0,l=e.formatsToSupport;o<l.length;o++){var f=l[o];vv(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ci(e))return!0;if(!ci(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ci(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return ci(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var o=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(e,n,l),x=function(p){if(p<or.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(or.MIN_QR_BOX_SIZE,"px.")},m=function(p){return p>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=e),p};x(f.width),x(f.height),f.width=m(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var o=ci(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(e,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,x={x:0,y:0,width:e,height:n},m=f?this.getShadedRegionBounds(e,n,l):x,p=this.createCanvasElement(m.width,m.height),E={willReadFrequently:!0},_=p.getContext("2d",E);_.canvas.width=m.width,_.canvas.height=m.height,this.element.append(p),f&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=_,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=qo.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,Zp.createFromQrcodeResult(o)),i.possiblyUpdateShaders(!0),!0}).catch(function(o){i.possiblyUpdateShaders(!1);var l=qo.codeParseError(o);return n(l,dw.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,i){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,x=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*f,p=this.qrRegion.height*x,E=this.qrRegion.x*f,_=this.qrRegion.y*x;this.context.drawImage(l,E,_,m,p,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,n,i)},o.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(P){!P&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,i).finally(function(){S()})):S()}).catch(function(P){o.logger.logError("Error happend while scanning context",P),S()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",o={user:!0,environment:!0},l="exact",f=function(V){if(V in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(V,"'")},x=Object.keys(e);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var m=Object.keys(e)[0];if(m!==n&&m!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var p=e.facingMode;if(typeof p=="string"){if(f(p))return{facingMode:p}}else if(typeof p=="object")if(l in p){if(f(p["".concat(l)]))return{facingMode:{exact:p["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var E=typeof p;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var _=e.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(l in _)return{deviceId:{exact:_["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var S=typeof _;throw"Invalid type of 'deviceId' = ".concat(S)}}}var P=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(P)},t.prototype.computeCanvasDrawConfig=function(e,n,i,o){if(e<=i&&n<=o){var l=(i-e)/2,f=(o-n)/2;return{x:l,y:f,width:e,height:n}}else{var x=e,m=n;return e>i&&(n=i/e*n,e=i),n>o&&(e=o/n*e,n=o),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(m)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,o)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?or.BORDER_SHADER_MATCH_COLOR:or.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var o=e,l=n,f=document.createElement("canvas");return f.style.width="".concat(o,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=ci(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,o){if(!(n-o.width<1||i-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-o.width)/2,x=(i-o.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(or.SHADED_REGION_ELEMENT_ID),n-o.width<11||i-o.height<11)this.hasBorderShaders=!1;else{var m=5,p=40;this.insertShaderBorders(l,p,m,-m,null,0,!0),this.insertShaderBorders(l,p,m,-m,null,0,!1),this.insertShaderBorders(l,p,m,null,-m,0,!0),this.insertShaderBorders(l,p,m,null,-m,0,!1),this.insertShaderBorders(l,m,p+m,-m,null,-m,!0),this.insertShaderBorders(l,m,p+m,null,-m,-m,!0),this.insertShaderBorders(l,m,p+m,-m,null,-m,!1),this.insertShaderBorders(l,m,p+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,i,o,l,f,x){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=or.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(i,"px"),o!==null&&(m.style.top="".concat(o,"px")),l!==null&&(m.style.bottom="".concat(l,"px")),x?m.style.left="".concat(f,"px"):m.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),A0="data:image/svg+xml;base64,",Qv=A0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Kv=A0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",sm=A0+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",qv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",om=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),Zv=function(){function t(){this.data=om.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=om.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),$v=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=$p.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),o=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(o);var l=document.createElement("a");l.innerText=$p.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),Jv=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=sm,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=qv,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=sm,this.infoIcon.style.opacity="0.6")},t}(),e4=function(){function t(){var e=this;this.infoDiv=new $v,this.infoIcon=new Jv(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),t4=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function x(E){try{p(i.next(E))}catch(_){f(_)}}function m(E){try{p(i.throw(E))}catch(_){f(_)}}function p(E){E.done?l(E.value):o(E.value).then(x,m)}p((i=i.apply(t,e||[])).next())})},n4=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(p){return function(E){return m([p,E])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},am=function(){function t(){}return t.hasPermissions=function(){return t4(this,void 0,void 0,function(){var e,n,i,o;return n4(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=l.sent(),n=0,i=e;n<i.length;n++)if(o=i[n],o.kind==="videoinput"&&o.label)return[2,!0];return[2,!1]}})})},t}(),rs=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var i=n[e];if(t.isCameraScanType(i))return!0}return!1},t.isCameraScanType=function(e){return e===Ms.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Ms.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Gr.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Gr.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,o=e;i<o.length;i++){var l=o[i];if(!Gr.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return e},t}(),cr=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Mi=function(){function t(){}return t.createElement=function(e,n){var i=document.createElement(e);return i.id=n,i.classList.add(cr.ALL_ELEMENT_CLASS),e==="button"&&i.setAttribute("type","button"),i},t}(),yw=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function x(E){try{p(i.next(E))}catch(_){f(_)}}function m(E){try{p(i.throw(E))}catch(_){f(_)}}function p(E){E.done?l(E.value):o(E.value).then(x,m)}p((i=i.apply(t,e||[])).next())})},xw=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function x(p){return function(E){return m([p,E])}}function m(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},lm=function(){function t(e,n,i){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=i}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return yw(this,void 0,void 0,function(){var e,n;return xw(this,function(i){switch(i.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=i.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?ut.torchOffButton():ut.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var i=e?ut.torchOnFailedMessage():ut.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),r4=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Mi.createElement("button",cr.TORCH_BUTTON_ID),this.torchController=new lm(e,this,n)}return t.prototype.render=function(e,n){var i=this;this.torchButton.innerText=ut.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var o=this;this.torchButton.addEventListener("click",function(l){return yw(i,void 0,void 0,function(){return xw(this,function(f){switch(f.label){case 0:return[4,o.torchController.flipState()];case 1:return f.sent(),o.torchController.isTorchEnabled()?(o.torchButton.classList.remove(cr.TORCH_BUTTON_CLASS_TORCH_OFF),o.torchButton.classList.add(cr.TORCH_BUTTON_CLASS_TORCH_ON)):(o.torchButton.classList.remove(cr.TORCH_BUTTON_CLASS_TORCH_ON),o.torchButton.classList.add(cr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new lm(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=ut.torchOnButton(),this.torchController.reset()},t.create=function(e,n,i,o){var l=new t(n,o);return l.render(e,i),l},t}(),i4=function(){function t(e,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var o=document.createElement("label");o.setAttribute("for",this.getFileScanInputId()),o.style.display="inline-block",this.fileBasedScanRegion.appendChild(o),this.fileSelectionButton=Mi.createElement("button",cr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(x){o.click()}),o.append(this.fileSelectionButton),this.fileScanInput=Mi.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",o.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(x){if(!(x==null||x.target==null)){var m=x.target;if(!(m.files&&m.files.length===0)){var p=m.files,E=p[0],_=E.name;l.setImageNameToButton(_),i(E)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(x){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(x){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(x){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(x){x.stopPropagation(),x.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var m=x.dataTransfer;if(m){var p=m.files;if(!p||p.length===0)return;for(var E=!1,_=0;_<p.length;++_){var S=p.item(_);if(S){var P=/image.*/;if(S.type.match(P)){E=!0;var V=S.name;l.setImageNameToButton(V),i(S),f.innerText=ut.dragAndDropMessage();break}}}E||(f.innerText=ut.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=ut.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var i=e.substring(0,8),o=e.length,l=e.substring(o-8,o);e="".concat(i,"....").concat(l)}var f=ut.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=f},t.prototype.setInitialValueToButton=function(){var e=ut.fileSelectionChooseImage()+" - "+ut.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,i){var o=new t(e,n,i);return o},t}(),s4=function(){function t(e){this.selectElement=Mi.createElement("select",cr.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var o=ut.selectCamera();n.innerText="".concat(o," (").concat(this.cameras.length,")  ")}for(var l=1,f=0,x=this.cameras;f<x.length;f++){var m=x[f],p=m.id,E=m.label==null?p:m.label;(!E||E==="")&&(E=[ut.anonymousCameraPrefix(),l++].join(" "));var _=document.createElement("option");_.value=p,_.innerText=E,this.options.push(_),this.selectElement.appendChild(_)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,i=this.options;n<i.length;n++){var o=i[n];if(o.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var i=new t(n);return i.render(e),i},t}(),o4=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Mi.createElement("input",cr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=ut.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var o=this;this.rangeInput.addEventListener("input",function(){return o.onValueChange()}),this.rangeInput.addEventListener("change",function(){return o.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=ut.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,i,o){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=o.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var i=new t;return i.render(e,n),i},t}(),ar;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(ar||(ar={}));function a4(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function l4(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var c4=function(){function t(e,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new rs(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new gw(this.verbose),this.persistedDataManager=new Zv,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,f){if(e)e(l,f);else{if(i.lastMatchFound===l)return;i.lastMatchFound=l,i.setHeaderMessage(ut.lastMatch(l),ar.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,f){n&&n(l,f)};var o=document.getElementById(this.elementId);if(!o)throw"HTML Element with id=".concat(this.elementId," not found");o.innerHTML="",this.createBasicLayout(o),this.html5Qrcode=new jd(this.getScanRegionId(),l4(this.config,this.verbose))},t.prototype.pause=function(e){(ci(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var i=document.getElementById(e.elementId);i&&(i.innerHTML="",e.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,o){if(!e.html5Qrcode){i();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(l){if(!e.html5Qrcode){i();return}e.html5Qrcode.clear(),n(),i()}).catch(function(l){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",l),o(l)}):(e.html5Qrcode.clear(),n(),i())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Gr.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Gr.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Gr.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Gr.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Gr.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Gr.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Gr.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),rs.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var o=document.createElement("div"),l=this.getDashboardId();o.id=l,o.style.width="100%",e.appendChild(o),this.setupInitialDashboard(o)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var i=new e4;i.renderInto(n);var o=document.createElement("div");o.id=this.getHeaderMessageContainerId(),o.style.display="none",o.style.textAlign="center",o.style.fontSize="14px",o.style.padding="2px 10px",o.style.margin="4px",o.style.borderTop="1px solid #f6f6f6",n.appendChild(o)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,i){var o=this;o.showHideScanTypeSwapLink(!1),o.setHeaderMessage(ut.cameraPermissionRequesting());var l=function(){i||o.createPermissionButton(e,n)};jd.getCameras().then(function(f){o.persistedDataManager.setHasPermission(!0),o.showHideScanTypeSwapLink(!0),o.resetHeaderMessage(),f&&f.length>0?(e.removeChild(n),o.renderCameraSelection(f)):(o.setHeaderMessage(ut.noCameraFound(),ar.STATUS_WARNING),l())}).catch(function(f){o.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:l(),o.setHeaderMessage(f,ar.STATUS_WARNING),o.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var i=this,o=Mi.createElement("button",this.getCameraPermissionButtonId());o.innerText=ut.cameraPermissionTitle(),o.addEventListener("click",function(){o.disabled=!0,i.createCameraListUi(e,n,o)}),n.appendChild(o)},t.prototype.createPermissionsUi=function(e,n){var i=this;if(rs.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){am.hasPermissions().then(function(o){o?i.createCameraListUi(e,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(e,n))}).catch(function(o){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=rs.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var o=document.createElement("div");o.style.textAlign="center",i.appendChild(o),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,o),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=rs.isFileScanType(this.currentScanType),i=this,o=function(l){if(!i.html5Qrcode)throw"html5Qrcode not defined";rs.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(ut.loadingImage()),i.html5Qrcode.scanFileV2(l,!0).then(function(f){i.resetHeaderMessage(),i.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){i.setHeaderMessage(f,ar.STATUS_WARNING),i.qrCodeErrorCallback(f,dw.createFrom(f))}))};this.fileSelectionUi=i4.create(e,n,o)},t.prototype.renderCameraSelection=function(e){var n=this,i=this,o=document.getElementById(this.getDashboardSectionCameraScanRegionId());o.style.textAlign="center";var l=o4.create(o,!1),f=function(G){var X=G.zoomFeature();if(X.isSupported()){l.setOnCameraZoomValueChangeCallback(function(B){X.apply(B)});var j=1;n.config.defaultZoomValueIfSupported&&(j=n.config.defaultZoomValueIfSupported),j=Sv(j,X.min(),X.max()),l.setValues(X.min(),X.max(),j,X.step()),l.show()}},x=s4.create(o,e),m=document.createElement("span"),p=Mi.createElement("button",cr.CAMERA_START_BUTTON_ID);p.innerText=ut.scanButtonStartScanningText(),m.appendChild(p);var E=Mi.createElement("button",cr.CAMERA_STOP_BUTTON_ID);E.innerText=ut.scanButtonStopScanningText(),E.style.display="none",E.disabled=!0,m.appendChild(E);var _,S=function(G){if(!G.torchFeature().isSupported()){_&&_.hide();return}_?_.updateTorchCapability(G.torchFeature()):_=r4.create(m,G.torchFeature(),{display:"none",marginLeft:"5px"},function(X){i.setHeaderMessage(X,ar.STATUS_WARNING)}),_.show()};o.appendChild(m);var P=function(G){G||(p.style.display="none"),p.innerText=ut.scanButtonStartScanningText(),p.style.opacity="1",p.disabled=!1,G&&(p.style.display="inline-block")};if(p.addEventListener("click",function(G){p.innerText=ut.scanButtonScanningStarting(),x.disable(),p.disabled=!0,p.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var X=x.getValue();i.persistedDataManager.setLastUsedCameraId(X),i.html5Qrcode.start(X,a4(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(j){E.disabled=!1,E.style.display="inline-block",P(!1);var B=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&S(B),n.config.showZoomSliderIfSupported===!0&&f(B)}).catch(function(j){i.showHideScanTypeSwapLink(!0),x.enable(),P(!0),i.setHeaderMessage(j,ar.STATUS_WARNING)})}),x.hasSingleItem()&&p.click(),E.addEventListener("click",function(G){if(!i.html5Qrcode)throw"html5Qrcode not defined";E.disabled=!0,i.html5Qrcode.stop().then(function(X){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),x.enable(),p.disabled=!1,E.style.display="none",p.style.display="inline-block",_&&(_.reset(),_.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(X){E.disabled=!1,i.setHeaderMessage(X,ar.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var V=i.persistedDataManager.getLastUsedCameraId();x.hasValue(V)?(x.setValue(V),p.click()):i.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=ut.textIfCameraScanSelected(),i=ut.textIfFileScanSelected(),o=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var f=Mi.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=rs.isCameraScanType(this.currentScanType)?n:i,f.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,rs.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),f.innerText=i,e.currentScanType=Ms.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),f.innerText=n,e.currentScanType=Ms.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),l.appendChild(f),o.appendChild(l)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){am.hasPermissions().then(function(i){if(i){var o=document.getElementById(n.getCameraPermissionButtonId());if(!o)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";o.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=ar.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=e,i.style.display="block",n){case ar.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case ar.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case ar.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Qv,this.cameraScanImage.alt=ut.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Kv,this.fileScanImage.alt=ut.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return cr.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return cr.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();const u4=({onScanSuccess:t,onScanFailure:e,fps:n=10,qrbox:i=250})=>{const o=Me.useRef(null);return Me.useEffect(()=>{const l="reader";if(!o.current){const f=new c4(l,{fps:n,qrbox:i,rememberLastUsedCamera:!1,showTorchButtonIfSupported:!0},!1);f.render((x,m)=>{t(x,m)},x=>{}),o.current=f}return()=>{o.current&&(o.current.clear().catch(f=>{console.error("Failed to clear html5-qrcode scanner. ",f)}),o.current=null)}},[]),R.jsxs("div",{className:"w-full max-w-sm mx-auto overflow-hidden rounded-lg shadow-lg",children:[R.jsx("div",{id:"reader",className:"w-full"}),R.jsx("p",{className:"text-center text-xs text-gray-500 mt-2 p-2",children:"Kamera izni vererek QR kodu okutabilirsiniz."})]})},cm=({onComplete:t,onCancel:e,isReturnOnly:n=!1})=>{const[i,o]=Me.useState(n?"SCAN_BOOKS_ONLY":"SCAN_STUDENT"),[l,f]=Me.useState(null),[x,m]=Me.useState([]),[p,E]=Me.useState(null),[_,S]=Me.useState(!1),P=Me.useRef(null),V=Me.useRef(0),G=Me.useRef(!1),X=()=>{try{const te=new(window.AudioContext||window.webkitAudioContext),b=te.createOscillator(),D=te.createGain();b.connect(D),D.connect(te.destination),b.type="sine",b.frequency.setValueAtTime(880,te.currentTime),D.gain.setValueAtTime(.1,te.currentTime),b.start(),setTimeout(()=>{b.stop(),te.close()},150)}catch(te){console.error("Audio play failed",te)}};Me.useEffect(()=>{const te="optimized-reader";return(async()=>{try{const D=new jd(te);P.current=D,await D.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1},(O,z)=>{B(O)},O=>{}),G.current=!0}catch(D){console.error("Error starting scanner",D)}})(),()=>{P.current&&G.current&&(P.current.stop().then(()=>{var D;(D=P.current)==null||D.clear()}).catch(D=>{console.error("Failed to stop scanner",D)}),G.current=!1)}},[]);const j=Me.useRef({scanState:i,studentId:l,books:x});Me.useEffect(()=>{j.current={scanState:i,studentId:l,books:x}},[i,l,x]);const B=te=>{const b=Date.now();if(b-V.current<1500)return;const{scanState:D,studentId:O,books:z}=j.current;D==="SCAN_STUDENT"?(X(),f(te),o("SCAN_BOOKS"),L(te),V.current=b):z.includes(te)||(X(),m(H=>[...H,te]),L(te),V.current=b)},L=te=>{E(te),S(!0),setTimeout(()=>S(!1),1e3)},K=()=>{const te=prompt("renci Numaras Girin:");te&&B(te)},ae=()=>{const te=prompt("Kitap Barkodu Girin:");te&&B(te)};return R.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col items-center justify-between p-4",children:[R.jsxs("div",{className:"w-full text-white flex justify-between items-center mb-4",children:[R.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[i==="SCAN_STUDENT"?R.jsx(Lg,{className:"text-yellow-400"}):R.jsx(Og,{className:"text-green-400"}),i==="SCAN_STUDENT"?"renci Kartn Okutun":n?"ade Edilecek Kitaplar Okutun":"Kitaplar Okutun"]}),R.jsx("button",{onClick:e,className:"p-2 bg-gray-800 rounded-full hover:bg-gray-700",children:R.jsx(pd,{size:24})})]}),R.jsxs("div",{className:"relative w-full flex-grow flex items-center justify-center bg-black overflow-hidden rounded-xl border-2 border-gray-700",children:[R.jsx("div",{id:"optimized-reader",className:"w-full h-full object-cover"}),R.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:R.jsx("div",{className:`w-64 h-64 border-4 rounded-3xl opacity-50 ${i==="SCAN_STUDENT"?"border-yellow-400":"border-green-400"}`})}),_&&R.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-black/60 animated-fade-in",children:R.jsxs("div",{className:"bg-white text-black p-6 rounded-2xl flex flex-col items-center animate-bounce-in",children:[R.jsx(dd,{size:48,className:"text-green-500 mb-2"}),R.jsx("p",{className:"text-lg font-bold",children:p}),R.jsx("p",{className:"text-sm text-gray-500",children:"Okundu"})]})})]}),R.jsxs("div",{className:"w-full mt-4 space-y-3",children:[R.jsxs("div",{className:"bg-gray-900 text-white p-4 rounded-xl flex items-center justify-between",children:[!n&&R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"flex items-center gap-3",children:[R.jsx("div",{className:`p-2 rounded-lg ${l?"bg-green-600":"bg-gray-700"}`,children:R.jsx(Lg,{size:20})}),R.jsxs("div",{children:[R.jsx("p",{className:"text-xs text-gray-400",children:"Aktif renci"}),R.jsx("p",{className:"font-mono font-bold",children:l||"Bekleniyor..."})]})]}),R.jsx("div",{className:"h-8 w-px bg-gray-700"})]}),R.jsxs("div",{className:"flex items-center gap-3 flex-grow justify-center",children:[R.jsx("div",{className:`p-2 rounded-lg ${x.length>0?n?"bg-orange-600":"bg-blue-600":"bg-gray-700"}`,children:R.jsx(Og,{size:20})}),R.jsxs("div",{children:[R.jsx("p",{className:"text-xs text-gray-400",children:n?"Toplanacak Kitap":"Kitap Says"}),R.jsx("p",{className:"font-mono font-bold text-center",children:x.length})]})]})]}),R.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i==="SCAN_BOOKS"&&R.jsxs("button",{onClick:()=>{o("SCAN_STUDENT"),f(null),m([])},className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 text-white rounded-xl font-semibold hover:bg-gray-700 active:scale-95 transition-transform",children:[R.jsx(x_,{size:18}),R.jsx("span",{children:"Sfrla"})]}),R.jsxs("button",{onClick:()=>(n||l)&&x.length>0?t(l,x):null,disabled:n?x.length===0:!l||x.length===0,className:`col-span-${i==="SCAN_STUDENT"||n?"2":"1"} flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold text-lg shadow-lg active:scale-95 transition-all ${(n||l)&&x.length>0?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:[R.jsx(w_,{size:20}),R.jsx("span",{children:n?"adeleri Tamamla":"dn lemini Tamamla"})]})]}),R.jsxs("div",{className:"flex justify-center gap-4",children:[R.jsx("button",{onClick:K,className:"text-xs text-gray-500 underline",children:"El ile renci Gir"}),l&&R.jsx("button",{onClick:ae,className:"text-xs text-gray-500 underline",children:"El ile Kitap Gir"})]})]})]})},h4=()=>{const[t,e]=Me.useState("ISSUE"),[n,i]=Me.useState(""),[o,l]=Me.useState(""),[f,x]=Me.useState(14),[m,p]=Me.useState(null),[E,_]=Me.useState(null),[S,P]=Me.useState("none"),V=L=>{S==="book"?(i(L),P("none")):S==="student"&&(l(L),P("none"))},G=async(L,K)=>{e("ISSUE"),P("none"),_(null),p({type:"warning",msg:"Toplu ilem yaplyor, ltfen bekleyin..."});const ae=[],te=[];for(const b of K)try{const D=await er.issueBook(b,L,f);D.success?ae.push(`${b}: ${D.message}`):te.push(`${b}: ${D.message}`)}catch{te.push(`${b}: Sistem hatas`)}_({successes:ae,failures:te}),te.length===0?p({type:"success",msg:`Toplam ${ae.length} kitap baaryla dn verildi.`}):p({type:"warning",msg:`${ae.length} kitap verildi, ${te.length} kitapta hata olutu.`})},X=async(L,K)=>{e("RETURN"),P("none"),_(null),p({type:"warning",msg:"Toplu iade ilemi yaplyor, ltfen bekleyin..."});const ae=[],te=[];for(const b of K)try{const D=await er.returnBook(b);D.success?ae.push(`${b}: ${D.message}`):te.push(`${b}: ${D.message}`)}catch{te.push(`${b}: Sistem hatas`)}_({successes:ae,failures:te}),te.length===0?p({type:"success",msg:`Toplam ${ae.length} kitap baaryla iade alnd.`}):p({type:"warning",msg:`${ae.length} kitap iade alnd, ${te.length} kitapta hata olutu.`})},j=async L=>{if(L.preventDefault(),p(null),!n||!o){p({type:"error",msg:"Ltfen hem Kitap hem de renci QR kodunu okutun."});return}try{const K=await er.issueBook(n,o,f);K.success?(K.warning?p({type:"warning",msg:K.warning+" (Kitap Baaryla Verildi)"}):p({type:"success",msg:K.message}),i(""),l("")):p({type:"error",msg:K.message})}catch{p({type:"error",msg:"Sistem hatas olutu."})}},B=async L=>{if(L.preventDefault(),p(null),!n){p({type:"error",msg:"Ltfen Kitap QR kodunu okutun."});return}try{const K=await er.returnBook(n);K.success?(p({type:"success",msg:K.message}),i("")):p({type:"error",msg:K.message})}catch{p({type:"error",msg:"Sistem hatas olutu."})}};return R.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[R.jsxs("div",{className:"text-center space-y-2",children:[R.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"dn Bankosu"}),R.jsx("p",{className:"text-gray-500",children:"Kitap vermek veya almak iin QR kodlar taratn."})]}),R.jsxs("div",{className:"flex rounded-lg bg-gray-200 p-1",children:[R.jsxs("button",{onClick:()=>{e("ISSUE"),p(null),i(""),l(""),P("none")},className:`flex-1 py-3 px-6 rounded-md text-sm font-semibold transition-all flex items-center justify-center space-x-2 ${t==="ISSUE"?"bg-white text-indigo-700 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[R.jsx(l_,{size:20}),R.jsx("span",{children:"Kitap Ver (dn)"})]}),R.jsxs("button",{onClick:()=>{e("BATCH_ISSUE"),p(null),P("full_batch")},className:`flex-1 py-3 px-6 rounded-md text-sm font-semibold transition-all flex items-center justify-center space-x-2 ${t==="BATCH_ISSUE"?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-md":"text-purple-600 hover:text-purple-800 bg-purple-50"}`,children:[R.jsx(Bg,{size:20}),R.jsx("span",{children:"Hzl / Toplu dn"})]}),R.jsxs("button",{onClick:()=>{e("RETURN"),p(null),i(""),l(""),P("none")},className:`flex-1 py-3 px-6 rounded-md text-sm font-semibold transition-all flex items-center justify-center space-x-2 ${t==="RETURN"?"bg-white text-indigo-700 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[R.jsx(u_,{size:20}),R.jsx("span",{children:"Kitap Al (ade)"})]}),R.jsxs("button",{onClick:()=>{e("BATCH_RETURN"),p(null),P("full_batch_return")},className:`flex-1 py-3 px-6 rounded-md text-sm font-semibold transition-all flex items-center justify-center space-x-2 ${t==="BATCH_RETURN"?"bg-gradient-to-r from-emerald-600 to-teal-600 text-white shadow-md":"text-emerald-600 hover:text-emerald-800 bg-emerald-50"}`,children:[R.jsx(Bg,{size:20}),R.jsx("span",{children:"Hzl / Toplu ade"})]})]}),S==="full_batch"&&R.jsx(cm,{onComplete:G,onCancel:()=>{P("none"),e("ISSUE")}}),S==="full_batch_return"&&R.jsx(cm,{onComplete:X,onCancel:()=>{P("none"),e("RETURN")},isReturnOnly:!0}),S!=="none"&&S!=="full_batch"&&S!=="full_batch_return"&&R.jsxs("div",{className:"bg-gray-100 p-4 rounded-xl border-2 border-indigo-200",children:[R.jsx("h3",{className:"text-center font-bold mb-2 text-indigo-800",children:S==="book"?"Kitap QR Kodu Okutun":"renci QR Kodu Okutun"}),R.jsx(u4,{onScanSuccess:V}),R.jsx("button",{onClick:()=>P("none"),className:"w-full mt-2 py-2 bg-gray-300 rounded text-gray-700 hover:bg-gray-400",children:"Kameray Kapat"})]}),R.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-gray-100",children:[R.jsxs("form",{onSubmit:t==="ISSUE"?j:B,className:"space-y-6",children:[R.jsxs("div",{className:"space-y-2",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kitap QR / ISBN"}),R.jsxs("div",{className:"relative",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:R.jsx(kg,{size:20})}),R.jsx("input",{type:"text",autoFocus:!0,value:n,onChange:L=>i(L.target.value),placeholder:"Kitap barkodunu taratn...",className:"pl-10 block w-full rounded-lg border-gray-300 bg-gray-50 border focus:bg-white focus:border-indigo-500 focus:ring-indigo-500 py-3 transition-colors"}),R.jsx("button",{type:"button",onClick:()=>P(S==="book"?"none":"book"),className:"absolute right-2 top-2 p-1.5 bg-indigo-100 text-indigo-600 rounded hover:bg-indigo-200",title:"Kameray A",children:R.jsx(Pg,{size:18})})]})]}),t==="ISSUE"&&R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"space-y-2",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"renci QR / No"}),R.jsxs("div",{className:"relative",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:R.jsx(kg,{size:20})}),R.jsx("input",{type:"text",value:o,onChange:L=>l(L.target.value),placeholder:"renci kimliini taratn...",className:"pl-10 block w-full rounded-lg border-gray-300 bg-gray-50 border focus:bg-white focus:border-indigo-500 focus:ring-indigo-500 py-3 transition-colors"}),R.jsx("button",{type:"button",onClick:()=>P(S==="student"?"none":"student"),className:"absolute right-2 top-2 p-1.5 bg-indigo-100 text-indigo-600 rounded hover:bg-indigo-200",title:"Kameray A",children:R.jsx(Pg,{size:18})})]})]}),R.jsxs("div",{className:"space-y-2",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"dn Sresi (Gn)"}),R.jsxs("select",{value:f,onChange:L=>x(Number(L.target.value)),className:"block w-full rounded-lg border-gray-300 border py-3 px-4 focus:border-indigo-500 focus:ring-indigo-500",children:[R.jsx("option",{value:7,children:"7 Gn (1 Hafta)"}),R.jsx("option",{value:14,children:"14 Gn (2 Hafta)"}),R.jsx("option",{value:30,children:"30 Gn (1 Ay)"}),R.jsx("option",{value:90,children:"90 Gn (Dnemlik)"})]}),R.jsx("p",{className:"text-xs text-gray-500",children:"Bu sre geilirse gecikme uyars verilecektir."})]})]}),R.jsxs("button",{type:"submit",className:`w-full flex items-center justify-center space-x-2 py-4 rounded-lg font-bold text-white shadow-md transition-transform active:scale-95 ${t==="ISSUE"?"bg-indigo-600 hover:bg-indigo-700":"bg-emerald-600 hover:bg-emerald-700"}`,children:[R.jsx("span",{children:t==="ISSUE"?"dn lemini Tamamla":"ade lemini Tamamla"}),R.jsx(a_,{size:20})]})]}),m&&R.jsxs("div",{className:`mt-6 p-4 rounded-lg flex items-start space-x-3 ${m.type==="error"?"bg-red-50 text-red-800 border border-red-200":m.type==="warning"?"bg-amber-50 text-amber-800 border border-amber-200":"bg-green-50 text-green-800 border border-green-200"}`,children:[m.type==="error"&&R.jsx(lf,{className:"shrink-0",size:24}),m.type==="warning"&&R.jsx(lf,{className:"shrink-0",size:24}),m.type==="success"&&R.jsx(dd,{className:"shrink-0",size:24}),R.jsxs("div",{children:[R.jsx("p",{className:"font-semibold",children:m.type==="error"?"Hata":m.type==="warning"?"Uyar":"Baarl"}),R.jsx("p",{children:m.msg})]})]}),E&&R.jsxs("div",{className:"mt-6 bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm",children:[R.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex justify-between items-center",children:[R.jsxs("h3",{className:"font-bold text-gray-700 flex items-center gap-2",children:[R.jsx(g_,{size:18}),"lem Raporu"]}),R.jsx("button",{onClick:()=>_(null),className:"text-sm text-gray-500 hover:text-gray-800",children:"Kapat"})]}),R.jsxs("div",{className:"p-4 space-y-4",children:[E.successes.length>0&&R.jsxs("div",{children:[R.jsxs("h4",{className:"text-sm font-bold text-green-700 mb-2",children:["Baarl lemler (",E.successes.length,")"]}),R.jsx("ul",{className:"text-sm space-y-1 text-green-600",children:E.successes.map((L,K)=>R.jsxs("li",{className:"flex items-start gap-2",children:[R.jsx(dd,{size:14,className:"mt-1"})," ",L]},K))})]}),E.failures.length>0&&R.jsxs("div",{children:[R.jsxs("h4",{className:"text-sm font-bold text-red-700 mb-2",children:["Hatal lemler (",E.failures.length,")"]}),R.jsx("ul",{className:"text-sm space-y-1 text-red-600",children:E.failures.map((L,K)=>R.jsxs("li",{className:"flex items-start gap-2",children:[R.jsx(lf,{size:14,className:"mt-1"})," ",L]},K))})]})]})]})]})]})};var f4=Object.defineProperty,qu=Object.getOwnPropertySymbols,ww=Object.prototype.hasOwnProperty,Ew=Object.prototype.propertyIsEnumerable,um=(t,e,n)=>e in t?f4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,d4=(t,e)=>{for(var n in e||(e={}))ww.call(e,n)&&um(t,n,e[n]);if(qu)for(var n of qu(e))Ew.call(e,n)&&um(t,n,e[n]);return t},g4=(t,e)=>{var n={};for(var i in t)ww.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&qu)for(var i of qu(t))e.indexOf(i)<0&&Ew.call(t,i)&&(n[i]=t[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var fo;(t=>{const e=class{constructor(m,p,E,_){if(this.version=m,this.errorCorrectionLevel=p,this.modules=[],this.isFunction=[],m<e.MIN_VERSION||m>e.MAX_VERSION)throw new RangeError("Version value out of range");if(_<-1||_>7)throw new RangeError("Mask value out of range");this.size=m*4+17;let S=[];for(let V=0;V<this.size;V++)S.push(!1);for(let V=0;V<this.size;V++)this.modules.push(S.slice()),this.isFunction.push(S.slice());this.drawFunctionPatterns();const P=this.addEccAndInterleave(E);if(this.drawCodewords(P),_==-1){let V=1e9;for(let G=0;G<8;G++){this.applyMask(G),this.drawFormatBits(G);const X=this.getPenaltyScore();X<V&&(_=G,V=X),this.applyMask(G)}}l(0<=_&&_<=7),this.mask=_,this.applyMask(_),this.drawFormatBits(_),this.isFunction=[]}static encodeText(m,p){const E=t.QrSegment.makeSegments(m);return e.encodeSegments(E,p)}static encodeBinary(m,p){const E=t.QrSegment.makeBytes(m);return e.encodeSegments([E],p)}static encodeSegments(m,p,E=1,_=40,S=-1,P=!0){if(!(e.MIN_VERSION<=E&&E<=_&&_<=e.MAX_VERSION)||S<-1||S>7)throw new RangeError("Invalid value");let V,G;for(V=E;;V++){const L=e.getNumDataCodewords(V,p)*8,K=x.getTotalBits(m,V);if(K<=L){G=K;break}if(V>=_)throw new RangeError("Data too long")}for(const L of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])P&&G<=e.getNumDataCodewords(V,L)*8&&(p=L);let X=[];for(const L of m){i(L.mode.modeBits,4,X),i(L.numChars,L.mode.numCharCountBits(V),X);for(const K of L.getData())X.push(K)}l(X.length==G);const j=e.getNumDataCodewords(V,p)*8;l(X.length<=j),i(0,Math.min(4,j-X.length),X),i(0,(8-X.length%8)%8,X),l(X.length%8==0);for(let L=236;X.length<j;L^=253)i(L,8,X);let B=[];for(;B.length*8<X.length;)B.push(0);return X.forEach((L,K)=>B[K>>>3]|=L<<7-(K&7)),new e(V,p,B,S)}getModule(m,p){return 0<=m&&m<this.size&&0<=p&&p<this.size&&this.modules[p][m]}getModules(){return this.modules}drawFunctionPatterns(){for(let E=0;E<this.size;E++)this.setFunctionModule(6,E,E%2==0),this.setFunctionModule(E,6,E%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const m=this.getAlignmentPatternPositions(),p=m.length;for(let E=0;E<p;E++)for(let _=0;_<p;_++)E==0&&_==0||E==0&&_==p-1||E==p-1&&_==0||this.drawAlignmentPattern(m[E],m[_]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(m){const p=this.errorCorrectionLevel.formatBits<<3|m;let E=p;for(let S=0;S<10;S++)E=E<<1^(E>>>9)*1335;const _=(p<<10|E)^21522;l(_>>>15==0);for(let S=0;S<=5;S++)this.setFunctionModule(8,S,o(_,S));this.setFunctionModule(8,7,o(_,6)),this.setFunctionModule(8,8,o(_,7)),this.setFunctionModule(7,8,o(_,8));for(let S=9;S<15;S++)this.setFunctionModule(14-S,8,o(_,S));for(let S=0;S<8;S++)this.setFunctionModule(this.size-1-S,8,o(_,S));for(let S=8;S<15;S++)this.setFunctionModule(8,this.size-15+S,o(_,S));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let m=this.version;for(let E=0;E<12;E++)m=m<<1^(m>>>11)*7973;const p=this.version<<12|m;l(p>>>18==0);for(let E=0;E<18;E++){const _=o(p,E),S=this.size-11+E%3,P=Math.floor(E/3);this.setFunctionModule(S,P,_),this.setFunctionModule(P,S,_)}}drawFinderPattern(m,p){for(let E=-4;E<=4;E++)for(let _=-4;_<=4;_++){const S=Math.max(Math.abs(_),Math.abs(E)),P=m+_,V=p+E;0<=P&&P<this.size&&0<=V&&V<this.size&&this.setFunctionModule(P,V,S!=2&&S!=4)}}drawAlignmentPattern(m,p){for(let E=-2;E<=2;E++)for(let _=-2;_<=2;_++)this.setFunctionModule(m+_,p+E,Math.max(Math.abs(_),Math.abs(E))!=1)}setFunctionModule(m,p,E){this.modules[p][m]=E,this.isFunction[p][m]=!0}addEccAndInterleave(m){const p=this.version,E=this.errorCorrectionLevel;if(m.length!=e.getNumDataCodewords(p,E))throw new RangeError("Invalid argument");const _=e.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][p],S=e.ECC_CODEWORDS_PER_BLOCK[E.ordinal][p],P=Math.floor(e.getNumRawDataModules(p)/8),V=_-P%_,G=Math.floor(P/_);let X=[];const j=e.reedSolomonComputeDivisor(S);for(let L=0,K=0;L<_;L++){let ae=m.slice(K,K+G-S+(L<V?0:1));K+=ae.length;const te=e.reedSolomonComputeRemainder(ae,j);L<V&&ae.push(0),X.push(ae.concat(te))}let B=[];for(let L=0;L<X[0].length;L++)X.forEach((K,ae)=>{(L!=G-S||ae>=V)&&B.push(K[L])});return l(B.length==P),B}drawCodewords(m){if(m.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let p=0;for(let E=this.size-1;E>=1;E-=2){E==6&&(E=5);for(let _=0;_<this.size;_++)for(let S=0;S<2;S++){const P=E-S,G=(E+1&2)==0?this.size-1-_:_;!this.isFunction[G][P]&&p<m.length*8&&(this.modules[G][P]=o(m[p>>>3],7-(p&7)),p++)}}l(p==m.length*8)}applyMask(m){if(m<0||m>7)throw new RangeError("Mask value out of range");for(let p=0;p<this.size;p++)for(let E=0;E<this.size;E++){let _;switch(m){case 0:_=(E+p)%2==0;break;case 1:_=p%2==0;break;case 2:_=E%3==0;break;case 3:_=(E+p)%3==0;break;case 4:_=(Math.floor(E/3)+Math.floor(p/2))%2==0;break;case 5:_=E*p%2+E*p%3==0;break;case 6:_=(E*p%2+E*p%3)%2==0;break;case 7:_=((E+p)%2+E*p%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[p][E]&&_&&(this.modules[p][E]=!this.modules[p][E])}}getPenaltyScore(){let m=0;for(let S=0;S<this.size;S++){let P=!1,V=0,G=[0,0,0,0,0,0,0];for(let X=0;X<this.size;X++)this.modules[S][X]==P?(V++,V==5?m+=e.PENALTY_N1:V>5&&m++):(this.finderPenaltyAddHistory(V,G),P||(m+=this.finderPenaltyCountPatterns(G)*e.PENALTY_N3),P=this.modules[S][X],V=1);m+=this.finderPenaltyTerminateAndCount(P,V,G)*e.PENALTY_N3}for(let S=0;S<this.size;S++){let P=!1,V=0,G=[0,0,0,0,0,0,0];for(let X=0;X<this.size;X++)this.modules[X][S]==P?(V++,V==5?m+=e.PENALTY_N1:V>5&&m++):(this.finderPenaltyAddHistory(V,G),P||(m+=this.finderPenaltyCountPatterns(G)*e.PENALTY_N3),P=this.modules[X][S],V=1);m+=this.finderPenaltyTerminateAndCount(P,V,G)*e.PENALTY_N3}for(let S=0;S<this.size-1;S++)for(let P=0;P<this.size-1;P++){const V=this.modules[S][P];V==this.modules[S][P+1]&&V==this.modules[S+1][P]&&V==this.modules[S+1][P+1]&&(m+=e.PENALTY_N2)}let p=0;for(const S of this.modules)p=S.reduce((P,V)=>P+(V?1:0),p);const E=this.size*this.size,_=Math.ceil(Math.abs(p*20-E*10)/E)-1;return l(0<=_&&_<=9),m+=_*e.PENALTY_N4,l(0<=m&&m<=2568888),m}getAlignmentPatternPositions(){if(this.version==1)return[];{const m=Math.floor(this.version/7)+2,p=this.version==32?26:Math.ceil((this.version*4+4)/(m*2-2))*2;let E=[6];for(let _=this.size-7;E.length<m;_-=p)E.splice(1,0,_);return E}}static getNumRawDataModules(m){if(m<e.MIN_VERSION||m>e.MAX_VERSION)throw new RangeError("Version number out of range");let p=(16*m+128)*m+64;if(m>=2){const E=Math.floor(m/7)+2;p-=(25*E-10)*E-55,m>=7&&(p-=36)}return l(208<=p&&p<=29648),p}static getNumDataCodewords(m,p){return Math.floor(e.getNumRawDataModules(m)/8)-e.ECC_CODEWORDS_PER_BLOCK[p.ordinal][m]*e.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][m]}static reedSolomonComputeDivisor(m){if(m<1||m>255)throw new RangeError("Degree out of range");let p=[];for(let _=0;_<m-1;_++)p.push(0);p.push(1);let E=1;for(let _=0;_<m;_++){for(let S=0;S<p.length;S++)p[S]=e.reedSolomonMultiply(p[S],E),S+1<p.length&&(p[S]^=p[S+1]);E=e.reedSolomonMultiply(E,2)}return p}static reedSolomonComputeRemainder(m,p){let E=p.map(_=>0);for(const _ of m){const S=_^E.shift();E.push(0),p.forEach((P,V)=>E[V]^=e.reedSolomonMultiply(P,S))}return E}static reedSolomonMultiply(m,p){if(m>>>8||p>>>8)throw new RangeError("Byte out of range");let E=0;for(let _=7;_>=0;_--)E=E<<1^(E>>>7)*285,E^=(p>>>_&1)*m;return l(E>>>8==0),E}finderPenaltyCountPatterns(m){const p=m[1];l(p<=this.size*3);const E=p>0&&m[2]==p&&m[3]==p*3&&m[4]==p&&m[5]==p;return(E&&m[0]>=p*4&&m[6]>=p?1:0)+(E&&m[6]>=p*4&&m[0]>=p?1:0)}finderPenaltyTerminateAndCount(m,p,E){return m&&(this.finderPenaltyAddHistory(p,E),p=0),p+=this.size,this.finderPenaltyAddHistory(p,E),this.finderPenaltyCountPatterns(E)}finderPenaltyAddHistory(m,p){p[0]==0&&(m+=this.size),p.pop(),p.unshift(m)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function i(m,p,E){if(p<0||p>31||m>>>p)throw new RangeError("Value out of range");for(let _=p-1;_>=0;_--)E.push(m>>>_&1)}function o(m,p){return(m>>>p&1)!=0}function l(m){if(!m)throw new Error("Assertion error")}const f=class{constructor(m,p,E){if(this.mode=m,this.numChars=p,this.bitData=E,p<0)throw new RangeError("Invalid argument");this.bitData=E.slice()}static makeBytes(m){let p=[];for(const E of m)i(E,8,p);return new f(f.Mode.BYTE,m.length,p)}static makeNumeric(m){if(!f.isNumeric(m))throw new RangeError("String contains non-numeric characters");let p=[];for(let E=0;E<m.length;){const _=Math.min(m.length-E,3);i(parseInt(m.substr(E,_),10),_*3+1,p),E+=_}return new f(f.Mode.NUMERIC,m.length,p)}static makeAlphanumeric(m){if(!f.isAlphanumeric(m))throw new RangeError("String contains unencodable characters in alphanumeric mode");let p=[],E;for(E=0;E+2<=m.length;E+=2){let _=f.ALPHANUMERIC_CHARSET.indexOf(m.charAt(E))*45;_+=f.ALPHANUMERIC_CHARSET.indexOf(m.charAt(E+1)),i(_,11,p)}return E<m.length&&i(f.ALPHANUMERIC_CHARSET.indexOf(m.charAt(E)),6,p),new f(f.Mode.ALPHANUMERIC,m.length,p)}static makeSegments(m){return m==""?[]:f.isNumeric(m)?[f.makeNumeric(m)]:f.isAlphanumeric(m)?[f.makeAlphanumeric(m)]:[f.makeBytes(f.toUtf8ByteArray(m))]}static makeEci(m){let p=[];if(m<0)throw new RangeError("ECI assignment value out of range");if(m<128)i(m,8,p);else if(m<16384)i(2,2,p),i(m,14,p);else if(m<1e6)i(6,3,p),i(m,21,p);else throw new RangeError("ECI assignment value out of range");return new f(f.Mode.ECI,0,p)}static isNumeric(m){return f.NUMERIC_REGEX.test(m)}static isAlphanumeric(m){return f.ALPHANUMERIC_REGEX.test(m)}getData(){return this.bitData.slice()}static getTotalBits(m,p){let E=0;for(const _ of m){const S=_.mode.numCharCountBits(p);if(_.numChars>=1<<S)return 1/0;E+=4+S+_.bitData.length}return E}static toUtf8ByteArray(m){m=encodeURI(m);let p=[];for(let E=0;E<m.length;E++)m.charAt(E)!="%"?p.push(m.charCodeAt(E)):(p.push(parseInt(m.substr(E+1,2),16)),E+=2);return p}};let x=f;x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=x})(fo||(fo={}));(t=>{(e=>{const n=class{constructor(o,l){this.ordinal=o,this.formatBits=l}};let i=n;i.LOW=new n(0,1),i.MEDIUM=new n(1,0),i.QUARTILE=new n(2,3),i.HIGH=new n(3,2),e.Ecc=i})(t.QrCode||(t.QrCode={}))})(fo||(fo={}));(t=>{(e=>{const n=class{constructor(o,l){this.modeBits=o,this.numBitsCharCount=l}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};let i=n;i.NUMERIC=new n(1,[10,12,14]),i.ALPHANUMERIC=new n(2,[9,11,13]),i.BYTE=new n(4,[8,16,16]),i.KANJI=new n(8,[8,10,12]),i.ECI=new n(7,[0,0,0]),e.Mode=i})(t.QrSegment||(t.QrSegment={}))})(fo||(fo={}));var ol=fo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var p4={L:ol.QrCode.Ecc.LOW,M:ol.QrCode.Ecc.MEDIUM,Q:ol.QrCode.Ecc.QUARTILE,H:ol.QrCode.Ecc.HIGH},m4=128,y4="L",x4="#FFFFFF",w4="#000000",E4=!1,Aw=4,A4=.1;function _4(t,e=0){const n=[];return t.forEach(function(i,o){let l=null;i.forEach(function(f,x){if(!f&&l!==null){n.push(`M${l+e} ${o+e}h${x-l}v1H${l+e}z`),l=null;return}if(x===i.length-1){if(!f)return;l===null?n.push(`M${x+e},${o+e} h1v1H${x+e}z`):n.push(`M${l+e},${o+e} h${x+1-l}v1H${l+e}z`);return}f&&l===null&&(l=x)})}),n.join("")}function C4(t,e){return t.slice().map((n,i)=>i<e.y||i>=e.y+e.h?n:n.map((o,l)=>l<e.x||l>=e.x+e.w?o:!1))}function I4(t,e,n,i){if(i==null)return null;const o=n?Aw:0,l=t.length+o*2,f=Math.floor(e*A4),x=l/e,m=(i.width||f)*x,p=(i.height||f)*x,E=i.x==null?t.length/2-m/2:i.x*x,_=i.y==null?t.length/2-p/2:i.y*x;let S=null;if(i.excavate){let P=Math.floor(E),V=Math.floor(_),G=Math.ceil(m+E-P),X=Math.ceil(p+_-V);S={x:P,y:V,w:G,h:X}}return{x:E,y:_,h:p,w:m,excavation:S}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function T4(t){const e=t,{value:n,size:i=m4,level:o=y4,bgColor:l=x4,fgColor:f=w4,includeMargin:x=E4,imageSettings:m}=e,p=g4(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let E=ol.QrCode.encodeText(n,p4[o]).getModules();const _=x?Aw:0,S=E.length+_*2,P=I4(E,i,x,m);let V=null;m!=null&&P!=null&&(P.excavation!=null&&(E=C4(E,P.excavation)),V=$a.createElement("image",{xlinkHref:m.src,height:P.h,width:P.w,x:P.x+_,y:P.y+_,preserveAspectRatio:"none"}));const G=_4(E,_);return $a.createElement("svg",d4({height:i,width:i,viewBox:`0 0 ${S} ${S}`},p),$a.createElement("path",{fill:l,d:`M0,0 h${S}v${S}H0z`,shapeRendering:"crispEdges"}),$a.createElement("path",{fill:f,d:G,shapeRendering:"crispEdges"}),V)}const _w=({value:t,label:e,subLabel:n,size:i=128})=>R.jsxs("div",{className:"flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg bg-white shadow-sm break-inside-avoid",children:[R.jsx(T4,{value:t,size:i,level:"H"}),R.jsxs("div",{className:"mt-2 text-center",children:[R.jsx("p",{className:"font-bold text-gray-800 text-sm",children:e}),n&&R.jsx("p",{className:"text-xs text-gray-500",children:n})]})]}),v4=()=>{const[t,e]=Me.useState([]),[n,i]=Me.useState([]),[o,l]=Me.useState(""),[f,x]=Me.useState(!1),[m,p]=Me.useState({title:"",author:"",isbn:"",category:""}),E=async()=>{const X=await er.getBooks();e(X),i(X)};Me.useEffect(()=>{E()},[]),Me.useEffect(()=>{const X=o.toLowerCase(),j=t.filter(B=>B.title.toLowerCase().includes(X)||B.author.toLowerCase().includes(X)||B.isbn.includes(X));i(j)},[o,t]);const _=async X=>{if(X.preventDefault(),m.title&&m.isbn){const j=await er.addBook(m);j.success?(p({title:"",author:"",isbn:"",category:""}),x(!1),E()):alert(j.message)}},S=async X=>{window.confirm("Bu kitab silmek istediinize emin misiniz?")&&(await er.deleteBook(X),E())},P=()=>{window.print()},V=()=>{p(X=>({...X,isbn:Math.floor(1e12+Math.random()*9e12).toString()}))},G=X=>{switch(X){case Di.AVAILABLE:return"MEVCUT";case Di.BORROWED:return"DNTE";case Di.LOST:return"KAYIP";default:return X}};return R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 no-print",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Kitap Envanteri"}),R.jsxs("div",{className:"relative w-full md:w-64",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:R.jsx(vy,{size:18,className:"text-gray-400"})}),R.jsx("input",{type:"text",placeholder:"Kitap ara...",className:"pl-10 block w-full rounded-lg border-gray-300 border py-2 px-4 focus:ring-indigo-500 focus:border-indigo-500",value:o,onChange:X=>l(X.target.value)})]}),R.jsxs("div",{className:"flex space-x-3 w-full md:w-auto",children:[R.jsxs("button",{onClick:P,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[R.jsx(Ty,{size:18}),R.jsx("span",{children:"QR Yazdr"})]}),R.jsxs("button",{onClick:()=>x(!f),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[R.jsx(Iy,{size:18}),R.jsx("span",{children:"Ekle"})]})]})]}),f&&R.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-indigo-100 no-print",children:[R.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Yeni Kitap Ekle"}),R.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsx("input",{placeholder:"Kitap Ad",className:"border p-2 rounded",value:m.title,onChange:X=>p({...m,title:X.target.value}),required:!0}),R.jsx("input",{placeholder:"Yazar",className:"border p-2 rounded",value:m.author,onChange:X=>p({...m,author:X.target.value}),required:!0}),R.jsxs("div",{className:"flex space-x-2",children:[R.jsx("input",{placeholder:"ISBN / Barkod",className:"border p-2 rounded flex-1",value:m.isbn,onChange:X=>p({...m,isbn:X.target.value}),required:!0}),R.jsx("button",{type:"button",onClick:V,className:"text-xs bg-gray-100 px-2 rounded hover:bg-gray-200",children:"ret"})]}),R.jsx("input",{placeholder:"Kategori",className:"border p-2 rounded",value:m.category,onChange:X=>p({...m,category:X.target.value})}),R.jsx("button",{type:"submit",className:"col-span-2 bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700",children:"Kaydet"})]})]}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden no-print",children:R.jsxs("table",{className:"w-full text-left",children:[R.jsx("thead",{className:"bg-gray-50",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Balk"}),R.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Yazar"}),R.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"ISBN"}),R.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Durum"}),R.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500 text-right",children:"lem"})]})}),R.jsx("tbody",{className:"divide-y divide-gray-100",children:n.length===0?R.jsx("tr",{children:R.jsx("td",{colSpan:5,className:"text-center py-6 text-gray-400",children:"Kitap bulunamad."})}):n.map(X=>R.jsxs("tr",{children:[R.jsx("td",{className:"px-6 py-4",children:X.title}),R.jsx("td",{className:"px-6 py-4 text-gray-500",children:X.author}),R.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:X.isbn}),R.jsx("td",{className:"px-6 py-4",children:R.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${X.status===Di.AVAILABLE?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:G(X.status)})}),R.jsx("td",{className:"px-6 py-4 text-right",children:R.jsx("button",{onClick:()=>S(X.id),className:"text-red-400 hover:text-red-600 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Kitab Sil",children:R.jsx(Sy,{size:16})})})]},X.id))})]})}),R.jsxs("div",{className:"print-only",children:[R.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Kitap Envanteri QR Kodlar"}),R.jsx("div",{className:"grid grid-cols-4 gap-4",children:n.map(X=>R.jsx(_w,{value:X.isbn,label:X.title.substring(0,20)+(X.title.length>20?"...":""),subLabel:X.isbn},X.id))})]})]})},S4=()=>{const[t,e]=Me.useState([]),[n,i]=Me.useState([]),[o,l]=Me.useState(""),[f,x]=Me.useState(!1),[m,p]=Me.useState({name:"",studentNumber:"",email:"",grade:""}),E=async()=>{const V=await er.getStudents();e(V),i(V)};Me.useEffect(()=>{E()},[]),Me.useEffect(()=>{const V=o.toLowerCase(),G=t.filter(X=>X.name.toLowerCase().includes(V)||X.studentNumber.includes(V)||X.grade.toLowerCase().includes(V));i(G)},[o,t]);const _=async V=>{if(V.preventDefault(),m.name&&m.studentNumber){const G=await er.addStudent(m);G.success?(p({name:"",studentNumber:"",email:"",grade:""}),x(!1),E()):alert(G.message)}},S=async V=>{window.confirm("Bu renciyi silmek istediinize emin misiniz?")&&(await er.deleteStudent(V),E())},P=()=>{window.print()};return R.jsxs("div",{className:"space-y-6",children:[R.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 no-print",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"renci Veritaban"}),R.jsxs("div",{className:"relative w-full md:w-64",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:R.jsx(vy,{size:18,className:"text-gray-400"})}),R.jsx("input",{type:"text",placeholder:"renci ara...",className:"pl-10 block w-full rounded-lg border-gray-300 border py-2 px-4 focus:ring-indigo-500 focus:border-indigo-500",value:o,onChange:V=>l(V.target.value)})]}),R.jsxs("div",{className:"flex space-x-3 w-full md:w-auto",children:[R.jsxs("button",{onClick:P,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[R.jsx(Ty,{size:18}),R.jsx("span",{children:"Kart Yazdr"})]}),R.jsxs("button",{onClick:()=>x(!f),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[R.jsx(Iy,{size:18}),R.jsx("span",{children:"Ekle"})]})]})]}),f&&R.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-indigo-100 no-print",children:[R.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Yeni renci Kaydet"}),R.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[R.jsx("input",{placeholder:"Ad Soyad",className:"border p-2 rounded",value:m.name,onChange:V=>p({...m,name:V.target.value}),required:!0}),R.jsx("input",{placeholder:"renci No (ID)",className:"border p-2 rounded",value:m.studentNumber,onChange:V=>p({...m,studentNumber:V.target.value}),required:!0}),R.jsx("input",{placeholder:"Email",type:"email",className:"border p-2 rounded",value:m.email,onChange:V=>p({...m,email:V.target.value})}),R.jsx("input",{placeholder:"Snf / ube",className:"border p-2 rounded",value:m.grade,onChange:V=>p({...m,grade:V.target.value})}),R.jsx("button",{type:"submit",className:"col-span-2 bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700",children:"renciyi Kaydet"})]})]}),R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden no-print",children:R.jsxs("table",{className:"w-full text-left",children:[R.jsx("thead",{className:"bg-gray-50",children:R.jsxs("tr",{children:[R.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"sim"}),R.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"renci No"}),R.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Snf"}),R.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Gemi"}),R.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500 text-right",children:"lem"})]})}),R.jsx("tbody",{className:"divide-y divide-gray-100",children:n.length===0?R.jsx("tr",{children:R.jsx("td",{colSpan:5,className:"text-center py-6 text-gray-400",children:"renci bulunamad."})}):n.map(V=>R.jsxs("tr",{children:[R.jsx("td",{className:"px-6 py-4 font-medium",children:V.name}),R.jsx("td",{className:"px-6 py-4 text-gray-500 font-mono",children:V.studentNumber}),R.jsx("td",{className:"px-6 py-4",children:V.grade}),R.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[V.readingHistory.length," kitap okudu"]}),R.jsx("td",{className:"px-6 py-4 text-right",children:R.jsx("button",{onClick:()=>S(V.id),className:"text-red-400 hover:text-red-600 p-1 rounded-full hover:bg-red-50 transition-colors",title:"renciyi Sil",children:R.jsx(Sy,{size:16})})})]},V.id))})]})}),R.jsxs("div",{className:"print-only w-full",children:[R.jsx("h1",{className:"text-2xl font-bold mb-8 text-center",children:"Ktphane Kartlar"}),R.jsx("div",{className:"grid grid-cols-2 gap-8 w-full",children:n.map(V=>R.jsxs("div",{className:"border-2 border-black rounded-xl p-6 flex items-center justify-between break-inside-avoid shadow-none",children:[R.jsxs("div",{className:"flex-1 mr-4",children:[R.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[R.jsx("div",{className:"w-8 h-8 bg-black rounded-full text-white flex items-center justify-center font-bold",children:"L"}),R.jsx("span",{className:"font-bold text-sm tracking-wider uppercase",children:"Okul Ktphanesi"})]}),R.jsx("h3",{className:"text-xl font-bold uppercase mb-1",children:V.name}),R.jsx("p",{className:"text-lg font-mono mb-1",children:V.studentNumber}),R.jsx("p",{className:"text-sm text-gray-600 mb-4",children:V.grade}),R.jsx("div",{className:"border-t-2 border-black pt-2 w-32",children:R.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-500",children:"Yetkili mza"})})]}),R.jsx("div",{children:R.jsx(_w,{value:V.studentNumber,label:"",size:96})})]},V.id))})]})]})},N4=()=>{const[t,e]=Me.useState(null),[n,i]=Me.useState("dashboard"),o=()=>{e({id:"admin-1",name:"Admin User",email:"admin@library.school",role:"ADMIN"})},l=()=>{e(null),i("dashboard")};if(!t)return R.jsx(Tv,{onLogin:o});const f=()=>{switch(n){case"dashboard":return R.jsx(Qp,{});case"circulation":return R.jsx(h4,{});case"books":return R.jsx(v4,{});case"students":return R.jsx(S4,{});default:return R.jsx(Qp,{})}};return R.jsx(Iv,{currentPage:n,onNavigate:i,onLogout:l,user:t,children:f()})};const Cw=document.getElementById("root");if(!Cw)throw new Error("Could not find root element to mount to");const R4=Ef.createRoot(Cw);R4.render(R.jsx($a.StrictMode,{children:R.jsx(N4,{})}));
