import{j as e,B as t,L as s,_ as a}from"./index-655d3ef3.js";import{r as l,B as n,y as r,F as i,P as o,z as d,Q as c,T as x}from"./ui-vendors-d35e5635.js";import{Q as p}from"./QRCodeDisplay-d70a0d15.js";import"./firebase-lib-1a6647fc.js";const m=()=>{const[m,u]=l.useState([]),[h,b]=l.useState([]),[g,f]=l.useState(""),[j,y]=l.useState([]),[N,w]=l.useState(!1),[k,v]=l.useState(!1),[K,S]=l.useState({title:"",author:"",isbn:"",category:""}),B=async()=>{const e=[...await s.getBooks()].sort((e,t)=>{const s=new Date(e.addedDate||0).getTime();return new Date(t.addedDate||0).getTime()-s});u(e),b(e)};l.useEffect(()=>{B()},[]),l.useEffect(()=>{const e=g.toLowerCase(),t=m.filter(t=>t.title.toLowerCase().includes(e)||t.author.toLowerCase().includes(e)||t.isbn.includes(e));b(t)},[g,m]);const C=e=>{y(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},z=async e=>{window.confirm("Bu kitabı silmek istediğinize emin misiniz?")&&(await s.deleteBook(e),B())},E=e=>{switch(e){case t.AVAILABLE:return"MEVCUT";case t.BORROWED:return"ÖDÜNÇTE";case t.LOST:return"KAYIP";default:return e}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 no-print",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-cyan-100 rounded-xl text-cyan-600",children:e.jsx(n,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Kitap Envanteri"}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"Kütüphane Kayıtları"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto items-stretch md:items-center",children:[e.jsxs("div",{className:"relative group w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(r,{size:18,className:"text-slate-400 group-focus-within:text-cyan-500 transition-colors"})}),e.jsx("input",{id:"book-search",name:"book-search",type:"text",placeholder:"Kitap ara...",className:"pl-10 block w-full rounded-xl border-2 border-slate-200 bg-white py-2.5 px-4 font-bold text-slate-700 placeholder:text-slate-400 focus:border-cyan-500 focus:ring-0 transition-all outline-none",value:g,onChange:e=>f(e.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:async()=>{const e=h.map(e=>({"Kitap Adı":e.title,Yazar:e.author||"Belirtilmemiş","ISBN/Barkod":e.isbn,Kategori:e.category||"Genel",Durum:E(e.status),"Eklenme Tarihi":new Date(e.addedDate).toLocaleDateString("tr-TR")})),t=await a(()=>import("./xlsx-b2cdeacf.js"),[]),s=t.utils.json_to_sheet(e),l=t.utils.book_new();t.utils.book_append_sheet(l,s,"Kitaplar"),t.writeFile(l,`Kutuphane_Envanter_${(new Date).toLocaleDateString("tr-TR")}.xlsx`)},className:"bg-emerald-50 text-emerald-600 px-4 py-2.5 rounded-xl hover:bg-emerald-100 font-bold text-sm uppercase tracking-wide flex items-center justify-center gap-2 transition-all flex-1 md:flex-none border border-emerald-100",children:[e.jsx(i,{size:18}),e.jsx("span",{className:"hidden lg:inline",children:"Excel"})]}),e.jsxs("button",{onClick:()=>{window.print()},className:(j.length>0?"bg-emerald-600 text-white":"bg-slate-100 text-slate-600")+" px-4 py-2.5 rounded-xl hover:opacity-90 font-bold text-sm uppercase tracking-wide flex items-center justify-center gap-2 transition-all flex-1 md:flex-none",children:[e.jsx(o,{size:18}),e.jsx("span",{className:"hidden lg:inline",children:j.length>0?`Seçilenleri Yazdır (${j.length})`:"Tümünü Yazdır"}),e.jsx("span",{className:"lg:hidden",children:j.length>0?`(${j.length})`:""})]}),e.jsxs("button",{onClick:()=>v(!k),className:"bg-cyan-600 text-white px-6 py-2.5 rounded-xl hover:bg-cyan-700 font-bold text-sm uppercase tracking-wide flex items-center justify-center gap-2 shadow-lg shadow-cyan-600/20 transition-all flex-1 md:flex-none",children:[e.jsx(d,{size:18}),e.jsx("span",{children:"Ekle"})]})]})]})]}),k&&e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-100 no-print animate-soft-fade",children:[e.jsxs("h3",{className:"text-lg font-black text-slate-800 uppercase tracking-tight mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 bg-cyan-500 rounded-full"}),"Yeni Kitap Ekle"]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),K.title&&K.isbn){const e=await s.addBook(K);e.success?(S({title:"",author:"",isbn:"",category:""}),v(!1),B()):alert(e.message)}},className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"book-title",className:"text-[10px] uppercase tracking-widest font-black text-slate-400 ml-1",children:"Kitap Adı"}),e.jsx("input",{id:"book-title",name:"book-title",placeholder:"Örn: Sefiller",className:"w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-bold text-slate-700 outline-none focus:border-cyan-500 transition-all",value:K.title,onChange:e=>S({...K,title:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"book-author",className:"text-[10px] uppercase tracking-widest font-black text-slate-400 ml-1",children:"Yazar (İsteğe Bağlı)"}),e.jsx("input",{id:"book-author",name:"book-author",placeholder:"Örn: Victor Hugo (Boş bırakılabilir)",className:"w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-bold text-slate-700 outline-none focus:border-cyan-500 transition-all",value:K.author,onChange:e=>S({...K,author:e.target.value})})]}),e.jsxs("div",{className:"space-y-1 md:col-span-1",children:[e.jsx("label",{htmlFor:"book-isbn",className:"text-[10px] uppercase tracking-widest font-black text-slate-400 ml-1",children:"ISBN / Barkod"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 group",children:[e.jsx(c,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-cyan-500 transition-colors",size:20}),e.jsx("input",{id:"book-isbn",name:"book-isbn",placeholder:"ISBN Numarası",className:"w-full pl-10 bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-mono font-bold text-slate-700 outline-none focus:border-cyan-500 transition-all",value:K.isbn,onChange:e=>S({...K,isbn:e.target.value}),required:!0})]}),e.jsx("button",{type:"button",onClick:()=>{S(e=>({...e,isbn:Math.floor(1e12+9e12*Math.random()).toString()}))},className:"bg-slate-100 text-slate-600 px-3 rounded-xl font-bold text-xs uppercase hover:bg-slate-200 transition-colors",children:"Üret"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"book-category",className:"text-[10px] uppercase tracking-widest font-black text-slate-400 ml-1",children:"Kategori"}),e.jsx("input",{id:"book-category",name:"book-category",placeholder:"Örn: Klasikler",className:"w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-bold text-slate-700 outline-none focus:border-cyan-500 transition-all",value:K.category,onChange:e=>S({...K,category:e.target.value})})]}),e.jsx("button",{type:"submit",className:"md:col-span-2 bg-cyan-600 text-white rounded-xl py-4 font-black text-sm uppercase tracking-widest hover:bg-cyan-700 shadow-lg shadow-cyan-600/20 active:scale-[0.98] transition-all",children:"Kitabı Kaydet"})]})]}),e.jsx("div",{className:"hidden md:block bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden no-print",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-5 no-print",children:e.jsx("input",{type:"checkbox",checked:N&&h.length>0,onChange:()=>{y(N?[]:h.map(e=>e.id)),w(!N)},className:"w-5 h-5 rounded border-2 border-slate-300 text-cyan-600 focus:ring-cyan-500 cursor-pointer"})}),e.jsx("th",{className:"px-6 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:"Kitap Bilgisi"}),e.jsx("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:"Yazar"}),e.jsx("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:"ISBN"}),e.jsx("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:"Durum"}),e.jsx("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-right",children:"İşlem"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:0===h.length?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-12 text-slate-400 font-bold",children:"Aradığınız kriterlerde kitap bulunamadı."})}):h.map(s=>e.jsxs("tr",{className:"group hover:bg-slate-50 transition-colors "+(j.includes(s.id)?"bg-cyan-50/50":""),children:[e.jsx("td",{className:"px-6 py-4 no-print",children:e.jsx("input",{type:"checkbox",checked:j.includes(s.id),onChange:()=>C(s.id),className:"w-5 h-5 rounded border-2 border-slate-300 text-cyan-600 focus:ring-cyan-500 cursor-pointer"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-bold text-slate-800 text-lg group-hover:text-cyan-700 transition-colors",children:s.title}),s.category&&e.jsx("div",{className:"text-[10px] inline-block bg-slate-100 text-slate-500 px-2 py-0.5 rounded font-bold uppercase tracking-wide mt-1",children:s.category})]}),e.jsx("td",{className:"px-8 py-4 font-bold text-slate-600",children:s.author}),e.jsx("td",{className:"px-8 py-4 font-mono font-medium text-slate-500 bg-slate-50/50 rounded px-2",children:s.isbn}),e.jsx("td",{className:"px-8 py-4",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-sm "+(s.status===t.AVAILABLE?"bg-emerald-100 text-emerald-700 shadow-emerald-200":"bg-rose-100 text-rose-700 shadow-rose-200"),children:E(s.status)})}),e.jsx("td",{className:"px-8 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{y([s.id]),setTimeout(()=>window.print(),100)},className:"text-slate-400 hover:text-cyan-600 p-2 rounded-xl hover:bg-cyan-50 transition-all no-print",title:"Sadece Bu QR'ı Yazdır",children:e.jsx(o,{size:18})}),e.jsx("button",{onClick:()=>z(s.id),className:"text-slate-400 hover:text-rose-500 p-2 rounded-xl hover:bg-rose-50 transition-all no-print",title:"Kitabı Sil",children:e.jsx(x,{size:18})})]})})]},s.id))})]})}),e.jsx("div",{className:"md:hidden space-y-4 no-print",children:0===h.length?e.jsx("div",{className:"bg-white p-8 rounded-2xl text-center text-slate-400 font-bold border border-slate-100",children:"Kitap bulunamadı."}):h.map(s=>e.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border transition-all "+(j.includes(s.id)?"border-cyan-200 bg-cyan-50/30":"border-slate-100"),children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("input",{type:"checkbox",checked:j.includes(s.id),onChange:()=>C(s.id),className:"w-6 h-6 rounded-lg border-2 border-slate-300 text-cyan-600 focus:ring-cyan-500 cursor-pointer"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{y([s.id]),setTimeout(()=>window.print(),100)},className:"text-slate-400 p-2 rounded-xl bg-slate-50 active:bg-cyan-100 transition-colors",children:e.jsx(o,{size:20})}),e.jsx("button",{onClick:()=>z(s.id),className:"text-slate-400 p-2 rounded-xl bg-slate-50 active:bg-rose-100 transition-colors",children:e.jsx(x,{size:20})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:s.title}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:s.author}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[e.jsx("span",{className:"text-[10px] font-mono font-bold bg-slate-100 px-2 py-1 rounded text-slate-500 border border-slate-200",children:s.isbn}),e.jsx("span",{className:"text-[10px] px-2 py-1 rounded-lg font-black uppercase tracking-wide "+(s.status===t.AVAILABLE?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"),children:E(s.status)})]})]})]},s.id))}),e.jsxs("div",{className:"print-only",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:j.length>0?"Seçilen Kitap QR Kodları":"Tüm Kitap Envanteri QR Kodları"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:(j.length>0?m.filter(e=>j.includes(e.id)):h).map(t=>e.jsx(p,{value:t.isbn,label:t.title.substring(0,20)+(t.title.length>20?"...":""),subLabel:t.isbn},t.id))})]})]})};export{m as BookInventory};
