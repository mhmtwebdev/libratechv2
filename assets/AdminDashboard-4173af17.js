import{c as v,j as e,S as O,U as N,B as I,A as M,b as r}from"./index-c74f4282.js";import{r as a}from"./vendor-e917c440.js";import{Z as U,C as $}from"./zap-698b567c.js";import{A as P}from"./alert-triangle-525c3b03.js";import{G as Y}from"./graduation-cap-27a2e989.js";import{C as K,M as p}from"./megaphone-861d690b.js";import{T as H}from"./trash-2-841cd29f.js";const h=v("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),b=v("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Q=()=>{const[c,w]=a.useState({totalBooks:0,totalStudents:0,totalTransactions:0,totalTeachers:0}),[y,k]=a.useState([]),[d,S]=a.useState([]),[o,z]=a.useState([]),[u,A]=a.useState([]),[x,E]=a.useState({latency:0,status:"EXCELLENT"}),[l,n]=a.useState({title:"",message:"",type:"INFO"}),[T,g]=a.useState(!0),[m,f]=a.useState(!1),i=async()=>{g(!0);try{const[s,t,j,D,G,B]=await Promise.all([r.getGlobalStats(),r.getTeachers(),r.getSystemLogs(),r.getSupportRequests(),r.getSystemPerformance(),r.getAnnouncements(!1)]);w(s),k(t),S(j),z(D),E(G),A(B)}catch(s){console.error("Admin data fetch error:",s)}finally{g(!1)}},R=async s=>{if(s.preventDefault(),!l.title||!l.message)return;f(!0),await r.addAnnouncement(l)&&(n({title:"",message:"",type:"INFO"}),i()),f(!1)},C=async(s,t)=>{await r.updateAnnouncementStatus(s,!t)&&i()},L=async s=>{if(!window.confirm("Bu duyuruyu tamamen silmek istediğinize emin misiniz? Bu işlem geri alınamaz."))return;await r.deleteAnnouncement(s)&&i()};return a.useEffect(()=>{i()},[]),T?e.jsxs("div",{className:"flex flex-col items-center justify-center p-20 text-slate-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-cyan-600 mb-4"}),e.jsx("p",{className:"font-bold uppercase tracking-widest text-xs",children:"Sistem Verileri Yükleniyor..."})]}):e.jsxs("div",{className:"space-y-10 animate-soft-fade pb-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"p-5 bg-gradient-to-br from-slate-800 to-slate-900 rounded-[2rem] text-white shadow-2xl shadow-slate-900/20 border border-slate-700",children:e.jsx(O,{size:40})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl font-black text-slate-800 uppercase tracking-tight leading-none",children:"Admin Kontrol Merkezi"}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-[10px] font-black uppercase tracking-widest border border-emerald-200",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),"Sistem Çevrimiçi"]}),e.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:["Son Güncelleme: ",new Date().toLocaleTimeString()]})]})]})]}),e.jsxs("button",{onClick:i,className:"group bg-white px-8 py-4 rounded-2xl border-2 border-slate-100 hover:border-cyan-500 hover:shadow-xl hover:shadow-cyan-100 transition-all font-black text-xs uppercase tracking-widest text-slate-600 flex items-center gap-3 active:scale-95",children:[e.jsx(h,{size:18,className:"group-hover:rotate-180 transition-transform duration-500"}),"Verileri Tazele"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 to-blue-700 p-8 rounded-[3rem] text-white shadow-2xl shadow-indigo-200 relative overflow-hidden group",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"bg-white/20 w-12 h-12 rounded-2xl flex items-center justify-center mb-4 backdrop-blur-md",children:e.jsx(U,{size:24})}),e.jsx("h4",{className:"text-[10px] font-black text-indigo-100 uppercase tracking-widest opacity-80",children:"Sistem Gecikmesi"}),e.jsxs("p",{className:"text-4xl font-black mt-2",children:[x.latency,"ms"]}),e.jsx("div",{className:`mt-4 inline-flex items-center gap-2 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest backdrop-blur-md border ${x.status==="EXCELLENT"?"bg-emerald-400/20 border-emerald-400/30":"bg-amber-400/20 border-amber-400/30"}`,children:x.status==="EXCELLENT"?"Mükemmel Performans":"Normal Gecikme"})]}),e.jsx("div",{className:"absolute -bottom-10 -right-10 w-44 h-44 bg-white/10 rounded-full blur-3xl group-hover:scale-125 transition-transform"})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[3rem] shadow-sm border border-slate-100 flex flex-col justify-between group hover:shadow-xl transition-all",children:[e.jsx("div",{className:"bg-amber-50 w-12 h-12 rounded-2xl flex items-center justify-center text-amber-600",children:e.jsx(P,{size:24})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Kritik Hatalar"}),e.jsx("p",{className:"text-3xl font-black text-slate-900 mt-1",children:d.filter(s=>s.type==="ERROR").length})]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[3rem] shadow-sm border border-slate-100 flex flex-col justify-between group hover:shadow-xl transition-all",children:[e.jsx("div",{className:"bg-cyan-50 w-12 h-12 rounded-2xl flex items-center justify-center text-cyan-600",children:e.jsx(b,{size:24})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Destek Talepleri"}),e.jsx("p",{className:"text-3xl font-black text-slate-900 mt-1",children:o.filter(s=>s.status==="OPEN").length})]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-[3rem] shadow-sm border border-slate-100 flex flex-col justify-between group hover:shadow-xl transition-all",children:[e.jsx("div",{className:"bg-emerald-50 w-12 h-12 rounded-2xl flex items-center justify-center text-emerald-600",children:e.jsx($,{size:24})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Başarı Oranı"}),e.jsx("p",{className:"text-3xl font-black text-slate-900 mt-1",children:"%99.9"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{label:"Öğretmenler",value:c.totalTeachers,icon:N,color:"text-indigo-600",sub:"Toplam Kullanıcı"},{label:"Envanter",value:c.totalBooks,icon:I,color:"text-cyan-600",sub:"Kayıtlı Kitap"},{label:"Öğrenciler",value:c.totalStudents,icon:Y,color:"text-emerald-600",sub:"Kayıtlı Profil"},{label:"Trafik",value:c.totalTransactions,icon:M,color:"text-amber-600",sub:"Ödünç İşlemi"}].map((s,t)=>e.jsx("div",{className:"bg-white p-8 rounded-[3rem] shadow-sm border border-slate-100 hover:shadow-xl transition-all border-b-4 border-b-transparent hover:border-b-cyan-500",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`${s.color} p-3 bg-slate-50 rounded-2xl`,children:e.jsx(s.icon,{size:24})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:s.label}),e.jsx("p",{className:"text-2xl font-black text-slate-900",children:s.value}),e.jsx("p",{className:"text-[10px] font-bold text-slate-300 mt-0.5",children:s.sub})]})]})},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-10",children:[e.jsxs("div",{className:"bg-white rounded-[3.5rem] shadow-2xl shadow-slate-200/50 border border-slate-100 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"px-10 py-8 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"text-cyan-600",size:24}),e.jsx("h3",{className:"text-xl font-black text-slate-800 uppercase tracking-tight",children:"Eğitmen Listesi"})]})}),e.jsx("div",{className:"flex-1 overflow-x-auto",children:e.jsx("table",{className:"w-full text-left",children:e.jsx("tbody",{className:"divide-y divide-slate-50",children:y.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-slate-50/50 transition-colors group",children:[e.jsx("td",{className:"px-10 py-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-2xl flex items-center justify-center font-black text-slate-600 uppercase group-hover:bg-cyan-600 group-hover:text-white transition-all",children:((t=s.name)==null?void 0:t[0])||"U"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:s.name||"İsimsiz"}),e.jsx("div",{className:"text-[11px] font-bold text-slate-400 uppercase tracking-widest",children:s.email})]})]})}),e.jsx("td",{className:"px-10 py-5 text-right",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 bg-slate-100 text-slate-500 rounded-lg text-[9px] font-black uppercase tracking-widest",children:s.role||"TEACHER"})})]},s.id)})})})})]}),e.jsxs("div",{className:"bg-slate-900 rounded-[3.5rem] shadow-2xl shadow-slate-900/10 border border-slate-800 overflow-hidden flex flex-col h-[500px]",children:[e.jsxs("div",{className:"px-10 py-8 border-b border-white/5 bg-slate-950 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{className:"text-amber-500",size:24}),e.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight",children:"Sistem Günlükleri"})]}),e.jsx("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Son 50 İşlem"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-4",children:d.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-600",children:[e.jsx(h,{size:48,className:"opacity-20 mb-4"}),e.jsx("p",{className:"text-xs font-black uppercase tracking-widest",children:"Henüz günlük kaydı yok"})]}):d.map(s=>e.jsxs("div",{className:"p-5 bg-slate-800/50 rounded-2xl border border-white/5 group hover:border-amber-500/30 transition-all cursor-default relative overflow-hidden",children:[e.jsx("div",{className:"flex items-start justify-between relative z-10",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`mt-1 w-2 h-2 rounded-full shrink-0 ${s.type==="ERROR"?"bg-rose-500 animate-pulse":"bg-cyan-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-bold text-slate-300 leading-snug",children:s.message}),e.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[e.jsxs("span",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest flex items-center gap-1",children:[e.jsx(K,{size:12}),new Date(s.timestamp).toLocaleString("tr-TR")]}),s.teacherEmail&&e.jsxs("span",{className:"text-[10px] font-black text-cyan-400 uppercase tracking-widest",children:["@",s.teacherEmail.split("@")[0]]})]})]})]})}),e.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-gradient-to-br from-white/5 to-transparent rounded-bl-[3rem]"})]},s.id))})]})]}),e.jsxs("div",{className:"bg-white rounded-[3.5rem] shadow-2xl shadow-slate-200/50 border border-slate-100 overflow-hidden",children:[e.jsx("div",{className:"px-10 py-8 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"text-indigo-600",size:24}),e.jsx("h3",{className:"text-xl font-black text-slate-800 uppercase tracking-tight",children:"Destek Talepleri"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 p-8",children:o.length===0?e.jsxs("div",{className:"col-span-full py-20 text-center text-slate-400",children:[e.jsx(b,{size:48,className:"mx-auto opacity-10 mb-4"}),e.jsx("p",{className:"text-xs font-black uppercase tracking-widest",children:"Yeni destek talebi bulunmuyor"})]}):o.map(s=>e.jsxs("div",{className:"p-6 bg-slate-50 rounded-[2.5rem] border border-slate-100 relative group hover:bg-white hover:shadow-2xl transition-all border-b-4 border-b-transparent hover:border-b-indigo-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-3 py-1 rounded-full ${s.status==="OPEN"?"bg-indigo-100 text-indigo-700":"bg-slate-200 text-slate-600"}`,children:s.status}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsx("h5",{className:"font-black text-slate-800 text-lg line-clamp-1",children:s.subject}),e.jsx("p",{className:"text-slate-500 text-sm mt-3 line-clamp-3 leading-relaxed font-medium",children:s.message}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white text-[10px] font-black",children:s.teacherEmail[0].toUpperCase()}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-tighter truncate max-w-[100px]",children:s.teacherEmail})]}),e.jsx("button",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest hover:text-indigo-800 transition-colors",children:"Yanıtla"})]})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"bg-white p-10 rounded-[3.5rem] shadow-2xl shadow-slate-200/50 border border-slate-100 flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx(p,{className:"text-rose-600",size:24}),e.jsx("h3",{className:"text-xl font-black text-slate-800 uppercase tracking-tight",children:"Yeni Duyuru Yayınla"})]}),e.jsxs("form",{onSubmit:R,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-2",children:"Duyuru Başlığı"}),e.jsx("input",{type:"text",value:l.title,onChange:s=>n({...l,title:s.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-50 rounded-2xl focus:border-rose-500 focus:bg-white transition-all outline-none font-bold text-slate-800",placeholder:"Örn: Sistem Güncellemesi",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-2",children:"Duyuru Tipi"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:["INFO","WARNING","URGENT"].map(s=>e.jsx("button",{type:"button",onClick:()=>n({...l,type:s}),className:`py-3 rounded-xl text-[10px] font-black uppercase tracking-widest border-2 transition-all ${l.type===s?"border-rose-500 bg-rose-50 text-rose-600":"border-slate-100 bg-white text-slate-400"}`,children:s==="INFO"?"Bilgi":s==="WARNING"?"Uyarı":"Acil"},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2 px-2",children:"Mesaj İçeriği"}),e.jsx("textarea",{value:l.message,onChange:s=>n({...l,message:s.target.value}),className:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-50 rounded-2xl focus:border-rose-500 focus:bg-white transition-all outline-none font-bold text-slate-800 min-h-[150px] resize-none",placeholder:"Öğretmenlere iletmek istediğiniz mesajı yazın...",required:!0})]}),e.jsx("button",{type:"submit",disabled:m,className:`w-full py-5 rounded-2xl text-white font-black uppercase tracking-widest transition-all shadow-xl ${m?"bg-slate-400":"bg-rose-600 hover:bg-rose-700 shadow-rose-200 active:scale-95"}`,children:m?"Yayınlanıyor...":"Duyuruyu Paylaş"})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[3.5rem] shadow-2xl shadow-slate-200/50 border border-slate-100 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"px-10 py-8 border-b border-slate-100 bg-slate-50/50 flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"text-cyan-600",size:24}),e.jsx("h3",{className:"text-xl font-black text-slate-800 uppercase tracking-tight",children:"Geçmiş Duyurular"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-6",children:u.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[e.jsx(p,{size:48,className:"opacity-10 mb-4"}),e.jsx("p",{className:"text-xs font-black uppercase tracking-widest",children:"Henüz duyuru yayınlanmadı"})]}):u.map(s=>e.jsxs("div",{className:"p-8 bg-slate-50 rounded-[2.5rem] border border-slate-100 group transition-all relative overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 relative z-10",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-widest ${s.type==="URGENT"?"bg-rose-100 text-rose-600":s.type==="WARNING"?"bg-amber-100 text-amber-600":"bg-cyan-100 text-cyan-600"}`,children:s.type==="URGENT"?"Acil":s.type==="WARNING"?"Uyarı":"Bilgi"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400",children:new Date(s.createdAt).toLocaleString()})]}),e.jsx("h4",{className:"text-xl font-black text-slate-800",children:s.title}),e.jsx("p",{className:"text-slate-500 font-medium text-sm mt-2 leading-relaxed",children:s.message})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>C(s.id,s.isActive),className:`px-4 py-2 rounded-xl text-[9px] font-black uppercase tracking-widest border-2 transition-all ${s.isActive?"bg-emerald-50 text-emerald-600 border-emerald-100 hover:bg-rose-50 hover:text-rose-600 hover:border-rose-100 group/btn":"bg-slate-100 text-slate-400 border-slate-200 hover:bg-emerald-50 hover:text-emerald-600 hover:border-emerald-100"}`,children:s.isActive?"Yayından Kaldır":"Tekrar Yayınla"}),e.jsx("button",{onClick:()=>L(s.id),className:"p-2 text-slate-300 hover:text-rose-600 hover:bg-rose-50 rounded-xl transition-all",title:"Tamamen Sil",children:e.jsx(H,{size:18})})]})]}),e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-white/10 to-transparent rounded-bl-[4rem]"})]},s.id))})]})]})]})};export{Q as AdminDashboard};
