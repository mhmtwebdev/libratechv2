import{c as L,j as e,B as I,f as x,b as f,_}from"./index-c74f4282.js";import{r}from"./vendor-e917c440.js";import{F as M,P as R,Q as P}from"./QRCodeDisplay-4945ddc1.js";import{S as $}from"./search-a6b4a219.js";import{P as y}from"./printer-04216ae2.js";import{T as S}from"./trash-2-841cd29f.js";const F=L("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),G=()=>{const[h,B]=r.useState([]),[i,j]=r.useState([]),[m,C]=r.useState(""),[a,o]=r.useState([]),[u,K]=r.useState(!1),[w,N]=r.useState(!1),[l,c]=r.useState({title:"",author:"",isbn:"",category:""}),g=async()=>{const s=[...await f.getBooks()].sort((n,p)=>{const d=new Date(n.addedDate||0).getTime();return new Date(p.addedDate||0).getTime()-d});B(s),j(s)};r.useEffect(()=>{g()},[]),r.useEffect(()=>{const t=m.toLowerCase(),s=h.filter(n=>n.title.toLowerCase().includes(t)||n.author.toLowerCase().includes(t)||n.isbn.includes(t));j(s)},[m,h]);const z=()=>{o(u?[]:i.map(t=>t.id)),K(!u)},k=t=>{o(s=>s.includes(t)?s.filter(n=>n!==t):[...s,t])},A=async t=>{if(t.preventDefault(),l.title&&l.isbn){const s=await f.addBook(l);s.success?(c({title:"",author:"",isbn:"",category:""}),N(!1),g()):alert(s.message)}},v=async t=>{window.confirm("Bu kitabı silmek istediğinize emin misiniz?")&&(await f.deleteBook(t),g())},E=t=>{window.print()},T=async()=>{const t=i.map(d=>({"Kitap Adı":d.title,Yazar:d.author||"Belirtilmemiş","ISBN/Barkod":d.isbn,Kategori:d.category||"Genel",Durum:b(d.status),"Eklenme Tarihi":new Date(d.addedDate).toLocaleDateString("tr-TR")})),s=await _(()=>import("./xlsx-6ed613d4.js"),[]),n=s.utils.json_to_sheet(t),p=s.utils.book_new();s.utils.book_append_sheet(p,n,"Kitaplar"),s.writeFile(p,`Kutuphane_Envanter_${new Date().toLocaleDateString("tr-TR")}.xlsx`)},D=()=>{c(t=>({...t,isbn:Math.floor(1e12+Math.random()*9e12).toString()}))},b=t=>{switch(t){case x.AVAILABLE:return"MEVCUT";case x.BORROWED:return"ÖDÜNÇTE";case x.LOST:return"KAYIP";default:return t}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 no-print",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-cyan-100 rounded-xl text-cyan-600",children:e.jsx(I,{size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-slate-800 uppercase tracking-tight",children:"Kitap Envanteri"}),e.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:"Kütüphane Kayıtları"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto items-stretch md:items-center",children:[e.jsxs("div",{className:"relative group w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx($,{size:18,className:"text-slate-400 group-focus-within:text-cyan-500 transition-colors"})}),e.jsx("input",{id:"book-search",name:"book-search",type:"text",placeholder:"Kitap ara...",className:"pl-10 block w-full rounded-xl border-2 border-slate-200 bg-white py-2.5 px-4 font-bold text-slate-700 placeholder:text-slate-400 focus:border-cyan-500 focus:ring-0 transition-all outline-none",value:m,onChange:t=>C(t.target.value)})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:T,className:"bg-emerald-50 text-emerald-600 px-4 py-2.5 rounded-xl hover:bg-emerald-100 font-bold text-sm uppercase tracking-wide flex items-center justify-center gap-2 transition-all flex-1 md:flex-none border border-emerald-100",children:[e.jsx(M,{size:18}),e.jsx("span",{className:"hidden lg:inline",children:"Excel"})]}),e.jsxs("button",{onClick:()=>E(),className:`${a.length>0?"bg-emerald-600 text-white":"bg-slate-100 text-slate-600"} px-4 py-2.5 rounded-xl hover:opacity-90 font-bold text-sm uppercase tracking-wide flex items-center justify-center gap-2 transition-all flex-1 md:flex-none`,children:[e.jsx(y,{size:18}),e.jsx("span",{className:"hidden lg:inline",children:a.length>0?`Seçilenleri Yazdır (${a.length})`:"Tümünü Yazdır"}),e.jsx("span",{className:"lg:hidden",children:a.length>0?`(${a.length})`:""})]}),e.jsxs("button",{onClick:()=>N(!w),className:"bg-cyan-600 text-white px-6 py-2.5 rounded-xl hover:bg-cyan-700 font-bold text-sm uppercase tracking-wide flex items-center justify-center gap-2 shadow-lg shadow-cyan-600/20 transition-all flex-1 md:flex-none",children:[e.jsx(R,{size:18}),e.jsx("span",{children:"Ekle"})]})]})]})]}),w&&e.jsxs("div",{className:"bg-white p-8 rounded-[2rem] shadow-xl shadow-slate-200/50 border border-slate-100 no-print animate-soft-fade",children:[e.jsxs("h3",{className:"text-lg font-black text-slate-800 uppercase tracking-tight mb-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 bg-cyan-500 rounded-full"}),"Yeni Kitap Ekle"]}),e.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"book-title",className:"text-[10px] uppercase tracking-widest font-black text-slate-400 ml-1",children:"Kitap Adı"}),e.jsx("input",{id:"book-title",name:"book-title",placeholder:"Örn: Sefiller",className:"w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-bold text-slate-700 outline-none focus:border-cyan-500 transition-all",value:l.title,onChange:t=>c({...l,title:t.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"book-author",className:"text-[10px] uppercase tracking-widest font-black text-slate-400 ml-1",children:"Yazar (İsteğe Bağlı)"}),e.jsx("input",{id:"book-author",name:"book-author",placeholder:"Örn: Victor Hugo (Boş bırakılabilir)",className:"w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-bold text-slate-700 outline-none focus:border-cyan-500 transition-all",value:l.author,onChange:t=>c({...l,author:t.target.value})})]}),e.jsxs("div",{className:"space-y-1 md:col-span-1",children:[e.jsx("label",{htmlFor:"book-isbn",className:"text-[10px] uppercase tracking-widest font-black text-slate-400 ml-1",children:"ISBN / Barkod"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 group",children:[e.jsx(F,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-cyan-500 transition-colors",size:20}),e.jsx("input",{id:"book-isbn",name:"book-isbn",placeholder:"ISBN Numarası",className:"w-full pl-10 bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-mono font-bold text-slate-700 outline-none focus:border-cyan-500 transition-all",value:l.isbn,onChange:t=>c({...l,isbn:t.target.value}),required:!0})]}),e.jsx("button",{type:"button",onClick:D,className:"bg-slate-100 text-slate-600 px-3 rounded-xl font-bold text-xs uppercase hover:bg-slate-200 transition-colors",children:"Üret"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{htmlFor:"book-category",className:"text-[10px] uppercase tracking-widest font-black text-slate-400 ml-1",children:"Kategori"}),e.jsx("input",{id:"book-category",name:"book-category",placeholder:"Örn: Klasikler",className:"w-full bg-slate-50 border-2 border-slate-100 rounded-xl p-3 font-bold text-slate-700 outline-none focus:border-cyan-500 transition-all",value:l.category,onChange:t=>c({...l,category:t.target.value})})]}),e.jsx("button",{type:"submit",className:"md:col-span-2 bg-cyan-600 text-white rounded-xl py-4 font-black text-sm uppercase tracking-widest hover:bg-cyan-700 shadow-lg shadow-cyan-600/20 active:scale-[0.98] transition-all",children:"Kitabı Kaydet"})]})]}),e.jsx("div",{className:"hidden md:block bg-white rounded-[2.5rem] shadow-xl shadow-slate-200/50 border border-slate-100 overflow-hidden no-print",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-slate-50/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-5 no-print",children:e.jsx("input",{type:"checkbox",checked:u&&i.length>0,onChange:z,className:"w-5 h-5 rounded border-2 border-slate-300 text-cyan-600 focus:ring-cyan-500 cursor-pointer"})}),e.jsx("th",{className:"px-6 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:"Kitap Bilgisi"}),e.jsx("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:"Yazar"}),e.jsx("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:"ISBN"}),e.jsx("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest",children:"Durum"}),e.jsx("th",{className:"px-8 py-5 text-[11px] font-black text-slate-400 uppercase tracking-widest text-right",children:"İşlem"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-50",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-12 text-slate-400 font-bold",children:"Aradığınız kriterlerde kitap bulunamadı."})}):i.map(t=>e.jsxs("tr",{className:`group hover:bg-slate-50 transition-colors ${a.includes(t.id)?"bg-cyan-50/50":""}`,children:[e.jsx("td",{className:"px-6 py-4 no-print",children:e.jsx("input",{type:"checkbox",checked:a.includes(t.id),onChange:()=>k(t.id),className:"w-5 h-5 rounded border-2 border-slate-300 text-cyan-600 focus:ring-cyan-500 cursor-pointer"})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-bold text-slate-800 text-lg group-hover:text-cyan-700 transition-colors",children:t.title}),t.category&&e.jsx("div",{className:"text-[10px] inline-block bg-slate-100 text-slate-500 px-2 py-0.5 rounded font-bold uppercase tracking-wide mt-1",children:t.category})]}),e.jsx("td",{className:"px-8 py-4 font-bold text-slate-600",children:t.author}),e.jsx("td",{className:"px-8 py-4 font-mono font-medium text-slate-500 bg-slate-50/50 rounded px-2",children:t.isbn}),e.jsx("td",{className:"px-8 py-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-xl text-[10px] font-black uppercase tracking-widest shadow-sm ${t.status===x.AVAILABLE?"bg-emerald-100 text-emerald-700 shadow-emerald-200":"bg-rose-100 text-rose-700 shadow-rose-200"}`,children:b(t.status)})}),e.jsx("td",{className:"px-8 py-4 text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>{o([t.id]),setTimeout(()=>window.print(),100)},className:"text-slate-400 hover:text-cyan-600 p-2 rounded-xl hover:bg-cyan-50 transition-all no-print",title:"Sadece Bu QR'ı Yazdır",children:e.jsx(y,{size:18})}),e.jsx("button",{onClick:()=>v(t.id),className:"text-slate-400 hover:text-rose-500 p-2 rounded-xl hover:bg-rose-50 transition-all no-print",title:"Kitabı Sil",children:e.jsx(S,{size:18})})]})})]},t.id))})]})}),e.jsx("div",{className:"md:hidden space-y-4 no-print",children:i.length===0?e.jsx("div",{className:"bg-white p-8 rounded-2xl text-center text-slate-400 font-bold border border-slate-100",children:"Kitap bulunamadı."}):i.map(t=>e.jsxs("div",{className:`bg-white p-5 rounded-2xl shadow-sm border transition-all ${a.includes(t.id)?"border-cyan-200 bg-cyan-50/30":"border-slate-100"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("input",{type:"checkbox",checked:a.includes(t.id),onChange:()=>k(t.id),className:"w-6 h-6 rounded-lg border-2 border-slate-300 text-cyan-600 focus:ring-cyan-500 cursor-pointer"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{o([t.id]),setTimeout(()=>window.print(),100)},className:"text-slate-400 p-2 rounded-xl bg-slate-50 active:bg-cyan-100 transition-colors",children:e.jsx(y,{size:20})}),e.jsx("button",{onClick:()=>v(t.id),className:"text-slate-400 p-2 rounded-xl bg-slate-50 active:bg-rose-100 transition-colors",children:e.jsx(S,{size:20})})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"font-bold text-slate-900 text-lg",children:t.title}),e.jsx("p",{className:"text-sm font-medium text-slate-500",children:t.author}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-3",children:[e.jsx("span",{className:"text-[10px] font-mono font-bold bg-slate-100 px-2 py-1 rounded text-slate-500 border border-slate-200",children:t.isbn}),e.jsx("span",{className:`text-[10px] px-2 py-1 rounded-lg font-black uppercase tracking-wide ${t.status===x.AVAILABLE?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:b(t.status)})]})]})]},t.id))}),e.jsxs("div",{className:"print-only",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:a.length>0?"Seçilen Kitap QR Kodları":"Tüm Kitap Envanteri QR Kodları"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:(a.length>0?h.filter(t=>a.includes(t.id)):i).map(t=>e.jsx(P,{value:t.isbn,label:t.title.substring(0,20)+(t.title.length>20?"...":""),subLabel:t.isbn},t.id))})]})]})};export{G as BookInventory};
