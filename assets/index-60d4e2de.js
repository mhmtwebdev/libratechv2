import{r as b,a as we,i as ve,g as ke,c as ae,b as L,q as D,w as I,d as U,e as ie,f as O,u as K,H as Se,R as $}from"./vendor-d8403d61.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function l(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=l(u);fetch(u.href,d)}})();var ue={exports:{}},X={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ee=b,Ce=Symbol.for("react.element"),Ae=Symbol.for("react.fragment"),Me=Object.prototype.hasOwnProperty,Re=Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Be={key:!0,ref:!0,__self:!0,__source:!0};function he(i,n,l){var o,u={},d=null,m=null;l!==void 0&&(d=""+l),n.key!==void 0&&(d=""+n.key),n.ref!==void 0&&(m=n.ref);for(o in n)Me.call(n,o)&&!Be.hasOwnProperty(o)&&(u[o]=n[o]);if(i&&i.defaultProps)for(o in n=i.defaultProps,n)u[o]===void 0&&(u[o]=n[o]);return{$$typeof:Ce,type:i,key:d,ref:m,props:u,_owner:Re.current}}X.Fragment=Ae;X.jsx=he;X.jsxs=he;ue.exports=X;var e=ue.exports,te={},le=we;te.createRoot=le.createRoot,te.hydrateRoot=le.hydrateRoot;var Le={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ze=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),De=(i,n)=>{const l=b.forwardRef(({color:o="currentColor",size:u=24,strokeWidth:d=2,absoluteStrokeWidth:m,children:x,...t},r)=>b.createElement("svg",{ref:r,...Le,width:u,height:u,stroke:o,strokeWidth:m?Number(d)*24/Number(u):d,className:`lucide lucide-${ze(i)}`,...t},[...n.map(([s,a])=>b.createElement(s,a)),...(Array.isArray(x)?x:[x])||[]]));return l.displayName=`${i}`,l};var w=De;const me=w("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Z=w("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ie=w("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),_e=w("BookDown",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M12 13V7",key:"h0r20n"}],["path",{d:"m9 10 3 3 3-3",key:"zt5b4y"}]]),Te=w("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Oe=w("BookUp",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M12 13V7",key:"h0r20n"}],["path",{d:"m9 10 3-3 3 3",key:"11gsxs"}]]),Q=w("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Pe=w("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),se=w("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),He=w("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Fe=w("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ue=w("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),re=w("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),Ke=w("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),$e=w("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ve=w("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),xe=w("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ge=w("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Qe=w("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),Ye=w("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Ge=w("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),fe=w("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Y=w("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),oe=w("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),qe=w("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),q=w("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),J=w("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var R=(i=>(i.AVAILABLE="AVAILABLE",i.BORROWED="BORROWED",i.LOST="LOST",i))(R||{});const We={apiKey:"AIzaSyABqzz-0liy7ouqh90O53YvB6bP4o4DuJI",authDomain:"libratechv2.firebaseapp.com",projectId:"libratechv2",storageBucket:"libratechv2.firebasestorage.app",messagingSenderId:"729755713200",appId:"1:729755713200:web:a7eec17be1fb7928718575"},Xe=ve(We),z=ke(Xe),P=ae(z,"books"),H=ae(z,"students"),ee=ae(z,"transactions"),T=i=>({id:i.id,...i.data()}),M={getBooks:async()=>(await L(P)).docs.map(n=>T(n)),addBook:async i=>{try{const n=D(P,I("isbn","==",i.isbn));if(!(await L(n)).empty)return{success:!1,message:"Bu ISBN numarasına sahip bir kitap zaten var."};const o={...i,status:R.AVAILABLE,addedDate:new Date().toISOString()};return await U(P,o),{success:!0,message:"Kitap başarıyla eklendi."}}catch(n){return{success:!1,message:"Hata: "+n.message}}},deleteBook:async i=>{await ie(O(z,"books",i))},getStudents:async()=>(await L(H)).docs.map(n=>T(n)),addStudent:async i=>{try{const n=D(H,I("studentNumber","==",i.studentNumber));if(!(await L(n)).empty)return{success:!1,message:"Bu numaraya sahip bir öğrenci zaten kayıtlı."};const o={...i,readingHistory:[]};return await U(H,o),{success:!0,message:"Öğrenci başarıyla eklendi."}}catch(n){return{success:!1,message:"Hata: "+n.message}}},deleteStudent:async i=>{await ie(O(z,"students",i))},getActiveTransactions:async()=>{try{const l=(await L(ee)).docs.map(d=>T(d)).filter(d=>!d.isReturned);if(l.length===0)return[];const[o,u]=await Promise.all([M.getBooks(),M.getStudents()]);return l.map(d=>{const m=o.find(t=>t.id===d.bookId),x=u.find(t=>t.id===d.studentId);return!m||!x?null:{...d,book:m,student:x}}).filter(d=>d!==null)}catch(i){return console.error("Error fetching transactions:",i),[]}},issueBook:async(i,n,l)=>{try{const o=D(P,I("isbn","==",i)),u=await L(o);if(u.empty)return{success:!1,message:"Bu ISBN/QR kodu ile kitap bulunamadı."};const d=u.docs[0],m=T(d),x=D(H,I("studentNumber","==",n)),t=await L(x);if(t.empty)return{success:!1,message:"Bu numara/QR ile öğrenci bulunamadı."};const r=t.docs[0],s=T(r);if(m.status!==R.AVAILABLE)return{success:!1,message:"Kitap şu anda başkasında ödünçte."};const a=s.readingHistory&&s.readingHistory.includes(m.id);let c;a&&(c=`Dikkat! ${s.name} isimli öğrenci "${m.title}" kitabını daha önce okumuş.`);const f={bookId:m.id,studentId:s.id,issueDate:new Date().toISOString(),dueDate:new Date(Date.now()+l*24*60*60*1e3).toISOString(),isReturned:!1};await U(ee,f),await K(O(z,"books",m.id),{status:R.BORROWED});const g=s.readingHistory||[];return await K(O(z,"students",s.id),{readingHistory:[...g,m.id]}),{success:!0,message:"Kitap başarıyla ödünç verildi.",warning:c}}catch(o){return{success:!1,message:"İşlem Başarısız: "+o.message}}},returnBook:async i=>{try{const n=D(P,I("isbn","==",i)),l=await L(n);if(l.empty)return{success:!1,message:"Kitap bulunamadı."};const o=l.docs[0],u=T(o),d=D(ee,I("bookId","==",u.id),I("isReturned","==",!1)),m=await L(d);if(m.empty)return{success:!1,message:"Bu kitap şu anda ödünçte görünmüyor."};const x=m.docs[0];return await K(O(z,"transactions",x.id),{isReturned:!0,returnDate:new Date().toISOString()}),await K(O(z,"books",u.id),{status:R.AVAILABLE}),{success:!0,message:"Kitap envantere başarıyla iade edildi."}}catch(n){return{success:!1,message:"İade Başarısız: "+n.message}}},resetDatabase:async()=>{if(window.confirm("Veritabanını sıfırlamak ve örnek verileri yüklemek istediğinize emin misiniz?"))try{const i=[{title:"Sefiller",author:"Victor Hugo",isbn:"9789756123456",category:"Klasik",status:R.AVAILABLE,addedDate:new Date().toISOString()},{title:"Suç ve Ceza",author:"Fyodor Dostoyevski",isbn:"9789756123457",category:"Klasik",status:R.AVAILABLE,addedDate:new Date().toISOString()},{title:"Küçük Prens",author:"Antoine de Saint-Exupéry",isbn:"9789756123458",category:"Çocuk",status:R.AVAILABLE,addedDate:new Date().toISOString()}],n=[{name:"Ahmet Yılmaz",studentNumber:"101",readingHistory:[]},{name:"Ayşe Demir",studentNumber:"102",readingHistory:[]}];for(const l of i)await U(P,l);for(const l of n)await U(H,l);alert("Veritabanı başarıyla başlatıldı! Sayfayı yenileyebilirsiniz."),window.location.reload()}catch(i){console.error("Setup error:",i),alert("Başlatma sırasında hata oluştu. Lütfen Firestore kurallarını kontrol edin.")}},removeBookFromHistory:async(i,n)=>{try{const l=O(z,"students",i),u=(await L(D(H))).docs.find(x=>x.id===i);if(!u)return{success:!1,message:"Öğrenci bulunamadı."};const m=(u.data().readingHistory||[]).filter(x=>x!==n);return await K(l,{readingHistory:m}),{success:!0,message:"Kitap geçmişten silindi."}}catch(l){return{success:!1,message:"Hata: "+l.message}}},checkBookForStudent:async(i,n)=>{try{const l=D(P,I("isbn","==",i)),o=await L(l);if(o.empty)return{success:!1,message:"Kitap bulunamadı.",type:"NOT_FOUND"};const u=T(o.docs[0]);if(u.status!==R.AVAILABLE)return{success:!1,message:"Kitap şu anda ödünçte.",type:"NOT_AVAILABLE"};if(n){const d=D(H,I("studentNumber","==",n)),m=await L(d);if(!m.empty){const x=T(m.docs[0]);if(x.readingHistory&&x.readingHistory.includes(u.id))return{success:!1,message:"Bu öğrenci bu kitabı daha önce okumuş!",type:"ALREADY_READ"}}}return{success:!0,message:"Uygun",type:"VALID"}}catch{return{success:!1,message:"Hata oluştu.",type:"NOT_FOUND"}}}},Ze=({children:i,currentPage:n,onNavigate:l,onLogout:o,user:u})=>{const[d,m]=b.useState(!1),x=[{id:"dashboard",label:"Panel",icon:Ue},{id:"circulation",label:"Ödünç İşlemleri",icon:Ie},{id:"books",label:"Kitap Envanteri",icon:Te},{id:"students",label:"Öğrenciler",icon:qe}],t=()=>{window.confirm("TÜM VERİLER SİLİNECEK ve fabrika ayarlarına dönülecek. Onaylıyor musunuz?")&&M.resetDatabase()},r=s=>{l(s),m(!1)};return e.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden flex-col md:flex-row",children:[e.jsxs("div",{className:"md:hidden bg-indigo-900 text-white p-4 flex justify-between items-center shadow-md z-20 no-print",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{size:24}),e.jsx("span",{className:"font-bold text-lg",children:"LibraTech"})]}),e.jsx("button",{onClick:()=>m(!d),className:"p-1 hover:bg-indigo-800 rounded focus:outline-none",children:d?e.jsx(q,{size:24}):e.jsx(Ve,{size:24})})]}),d&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden transition-opacity",onClick:()=>m(!1)}),e.jsxs("div",{className:`
        fixed md:static inset-y-0 left-0 z-40 w-64 bg-indigo-900 text-white flex flex-col shadow-xl 
        transform transition-transform duration-300 ease-in-out md:translate-x-0 no-print
        ${d?"translate-x-0":"-translate-x-full"}
      `,children:[e.jsxs("div",{className:"hidden md:flex p-6 items-center space-x-3 border-b border-indigo-800",children:[e.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg",children:e.jsx(re,{size:24})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-lg",children:"LibraTech"}),e.jsx("p",{className:"text-xs text-indigo-300",children:"Okul Kütüphanesi"})]})]}),e.jsxs("div",{className:"md:hidden p-4 border-b border-indigo-800 flex items-center justify-between bg-indigo-950",children:[e.jsx("span",{className:"font-bold text-sm uppercase tracking-wider text-indigo-400",children:"Menü"}),e.jsx("button",{onClick:()=>m(!1),children:e.jsx(q,{size:20})})]}),e.jsx("nav",{className:"flex-1 p-4 space-y-2",children:x.map(s=>{const a=s.icon,c=n===s.id;return e.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${c?"bg-indigo-700 text-white shadow-md":"text-indigo-200 hover:bg-indigo-800 hover:text-white"}`,children:[e.jsx(a,{size:20}),e.jsx("span",{className:"font-medium",children:s.label})]},s.id)})}),e.jsxs("div",{className:"p-4 border-t border-indigo-800 space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3 px-4 py-3 mb-2",children:[e.jsx("img",{src:`https://ui-avatars.com/api/?name=${u.name}&background=random`,alt:"Profile",className:"w-8 h-8 rounded-full"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:u.name}),e.jsx("p",{className:"text-xs text-indigo-300 truncate",children:u.email})]})]}),e.jsxs("button",{onClick:t,className:"w-full flex items-center space-x-3 px-4 py-2 text-indigo-300 hover:bg-indigo-950 hover:text-white rounded-lg transition-colors",title:"Veritabanını Sıfırla",children:[e.jsx(Qe,{size:18}),e.jsx("span",{className:"text-xs",children:"Verileri Sıfırla"})]}),e.jsxs("button",{onClick:o,className:"w-full flex items-center space-x-3 px-4 py-2 text-red-300 hover:bg-indigo-950 hover:text-red-200 rounded-lg transition-colors",children:[e.jsx($e,{size:18}),e.jsx("span",{children:"Çıkış Yap"})]})]})]}),e.jsx("main",{className:"flex-1 overflow-auto w-full relative bg-gray-50",children:e.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-8 pb-20 md:pb-8",children:i})})]})},Je=({onLogin:i})=>e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto bg-indigo-600 w-16 h-16 rounded-xl flex items-center justify-center text-white mb-4",children:e.jsx(re,{size:32})}),e.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Kütüphane Yönetimi"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Yönetmek için giriş yapın"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:i,className:"w-full flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors shadow-lg shadow-indigo-200",children:"Google ile Giriş Yap"}),e.jsx("button",{onClick:i,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Email ile Giriş Yap"})]}),e.jsx("p",{className:"text-center text-xs text-gray-400",children:"Demo Uygulaması - Herhangi bir butona basarak Admin olarak giriş yapabilirsiniz."})]})}),ce=()=>{const[i,n]=b.useState([]),[l,o]=b.useState(!0),u=async()=>{o(!0);const x=await M.getActiveTransactions();n(x),o(!1)};b.useEffect(()=>{u()},[]);const d=x=>{const t=new Date(x),s=Math.abs(new Date().getTime()-t.getTime());return Math.ceil(s/(1e3*60*60*24))},m=x=>new Date>new Date(x);return l?e.jsx("div",{className:"p-8 text-center",children:"Panel verileri yükleniyor..."}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Kütüphane Paneli"}),e.jsx("button",{onClick:u,className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Verileri Yenile"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Aktif Ödünçler"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-800 mt-1",children:i.length})]}),e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg text-blue-600",children:e.jsx(Fe,{size:24})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Gecikmiş Kitaplar"}),e.jsx("h3",{className:"text-3xl font-bold text-red-600 mt-1",children:i.filter(x=>m(x.dueDate)).length})]}),e.jsx("div",{className:"bg-red-50 p-3 rounded-lg text-red-600",children:e.jsx(me,{size:24})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Zamanında Teslimler"}),e.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-1",children:i.filter(x=>!m(x.dueDate)).length})]}),e.jsx("div",{className:"bg-green-50 p-3 rounded-lg text-green-600",children:e.jsx(Pe,{size:24})})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50",children:e.jsx("h3",{className:"font-semibold text-gray-800",children:"Şu An Ödünçte Olan Kitaplar"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-gray-500 text-sm border-b border-gray-100",children:[e.jsx("th",{className:"px-6 py-3 font-medium",children:"Öğrenci"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Kitap Adı"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Veriliş Tarihi"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Teslim Tarihi"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Geçen Gün"}),e.jsx("th",{className:"px-6 py-3 font-medium",children:"Durum"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-400",children:"Şu anda ödünç verilmiş kitap yok."})}):i.map(x=>{const t=m(x.dueDate),r=d(x.issueDate);return e.jsxs("tr",{className:`transition-colors ${t?"bg-red-50 hover:bg-red-100":"hover:bg-gray-50"}`,children:[e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:x.student.name}),e.jsx("div",{className:"text-xs text-gray-500",children:x.student.studentNumber})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-gray-900",children:x.book.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ISBN: ",x.book.isbn]})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(x.issueDate).toLocaleDateString("tr-TR")}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(x.dueDate).toLocaleDateString("tr-TR")}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium",children:[r," gün"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:t?"Gecikmiş":"Zamanında"})})]},x.id)})})]})})]})]})},et=({onComplete:i,onCancel:n,isReturnOnly:l=!1})=>{const[o,u]=b.useState(l?"SCAN_BOOKS_ONLY":"SCAN_STUDENT"),[d,m]=b.useState(null),[x,t]=b.useState([]),[r,s]=b.useState(null),[a,c]=b.useState(null),[f,g]=b.useState(!1),y=b.useRef(null),h=b.useRef(0),C=b.useRef(!1),E=(j="success")=>{try{const v=new(window.AudioContext||window.webkitAudioContext),k=v.createOscillator(),_=v.createGain();k.connect(_),_.connect(v.destination),k.type="sine",k.frequency.setValueAtTime(j==="success"?880:220,v.currentTime),_.gain.setValueAtTime(.1,v.currentTime),k.start(),setTimeout(()=>{k.stop(),v.close()},j==="success"?150:400)}catch(v){console.error("Audio play failed",v)}};b.useEffect(()=>{const j="optimized-reader";return(async()=>{try{const k=new Se(j);y.current=k,await k.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1},(_,ne)=>{S(_)},_=>{}),C.current=!0}catch(k){console.error("Error starting scanner",k)}})(),()=>{y.current&&C.current&&(y.current.stop().then(()=>{var k;(k=y.current)==null||k.clear()}).catch(k=>{console.error("Failed to stop scanner",k)}),C.current=!1)}},[]);const N=b.useRef({scanState:o,studentId:d,books:x});b.useEffect(()=>{N.current={scanState:o,studentId:d,books:x}},[o,d,x]);const S=async j=>{const v=Date.now();if(v-h.current<1e3)return;h.current=v;const{scanState:k,studentId:_,books:ne}=N.current;if(k==="SCAN_STUDENT")E("success"),m(j),u("SCAN_BOOKS"),B(j,"success","Öğrenci Tanımlandı");else{if(ne.includes(j))return;if(!l){const G=await M.checkBookForStudent(j,_);if(!G.success){E("error"),B(j,"error",G.message);return}}E("success"),t(G=>[...G,j]),B(j,"success",l?"İade Listesine Eklendi":"Ödünç Listesine Eklendi")}},B=(j,v,k)=>{s(j),c({type:v,message:k}),g(!0),setTimeout(()=>g(!1),v==="success"?1e3:2e3)},p=()=>{const j=prompt("Öğrenci Numarası Girin:");j&&S(j)},A=()=>{const j=prompt("Kitap Barkodu Girin:");j&&S(j)};return e.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col items-center justify-between p-4",children:[e.jsxs("div",{className:"w-full text-white flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[o==="SCAN_STUDENT"?e.jsx(oe,{className:"text-yellow-400"}):e.jsx(Q,{className:"text-green-400"}),o==="SCAN_STUDENT"?"Öğrenci Kartını Okutun":l?"İade Edilecek Kitapları Okutun":"Kitapları Okutun"]}),e.jsx("button",{onClick:n,className:"p-2 bg-gray-800 rounded-full hover:bg-gray-700",children:e.jsx(q,{size:24})})]}),e.jsxs("div",{className:"relative w-full flex-grow flex items-center justify-center bg-black overflow-hidden rounded-xl border-2 border-gray-700",children:[e.jsx("div",{id:"optimized-reader",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:e.jsx("div",{className:`w-64 h-64 border-4 rounded-3xl opacity-50 ${o==="SCAN_STUDENT"?"border-yellow-400":"border-green-400"}`})}),f&&e.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-black/70 animated-fade-in",children:e.jsxs("div",{className:`text-black p-8 rounded-3xl flex flex-col items-center animate-bounce-in shadow-2xl ${(a==null?void 0:a.type)==="success"?"bg-white":"bg-red-50 border-4 border-red-500"}`,children:[(a==null?void 0:a.type)==="success"?e.jsx(se,{size:64,className:"text-green-500 mb-4"}):e.jsx(me,{size:64,className:"text-red-500 mb-4 animate-pulse"}),e.jsx("p",{className:"text-2xl font-black mb-1",children:r}),e.jsx("p",{className:`text-lg font-bold ${(a==null?void 0:a.type)==="success"?"text-gray-500":"text-red-600"}`,children:a==null?void 0:a.message})]})})]}),e.jsxs("div",{className:"w-full mt-4 space-y-3",children:[e.jsxs("div",{className:"bg-gray-900 text-white p-4 rounded-xl flex items-center justify-between",children:[!l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${d?"bg-green-600":"bg-gray-700"}`,children:e.jsx(oe,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Aktif Öğrenci"}),e.jsx("p",{className:"font-mono font-bold",children:d||"Bekleniyor..."})]})]}),e.jsx("div",{className:"h-8 w-px bg-gray-700"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-grow justify-center",children:[e.jsx("div",{className:`p-2 rounded-lg ${x.length>0?l?"bg-orange-600":"bg-blue-600":"bg-gray-700"}`,children:e.jsx(Q,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:l?"Toplanacak Kitap":"Kitap Sayısı"}),e.jsx("p",{className:"font-mono font-bold text-center",children:x.length})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o==="SCAN_BOOKS"&&e.jsxs("button",{onClick:()=>{u("SCAN_STUDENT"),m(null),t([])},className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 text-white rounded-xl font-semibold hover:bg-gray-700 active:scale-95 transition-transform",children:[e.jsx(Ye,{size:18}),e.jsx("span",{children:"Sıfırla"})]}),e.jsxs("button",{onClick:()=>(l||d)&&x.length>0?i(d,x):null,disabled:l?x.length===0:!d||x.length===0,className:`col-span-${o==="SCAN_STUDENT"||l?"2":"1"} flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold text-lg shadow-lg active:scale-95 transition-all ${(l||d)&&x.length>0?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(Ge,{size:20}),e.jsx("span",{children:l?"İadeleri Tamamla":"Ödünç İşlemini Tamamla"})]})]}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx("button",{onClick:p,className:"text-xs text-gray-500 underline",children:"El ile Öğrenci Gir"}),d&&e.jsx("button",{onClick:A,className:"text-xs text-gray-500 underline",children:"El ile Kitap Gir"})]})]})]})},tt=()=>{const[i,n]=b.useState("ISSUE"),[l,o]=b.useState(14),[u,d]=b.useState(null),[m,x]=b.useState(null),[t,r]=b.useState(!1),s=async(a,c)=>{r(!1),x(null),d({type:"warning",msg:"İşlem yapılıyor, lütfen bekleyin..."});const f=[],g=[];for(const y of c)try{const h=i==="ISSUE"?await M.issueBook(y,a,l):await M.returnBook(y);h.success?f.push(`${y}: ${h.message}`):g.push(`${y}: ${h.message}`)}catch{g.push(`${y}: Sistem hatası`)}x({successes:f,failures:g}),g.length===0?d({type:"success",msg:`Toplam ${f.length} kitap başarıyla ${i==="ISSUE"?"ödünç verildi":"iade alındı"}.`}):d({type:"warning",msg:`${f.length} kitap başarılı, ${g.length} kitapta hata oluştu.`})};return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-20",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h2",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"Ödünç & İade Bankosu"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Hızlı tarama sistemi ile kitap işlemlerini saniyeler içinde tamamlayın."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx("div",{className:`relative overflow-hidden group rounded-3xl p-8 border-2 transition-all cursor-pointer ${i==="ISSUE"?"border-indigo-500 bg-white shadow-xl":"border-gray-100 bg-gray-50 hover:border-gray-200"}`,onClick:()=>{n("ISSUE"),d(null),x(null)},children:e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${i==="ISSUE"?"bg-indigo-500 text-white":"bg-gray-200 text-gray-400"}`,children:e.jsx(_e,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Kitap Ver (Ödünç)"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Öğrenci kartı ve kitapları taratarak ödünç verin."})]})]}),i==="ISSUE"&&e.jsxs("div",{className:"mt-8 space-y-4 animate-fade-in",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"Ödünç Süresi"}),e.jsxs("select",{value:l,onClick:a=>a.stopPropagation(),onChange:a=>o(Number(a.target.value)),className:"block w-full rounded-xl border-gray-200 border py-3 px-4 focus:ring-2 focus:ring-indigo-500 outline-none",children:[e.jsx("option",{value:7,children:"7 Gün (1 Hafta)"}),e.jsx("option",{value:14,children:"14 Gün (2 Hafta)"}),e.jsx("option",{value:30,children:"30 Gün (1 Ay)"}),e.jsx("option",{value:90,children:"90 Gün (Dönemlik)"})]})]}),e.jsxs("button",{onClick:a=>{a.stopPropagation(),r(!0)},className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-3 shadow-lg shadow-indigo-200 transition-transform active:scale-95",children:[e.jsx(J,{size:22}),e.jsx("span",{children:"Hızlı Taramayı Başlat"})]})]})]})}),e.jsx("div",{className:`relative overflow-hidden group rounded-3xl p-8 border-2 transition-all cursor-pointer ${i==="RETURN"?"border-emerald-500 bg-white shadow-xl":"border-gray-100 bg-gray-50 hover:border-gray-200"}`,onClick:()=>{n("RETURN"),d(null),x(null)},children:e.jsxs("div",{className:"flex flex-col h-full justify-between",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${i==="RETURN"?"bg-emerald-500 text-white":"bg-gray-200 text-gray-400"}`,children:e.jsx(Oe,{size:32})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Kitap Al (İade)"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"İade edilen kitapları topluca envantere geri alın."})]})]}),i==="RETURN"&&e.jsx("div",{className:"mt-8 animate-fade-in",children:e.jsxs("button",{onClick:a=>{a.stopPropagation(),r(!0)},className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-3 shadow-lg shadow-emerald-200 transition-transform active:scale-95",children:[e.jsx(J,{size:22}),e.jsx("span",{children:"Hızlı Taramayı Başlat"})]})})]})})]}),t&&e.jsx(et,{onComplete:s,onCancel:()=>r(!1),isReturnOnly:i==="RETURN"}),u&&e.jsxs("div",{className:`p-6 rounded-3xl flex items-start space-x-4 border ${u.type==="error"?"bg-red-50 text-red-800 border-red-100":u.type==="warning"?"bg-amber-50 text-amber-800 border-amber-100":"bg-green-50 text-green-800 border-green-100"}`,children:[u.type==="error"&&e.jsx(Z,{className:"shrink-0 mt-1",size:28}),u.type==="warning"&&e.jsx(Z,{className:"shrink-0 mt-1",size:28}),u.type==="success"&&e.jsx(se,{className:"shrink-0 mt-1",size:28}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xl font-bold mb-1",children:u.type==="error"?"Hata":u.type==="warning"?"Bilgi/Uyarı":"Başarılı"}),e.jsx("p",{className:"opacity-90",children:u.msg})]})]}),m&&e.jsxs("div",{className:"bg-white border border-gray-100 rounded-3xl overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"bg-gray-50 px-8 py-5 border-b flex justify-between items-center",children:[e.jsxs("h3",{className:"font-black text-xl text-gray-800 flex items-center gap-3",children:[e.jsx(Ke,{size:24,className:"text-gray-400"}),"İşlem Raporu"]}),e.jsxs("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:[e.jsx(J,{size:20,className:"inline mr-1 rotate-12"})," Raporu Kapat"]})]}),e.jsxs("div",{className:"p-8 grid md:grid-cols-2 gap-8",children:[m.successes.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-black text-green-700 flex items-center gap-2",children:[e.jsx(se,{size:20})," Başarılı (",m.successes.length,")"]}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:m.successes.map((a,c)=>e.jsxs("div",{className:"p-3 bg-green-50 rounded-xl text-sm text-green-700 font-medium flex items-center gap-3 border border-green-100",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),a]},c))})]}),m.failures.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-lg font-black text-red-700 flex items-center gap-2",children:[e.jsx(Z,{size:20})," Hatalı (",m.failures.length,")"]}),e.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:m.failures.map((a,c)=>e.jsxs("div",{className:"p-3 bg-red-50 rounded-xl text-sm text-red-700 font-medium flex items-center gap-3 border border-red-100",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-400"}),a]},c))})]})]})]})]})};var st=Object.defineProperty,W=Object.getOwnPropertySymbols,pe=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable,de=(i,n,l)=>n in i?st(i,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):i[n]=l,rt=(i,n)=>{for(var l in n||(n={}))pe.call(n,l)&&de(i,l,n[l]);if(W)for(var l of W(n))ye.call(n,l)&&de(i,l,n[l]);return i},at=(i,n)=>{var l={};for(var o in i)pe.call(i,o)&&n.indexOf(o)<0&&(l[o]=i[o]);if(i!=null&&W)for(var o of W(i))n.indexOf(o)<0&&ye.call(i,o)&&(l[o]=i[o]);return l};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var F;(i=>{const n=class{constructor(t,r,s,a){if(this.version=t,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],t<n.MIN_VERSION||t>n.MAX_VERSION)throw new RangeError("Version value out of range");if(a<-1||a>7)throw new RangeError("Mask value out of range");this.size=t*4+17;let c=[];for(let g=0;g<this.size;g++)c.push(!1);for(let g=0;g<this.size;g++)this.modules.push(c.slice()),this.isFunction.push(c.slice());this.drawFunctionPatterns();const f=this.addEccAndInterleave(s);if(this.drawCodewords(f),a==-1){let g=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const h=this.getPenaltyScore();h<g&&(a=y,g=h),this.applyMask(y)}}d(0<=a&&a<=7),this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}static encodeText(t,r){const s=i.QrSegment.makeSegments(t);return n.encodeSegments(s,r)}static encodeBinary(t,r){const s=i.QrSegment.makeBytes(t);return n.encodeSegments([s],r)}static encodeSegments(t,r,s=1,a=40,c=-1,f=!0){if(!(n.MIN_VERSION<=s&&s<=a&&a<=n.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let g,y;for(g=s;;g++){const N=n.getNumDataCodewords(g,r)*8,S=x.getTotalBits(t,g);if(S<=N){y=S;break}if(g>=a)throw new RangeError("Data too long")}for(const N of[n.Ecc.MEDIUM,n.Ecc.QUARTILE,n.Ecc.HIGH])f&&y<=n.getNumDataCodewords(g,N)*8&&(r=N);let h=[];for(const N of t){o(N.mode.modeBits,4,h),o(N.numChars,N.mode.numCharCountBits(g),h);for(const S of N.getData())h.push(S)}d(h.length==y);const C=n.getNumDataCodewords(g,r)*8;d(h.length<=C),o(0,Math.min(4,C-h.length),h),o(0,(8-h.length%8)%8,h),d(h.length%8==0);for(let N=236;h.length<C;N^=253)o(N,8,h);let E=[];for(;E.length*8<h.length;)E.push(0);return h.forEach((N,S)=>E[S>>>3]|=N<<7-(S&7)),new n(g,r,E,c)}getModule(t,r){return 0<=t&&t<this.size&&0<=r&&r<this.size&&this.modules[r][t]}getModules(){return this.modules}drawFunctionPatterns(){for(let s=0;s<this.size;s++)this.setFunctionModule(6,s,s%2==0),this.setFunctionModule(s,6,s%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const t=this.getAlignmentPatternPositions(),r=t.length;for(let s=0;s<r;s++)for(let a=0;a<r;a++)s==0&&a==0||s==0&&a==r-1||s==r-1&&a==0||this.drawAlignmentPattern(t[s],t[a]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){const r=this.errorCorrectionLevel.formatBits<<3|t;let s=r;for(let c=0;c<10;c++)s=s<<1^(s>>>9)*1335;const a=(r<<10|s)^21522;d(a>>>15==0);for(let c=0;c<=5;c++)this.setFunctionModule(8,c,u(a,c));this.setFunctionModule(8,7,u(a,6)),this.setFunctionModule(8,8,u(a,7)),this.setFunctionModule(7,8,u(a,8));for(let c=9;c<15;c++)this.setFunctionModule(14-c,8,u(a,c));for(let c=0;c<8;c++)this.setFunctionModule(this.size-1-c,8,u(a,c));for(let c=8;c<15;c++)this.setFunctionModule(8,this.size-15+c,u(a,c));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let s=0;s<12;s++)t=t<<1^(t>>>11)*7973;const r=this.version<<12|t;d(r>>>18==0);for(let s=0;s<18;s++){const a=u(r,s),c=this.size-11+s%3,f=Math.floor(s/3);this.setFunctionModule(c,f,a),this.setFunctionModule(f,c,a)}}drawFinderPattern(t,r){for(let s=-4;s<=4;s++)for(let a=-4;a<=4;a++){const c=Math.max(Math.abs(a),Math.abs(s)),f=t+a,g=r+s;0<=f&&f<this.size&&0<=g&&g<this.size&&this.setFunctionModule(f,g,c!=2&&c!=4)}}drawAlignmentPattern(t,r){for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)this.setFunctionModule(t+a,r+s,Math.max(Math.abs(a),Math.abs(s))!=1)}setFunctionModule(t,r,s){this.modules[r][t]=s,this.isFunction[r][t]=!0}addEccAndInterleave(t){const r=this.version,s=this.errorCorrectionLevel;if(t.length!=n.getNumDataCodewords(r,s))throw new RangeError("Invalid argument");const a=n.NUM_ERROR_CORRECTION_BLOCKS[s.ordinal][r],c=n.ECC_CODEWORDS_PER_BLOCK[s.ordinal][r],f=Math.floor(n.getNumRawDataModules(r)/8),g=a-f%a,y=Math.floor(f/a);let h=[];const C=n.reedSolomonComputeDivisor(c);for(let N=0,S=0;N<a;N++){let B=t.slice(S,S+y-c+(N<g?0:1));S+=B.length;const p=n.reedSolomonComputeRemainder(B,C);N<g&&B.push(0),h.push(B.concat(p))}let E=[];for(let N=0;N<h[0].length;N++)h.forEach((S,B)=>{(N!=y-c||B>=g)&&E.push(S[N])});return d(E.length==f),E}drawCodewords(t){if(t.length!=Math.floor(n.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let r=0;for(let s=this.size-1;s>=1;s-=2){s==6&&(s=5);for(let a=0;a<this.size;a++)for(let c=0;c<2;c++){const f=s-c,y=(s+1&2)==0?this.size-1-a:a;!this.isFunction[y][f]&&r<t.length*8&&(this.modules[y][f]=u(t[r>>>3],7-(r&7)),r++)}}d(r==t.length*8)}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let r=0;r<this.size;r++)for(let s=0;s<this.size;s++){let a;switch(t){case 0:a=(s+r)%2==0;break;case 1:a=r%2==0;break;case 2:a=s%3==0;break;case 3:a=(s+r)%3==0;break;case 4:a=(Math.floor(s/3)+Math.floor(r/2))%2==0;break;case 5:a=s*r%2+s*r%3==0;break;case 6:a=(s*r%2+s*r%3)%2==0;break;case 7:a=((s+r)%2+s*r%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[r][s]&&a&&(this.modules[r][s]=!this.modules[r][s])}}getPenaltyScore(){let t=0;for(let c=0;c<this.size;c++){let f=!1,g=0,y=[0,0,0,0,0,0,0];for(let h=0;h<this.size;h++)this.modules[c][h]==f?(g++,g==5?t+=n.PENALTY_N1:g>5&&t++):(this.finderPenaltyAddHistory(g,y),f||(t+=this.finderPenaltyCountPatterns(y)*n.PENALTY_N3),f=this.modules[c][h],g=1);t+=this.finderPenaltyTerminateAndCount(f,g,y)*n.PENALTY_N3}for(let c=0;c<this.size;c++){let f=!1,g=0,y=[0,0,0,0,0,0,0];for(let h=0;h<this.size;h++)this.modules[h][c]==f?(g++,g==5?t+=n.PENALTY_N1:g>5&&t++):(this.finderPenaltyAddHistory(g,y),f||(t+=this.finderPenaltyCountPatterns(y)*n.PENALTY_N3),f=this.modules[h][c],g=1);t+=this.finderPenaltyTerminateAndCount(f,g,y)*n.PENALTY_N3}for(let c=0;c<this.size-1;c++)for(let f=0;f<this.size-1;f++){const g=this.modules[c][f];g==this.modules[c][f+1]&&g==this.modules[c+1][f]&&g==this.modules[c+1][f+1]&&(t+=n.PENALTY_N2)}let r=0;for(const c of this.modules)r=c.reduce((f,g)=>f+(g?1:0),r);const s=this.size*this.size,a=Math.ceil(Math.abs(r*20-s*10)/s)-1;return d(0<=a&&a<=9),t+=a*n.PENALTY_N4,d(0<=t&&t<=2568888),t}getAlignmentPatternPositions(){if(this.version==1)return[];{const t=Math.floor(this.version/7)+2,r=this.version==32?26:Math.ceil((this.version*4+4)/(t*2-2))*2;let s=[6];for(let a=this.size-7;s.length<t;a-=r)s.splice(1,0,a);return s}}static getNumRawDataModules(t){if(t<n.MIN_VERSION||t>n.MAX_VERSION)throw new RangeError("Version number out of range");let r=(16*t+128)*t+64;if(t>=2){const s=Math.floor(t/7)+2;r-=(25*s-10)*s-55,t>=7&&(r-=36)}return d(208<=r&&r<=29648),r}static getNumDataCodewords(t,r){return Math.floor(n.getNumRawDataModules(t)/8)-n.ECC_CODEWORDS_PER_BLOCK[r.ordinal][t]*n.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][t]}static reedSolomonComputeDivisor(t){if(t<1||t>255)throw new RangeError("Degree out of range");let r=[];for(let a=0;a<t-1;a++)r.push(0);r.push(1);let s=1;for(let a=0;a<t;a++){for(let c=0;c<r.length;c++)r[c]=n.reedSolomonMultiply(r[c],s),c+1<r.length&&(r[c]^=r[c+1]);s=n.reedSolomonMultiply(s,2)}return r}static reedSolomonComputeRemainder(t,r){let s=r.map(a=>0);for(const a of t){const c=a^s.shift();s.push(0),r.forEach((f,g)=>s[g]^=n.reedSolomonMultiply(f,c))}return s}static reedSolomonMultiply(t,r){if(t>>>8||r>>>8)throw new RangeError("Byte out of range");let s=0;for(let a=7;a>=0;a--)s=s<<1^(s>>>7)*285,s^=(r>>>a&1)*t;return d(s>>>8==0),s}finderPenaltyCountPatterns(t){const r=t[1];d(r<=this.size*3);const s=r>0&&t[2]==r&&t[3]==r*3&&t[4]==r&&t[5]==r;return(s&&t[0]>=r*4&&t[6]>=r?1:0)+(s&&t[6]>=r*4&&t[0]>=r?1:0)}finderPenaltyTerminateAndCount(t,r,s){return t&&(this.finderPenaltyAddHistory(r,s),r=0),r+=this.size,this.finderPenaltyAddHistory(r,s),this.finderPenaltyCountPatterns(s)}finderPenaltyAddHistory(t,r){r[0]==0&&(t+=this.size),r.pop(),r.unshift(t)}};let l=n;l.MIN_VERSION=1,l.MAX_VERSION=40,l.PENALTY_N1=3,l.PENALTY_N2=3,l.PENALTY_N3=40,l.PENALTY_N4=10,l.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],l.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],i.QrCode=l;function o(t,r,s){if(r<0||r>31||t>>>r)throw new RangeError("Value out of range");for(let a=r-1;a>=0;a--)s.push(t>>>a&1)}function u(t,r){return(t>>>r&1)!=0}function d(t){if(!t)throw new Error("Assertion error")}const m=class{constructor(t,r,s){if(this.mode=t,this.numChars=r,this.bitData=s,r<0)throw new RangeError("Invalid argument");this.bitData=s.slice()}static makeBytes(t){let r=[];for(const s of t)o(s,8,r);return new m(m.Mode.BYTE,t.length,r)}static makeNumeric(t){if(!m.isNumeric(t))throw new RangeError("String contains non-numeric characters");let r=[];for(let s=0;s<t.length;){const a=Math.min(t.length-s,3);o(parseInt(t.substr(s,a),10),a*3+1,r),s+=a}return new m(m.Mode.NUMERIC,t.length,r)}static makeAlphanumeric(t){if(!m.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let r=[],s;for(s=0;s+2<=t.length;s+=2){let a=m.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s))*45;a+=m.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s+1)),o(a,11,r)}return s<t.length&&o(m.ALPHANUMERIC_CHARSET.indexOf(t.charAt(s)),6,r),new m(m.Mode.ALPHANUMERIC,t.length,r)}static makeSegments(t){return t==""?[]:m.isNumeric(t)?[m.makeNumeric(t)]:m.isAlphanumeric(t)?[m.makeAlphanumeric(t)]:[m.makeBytes(m.toUtf8ByteArray(t))]}static makeEci(t){let r=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)o(t,8,r);else if(t<16384)o(2,2,r),o(t,14,r);else if(t<1e6)o(6,3,r),o(t,21,r);else throw new RangeError("ECI assignment value out of range");return new m(m.Mode.ECI,0,r)}static isNumeric(t){return m.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return m.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(t,r){let s=0;for(const a of t){const c=a.mode.numCharCountBits(r);if(a.numChars>=1<<c)return 1/0;s+=4+c+a.bitData.length}return s}static toUtf8ByteArray(t){t=encodeURI(t);let r=[];for(let s=0;s<t.length;s++)t.charAt(s)!="%"?r.push(t.charCodeAt(s)):(r.push(parseInt(t.substr(s+1,2),16)),s+=2);return r}};let x=m;x.NUMERIC_REGEX=/^[0-9]*$/,x.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,x.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",i.QrSegment=x})(F||(F={}));(i=>{(n=>{const l=class{constructor(u,d){this.ordinal=u,this.formatBits=d}};let o=l;o.LOW=new l(0,1),o.MEDIUM=new l(1,0),o.QUARTILE=new l(2,3),o.HIGH=new l(3,2),n.Ecc=o})(i.QrCode||(i.QrCode={}))})(F||(F={}));(i=>{(n=>{const l=class{constructor(u,d){this.modeBits=u,this.numBitsCharCount=d}numCharCountBits(u){return this.numBitsCharCount[Math.floor((u+7)/17)]}};let o=l;o.NUMERIC=new l(1,[10,12,14]),o.ALPHANUMERIC=new l(2,[9,11,13]),o.BYTE=new l(4,[8,16,16]),o.KANJI=new l(8,[8,10,12]),o.ECI=new l(7,[0,0,0]),n.Mode=o})(i.QrSegment||(i.QrSegment={}))})(F||(F={}));var V=F;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var nt={L:V.QrCode.Ecc.LOW,M:V.QrCode.Ecc.MEDIUM,Q:V.QrCode.Ecc.QUARTILE,H:V.QrCode.Ecc.HIGH},it=128,lt="L",ot="#FFFFFF",ct="#000000",dt=!1,be=4,ut=.1;function ht(i,n=0){const l=[];return i.forEach(function(o,u){let d=null;o.forEach(function(m,x){if(!m&&d!==null){l.push(`M${d+n} ${u+n}h${x-d}v1H${d+n}z`),d=null;return}if(x===o.length-1){if(!m)return;d===null?l.push(`M${x+n},${u+n} h1v1H${x+n}z`):l.push(`M${d+n},${u+n} h${x+1-d}v1H${d+n}z`);return}m&&d===null&&(d=x)})}),l.join("")}function mt(i,n){return i.slice().map((l,o)=>o<n.y||o>=n.y+n.h?l:l.map((u,d)=>d<n.x||d>=n.x+n.w?u:!1))}function xt(i,n,l,o){if(o==null)return null;const u=l?be:0,d=i.length+u*2,m=Math.floor(n*ut),x=d/n,t=(o.width||m)*x,r=(o.height||m)*x,s=o.x==null?i.length/2-t/2:o.x*x,a=o.y==null?i.length/2-r/2:o.y*x;let c=null;if(o.excavate){let f=Math.floor(s),g=Math.floor(a),y=Math.ceil(t+s-f),h=Math.ceil(r+a-g);c={x:f,y:g,w:y,h}}return{x:s,y:a,h:r,w:t,excavation:c}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function gt(i){const n=i,{value:l,size:o=it,level:u=lt,bgColor:d=ot,fgColor:m=ct,includeMargin:x=dt,imageSettings:t}=n,r=at(n,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let s=V.QrCode.encodeText(l,nt[u]).getModules();const a=x?be:0,c=s.length+a*2,f=xt(s,o,x,t);let g=null;t!=null&&f!=null&&(f.excavation!=null&&(s=mt(s,f.excavation)),g=$.createElement("image",{xlinkHref:t.src,height:f.h,width:f.w,x:f.x+a,y:f.y+a,preserveAspectRatio:"none"}));const y=ht(s,a);return $.createElement("svg",rt({height:o,width:o,viewBox:`0 0 ${c} ${c}`},r),$.createElement("path",{fill:d,d:`M0,0 h${c}v${c}H0z`,shapeRendering:"crispEdges"}),$.createElement("path",{fill:m,d:y,shapeRendering:"crispEdges"}),g)}const je=({value:i,label:n,subLabel:l,size:o=128})=>e.jsxs("div",{className:"flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg bg-white shadow-sm break-inside-avoid",children:[e.jsx(gt,{value:i,size:o,level:"H"}),e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx("p",{className:"font-bold text-gray-800 text-sm",children:n}),l&&e.jsx("p",{className:"text-xs text-gray-500",children:l})]})]}),ft=()=>{const[i,n]=b.useState([]),[l,o]=b.useState([]),[u,d]=b.useState(""),[m,x]=b.useState(!1),[t,r]=b.useState({title:"",author:"",isbn:"",category:""}),s=async()=>{const h=await M.getBooks();n(h),o(h)};b.useEffect(()=>{s()},[]),b.useEffect(()=>{const h=u.toLowerCase(),C=i.filter(E=>E.title.toLowerCase().includes(h)||E.author.toLowerCase().includes(h)||E.isbn.includes(h));o(C)},[u,i]);const a=async h=>{if(h.preventDefault(),t.title&&t.isbn){const C=await M.addBook(t);C.success?(r({title:"",author:"",isbn:"",category:""}),x(!1),s()):alert(C.message)}},c=async h=>{window.confirm("Bu kitabı silmek istediğinize emin misiniz?")&&(await M.deleteBook(h),s())},f=()=>{window.print()},g=()=>{r(h=>({...h,isbn:Math.floor(1e12+Math.random()*9e12).toString()}))},y=h=>{switch(h){case R.AVAILABLE:return"MEVCUT";case R.BORROWED:return"ÖDÜNÇTE";case R.LOST:return"KAYIP";default:return h}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 no-print",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Kitap Envanteri"}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(fe,{size:18,className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Kitap ara...",className:"pl-10 block w-full rounded-lg border-gray-300 border py-2 px-4 focus:ring-indigo-500 focus:border-indigo-500",value:u,onChange:h=>d(h.target.value)})]}),e.jsxs("div",{className:"flex space-x-3 w-full md:w-auto",children:[e.jsxs("button",{onClick:f,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[e.jsx(ge,{size:18}),e.jsx("span",{children:"QR Yazdır"})]}),e.jsxs("button",{onClick:()=>x(!m),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[e.jsx(xe,{size:18}),e.jsx("span",{children:"Ekle"})]})]})]}),m&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-indigo-100 no-print",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Yeni Kitap Ekle"}),e.jsxs("form",{onSubmit:a,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{placeholder:"Kitap Adı",className:"border p-2 rounded",value:t.title,onChange:h=>r({...t,title:h.target.value}),required:!0}),e.jsx("input",{placeholder:"Yazar",className:"border p-2 rounded",value:t.author,onChange:h=>r({...t,author:h.target.value}),required:!0}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("input",{placeholder:"ISBN / Barkod",className:"border p-2 rounded flex-1",value:t.isbn,onChange:h=>r({...t,isbn:h.target.value}),required:!0}),e.jsx("button",{type:"button",onClick:g,className:"text-xs bg-gray-100 px-2 rounded hover:bg-gray-200",children:"Üret"})]}),e.jsx("input",{placeholder:"Kategori",className:"border p-2 rounded",value:t.category,onChange:h=>r({...t,category:h.target.value})}),e.jsx("button",{type:"submit",className:"col-span-2 bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700",children:"Kaydet"})]})]}),e.jsx("div",{className:"hidden md:block bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden no-print",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Başlık"}),e.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Yazar"}),e.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"ISBN"}),e.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500 text-right",children:"İşlem"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-6 text-gray-400",children:"Kitap bulunamadı."})}):l.map(h=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:h.title}),e.jsx("td",{className:"px-6 py-4 text-gray-500",children:h.author}),e.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:h.isbn}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${h.status===R.AVAILABLE?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:y(h.status)})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>c(h.id),className:"text-red-400 hover:text-red-600 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Kitabı Sil",children:e.jsx(Y,{size:16})})})]},h.id))})]})}),e.jsx("div",{className:"md:hidden space-y-4 no-print",children:l.length===0?e.jsx("div",{className:"bg-white p-6 rounded-xl text-center text-gray-400 border border-gray-200",children:"Kitap bulunamadı."}):l.map(h=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h4",{className:"font-bold text-gray-900",children:h.title}),e.jsx("p",{className:"text-sm text-gray-500",children:h.author}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-[10px] font-mono bg-gray-100 px-2 py-0.5 rounded text-gray-600",children:h.isbn}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold ${h.status===R.AVAILABLE?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:y(h.status)})]})]}),e.jsx("button",{onClick:()=>c(h.id),className:"text-red-400 hover:text-red-600 p-2 rounded-lg bg-red-50 transition-colors",title:"Kitabı Sil",children:e.jsx(Y,{size:18})})]},h.id))}),e.jsxs("div",{className:"print-only",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Kitap Envanteri QR Kodları"}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:l.map(h=>e.jsx(je,{value:h.isbn,label:h.title.substring(0,20)+(h.title.length>20?"...":""),subLabel:h.isbn},h.id))})]})]})},pt=()=>{const[i,n]=b.useState([]),[l,o]=b.useState([]),[u,d]=b.useState(""),[m,x]=b.useState(!1),[t,r]=b.useState({name:"",studentNumber:"",email:"",grade:""}),[s,a]=b.useState(null),[c,f]=b.useState([]),[g,y]=b.useState(!1),h=async()=>{const p=await M.getStudents();n(p),o(p)};b.useEffect(()=>{h()},[]),b.useEffect(()=>{const p=u.toLowerCase(),A=i.filter(j=>j.name.toLowerCase().includes(p)||j.studentNumber.includes(p)||j.grade.toLowerCase().includes(p));o(A)},[u,i]);const C=async p=>{if(p.preventDefault(),t.name&&t.studentNumber){const A=await M.addStudent(t);A.success?(r({name:"",studentNumber:"",email:"",grade:""}),x(!1),h()):alert(A.message)}},E=async p=>{window.confirm("Bu öğrenciyi silmek istediğinize emin misiniz?")&&(await M.deleteStudent(p),h())},N=()=>{window.print()},S=async p=>{a(p),y(!0);try{const A=await M.getBooks(),j=p.readingHistory.map(v=>A.find(k=>k.id===v)).filter(v=>v!==void 0);f(j)}catch(A){console.error("Failed to fetch history",A)}finally{y(!1)}},B=async p=>{if(s&&window.confirm("Bu kitabı öğrencinin geçmişinden silmek istediğinize emin misiniz?")){const A=await M.removeBookFromHistory(s.id,p);A.success?(f(j=>j.filter(v=>v.id!==p)),n(j=>j.map(v=>v.id===s.id?{...v,readingHistory:(v.readingHistory||[]).filter(k=>k!==p)}:v))):alert(A.message)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 no-print",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Öğrenci Veritabanı"}),e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(fe,{size:18,className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Öğrenci ara...",className:"pl-10 block w-full rounded-lg border-gray-300 border py-2 px-4 focus:ring-indigo-500 focus:border-indigo-500",value:u,onChange:p=>d(p.target.value)})]}),e.jsxs("div",{className:"flex space-x-3 w-full md:w-auto",children:[e.jsxs("button",{onClick:N,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[e.jsx(ge,{size:18}),e.jsx("span",{children:"Kart Yazdır"})]}),e.jsxs("button",{onClick:()=>x(!m),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[e.jsx(xe,{size:18}),e.jsx("span",{children:"Ekle"})]})]})]}),m&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-indigo-100 no-print",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Yeni Öğrenci Kaydet"}),e.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("input",{placeholder:"Ad Soyad",className:"border p-2 rounded",value:t.name,onChange:p=>r({...t,name:p.target.value}),required:!0}),e.jsx("input",{placeholder:"Öğrenci No (ID)",className:"border p-2 rounded",value:t.studentNumber,onChange:p=>r({...t,studentNumber:p.target.value}),required:!0}),e.jsx("input",{placeholder:"Email",type:"email",className:"border p-2 rounded",value:t.email,onChange:p=>r({...t,email:p.target.value})}),e.jsx("input",{placeholder:"Sınıf / Şube",className:"border p-2 rounded",value:t.grade,onChange:p=>r({...t,grade:p.target.value})}),e.jsx("button",{type:"submit",className:"col-span-2 bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700",children:"Öğrenciyi Kaydet"})]})]}),e.jsx("div",{className:"hidden md:block bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden no-print",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"İsim"}),e.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Öğrenci No"}),e.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Sınıf"}),e.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Geçmiş"}),e.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500 text-right",children:"İşlem"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center py-6 text-gray-400",children:"Öğrenci bulunamadı."})}):l.map(p=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>S(p),className:"font-bold text-indigo-600 hover:text-indigo-800 hover:underline text-left",children:p.name})}),e.jsx("td",{className:"px-6 py-4 text-gray-500 font-mono",children:p.studentNumber}),e.jsx("td",{className:"px-6 py-4",children:p.grade}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[p.readingHistory.length," kitap okudu"]}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>E(p.id),className:"text-red-400 hover:text-red-600 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Öğrenciyi Sil",children:e.jsx(Y,{size:16})})})]},p.id))})]})}),e.jsx("div",{className:"md:hidden space-y-4 no-print",children:l.length===0?e.jsx("div",{className:"bg-white p-6 rounded-xl text-center text-gray-400 border border-gray-200",children:"Öğrenci bulunamadı."}):l.map(p=>e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("button",{onClick:()=>S(p),className:"font-bold text-indigo-600 text-left",children:p.name}),e.jsx("p",{className:"text-sm text-gray-500 font-mono",children:p.studentNumber}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-[10px] bg-gray-100 px-2 py-0.5 rounded text-gray-600 font-bold uppercase",children:p.grade}),e.jsxs("span",{className:"text-[10px] bg-blue-50 px-2 py-0.5 rounded text-blue-600 font-bold",children:[p.readingHistory.length," Kitap"]})]})]}),e.jsx("button",{onClick:()=>E(p.id),className:"text-red-400 hover:text-red-600 p-2 rounded-lg bg-red-50 transition-colors",title:"Öğrenciyi Sil",children:e.jsx(Y,{size:18})})]},p.id))}),s&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in no-print",children:e.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden animate-soft-fade max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"bg-indigo-600 p-6 text-white flex justify-between items-center shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsx(He,{size:24})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:s.name}),e.jsx("p",{className:"text-indigo-100 text-sm",children:"Okuma Geçmişi Detayı"})]})]}),e.jsx("button",{onClick:()=>a(null),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(q,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:g?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mb-4"}),e.jsx("p",{children:"Geçmiş yükleniyor..."})]}):c.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400 space-y-4",children:[e.jsx(Q,{size:48,className:"opacity-20"}),e.jsx("p",{className:"text-lg",children:"Bu öğrenci henüz hiç kitap okumamış."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-bold text-gray-700 flex items-center gap-2",children:[e.jsx(Q,{size:18,className:"text-indigo-500"}),"Toplam ",c.length," Kitap"]}),e.jsx("div",{className:"grid gap-3",children:c.map((p,A)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-2xl border border-gray-100 hover:border-indigo-100 transition-all group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white rounded-xl shadow-sm flex items-center justify-center text-indigo-500 group-hover:bg-indigo-500 group-hover:text-white transition-colors",children:e.jsx(Q,{size:18})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900 leading-tight",children:p.title}),e.jsx("p",{className:"text-sm text-gray-500",children:p.author})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-bold uppercase tracking-wider hidden sm:inline-block",children:p.category}),e.jsx("button",{onClick:()=>B(p.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-colors",title:"Geçmişten Sil",children:e.jsx(Y,{size:18})})]})]},A))})]})}),e.jsx("div",{className:"p-6 bg-gray-50 border-t flex justify-end shrink-0",children:e.jsx("button",{onClick:()=>a(null),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-100",children:"Kapat"})})]})}),e.jsxs("div",{className:"print-only w-full",children:[e.jsx("h1",{className:"text-2xl font-bold mb-8 text-center",children:"Kütüphane Kartları"}),e.jsx("div",{className:"grid grid-cols-2 gap-8 w-full",children:l.map(p=>e.jsxs("div",{className:"border-2 border-black rounded-xl p-6 flex items-center justify-between break-inside-avoid shadow-none",children:[e.jsxs("div",{className:"flex-1 mr-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-black rounded-full text-white flex items-center justify-center font-bold",children:"L"}),e.jsx("span",{className:"font-bold text-sm tracking-wider uppercase",children:"Okul Kütüphanesi"})]}),e.jsx("h3",{className:"text-xl font-bold uppercase mb-1",children:p.name}),e.jsx("p",{className:"text-lg font-mono mb-1",children:p.studentNumber}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:p.grade}),e.jsx("div",{className:"border-t-2 border-black pt-2 w-32",children:e.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-500",children:"Yetkili İmza"})})]}),e.jsx("div",{children:e.jsx(je,{value:p.studentNumber,label:"",size:96})})]},p.id))})]})]})},yt=()=>{const[i,n]=b.useState(null),[l,o]=b.useState("dashboard"),u=()=>{n({id:"admin-1",name:"Admin User",email:"admin@library.school",role:"ADMIN"})},d=()=>{n(null),o("dashboard")};if(!i)return e.jsx(Je,{onLogin:u});const m=()=>{switch(l){case"dashboard":return e.jsx(ce,{});case"circulation":return e.jsx(tt,{});case"books":return e.jsx(ft,{});case"students":return e.jsx(pt,{});default:return e.jsx(ce,{})}};return e.jsx(Ze,{currentPage:l,onNavigate:o,onLogout:d,user:i,children:m()})};const Ne=document.getElementById("root");if(!Ne)throw new Error("Could not find root element to mount to");const bt=te.createRoot(Ne);bt.render(e.jsx($.StrictMode,{children:e.jsx(yt,{})}));
