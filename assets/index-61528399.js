function uw(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var Ma=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $p(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zp={exports:{}},Ku={},Jp={exports:{}},ze={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zl=Symbol.for("react.element"),hw=Symbol.for("react.portal"),fw=Symbol.for("react.fragment"),dw=Symbol.for("react.strict_mode"),gw=Symbol.for("react.profiler"),pw=Symbol.for("react.provider"),mw=Symbol.for("react.context"),xw=Symbol.for("react.forward_ref"),yw=Symbol.for("react.suspense"),ww=Symbol.for("react.memo"),Ew=Symbol.for("react.lazy"),w0=Symbol.iterator;function _w(t){return t===null||typeof t!="object"?null:(t=w0&&t[w0]||t["@@iterator"],typeof t=="function"?t:null)}var em={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tm=Object.assign,nm={};function da(t,e,n){this.props=t,this.context=e,this.refs=nm,this.updater=n||em}da.prototype.isReactComponent={};da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rm(){}rm.prototype=da.prototype;function Fd(t,e,n){this.props=t,this.context=e,this.refs=nm,this.updater=n||em}var Vd=Fd.prototype=new rm;Vd.constructor=Fd;tm(Vd,da.prototype);Vd.isPureReactComponent=!0;var E0=Array.isArray,im=Object.prototype.hasOwnProperty,Ud={current:null},sm={key:!0,ref:!0,__self:!0,__source:!0};function om(t,e,n){var i,o={},l=null,f=null;if(e!=null)for(i in e.ref!==void 0&&(f=e.ref),e.key!==void 0&&(l=""+e.key),e)im.call(e,i)&&!sm.hasOwnProperty(i)&&(o[i]=e[i]);var y=arguments.length-2;if(y===1)o.children=n;else if(1<y){for(var x=Array(y),p=0;p<y;p++)x[p]=arguments[p+2];o.children=x}if(t&&t.defaultProps)for(i in y=t.defaultProps,y)o[i]===void 0&&(o[i]=y[i]);return{$$typeof:zl,type:t,key:l,ref:f,props:o,_owner:Ud.current}}function Aw(t,e){return{$$typeof:zl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jd(t){return typeof t=="object"&&t!==null&&t.$$typeof===zl}function Cw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _0=/\/+/g;function Dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cw(""+t.key):e.toString(36)}function Fc(t,e,n,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var f=!1;if(t===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case zl:case hw:f=!0}}if(f)return f=t,o=o(f),t=i===""?"."+Dh(f,0):i,E0(o)?(n="",t!=null&&(n=t.replace(_0,"$&/")+"/"),Fc(o,e,n,"",function(p){return p})):o!=null&&(jd(o)&&(o=Aw(o,n+(!o.key||f&&f.key===o.key?"":(""+o.key).replace(_0,"$&/")+"/")+t)),e.push(o)),1;if(f=0,i=i===""?".":i+":",E0(t))for(var y=0;y<t.length;y++){l=t[y];var x=i+Dh(l,y);f+=Fc(l,e,n,x,o)}else if(x=_w(t),typeof x=="function")for(t=x.call(t),y=0;!(l=t.next()).done;)l=l.value,x=i+Dh(l,y++),f+=Fc(l,e,n,x,o);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return f}function pc(t,e,n){if(t==null)return t;var i=[],o=0;return Fc(t,i,"","",function(l){return e.call(n,l,o++)}),i}function vw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jn={current:null},Vc={transition:null},Iw={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:Vc,ReactCurrentOwner:Ud};function am(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:pc,forEach:function(t,e,n){pc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return pc(t,function(){e++}),e},toArray:function(t){return pc(t,function(e){return e})||[]},only:function(t){if(!jd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=da;ze.Fragment=fw;ze.Profiler=gw;ze.PureComponent=Fd;ze.StrictMode=dw;ze.Suspense=yw;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iw;ze.act=am;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=tm({},t.props),o=t.key,l=t.ref,f=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,f=Ud.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var y=t.type.defaultProps;for(x in e)im.call(e,x)&&!sm.hasOwnProperty(x)&&(i[x]=e[x]===void 0&&y!==void 0?y[x]:e[x])}var x=arguments.length-2;if(x===1)i.children=n;else if(1<x){y=Array(x);for(var p=0;p<x;p++)y[p]=arguments[p+2];i.children=y}return{$$typeof:zl,type:t.type,key:o,ref:l,props:i,_owner:f}};ze.createContext=function(t){return t={$$typeof:mw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:pw,_context:t},t.Consumer=t};ze.createElement=om;ze.createFactory=function(t){var e=om.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:xw,render:t}};ze.isValidElement=jd;ze.lazy=function(t){return{$$typeof:Ew,_payload:{_status:-1,_result:t},_init:vw}};ze.memo=function(t,e){return{$$typeof:ww,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Vc.transition;Vc.transition={};try{t()}finally{Vc.transition=e}};ze.unstable_act=am;ze.useCallback=function(t,e){return jn.current.useCallback(t,e)};ze.useContext=function(t){return jn.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return jn.current.useDeferredValue(t)};ze.useEffect=function(t,e){return jn.current.useEffect(t,e)};ze.useId=function(){return jn.current.useId()};ze.useImperativeHandle=function(t,e,n){return jn.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return jn.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return jn.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return jn.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return jn.current.useReducer(t,e,n)};ze.useRef=function(t){return jn.current.useRef(t)};ze.useState=function(t){return jn.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return jn.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return jn.current.useTransition()};ze.version="18.3.1";Jp.exports=ze;var Oe=Jp.exports;const Ka=$p(Oe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw=Oe,Sw=Symbol.for("react.element"),Nw=Symbol.for("react.fragment"),Rw=Object.prototype.hasOwnProperty,bw=Tw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dw={key:!0,ref:!0,__self:!0,__source:!0};function lm(t,e,n){var i,o={},l=null,f=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(f=e.ref);for(i in e)Rw.call(e,i)&&!Dw.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:Sw,type:t,key:l,ref:f,props:o,_owner:bw.current}}Ku.Fragment=Nw;Ku.jsx=lm;Ku.jsxs=lm;Zp.exports=Ku;var N=Zp.exports,xf={},cm={exports:{}},hr={},um={exports:{}},hm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(pe,Ie){var Ne=pe.length;pe.push(Ie);e:for(;0<Ne;){var dt=Ne-1>>>1,Ve=pe[dt];if(0<o(Ve,Ie))pe[dt]=Ie,pe[Ne]=Ve,Ne=dt;else break e}}function n(pe){return pe.length===0?null:pe[0]}function i(pe){if(pe.length===0)return null;var Ie=pe[0],Ne=pe.pop();if(Ne!==Ie){pe[0]=Ne;e:for(var dt=0,Ve=pe.length,Mn=Ve>>>1;dt<Mn;){var ht=2*(dt+1)-1,Dr=pe[ht],_e=ht+1,dr=pe[_e];if(0>o(Dr,Ne))_e<Ve&&0>o(dr,Dr)?(pe[dt]=dr,pe[_e]=Ne,dt=_e):(pe[dt]=Dr,pe[ht]=Ne,dt=ht);else if(_e<Ve&&0>o(dr,Ne))pe[dt]=dr,pe[_e]=Ne,dt=_e;else break e}}return Ie}function o(pe,Ie){var Ne=pe.sortIndex-Ie.sortIndex;return Ne!==0?Ne:pe.id-Ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var f=Date,y=f.now();t.unstable_now=function(){return f.now()-y}}var x=[],p=[],E=1,A=null,S=3,M=!1,j=!1,X=!1,q=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(pe){for(var Ie=n(p);Ie!==null;){if(Ie.callback===null)i(p);else if(Ie.startTime<=pe)i(p),Ie.sortIndex=Ie.expirationTime,e(x,Ie);else break;Ie=n(p)}}function Z(pe){if(X=!1,F(pe),!j)if(n(x)!==null)j=!0,Nt(le);else{var Ie=n(p);Ie!==null&&be(Z,Ie.startTime-pe)}}function le(pe,Ie){j=!1,X&&(X=!1,z(D),D=-1),M=!0;var Ne=S;try{for(F(Ie),A=n(x);A!==null&&(!(A.expirationTime>Ie)||pe&&!H());){var dt=A.callback;if(typeof dt=="function"){A.callback=null,S=A.priorityLevel;var Ve=dt(A.expirationTime<=Ie);Ie=t.unstable_now(),typeof Ve=="function"?A.callback=Ve:A===n(x)&&i(x),F(Ie)}else i(x);A=n(x)}if(A!==null)var Mn=!0;else{var ht=n(p);ht!==null&&be(Z,ht.startTime-Ie),Mn=!1}return Mn}finally{A=null,S=Ne,M=!1}}var Y=!1,b=null,D=-1,O=5,U=-1;function H(){return!(t.unstable_now()-U<O)}function W(){if(b!==null){var pe=t.unstable_now();U=pe;var Ie=!0;try{Ie=b(!0,pe)}finally{Ie?V():(Y=!1,b=null)}}else Y=!1}var V;if(typeof L=="function")V=function(){L(W)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,re=He.port2;He.port1.onmessage=W,V=function(){re.postMessage(null)}}else V=function(){q(W,0)};function Nt(pe){b=pe,Y||(Y=!0,V())}function be(pe,Ie){D=q(function(){pe(t.unstable_now())},Ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(pe){pe.callback=null},t.unstable_continueExecution=function(){j||M||(j=!0,Nt(le))},t.unstable_forceFrameRate=function(pe){0>pe||125<pe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<pe?Math.floor(1e3/pe):5},t.unstable_getCurrentPriorityLevel=function(){return S},t.unstable_getFirstCallbackNode=function(){return n(x)},t.unstable_next=function(pe){switch(S){case 1:case 2:case 3:var Ie=3;break;default:Ie=S}var Ne=S;S=Ie;try{return pe()}finally{S=Ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(pe,Ie){switch(pe){case 1:case 2:case 3:case 4:case 5:break;default:pe=3}var Ne=S;S=pe;try{return Ie()}finally{S=Ne}},t.unstable_scheduleCallback=function(pe,Ie,Ne){var dt=t.unstable_now();switch(typeof Ne=="object"&&Ne!==null?(Ne=Ne.delay,Ne=typeof Ne=="number"&&0<Ne?dt+Ne:dt):Ne=dt,pe){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=Ne+Ve,pe={id:E++,callback:Ie,priorityLevel:pe,startTime:Ne,expirationTime:Ve,sortIndex:-1},Ne>dt?(pe.sortIndex=Ne,e(p,pe),n(x)===null&&pe===n(p)&&(X?(z(D),D=-1):X=!0,be(Z,Ne-dt))):(pe.sortIndex=Ve,e(x,pe),j||M||(j=!0,Nt(le))),pe},t.unstable_shouldYield=H,t.unstable_wrapCallback=function(pe){var Ie=S;return function(){var Ne=S;S=Ie;try{return pe.apply(this,arguments)}finally{S=Ne}}}})(hm);um.exports=hm;var Ow=um.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pw=Oe,ur=Ow;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fm=new Set,xl={};function ao(t,e){ea(t,e),ea(t+"Capture",e)}function ea(t,e){for(xl[t]=e,t=0;t<e.length;t++)fm.add(e[t])}var Ri=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yf=Object.prototype.hasOwnProperty,kw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A0={},C0={};function Mw(t){return yf.call(C0,t)?!0:yf.call(A0,t)?!1:kw.test(t)?C0[t]=!0:(A0[t]=!0,!1)}function Lw(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Bw(t,e,n,i){if(e===null||typeof e>"u"||Lw(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zn(t,e,n,i,o,l,f){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=f}var Cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Cn[t]=new zn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Cn[e]=new zn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Cn[t]=new zn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Cn[t]=new zn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Cn[t]=new zn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Cn[t]=new zn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Cn[t]=new zn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Cn[t]=new zn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Cn[t]=new zn(t,5,!1,t.toLowerCase(),null,!1,!1)});var zd=/[\-:]([a-z])/g;function Hd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(zd,Hd);Cn[e]=new zn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(zd,Hd);Cn[e]=new zn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(zd,Hd);Cn[e]=new zn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Cn[t]=new zn(t,1,!1,t.toLowerCase(),null,!1,!1)});Cn.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Cn[t]=new zn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gd(t,e,n,i){var o=Cn.hasOwnProperty(e)?Cn[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Bw(e,n,o,i)&&(n=null),i||o===null?Mw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Bi=Pw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mc=Symbol.for("react.element"),Do=Symbol.for("react.portal"),Oo=Symbol.for("react.fragment"),Wd=Symbol.for("react.strict_mode"),wf=Symbol.for("react.profiler"),dm=Symbol.for("react.provider"),gm=Symbol.for("react.context"),Xd=Symbol.for("react.forward_ref"),Ef=Symbol.for("react.suspense"),_f=Symbol.for("react.suspense_list"),Kd=Symbol.for("react.memo"),Ji=Symbol.for("react.lazy"),pm=Symbol.for("react.offscreen"),v0=Symbol.iterator;function La(t){return t===null||typeof t!="object"?null:(t=v0&&t[v0]||t["@@iterator"],typeof t=="function"?t:null)}var Lt=Object.assign,Oh;function qa(t){if(Oh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Oh=e&&e[1]||""}return`
`+Oh+t}var Ph=!1;function kh(t,e){if(!t||Ph)return"";Ph=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var i=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){i=p}t.call(e.prototype)}else{try{throw Error()}catch(p){i=p}t()}}catch(p){if(p&&i&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),l=i.stack.split(`
`),f=o.length-1,y=l.length-1;1<=f&&0<=y&&o[f]!==l[y];)y--;for(;1<=f&&0<=y;f--,y--)if(o[f]!==l[y]){if(f!==1||y!==1)do if(f--,y--,0>y||o[f]!==l[y]){var x=`
`+o[f].replace(" at new "," at ");return t.displayName&&x.includes("<anonymous>")&&(x=x.replace("<anonymous>",t.displayName)),x}while(1<=f&&0<=y);break}}}finally{Ph=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?qa(t):""}function Fw(t){switch(t.tag){case 5:return qa(t.type);case 16:return qa("Lazy");case 13:return qa("Suspense");case 19:return qa("SuspenseList");case 0:case 2:case 15:return t=kh(t.type,!1),t;case 11:return t=kh(t.type.render,!1),t;case 1:return t=kh(t.type,!0),t;default:return""}}function Af(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oo:return"Fragment";case Do:return"Portal";case wf:return"Profiler";case Wd:return"StrictMode";case Ef:return"Suspense";case _f:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gm:return(t.displayName||"Context")+".Consumer";case dm:return(t._context.displayName||"Context")+".Provider";case Xd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kd:return e=t.displayName||null,e!==null?e:Af(t.type)||"Memo";case Ji:e=t._payload,t=t._init;try{return Af(t(e))}catch{}}return null}function Vw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Af(e);case 8:return e===Wd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ws(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function mm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Uw(t){var e=mm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function xc(t){t._valueTracker||(t._valueTracker=Uw(t))}function xm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=mm(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function nu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cf(t,e){var n=e.checked;return Lt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function I0(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ws(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ym(t,e){e=e.checked,e!=null&&Gd(t,"checked",e,!1)}function vf(t,e){ym(t,e);var n=ws(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?If(t,e.type,n):e.hasOwnProperty("defaultValue")&&If(t,e.type,ws(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function T0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function If(t,e,n){(e!=="number"||nu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ya=Array.isArray;function Go(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ws(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Tf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Lt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function S0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(Ya(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ws(n)}}function wm(t,e){var n=ws(e.value),i=ws(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function N0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Em(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Em(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yc,_m=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yc=yc||document.createElement("div"),yc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jw=["Webkit","ms","Moz","O"];Object.keys(nl).forEach(function(t){jw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nl[e]=nl[t]})});function Am(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nl.hasOwnProperty(t)&&nl[t]?(""+e).trim():e+"px"}function Cm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=Am(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var zw=Lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nf(t,e){if(e){if(zw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function Rf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bf=null;function qd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Df=null,Wo=null,Xo=null;function R0(t){if(t=Wl(t)){if(typeof Df!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=Zu(e),Df(t.stateNode,t.type,e))}}function vm(t){Wo?Xo?Xo.push(t):Xo=[t]:Wo=t}function Im(){if(Wo){var t=Wo,e=Xo;if(Xo=Wo=null,R0(t),e)for(t=0;t<e.length;t++)R0(e[t])}}function Tm(t,e){return t(e)}function Sm(){}var Mh=!1;function Nm(t,e,n){if(Mh)return t(e,n);Mh=!0;try{return Tm(t,e,n)}finally{Mh=!1,(Wo!==null||Xo!==null)&&(Sm(),Im())}}function wl(t,e){var n=t.stateNode;if(n===null)return null;var i=Zu(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var Of=!1;if(Ri)try{var Ba={};Object.defineProperty(Ba,"passive",{get:function(){Of=!0}}),window.addEventListener("test",Ba,Ba),window.removeEventListener("test",Ba,Ba)}catch{Of=!1}function Hw(t,e,n,i,o,l,f,y,x){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(E){this.onError(E)}}var rl=!1,ru=null,iu=!1,Pf=null,Gw={onError:function(t){rl=!0,ru=t}};function Ww(t,e,n,i,o,l,f,y,x){rl=!1,ru=null,Hw.apply(Gw,arguments)}function Xw(t,e,n,i,o,l,f,y,x){if(Ww.apply(this,arguments),rl){if(rl){var p=ru;rl=!1,ru=null}else throw Error(ce(198));iu||(iu=!0,Pf=p)}}function lo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function b0(t){if(lo(t)!==t)throw Error(ce(188))}function Kw(t){var e=t.alternate;if(!e){if(e=lo(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return b0(o),t;if(l===i)return b0(o),e;l=l.sibling}throw Error(ce(188))}if(n.return!==i.return)n=o,i=l;else{for(var f=!1,y=o.child;y;){if(y===n){f=!0,n=o,i=l;break}if(y===i){f=!0,i=o,n=l;break}y=y.sibling}if(!f){for(y=l.child;y;){if(y===n){f=!0,n=l,i=o;break}if(y===i){f=!0,i=l,n=o;break}y=y.sibling}if(!f)throw Error(ce(189))}}if(n.alternate!==i)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function bm(t){return t=Kw(t),t!==null?Dm(t):null}function Dm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dm(t);if(e!==null)return e;t=t.sibling}return null}var Om=ur.unstable_scheduleCallback,D0=ur.unstable_cancelCallback,qw=ur.unstable_shouldYield,Yw=ur.unstable_requestPaint,Xt=ur.unstable_now,Qw=ur.unstable_getCurrentPriorityLevel,Yd=ur.unstable_ImmediatePriority,Pm=ur.unstable_UserBlockingPriority,su=ur.unstable_NormalPriority,$w=ur.unstable_LowPriority,km=ur.unstable_IdlePriority,qu=null,ci=null;function Zw(t){if(ci&&typeof ci.onCommitFiberRoot=="function")try{ci.onCommitFiberRoot(qu,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:tE,Jw=Math.log,eE=Math.LN2;function tE(t){return t>>>=0,t===0?32:31-(Jw(t)/eE|0)|0}var wc=64,Ec=4194304;function Qa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ou(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,f=n&268435455;if(f!==0){var y=f&~o;y!==0?i=Qa(y):(l&=f,l!==0&&(i=Qa(l)))}else f=n&~o,f!==0?i=Qa(f):l!==0&&(i=Qa(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-zr(e),o=1<<n,i|=t[n],e&=~o;return i}function nE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rE(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var f=31-zr(l),y=1<<f,x=o[f];x===-1?(!(y&n)||y&i)&&(o[f]=nE(y,e)):x<=e&&(t.expiredLanes|=y),l&=~y}}function kf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mm(){var t=wc;return wc<<=1,!(wc&4194240)&&(wc=64),t}function Lh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=n}function iE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-zr(n),l=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~l}}function Qd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-zr(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var ut=0;function Lm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Bm,$d,Fm,Vm,Um,Mf=!1,_c=[],os=null,as=null,ls=null,El=new Map,_l=new Map,ts=[],sE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function O0(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":El.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(e.pointerId)}}function Fa(t,e,n,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},e!==null&&(e=Wl(e),e!==null&&$d(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function oE(t,e,n,i,o){switch(e){case"focusin":return os=Fa(os,t,e,n,i,o),!0;case"dragenter":return as=Fa(as,t,e,n,i,o),!0;case"mouseover":return ls=Fa(ls,t,e,n,i,o),!0;case"pointerover":var l=o.pointerId;return El.set(l,Fa(El.get(l)||null,t,e,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,_l.set(l,Fa(_l.get(l)||null,t,e,n,i,o)),!0}return!1}function jm(t){var e=Xs(t.target);if(e!==null){var n=lo(e);if(n!==null){if(e=n.tag,e===13){if(e=Rm(n),e!==null){t.blockedOn=e,Um(t.priority,function(){Fm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);bf=i,n.target.dispatchEvent(i),bf=null}else return e=Wl(n),e!==null&&$d(e),t.blockedOn=n,!1;e.shift()}return!0}function P0(t,e,n){Uc(t)&&n.delete(e)}function aE(){Mf=!1,os!==null&&Uc(os)&&(os=null),as!==null&&Uc(as)&&(as=null),ls!==null&&Uc(ls)&&(ls=null),El.forEach(P0),_l.forEach(P0)}function Va(t,e){t.blockedOn===e&&(t.blockedOn=null,Mf||(Mf=!0,ur.unstable_scheduleCallback(ur.unstable_NormalPriority,aE)))}function Al(t){function e(o){return Va(o,t)}if(0<_c.length){Va(_c[0],t);for(var n=1;n<_c.length;n++){var i=_c[n];i.blockedOn===t&&(i.blockedOn=null)}}for(os!==null&&Va(os,t),as!==null&&Va(as,t),ls!==null&&Va(ls,t),El.forEach(e),_l.forEach(e),n=0;n<ts.length;n++)i=ts[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ts.length&&(n=ts[0],n.blockedOn===null);)jm(n),n.blockedOn===null&&ts.shift()}var Ko=Bi.ReactCurrentBatchConfig,au=!0;function lE(t,e,n,i){var o=ut,l=Ko.transition;Ko.transition=null;try{ut=1,Zd(t,e,n,i)}finally{ut=o,Ko.transition=l}}function cE(t,e,n,i){var o=ut,l=Ko.transition;Ko.transition=null;try{ut=4,Zd(t,e,n,i)}finally{ut=o,Ko.transition=l}}function Zd(t,e,n,i){if(au){var o=Lf(t,e,n,i);if(o===null)Xh(t,e,i,lu,n),O0(t,i);else if(oE(o,t,e,n,i))i.stopPropagation();else if(O0(t,i),e&4&&-1<sE.indexOf(t)){for(;o!==null;){var l=Wl(o);if(l!==null&&Bm(l),l=Lf(t,e,n,i),l===null&&Xh(t,e,i,lu,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else Xh(t,e,i,null,n)}}var lu=null;function Lf(t,e,n,i){if(lu=null,t=qd(i),t=Xs(t),t!==null)if(e=lo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lu=t,null}function zm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qw()){case Yd:return 1;case Pm:return 4;case su:case $w:return 16;case km:return 536870912;default:return 16}default:return 16}}var rs=null,Jd=null,jc=null;function Hm(){if(jc)return jc;var t,e=Jd,n=e.length,i,o="value"in rs?rs.value:rs.textContent,l=o.length;for(t=0;t<n&&e[t]===o[t];t++);var f=n-t;for(i=1;i<=f&&e[n-i]===o[l-i];i++);return jc=o.slice(t,1<i?1-i:void 0)}function zc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ac(){return!0}function k0(){return!1}function fr(t){function e(n,i,o,l,f){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var y in t)t.hasOwnProperty(y)&&(n=t[y],this[y]=n?n(l):l[y]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ac:k0,this.isPropagationStopped=k0,this}return Lt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ac)},persist:function(){},isPersistent:Ac}),e}var ga={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e1=fr(ga),Gl=Lt({},ga,{view:0,detail:0}),uE=fr(Gl),Bh,Fh,Ua,Yu=Lt({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ua&&(Ua&&t.type==="mousemove"?(Bh=t.screenX-Ua.screenX,Fh=t.screenY-Ua.screenY):Fh=Bh=0,Ua=t),Bh)},movementY:function(t){return"movementY"in t?t.movementY:Fh}}),M0=fr(Yu),hE=Lt({},Yu,{dataTransfer:0}),fE=fr(hE),dE=Lt({},Gl,{relatedTarget:0}),Vh=fr(dE),gE=Lt({},ga,{animationName:0,elapsedTime:0,pseudoElement:0}),pE=fr(gE),mE=Lt({},ga,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xE=fr(mE),yE=Lt({},ga,{data:0}),L0=fr(yE),wE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_E={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_E[t])?!!e[t]:!1}function t1(){return AE}var CE=Lt({},Gl,{key:function(t){if(t.key){var e=wE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t1,charCode:function(t){return t.type==="keypress"?zc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vE=fr(CE),IE=Lt({},Yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B0=fr(IE),TE=Lt({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t1}),SE=fr(TE),NE=Lt({},ga,{propertyName:0,elapsedTime:0,pseudoElement:0}),RE=fr(NE),bE=Lt({},Yu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),DE=fr(bE),OE=[9,13,27,32],n1=Ri&&"CompositionEvent"in window,il=null;Ri&&"documentMode"in document&&(il=document.documentMode);var PE=Ri&&"TextEvent"in window&&!il,Gm=Ri&&(!n1||il&&8<il&&11>=il),F0=String.fromCharCode(32),V0=!1;function Wm(t,e){switch(t){case"keyup":return OE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Po=!1;function kE(t,e){switch(t){case"compositionend":return Xm(e);case"keypress":return e.which!==32?null:(V0=!0,F0);case"textInput":return t=e.data,t===F0&&V0?null:t;default:return null}}function ME(t,e){if(Po)return t==="compositionend"||!n1&&Wm(t,e)?(t=Hm(),jc=Jd=rs=null,Po=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Gm&&e.locale!=="ko"?null:e.data;default:return null}}var LE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LE[t.type]:e==="textarea"}function Km(t,e,n,i){vm(i),e=cu(e,"onChange"),0<e.length&&(n=new e1("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var sl=null,Cl=null;function BE(t){i2(t,0)}function Qu(t){var e=Lo(t);if(xm(e))return t}function FE(t,e){if(t==="change")return e}var qm=!1;if(Ri){var Uh;if(Ri){var jh="oninput"in document;if(!jh){var j0=document.createElement("div");j0.setAttribute("oninput","return;"),jh=typeof j0.oninput=="function"}Uh=jh}else Uh=!1;qm=Uh&&(!document.documentMode||9<document.documentMode)}function z0(){sl&&(sl.detachEvent("onpropertychange",Ym),Cl=sl=null)}function Ym(t){if(t.propertyName==="value"&&Qu(Cl)){var e=[];Km(e,Cl,t,qd(t)),Nm(BE,e)}}function VE(t,e,n){t==="focusin"?(z0(),sl=e,Cl=n,sl.attachEvent("onpropertychange",Ym)):t==="focusout"&&z0()}function UE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qu(Cl)}function jE(t,e){if(t==="click")return Qu(e)}function zE(t,e){if(t==="input"||t==="change")return Qu(e)}function HE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wr=typeof Object.is=="function"?Object.is:HE;function vl(t,e){if(Wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!yf.call(e,o)||!Wr(t[o],e[o]))return!1}return!0}function H0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function G0(t,e){var n=H0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=H0(n)}}function Qm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $m(){for(var t=window,e=nu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nu(t.document)}return e}function r1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GE(t){var e=$m(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Qm(n.ownerDocument.documentElement,n)){if(i!==null&&r1(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=G0(n,l);var f=G0(n,i);o&&f&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==f.node||t.focusOffset!==f.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(f.node,f.offset)):(e.setEnd(f.node,f.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WE=Ri&&"documentMode"in document&&11>=document.documentMode,ko=null,Bf=null,ol=null,Ff=!1;function W0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ff||ko==null||ko!==nu(i)||(i=ko,"selectionStart"in i&&r1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ol&&vl(ol,i)||(ol=i,i=cu(Bf,"onSelect"),0<i.length&&(e=new e1("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ko)))}function Cc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Mo={animationend:Cc("Animation","AnimationEnd"),animationiteration:Cc("Animation","AnimationIteration"),animationstart:Cc("Animation","AnimationStart"),transitionend:Cc("Transition","TransitionEnd")},zh={},Zm={};Ri&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete Mo.animationend.animation,delete Mo.animationiteration.animation,delete Mo.animationstart.animation),"TransitionEvent"in window||delete Mo.transitionend.transition);function $u(t){if(zh[t])return zh[t];if(!Mo[t])return t;var e=Mo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Zm)return zh[t]=e[n];return t}var Jm=$u("animationend"),e2=$u("animationiteration"),t2=$u("animationstart"),n2=$u("transitionend"),r2=new Map,X0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ss(t,e){r2.set(t,e),ao(e,[t])}for(var Hh=0;Hh<X0.length;Hh++){var Gh=X0[Hh],XE=Gh.toLowerCase(),KE=Gh[0].toUpperCase()+Gh.slice(1);Ss(XE,"on"+KE)}Ss(Jm,"onAnimationEnd");Ss(e2,"onAnimationIteration");Ss(t2,"onAnimationStart");Ss("dblclick","onDoubleClick");Ss("focusin","onFocus");Ss("focusout","onBlur");Ss(n2,"onTransitionEnd");ea("onMouseEnter",["mouseout","mouseover"]);ea("onMouseLeave",["mouseout","mouseover"]);ea("onPointerEnter",["pointerout","pointerover"]);ea("onPointerLeave",["pointerout","pointerover"]);ao("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ao("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ao("onBeforeInput",["compositionend","keypress","textInput","paste"]);ao("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ao("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $a="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qE=new Set("cancel close invalid load scroll toggle".split(" ").concat($a));function K0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,Xw(i,e,void 0,t),t.currentTarget=null}function i2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var f=i.length-1;0<=f;f--){var y=i[f],x=y.instance,p=y.currentTarget;if(y=y.listener,x!==l&&o.isPropagationStopped())break e;K0(o,y,p),l=x}else for(f=0;f<i.length;f++){if(y=i[f],x=y.instance,p=y.currentTarget,y=y.listener,x!==l&&o.isPropagationStopped())break e;K0(o,y,p),l=x}}}if(iu)throw t=Pf,iu=!1,Pf=null,t}function vt(t,e){var n=e[Hf];n===void 0&&(n=e[Hf]=new Set);var i=t+"__bubble";n.has(i)||(s2(e,t,2,!1),n.add(i))}function Wh(t,e,n){var i=0;e&&(i|=4),s2(n,t,i,e)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Il(t){if(!t[vc]){t[vc]=!0,fm.forEach(function(n){n!=="selectionchange"&&(qE.has(n)||Wh(n,!1,t),Wh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vc]||(e[vc]=!0,Wh("selectionchange",!1,e))}}function s2(t,e,n,i){switch(zm(e)){case 1:var o=lE;break;case 4:o=cE;break;default:o=Zd}n=o.bind(null,e,n,t),o=void 0,!Of||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Xh(t,e,n,i,o){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var y=i.stateNode.containerInfo;if(y===o||y.nodeType===8&&y.parentNode===o)break;if(f===4)for(f=i.return;f!==null;){var x=f.tag;if((x===3||x===4)&&(x=f.stateNode.containerInfo,x===o||x.nodeType===8&&x.parentNode===o))return;f=f.return}for(;y!==null;){if(f=Xs(y),f===null)return;if(x=f.tag,x===5||x===6){i=l=f;continue e}y=y.parentNode}}i=i.return}Nm(function(){var p=l,E=qd(n),A=[];e:{var S=r2.get(t);if(S!==void 0){var M=e1,j=t;switch(t){case"keypress":if(zc(n)===0)break e;case"keydown":case"keyup":M=vE;break;case"focusin":j="focus",M=Vh;break;case"focusout":j="blur",M=Vh;break;case"beforeblur":case"afterblur":M=Vh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=M0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=fE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=SE;break;case Jm:case e2:case t2:M=pE;break;case n2:M=RE;break;case"scroll":M=uE;break;case"wheel":M=DE;break;case"copy":case"cut":case"paste":M=xE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=B0}var X=(e&4)!==0,q=!X&&t==="scroll",z=X?S!==null?S+"Capture":null:S;X=[];for(var L=p,F;L!==null;){F=L;var Z=F.stateNode;if(F.tag===5&&Z!==null&&(F=Z,z!==null&&(Z=wl(L,z),Z!=null&&X.push(Tl(L,Z,F)))),q)break;L=L.return}0<X.length&&(S=new M(S,j,null,n,E),A.push({event:S,listeners:X}))}}if(!(e&7)){e:{if(S=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",S&&n!==bf&&(j=n.relatedTarget||n.fromElement)&&(Xs(j)||j[bi]))break e;if((M||S)&&(S=E.window===E?E:(S=E.ownerDocument)?S.defaultView||S.parentWindow:window,M?(j=n.relatedTarget||n.toElement,M=p,j=j?Xs(j):null,j!==null&&(q=lo(j),j!==q||j.tag!==5&&j.tag!==6)&&(j=null)):(M=null,j=p),M!==j)){if(X=M0,Z="onMouseLeave",z="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(X=B0,Z="onPointerLeave",z="onPointerEnter",L="pointer"),q=M==null?S:Lo(M),F=j==null?S:Lo(j),S=new X(Z,L+"leave",M,n,E),S.target=q,S.relatedTarget=F,Z=null,Xs(E)===p&&(X=new X(z,L+"enter",j,n,E),X.target=F,X.relatedTarget=q,Z=X),q=Z,M&&j)t:{for(X=M,z=j,L=0,F=X;F;F=Io(F))L++;for(F=0,Z=z;Z;Z=Io(Z))F++;for(;0<L-F;)X=Io(X),L--;for(;0<F-L;)z=Io(z),F--;for(;L--;){if(X===z||z!==null&&X===z.alternate)break t;X=Io(X),z=Io(z)}X=null}else X=null;M!==null&&q0(A,S,M,X,!1),j!==null&&q!==null&&q0(A,q,j,X,!0)}}e:{if(S=p?Lo(p):window,M=S.nodeName&&S.nodeName.toLowerCase(),M==="select"||M==="input"&&S.type==="file")var le=FE;else if(U0(S))if(qm)le=zE;else{le=UE;var Y=VE}else(M=S.nodeName)&&M.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(le=jE);if(le&&(le=le(t,p))){Km(A,le,n,E);break e}Y&&Y(t,S,p),t==="focusout"&&(Y=S._wrapperState)&&Y.controlled&&S.type==="number"&&If(S,"number",S.value)}switch(Y=p?Lo(p):window,t){case"focusin":(U0(Y)||Y.contentEditable==="true")&&(ko=Y,Bf=p,ol=null);break;case"focusout":ol=Bf=ko=null;break;case"mousedown":Ff=!0;break;case"contextmenu":case"mouseup":case"dragend":Ff=!1,W0(A,n,E);break;case"selectionchange":if(WE)break;case"keydown":case"keyup":W0(A,n,E)}var b;if(n1)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Po?Wm(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Gm&&n.locale!=="ko"&&(Po||D!=="onCompositionStart"?D==="onCompositionEnd"&&Po&&(b=Hm()):(rs=E,Jd="value"in rs?rs.value:rs.textContent,Po=!0)),Y=cu(p,D),0<Y.length&&(D=new L0(D,t,null,n,E),A.push({event:D,listeners:Y}),b?D.data=b:(b=Xm(n),b!==null&&(D.data=b)))),(b=PE?kE(t,n):ME(t,n))&&(p=cu(p,"onBeforeInput"),0<p.length&&(E=new L0("onBeforeInput","beforeinput",null,n,E),A.push({event:E,listeners:p}),E.data=b))}i2(A,e)})}function Tl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cu(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=wl(t,n),l!=null&&i.unshift(Tl(t,l,o)),l=wl(t,e),l!=null&&i.push(Tl(t,l,o))),t=t.return}return i}function Io(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function q0(t,e,n,i,o){for(var l=e._reactName,f=[];n!==null&&n!==i;){var y=n,x=y.alternate,p=y.stateNode;if(x!==null&&x===i)break;y.tag===5&&p!==null&&(y=p,o?(x=wl(n,l),x!=null&&f.unshift(Tl(n,x,y))):o||(x=wl(n,l),x!=null&&f.push(Tl(n,x,y)))),n=n.return}f.length!==0&&t.push({event:e,listeners:f})}var YE=/\r\n?/g,QE=/\u0000|\uFFFD/g;function Y0(t){return(typeof t=="string"?t:""+t).replace(YE,`
`).replace(QE,"")}function Ic(t,e,n){if(e=Y0(e),Y0(t)!==e&&n)throw Error(ce(425))}function uu(){}var Vf=null,Uf=null;function jf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zf=typeof setTimeout=="function"?setTimeout:void 0,$E=typeof clearTimeout=="function"?clearTimeout:void 0,Q0=typeof Promise=="function"?Promise:void 0,ZE=typeof queueMicrotask=="function"?queueMicrotask:typeof Q0<"u"?function(t){return Q0.resolve(null).then(t).catch(JE)}:zf;function JE(t){setTimeout(function(){throw t})}function Kh(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),Al(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);Al(e)}function cs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function $0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var pa=Math.random().toString(36).slice(2),li="__reactFiber$"+pa,Sl="__reactProps$"+pa,bi="__reactContainer$"+pa,Hf="__reactEvents$"+pa,e_="__reactListeners$"+pa,t_="__reactHandles$"+pa;function Xs(t){var e=t[li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bi]||n[li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=$0(t);t!==null;){if(n=t[li])return n;t=$0(t)}return e}t=n,n=t.parentNode}return null}function Wl(t){return t=t[li]||t[bi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function Zu(t){return t[Sl]||null}var Gf=[],Bo=-1;function Ns(t){return{current:t}}function St(t){0>Bo||(t.current=Gf[Bo],Gf[Bo]=null,Bo--)}function Et(t,e){Bo++,Gf[Bo]=t.current,t.current=e}var Es={},kn=Ns(Es),er=Ns(!1),Zs=Es;function ta(t,e){var n=t.type.contextTypes;if(!n)return Es;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function tr(t){return t=t.childContextTypes,t!=null}function hu(){St(er),St(kn)}function Z0(t,e,n){if(kn.current!==Es)throw Error(ce(168));Et(kn,e),Et(er,n)}function o2(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(ce(108,Vw(t)||"Unknown",o));return Lt({},n,i)}function fu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Es,Zs=kn.current,Et(kn,t),Et(er,er.current),!0}function J0(t,e,n){var i=t.stateNode;if(!i)throw Error(ce(169));n?(t=o2(t,e,Zs),i.__reactInternalMemoizedMergedChildContext=t,St(er),St(kn),Et(kn,t)):St(er),Et(er,n)}var vi=null,Ju=!1,qh=!1;function a2(t){vi===null?vi=[t]:vi.push(t)}function n_(t){Ju=!0,a2(t)}function Rs(){if(!qh&&vi!==null){qh=!0;var t=0,e=ut;try{var n=vi;for(ut=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}vi=null,Ju=!1}catch(o){throw vi!==null&&(vi=vi.slice(t+1)),Om(Yd,Rs),o}finally{ut=e,qh=!1}}return null}var Fo=[],Vo=0,du=null,gu=0,vr=[],Ir=0,Js=null,Ii=1,Ti="";function Hs(t,e){Fo[Vo++]=gu,Fo[Vo++]=du,du=t,gu=e}function l2(t,e,n){vr[Ir++]=Ii,vr[Ir++]=Ti,vr[Ir++]=Js,Js=t;var i=Ii;t=Ti;var o=32-zr(i)-1;i&=~(1<<o),n+=1;var l=32-zr(e)+o;if(30<l){var f=o-o%5;l=(i&(1<<f)-1).toString(32),i>>=f,o-=f,Ii=1<<32-zr(e)+o|n<<o|i,Ti=l+t}else Ii=1<<l|n<<o|i,Ti=t}function i1(t){t.return!==null&&(Hs(t,1),l2(t,1,0))}function s1(t){for(;t===du;)du=Fo[--Vo],Fo[Vo]=null,gu=Fo[--Vo],Fo[Vo]=null;for(;t===Js;)Js=vr[--Ir],vr[Ir]=null,Ti=vr[--Ir],vr[Ir]=null,Ii=vr[--Ir],vr[Ir]=null}var cr=null,ar=null,Rt=!1,jr=null;function c2(t,e){var n=Sr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function eg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cr=t,ar=cs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cr=t,ar=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Js!==null?{id:Ii,overflow:Ti}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Sr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cr=t,ar=null,!0):!1;default:return!1}}function Wf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xf(t){if(Rt){var e=ar;if(e){var n=e;if(!eg(t,e)){if(Wf(t))throw Error(ce(418));e=cs(n.nextSibling);var i=cr;e&&eg(t,e)?c2(i,n):(t.flags=t.flags&-4097|2,Rt=!1,cr=t)}}else{if(Wf(t))throw Error(ce(418));t.flags=t.flags&-4097|2,Rt=!1,cr=t}}}function tg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cr=t}function Tc(t){if(t!==cr)return!1;if(!Rt)return tg(t),Rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jf(t.type,t.memoizedProps)),e&&(e=ar)){if(Wf(t))throw u2(),Error(ce(418));for(;e;)c2(t,e),e=cs(e.nextSibling)}if(tg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ar=cs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ar=null}}else ar=cr?cs(t.stateNode.nextSibling):null;return!0}function u2(){for(var t=ar;t;)t=cs(t.nextSibling)}function na(){ar=cr=null,Rt=!1}function o1(t){jr===null?jr=[t]:jr.push(t)}var r_=Bi.ReactCurrentBatchConfig;function ja(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var i=n.stateNode}if(!i)throw Error(ce(147,t));var o=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(f){var y=o.refs;f===null?delete y[l]:y[l]=f},e._stringRef=l,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function Sc(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ng(t){var e=t._init;return e(t._payload)}function h2(t){function e(z,L){if(t){var F=z.deletions;F===null?(z.deletions=[L],z.flags|=16):F.push(L)}}function n(z,L){if(!t)return null;for(;L!==null;)e(z,L),L=L.sibling;return null}function i(z,L){for(z=new Map;L!==null;)L.key!==null?z.set(L.key,L):z.set(L.index,L),L=L.sibling;return z}function o(z,L){return z=ds(z,L),z.index=0,z.sibling=null,z}function l(z,L,F){return z.index=F,t?(F=z.alternate,F!==null?(F=F.index,F<L?(z.flags|=2,L):F):(z.flags|=2,L)):(z.flags|=1048576,L)}function f(z){return t&&z.alternate===null&&(z.flags|=2),z}function y(z,L,F,Z){return L===null||L.tag!==6?(L=tf(F,z.mode,Z),L.return=z,L):(L=o(L,F),L.return=z,L)}function x(z,L,F,Z){var le=F.type;return le===Oo?E(z,L,F.props.children,Z,F.key):L!==null&&(L.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Ji&&ng(le)===L.type)?(Z=o(L,F.props),Z.ref=ja(z,L,F),Z.return=z,Z):(Z=Yc(F.type,F.key,F.props,null,z.mode,Z),Z.ref=ja(z,L,F),Z.return=z,Z)}function p(z,L,F,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=nf(F,z.mode,Z),L.return=z,L):(L=o(L,F.children||[]),L.return=z,L)}function E(z,L,F,Z,le){return L===null||L.tag!==7?(L=$s(F,z.mode,Z,le),L.return=z,L):(L=o(L,F),L.return=z,L)}function A(z,L,F){if(typeof L=="string"&&L!==""||typeof L=="number")return L=tf(""+L,z.mode,F),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case mc:return F=Yc(L.type,L.key,L.props,null,z.mode,F),F.ref=ja(z,null,L),F.return=z,F;case Do:return L=nf(L,z.mode,F),L.return=z,L;case Ji:var Z=L._init;return A(z,Z(L._payload),F)}if(Ya(L)||La(L))return L=$s(L,z.mode,F,null),L.return=z,L;Sc(z,L)}return null}function S(z,L,F,Z){var le=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return le!==null?null:y(z,L,""+F,Z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case mc:return F.key===le?x(z,L,F,Z):null;case Do:return F.key===le?p(z,L,F,Z):null;case Ji:return le=F._init,S(z,L,le(F._payload),Z)}if(Ya(F)||La(F))return le!==null?null:E(z,L,F,Z,null);Sc(z,F)}return null}function M(z,L,F,Z,le){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return z=z.get(F)||null,y(L,z,""+Z,le);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case mc:return z=z.get(Z.key===null?F:Z.key)||null,x(L,z,Z,le);case Do:return z=z.get(Z.key===null?F:Z.key)||null,p(L,z,Z,le);case Ji:var Y=Z._init;return M(z,L,F,Y(Z._payload),le)}if(Ya(Z)||La(Z))return z=z.get(F)||null,E(L,z,Z,le,null);Sc(L,Z)}return null}function j(z,L,F,Z){for(var le=null,Y=null,b=L,D=L=0,O=null;b!==null&&D<F.length;D++){b.index>D?(O=b,b=null):O=b.sibling;var U=S(z,b,F[D],Z);if(U===null){b===null&&(b=O);break}t&&b&&U.alternate===null&&e(z,b),L=l(U,L,D),Y===null?le=U:Y.sibling=U,Y=U,b=O}if(D===F.length)return n(z,b),Rt&&Hs(z,D),le;if(b===null){for(;D<F.length;D++)b=A(z,F[D],Z),b!==null&&(L=l(b,L,D),Y===null?le=b:Y.sibling=b,Y=b);return Rt&&Hs(z,D),le}for(b=i(z,b);D<F.length;D++)O=M(b,z,D,F[D],Z),O!==null&&(t&&O.alternate!==null&&b.delete(O.key===null?D:O.key),L=l(O,L,D),Y===null?le=O:Y.sibling=O,Y=O);return t&&b.forEach(function(H){return e(z,H)}),Rt&&Hs(z,D),le}function X(z,L,F,Z){var le=La(F);if(typeof le!="function")throw Error(ce(150));if(F=le.call(F),F==null)throw Error(ce(151));for(var Y=le=null,b=L,D=L=0,O=null,U=F.next();b!==null&&!U.done;D++,U=F.next()){b.index>D?(O=b,b=null):O=b.sibling;var H=S(z,b,U.value,Z);if(H===null){b===null&&(b=O);break}t&&b&&H.alternate===null&&e(z,b),L=l(H,L,D),Y===null?le=H:Y.sibling=H,Y=H,b=O}if(U.done)return n(z,b),Rt&&Hs(z,D),le;if(b===null){for(;!U.done;D++,U=F.next())U=A(z,U.value,Z),U!==null&&(L=l(U,L,D),Y===null?le=U:Y.sibling=U,Y=U);return Rt&&Hs(z,D),le}for(b=i(z,b);!U.done;D++,U=F.next())U=M(b,z,D,U.value,Z),U!==null&&(t&&U.alternate!==null&&b.delete(U.key===null?D:U.key),L=l(U,L,D),Y===null?le=U:Y.sibling=U,Y=U);return t&&b.forEach(function(W){return e(z,W)}),Rt&&Hs(z,D),le}function q(z,L,F,Z){if(typeof F=="object"&&F!==null&&F.type===Oo&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case mc:e:{for(var le=F.key,Y=L;Y!==null;){if(Y.key===le){if(le=F.type,le===Oo){if(Y.tag===7){n(z,Y.sibling),L=o(Y,F.props.children),L.return=z,z=L;break e}}else if(Y.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Ji&&ng(le)===Y.type){n(z,Y.sibling),L=o(Y,F.props),L.ref=ja(z,Y,F),L.return=z,z=L;break e}n(z,Y);break}else e(z,Y);Y=Y.sibling}F.type===Oo?(L=$s(F.props.children,z.mode,Z,F.key),L.return=z,z=L):(Z=Yc(F.type,F.key,F.props,null,z.mode,Z),Z.ref=ja(z,L,F),Z.return=z,z=Z)}return f(z);case Do:e:{for(Y=F.key;L!==null;){if(L.key===Y)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){n(z,L.sibling),L=o(L,F.children||[]),L.return=z,z=L;break e}else{n(z,L);break}else e(z,L);L=L.sibling}L=nf(F,z.mode,Z),L.return=z,z=L}return f(z);case Ji:return Y=F._init,q(z,L,Y(F._payload),Z)}if(Ya(F))return j(z,L,F,Z);if(La(F))return X(z,L,F,Z);Sc(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,L!==null&&L.tag===6?(n(z,L.sibling),L=o(L,F),L.return=z,z=L):(n(z,L),L=tf(F,z.mode,Z),L.return=z,z=L),f(z)):n(z,L)}return q}var ra=h2(!0),f2=h2(!1),pu=Ns(null),mu=null,Uo=null,a1=null;function l1(){a1=Uo=mu=null}function c1(t){var e=pu.current;St(pu),t._currentValue=e}function Kf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function qo(t,e){mu=t,a1=Uo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Jn=!0),t.firstContext=null)}function Rr(t){var e=t._currentValue;if(a1!==t)if(t={context:t,memoizedValue:e,next:null},Uo===null){if(mu===null)throw Error(ce(308));Uo=t,mu.dependencies={lanes:0,firstContext:t}}else Uo=Uo.next=t;return e}var Ks=null;function u1(t){Ks===null?Ks=[t]:Ks.push(t)}function d2(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,u1(e)):(n.next=o.next,o.next=n),e.interleaved=n,Di(t,i)}function Di(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var es=!1;function h1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function g2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ni(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function us(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,et&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,Di(t,n)}return o=i.interleaved,o===null?(e.next=e,u1(i)):(e.next=o.next,o.next=e),i.interleaved=e,Di(t,n)}function Hc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Qd(t,n)}}function rg(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var f={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=f:l=l.next=f,n=n.next}while(n!==null);l===null?o=l=e:l=l.next=e}else o=l=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xu(t,e,n,i){var o=t.updateQueue;es=!1;var l=o.firstBaseUpdate,f=o.lastBaseUpdate,y=o.shared.pending;if(y!==null){o.shared.pending=null;var x=y,p=x.next;x.next=null,f===null?l=p:f.next=p,f=x;var E=t.alternate;E!==null&&(E=E.updateQueue,y=E.lastBaseUpdate,y!==f&&(y===null?E.firstBaseUpdate=p:y.next=p,E.lastBaseUpdate=x))}if(l!==null){var A=o.baseState;f=0,E=p=x=null,y=l;do{var S=y.lane,M=y.eventTime;if((i&S)===S){E!==null&&(E=E.next={eventTime:M,lane:0,tag:y.tag,payload:y.payload,callback:y.callback,next:null});e:{var j=t,X=y;switch(S=e,M=n,X.tag){case 1:if(j=X.payload,typeof j=="function"){A=j.call(M,A,S);break e}A=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=X.payload,S=typeof j=="function"?j.call(M,A,S):j,S==null)break e;A=Lt({},A,S);break e;case 2:es=!0}}y.callback!==null&&y.lane!==0&&(t.flags|=64,S=o.effects,S===null?o.effects=[y]:S.push(y))}else M={eventTime:M,lane:S,tag:y.tag,payload:y.payload,callback:y.callback,next:null},E===null?(p=E=M,x=A):E=E.next=M,f|=S;if(y=y.next,y===null){if(y=o.shared.pending,y===null)break;S=y,y=S.next,S.next=null,o.lastBaseUpdate=S,o.shared.pending=null}}while(1);if(E===null&&(x=A),o.baseState=x,o.firstBaseUpdate=p,o.lastBaseUpdate=E,e=o.shared.interleaved,e!==null){o=e;do f|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);to|=f,t.lanes=f,t.memoizedState=A}}function ig(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(ce(191,o));o.call(i)}}}var Xl={},ui=Ns(Xl),Nl=Ns(Xl),Rl=Ns(Xl);function qs(t){if(t===Xl)throw Error(ce(174));return t}function f1(t,e){switch(Et(Rl,e),Et(Nl,t),Et(ui,Xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sf(e,t)}St(ui),Et(ui,e)}function ia(){St(ui),St(Nl),St(Rl)}function p2(t){qs(Rl.current);var e=qs(ui.current),n=Sf(e,t.type);e!==n&&(Et(Nl,t),Et(ui,n))}function d1(t){Nl.current===t&&(St(ui),St(Nl))}var kt=Ns(0);function yu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yh=[];function g1(){for(var t=0;t<Yh.length;t++)Yh[t]._workInProgressVersionPrimary=null;Yh.length=0}var Gc=Bi.ReactCurrentDispatcher,Qh=Bi.ReactCurrentBatchConfig,eo=0,Mt=null,en=null,fn=null,wu=!1,al=!1,bl=0,i_=0;function Nn(){throw Error(ce(321))}function p1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wr(t[n],e[n]))return!1;return!0}function m1(t,e,n,i,o,l){if(eo=l,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gc.current=t===null||t.memoizedState===null?l_:c_,t=n(i,o),al){l=0;do{if(al=!1,bl=0,25<=l)throw Error(ce(301));l+=1,fn=en=null,e.updateQueue=null,Gc.current=u_,t=n(i,o)}while(al)}if(Gc.current=Eu,e=en!==null&&en.next!==null,eo=0,fn=en=Mt=null,wu=!1,e)throw Error(ce(300));return t}function x1(){var t=bl!==0;return bl=0,t}function si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Mt.memoizedState=fn=t:fn=fn.next=t,fn}function br(){if(en===null){var t=Mt.alternate;t=t!==null?t.memoizedState:null}else t=en.next;var e=fn===null?Mt.memoizedState:fn.next;if(e!==null)fn=e,en=t;else{if(t===null)throw Error(ce(310));en=t,t={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},fn===null?Mt.memoizedState=fn=t:fn=fn.next=t}return fn}function Dl(t,e){return typeof e=="function"?e(t):e}function $h(t){var e=br(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var i=en,o=i.baseQueue,l=n.pending;if(l!==null){if(o!==null){var f=o.next;o.next=l.next,l.next=f}i.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,i=i.baseState;var y=f=null,x=null,p=l;do{var E=p.lane;if((eo&E)===E)x!==null&&(x=x.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),i=p.hasEagerState?p.eagerState:t(i,p.action);else{var A={lane:E,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};x===null?(y=x=A,f=i):x=x.next=A,Mt.lanes|=E,to|=E}p=p.next}while(p!==null&&p!==l);x===null?f=i:x.next=y,Wr(i,e.memoizedState)||(Jn=!0),e.memoizedState=i,e.baseState=f,e.baseQueue=x,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do l=o.lane,Mt.lanes|=l,to|=l,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zh(t){var e=br(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,l=e.memoizedState;if(o!==null){n.pending=null;var f=o=o.next;do l=t(l,f.action),f=f.next;while(f!==o);Wr(l,e.memoizedState)||(Jn=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function m2(){}function x2(t,e){var n=Mt,i=br(),o=e(),l=!Wr(i.memoizedState,o);if(l&&(i.memoizedState=o,Jn=!0),i=i.queue,y1(E2.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||fn!==null&&fn.memoizedState.tag&1){if(n.flags|=2048,Ol(9,w2.bind(null,n,i,o,e),void 0,null),dn===null)throw Error(ce(349));eo&30||y2(n,e,o)}return o}function y2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function w2(t,e,n,i){e.value=n,e.getSnapshot=i,_2(e)&&A2(t)}function E2(t,e,n){return n(function(){_2(e)&&A2(t)})}function _2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wr(t,n)}catch{return!0}}function A2(t){var e=Di(t,1);e!==null&&Hr(e,t,1,-1)}function sg(t){var e=si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Dl,lastRenderedState:t},e.queue=t,t=t.dispatch=a_.bind(null,Mt,t),[e.memoizedState,t]}function Ol(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function C2(){return br().memoizedState}function Wc(t,e,n,i){var o=si();Mt.flags|=t,o.memoizedState=Ol(1|e,n,void 0,i===void 0?null:i)}function eh(t,e,n,i){var o=br();i=i===void 0?null:i;var l=void 0;if(en!==null){var f=en.memoizedState;if(l=f.destroy,i!==null&&p1(i,f.deps)){o.memoizedState=Ol(e,n,l,i);return}}Mt.flags|=t,o.memoizedState=Ol(1|e,n,l,i)}function og(t,e){return Wc(8390656,8,t,e)}function y1(t,e){return eh(2048,8,t,e)}function v2(t,e){return eh(4,2,t,e)}function I2(t,e){return eh(4,4,t,e)}function T2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function S2(t,e,n){return n=n!=null?n.concat([t]):null,eh(4,4,T2.bind(null,e,t),n)}function w1(){}function N2(t,e){var n=br();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&p1(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function R2(t,e){var n=br();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&p1(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function b2(t,e,n){return eo&21?(Wr(n,e)||(n=Mm(),Mt.lanes|=n,to|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Jn=!0),t.memoizedState=n)}function s_(t,e){var n=ut;ut=n!==0&&4>n?n:4,t(!0);var i=Qh.transition;Qh.transition={};try{t(!1),e()}finally{ut=n,Qh.transition=i}}function D2(){return br().memoizedState}function o_(t,e,n){var i=fs(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},O2(t))P2(e,n);else if(n=d2(t,e,n,i),n!==null){var o=Un();Hr(n,t,i,o),k2(n,e,i)}}function a_(t,e,n){var i=fs(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(O2(t))P2(e,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var f=e.lastRenderedState,y=l(f,n);if(o.hasEagerState=!0,o.eagerState=y,Wr(y,f)){var x=e.interleaved;x===null?(o.next=o,u1(e)):(o.next=x.next,x.next=o),e.interleaved=o;return}}catch{}finally{}n=d2(t,e,o,i),n!==null&&(o=Un(),Hr(n,t,i,o),k2(n,e,i))}}function O2(t){var e=t.alternate;return t===Mt||e!==null&&e===Mt}function P2(t,e){al=wu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function k2(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Qd(t,n)}}var Eu={readContext:Rr,useCallback:Nn,useContext:Nn,useEffect:Nn,useImperativeHandle:Nn,useInsertionEffect:Nn,useLayoutEffect:Nn,useMemo:Nn,useReducer:Nn,useRef:Nn,useState:Nn,useDebugValue:Nn,useDeferredValue:Nn,useTransition:Nn,useMutableSource:Nn,useSyncExternalStore:Nn,useId:Nn,unstable_isNewReconciler:!1},l_={readContext:Rr,useCallback:function(t,e){return si().memoizedState=[t,e===void 0?null:e],t},useContext:Rr,useEffect:og,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Wc(4194308,4,T2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Wc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wc(4,2,t,e)},useMemo:function(t,e){var n=si();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=si();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=o_.bind(null,Mt,t),[i.memoizedState,t]},useRef:function(t){var e=si();return t={current:t},e.memoizedState=t},useState:sg,useDebugValue:w1,useDeferredValue:function(t){return si().memoizedState=t},useTransition:function(){var t=sg(!1),e=t[0];return t=s_.bind(null,t[1]),si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Mt,o=si();if(Rt){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),dn===null)throw Error(ce(349));eo&30||y2(i,e,n)}o.memoizedState=n;var l={value:n,getSnapshot:e};return o.queue=l,og(E2.bind(null,i,l,t),[t]),i.flags|=2048,Ol(9,w2.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=si(),e=dn.identifierPrefix;if(Rt){var n=Ti,i=Ii;n=(i&~(1<<32-zr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=bl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=i_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},c_={readContext:Rr,useCallback:N2,useContext:Rr,useEffect:y1,useImperativeHandle:S2,useInsertionEffect:v2,useLayoutEffect:I2,useMemo:R2,useReducer:$h,useRef:C2,useState:function(){return $h(Dl)},useDebugValue:w1,useDeferredValue:function(t){var e=br();return b2(e,en.memoizedState,t)},useTransition:function(){var t=$h(Dl)[0],e=br().memoizedState;return[t,e]},useMutableSource:m2,useSyncExternalStore:x2,useId:D2,unstable_isNewReconciler:!1},u_={readContext:Rr,useCallback:N2,useContext:Rr,useEffect:y1,useImperativeHandle:S2,useInsertionEffect:v2,useLayoutEffect:I2,useMemo:R2,useReducer:Zh,useRef:C2,useState:function(){return Zh(Dl)},useDebugValue:w1,useDeferredValue:function(t){var e=br();return en===null?e.memoizedState=t:b2(e,en.memoizedState,t)},useTransition:function(){var t=Zh(Dl)[0],e=br().memoizedState;return[t,e]},useMutableSource:m2,useSyncExternalStore:x2,useId:D2,unstable_isNewReconciler:!1};function Vr(t,e){if(t&&t.defaultProps){e=Lt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Lt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var th={isMounted:function(t){return(t=t._reactInternals)?lo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Un(),o=fs(t),l=Ni(i,o);l.payload=e,n!=null&&(l.callback=n),e=us(t,l,o),e!==null&&(Hr(e,t,o,i),Hc(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Un(),o=fs(t),l=Ni(i,o);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=us(t,l,o),e!==null&&(Hr(e,t,o,i),Hc(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Un(),i=fs(t),o=Ni(n,i);o.tag=2,e!=null&&(o.callback=e),e=us(t,o,i),e!==null&&(Hr(e,t,i,n),Hc(e,t,i))}};function ag(t,e,n,i,o,l,f){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,f):e.prototype&&e.prototype.isPureReactComponent?!vl(n,i)||!vl(o,l):!0}function M2(t,e,n){var i=!1,o=Es,l=e.contextType;return typeof l=="object"&&l!==null?l=Rr(l):(o=tr(e)?Zs:kn.current,i=e.contextTypes,l=(i=i!=null)?ta(t,o):Es),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=th,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),e}function lg(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&th.enqueueReplaceState(e,e.state,null)}function Yf(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},h1(t);var l=e.contextType;typeof l=="object"&&l!==null?o.context=Rr(l):(l=tr(e)?Zs:kn.current,o.context=ta(t,l)),o.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(qf(t,e,l,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&th.enqueueReplaceState(o,o.state,null),xu(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function sa(t,e){try{var n="",i=e;do n+=Fw(i),i=i.return;while(i);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:o,digest:null}}function Jh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var h_=typeof WeakMap=="function"?WeakMap:Map;function L2(t,e,n){n=Ni(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Au||(Au=!0,od=i),Qf(t,e)},n}function B2(t,e,n){n=Ni(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){Qf(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Qf(t,e),typeof i!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var f=e.stack;this.componentDidCatch(e.value,{componentStack:f!==null?f:""})}),n}function cg(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new h_;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=I_.bind(null,t,e,n),e.then(t,t))}function ug(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hg(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ni(-1,1),e.tag=2,us(n,e,1))),n.lanes|=1),t)}var f_=Bi.ReactCurrentOwner,Jn=!1;function Vn(t,e,n,i){e.child=t===null?f2(e,null,n,i):ra(e,t.child,n,i)}function fg(t,e,n,i,o){n=n.render;var l=e.ref;return qo(e,o),i=m1(t,e,n,i,l,o),n=x1(),t!==null&&!Jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Oi(t,e,o)):(Rt&&n&&i1(e),e.flags|=1,Vn(t,e,i,o),e.child)}function dg(t,e,n,i,o){if(t===null){var l=n.type;return typeof l=="function"&&!S1(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,F2(t,e,l,i,o)):(t=Yc(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&o)){var f=l.memoizedProps;if(n=n.compare,n=n!==null?n:vl,n(f,i)&&t.ref===e.ref)return Oi(t,e,o)}return e.flags|=1,t=ds(l,i),t.ref=e.ref,t.return=e,e.child=t}function F2(t,e,n,i,o){if(t!==null){var l=t.memoizedProps;if(vl(l,i)&&t.ref===e.ref)if(Jn=!1,e.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&(Jn=!0);else return e.lanes=t.lanes,Oi(t,e,o)}return $f(t,e,n,i,o)}function V2(t,e,n){var i=e.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(zo,or),or|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Et(zo,or),or|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,Et(zo,or),or|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,Et(zo,or),or|=i;return Vn(t,e,o,n),e.child}function U2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $f(t,e,n,i,o){var l=tr(n)?Zs:kn.current;return l=ta(e,l),qo(e,o),n=m1(t,e,n,i,l,o),i=x1(),t!==null&&!Jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Oi(t,e,o)):(Rt&&i&&i1(e),e.flags|=1,Vn(t,e,n,o),e.child)}function gg(t,e,n,i,o){if(tr(n)){var l=!0;fu(e)}else l=!1;if(qo(e,o),e.stateNode===null)Xc(t,e),M2(e,n,i),Yf(e,n,i,o),i=!0;else if(t===null){var f=e.stateNode,y=e.memoizedProps;f.props=y;var x=f.context,p=n.contextType;typeof p=="object"&&p!==null?p=Rr(p):(p=tr(n)?Zs:kn.current,p=ta(e,p));var E=n.getDerivedStateFromProps,A=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function";A||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==i||x!==p)&&lg(e,f,i,p),es=!1;var S=e.memoizedState;f.state=S,xu(e,i,f,o),x=e.memoizedState,y!==i||S!==x||er.current||es?(typeof E=="function"&&(qf(e,n,E,i),x=e.memoizedState),(y=es||ag(e,n,y,i,S,x,p))?(A||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(e.flags|=4194308)):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=x),f.props=i,f.state=x,f.context=p,i=y):(typeof f.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{f=e.stateNode,g2(t,e),y=e.memoizedProps,p=e.type===e.elementType?y:Vr(e.type,y),f.props=p,A=e.pendingProps,S=f.context,x=n.contextType,typeof x=="object"&&x!==null?x=Rr(x):(x=tr(n)?Zs:kn.current,x=ta(e,x));var M=n.getDerivedStateFromProps;(E=typeof M=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==A||S!==x)&&lg(e,f,i,x),es=!1,S=e.memoizedState,f.state=S,xu(e,i,f,o);var j=e.memoizedState;y!==A||S!==j||er.current||es?(typeof M=="function"&&(qf(e,n,M,i),j=e.memoizedState),(p=es||ag(e,n,p,i,S,j,x)||!1)?(E||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,j,x),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,j,x)),typeof f.componentDidUpdate=="function"&&(e.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=j),f.props=i,f.state=j,f.context=x,i=p):(typeof f.componentDidUpdate!="function"||y===t.memoizedProps&&S===t.memoizedState||(e.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&S===t.memoizedState||(e.flags|=1024),i=!1)}return Zf(t,e,n,i,l,o)}function Zf(t,e,n,i,o,l){U2(t,e);var f=(e.flags&128)!==0;if(!i&&!f)return o&&J0(e,n,!1),Oi(t,e,l);i=e.stateNode,f_.current=e;var y=f&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&f?(e.child=ra(e,t.child,null,l),e.child=ra(e,null,y,l)):Vn(t,e,y,l),e.memoizedState=i.state,o&&J0(e,n,!0),e.child}function j2(t){var e=t.stateNode;e.pendingContext?Z0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Z0(t,e.context,!1),f1(t,e.containerInfo)}function pg(t,e,n,i,o){return na(),o1(o),e.flags|=256,Vn(t,e,n,i),e.child}var Jf={dehydrated:null,treeContext:null,retryLane:0};function ed(t){return{baseLanes:t,cachePool:null,transitions:null}}function z2(t,e,n){var i=e.pendingProps,o=kt.current,l=!1,f=(e.flags&128)!==0,y;if((y=f)||(y=t!==null&&t.memoizedState===null?!1:(o&2)!==0),y?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Et(kt,o&1),t===null)return Xf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(f=i.children,t=i.fallback,l?(i=e.mode,l=e.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=ih(f,i,0,null),t=$s(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=ed(n),e.memoizedState=Jf,t):E1(e,f));if(o=t.memoizedState,o!==null&&(y=o.dehydrated,y!==null))return d_(t,e,f,i,y,o,n);if(l){l=i.fallback,f=e.mode,o=t.child,y=o.sibling;var x={mode:"hidden",children:i.children};return!(f&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=x,e.deletions=null):(i=ds(o,x),i.subtreeFlags=o.subtreeFlags&14680064),y!==null?l=ds(y,l):(l=$s(l,f,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,f=t.child.memoizedState,f=f===null?ed(n):{baseLanes:f.baseLanes|n,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=t.childLanes&~n,e.memoizedState=Jf,i}return l=t.child,t=l.sibling,i=ds(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function E1(t,e){return e=ih({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nc(t,e,n,i){return i!==null&&o1(i),ra(e,t.child,null,n),t=E1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function d_(t,e,n,i,o,l,f){if(n)return e.flags&256?(e.flags&=-257,i=Jh(Error(ce(422))),Nc(t,e,f,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,o=e.mode,i=ih({mode:"visible",children:i.children},o,0,null),l=$s(l,o,f,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&ra(e,t.child,null,f),e.child.memoizedState=ed(f),e.memoizedState=Jf,l);if(!(e.mode&1))return Nc(t,e,f,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var y=i.dgst;return i=y,l=Error(ce(419)),i=Jh(l,i,void 0),Nc(t,e,f,i)}if(y=(f&t.childLanes)!==0,Jn||y){if(i=dn,i!==null){switch(f&-f){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|f)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Di(t,o),Hr(i,t,o,-1))}return T1(),i=Jh(Error(ce(421))),Nc(t,e,f,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=T_.bind(null,t),o._reactRetry=e,null):(t=l.treeContext,ar=cs(o.nextSibling),cr=e,Rt=!0,jr=null,t!==null&&(vr[Ir++]=Ii,vr[Ir++]=Ti,vr[Ir++]=Js,Ii=t.id,Ti=t.overflow,Js=e),e=E1(e,i.children),e.flags|=4096,e)}function mg(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Kf(t.return,e,n)}function ef(t,e,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function H2(t,e,n){var i=e.pendingProps,o=i.revealOrder,l=i.tail;if(Vn(t,e,i.children,n),i=kt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mg(t,n,e);else if(t.tag===19)mg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Et(kt,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&yu(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),ef(e,!1,o,n,l);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&yu(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}ef(e,!0,n,null,l);break;case"together":ef(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Oi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),to|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=ds(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ds(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function g_(t,e,n){switch(e.tag){case 3:j2(e),na();break;case 5:p2(e);break;case 1:tr(e.type)&&fu(e);break;case 4:f1(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;Et(pu,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Et(kt,kt.current&1),e.flags|=128,null):n&e.child.childLanes?z2(t,e,n):(Et(kt,kt.current&1),t=Oi(t,e,n),t!==null?t.sibling:null);Et(kt,kt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return H2(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Et(kt,kt.current),i)break;return null;case 22:case 23:return e.lanes=0,V2(t,e,n)}return Oi(t,e,n)}var G2,td,W2,X2;G2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};td=function(){};W2=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,qs(ui.current);var l=null;switch(n){case"input":o=Cf(t,o),i=Cf(t,i),l=[];break;case"select":o=Lt({},o,{value:void 0}),i=Lt({},i,{value:void 0}),l=[];break;case"textarea":o=Tf(t,o),i=Tf(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=uu)}Nf(n,i);var f;n=null;for(p in o)if(!i.hasOwnProperty(p)&&o.hasOwnProperty(p)&&o[p]!=null)if(p==="style"){var y=o[p];for(f in y)y.hasOwnProperty(f)&&(n||(n={}),n[f]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(xl.hasOwnProperty(p)?l||(l=[]):(l=l||[]).push(p,null));for(p in i){var x=i[p];if(y=o!=null?o[p]:void 0,i.hasOwnProperty(p)&&x!==y&&(x!=null||y!=null))if(p==="style")if(y){for(f in y)!y.hasOwnProperty(f)||x&&x.hasOwnProperty(f)||(n||(n={}),n[f]="");for(f in x)x.hasOwnProperty(f)&&y[f]!==x[f]&&(n||(n={}),n[f]=x[f])}else n||(l||(l=[]),l.push(p,n)),n=x;else p==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,y=y?y.__html:void 0,x!=null&&y!==x&&(l=l||[]).push(p,x)):p==="children"?typeof x!="string"&&typeof x!="number"||(l=l||[]).push(p,""+x):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(xl.hasOwnProperty(p)?(x!=null&&p==="onScroll"&&vt("scroll",t),l||y===x||(l=[])):(l=l||[]).push(p,x))}n&&(l=l||[]).push("style",n);var p=l;(e.updateQueue=p)&&(e.flags|=4)}};X2=function(t,e,n,i){n!==i&&(e.flags|=4)};function za(t,e){if(!Rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Rn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function p_(t,e,n){var i=e.pendingProps;switch(s1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rn(e),null;case 1:return tr(e.type)&&hu(),Rn(e),null;case 3:return i=e.stateNode,ia(),St(er),St(kn),g1(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Tc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,jr!==null&&(cd(jr),jr=null))),td(t,e),Rn(e),null;case 5:d1(e);var o=qs(Rl.current);if(n=e.type,t!==null&&e.stateNode!=null)W2(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ce(166));return Rn(e),null}if(t=qs(ui.current),Tc(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[li]=e,i[Sl]=l,t=(e.mode&1)!==0,n){case"dialog":vt("cancel",i),vt("close",i);break;case"iframe":case"object":case"embed":vt("load",i);break;case"video":case"audio":for(o=0;o<$a.length;o++)vt($a[o],i);break;case"source":vt("error",i);break;case"img":case"image":case"link":vt("error",i),vt("load",i);break;case"details":vt("toggle",i);break;case"input":I0(i,l),vt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},vt("invalid",i);break;case"textarea":S0(i,l),vt("invalid",i)}Nf(n,l),o=null;for(var f in l)if(l.hasOwnProperty(f)){var y=l[f];f==="children"?typeof y=="string"?i.textContent!==y&&(l.suppressHydrationWarning!==!0&&Ic(i.textContent,y,t),o=["children",y]):typeof y=="number"&&i.textContent!==""+y&&(l.suppressHydrationWarning!==!0&&Ic(i.textContent,y,t),o=["children",""+y]):xl.hasOwnProperty(f)&&y!=null&&f==="onScroll"&&vt("scroll",i)}switch(n){case"input":xc(i),T0(i,l,!0);break;case"textarea":xc(i),N0(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=uu)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{f=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Em(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=f.createElement(n,{is:i.is}):(t=f.createElement(n),n==="select"&&(f=t,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):t=f.createElementNS(t,n),t[li]=e,t[Sl]=i,G2(t,e,!1,!1),e.stateNode=t;e:{switch(f=Rf(n,i),n){case"dialog":vt("cancel",t),vt("close",t),o=i;break;case"iframe":case"object":case"embed":vt("load",t),o=i;break;case"video":case"audio":for(o=0;o<$a.length;o++)vt($a[o],t);o=i;break;case"source":vt("error",t),o=i;break;case"img":case"image":case"link":vt("error",t),vt("load",t),o=i;break;case"details":vt("toggle",t),o=i;break;case"input":I0(t,i),o=Cf(t,i),vt("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=Lt({},i,{value:void 0}),vt("invalid",t);break;case"textarea":S0(t,i),o=Tf(t,i),vt("invalid",t);break;default:o=i}Nf(n,o),y=o;for(l in y)if(y.hasOwnProperty(l)){var x=y[l];l==="style"?Cm(t,x):l==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&_m(t,x)):l==="children"?typeof x=="string"?(n!=="textarea"||x!=="")&&yl(t,x):typeof x=="number"&&yl(t,""+x):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(xl.hasOwnProperty(l)?x!=null&&l==="onScroll"&&vt("scroll",t):x!=null&&Gd(t,l,x,f))}switch(n){case"input":xc(t),T0(t,i,!1);break;case"textarea":xc(t),N0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ws(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?Go(t,!!i.multiple,l,!1):i.defaultValue!=null&&Go(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=uu)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Rn(e),null;case 6:if(t&&e.stateNode!=null)X2(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ce(166));if(n=qs(Rl.current),qs(ui.current),Tc(e)){if(i=e.stateNode,n=e.memoizedProps,i[li]=e,(l=i.nodeValue!==n)&&(t=cr,t!==null))switch(t.tag){case 3:Ic(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ic(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[li]=e,e.stateNode=i}return Rn(e),null;case 13:if(St(kt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rt&&ar!==null&&e.mode&1&&!(e.flags&128))u2(),na(),e.flags|=98560,l=!1;else if(l=Tc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(ce(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(ce(317));l[li]=e}else na(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Rn(e),l=!1}else jr!==null&&(cd(jr),jr=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||kt.current&1?tn===0&&(tn=3):T1())),e.updateQueue!==null&&(e.flags|=4),Rn(e),null);case 4:return ia(),td(t,e),t===null&&Il(e.stateNode.containerInfo),Rn(e),null;case 10:return c1(e.type._context),Rn(e),null;case 17:return tr(e.type)&&hu(),Rn(e),null;case 19:if(St(kt),l=e.memoizedState,l===null)return Rn(e),null;if(i=(e.flags&128)!==0,f=l.rendering,f===null)if(i)za(l,!1);else{if(tn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(f=yu(t),f!==null){for(e.flags|=128,za(l,!1),i=f.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,t=f.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Et(kt,kt.current&1|2),e.child}t=t.sibling}l.tail!==null&&Xt()>oa&&(e.flags|=128,i=!0,za(l,!1),e.lanes=4194304)}else{if(!i)if(t=yu(f),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),za(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Rt)return Rn(e),null}else 2*Xt()-l.renderingStartTime>oa&&n!==1073741824&&(e.flags|=128,i=!0,za(l,!1),e.lanes=4194304);l.isBackwards?(f.sibling=e.child,e.child=f):(n=l.last,n!==null?n.sibling=f:e.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Xt(),e.sibling=null,n=kt.current,Et(kt,i?n&1|2:n&1),e):(Rn(e),null);case 22:case 23:return I1(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?or&1073741824&&(Rn(e),e.subtreeFlags&6&&(e.flags|=8192)):Rn(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function m_(t,e){switch(s1(e),e.tag){case 1:return tr(e.type)&&hu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ia(),St(er),St(kn),g1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return d1(e),null;case 13:if(St(kt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));na()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return St(kt),null;case 4:return ia(),null;case 10:return c1(e.type._context),null;case 22:case 23:return I1(),null;case 24:return null;default:return null}}var Rc=!1,On=!1,x_=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function jo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){jt(t,e,i)}else n.current=null}function nd(t,e,n){try{n()}catch(i){jt(t,e,i)}}var xg=!1;function y_(t,e){if(Vf=au,t=$m(),r1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var f=0,y=-1,x=-1,p=0,E=0,A=t,S=null;t:for(;;){for(var M;A!==n||o!==0&&A.nodeType!==3||(y=f+o),A!==l||i!==0&&A.nodeType!==3||(x=f+i),A.nodeType===3&&(f+=A.nodeValue.length),(M=A.firstChild)!==null;)S=A,A=M;for(;;){if(A===t)break t;if(S===n&&++p===o&&(y=f),S===l&&++E===i&&(x=f),(M=A.nextSibling)!==null)break;A=S,S=A.parentNode}A=M}n=y===-1||x===-1?null:{start:y,end:x}}else n=null}n=n||{start:0,end:0}}else n=null;for(Uf={focusedElem:t,selectionRange:n},au=!1,Ee=e;Ee!==null;)if(e=Ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ee=t;else for(;Ee!==null;){e=Ee;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var X=j.memoizedProps,q=j.memoizedState,z=e.stateNode,L=z.getSnapshotBeforeUpdate(e.elementType===e.type?X:Vr(e.type,X),q);z.__reactInternalSnapshotBeforeUpdate=L}break;case 3:var F=e.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(Z){jt(e,e.return,Z)}if(t=e.sibling,t!==null){t.return=e.return,Ee=t;break}Ee=e.return}return j=xg,xg=!1,j}function ll(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&nd(e,n,l)}o=o.next}while(o!==i)}}function nh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function rd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function K2(t){var e=t.alternate;e!==null&&(t.alternate=null,K2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[li],delete e[Sl],delete e[Hf],delete e[e_],delete e[t_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function q2(t){return t.tag===5||t.tag===3||t.tag===4}function yg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function id(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uu));else if(i!==4&&(t=t.child,t!==null))for(id(t,e,n),t=t.sibling;t!==null;)id(t,e,n),t=t.sibling}function sd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(sd(t,e,n),t=t.sibling;t!==null;)sd(t,e,n),t=t.sibling}var wn=null,Ur=!1;function $i(t,e,n){for(n=n.child;n!==null;)Y2(t,e,n),n=n.sibling}function Y2(t,e,n){if(ci&&typeof ci.onCommitFiberUnmount=="function")try{ci.onCommitFiberUnmount(qu,n)}catch{}switch(n.tag){case 5:On||jo(n,e);case 6:var i=wn,o=Ur;wn=null,$i(t,e,n),wn=i,Ur=o,wn!==null&&(Ur?(t=wn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wn.removeChild(n.stateNode));break;case 18:wn!==null&&(Ur?(t=wn,n=n.stateNode,t.nodeType===8?Kh(t.parentNode,n):t.nodeType===1&&Kh(t,n),Al(t)):Kh(wn,n.stateNode));break;case 4:i=wn,o=Ur,wn=n.stateNode.containerInfo,Ur=!0,$i(t,e,n),wn=i,Ur=o;break;case 0:case 11:case 14:case 15:if(!On&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&nd(n,e,f),o=o.next}while(o!==i)}$i(t,e,n);break;case 1:if(!On&&(jo(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(y){jt(n,e,y)}$i(t,e,n);break;case 21:$i(t,e,n);break;case 22:n.mode&1?(On=(i=On)||n.memoizedState!==null,$i(t,e,n),On=i):$i(t,e,n);break;default:$i(t,e,n)}}function wg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new x_),e.forEach(function(i){var o=S_.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Fr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var l=t,f=e,y=f;e:for(;y!==null;){switch(y.tag){case 5:wn=y.stateNode,Ur=!1;break e;case 3:wn=y.stateNode.containerInfo,Ur=!0;break e;case 4:wn=y.stateNode.containerInfo,Ur=!0;break e}y=y.return}if(wn===null)throw Error(ce(160));Y2(l,f,o),wn=null,Ur=!1;var x=o.alternate;x!==null&&(x.return=null),o.return=null}catch(p){jt(o,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Q2(e,t),e=e.sibling}function Q2(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fr(e,t),ri(t),i&4){try{ll(3,t,t.return),nh(3,t)}catch(X){jt(t,t.return,X)}try{ll(5,t,t.return)}catch(X){jt(t,t.return,X)}}break;case 1:Fr(e,t),ri(t),i&512&&n!==null&&jo(n,n.return);break;case 5:if(Fr(e,t),ri(t),i&512&&n!==null&&jo(n,n.return),t.flags&32){var o=t.stateNode;try{yl(o,"")}catch(X){jt(t,t.return,X)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,f=n!==null?n.memoizedProps:l,y=t.type,x=t.updateQueue;if(t.updateQueue=null,x!==null)try{y==="input"&&l.type==="radio"&&l.name!=null&&ym(o,l),Rf(y,f);var p=Rf(y,l);for(f=0;f<x.length;f+=2){var E=x[f],A=x[f+1];E==="style"?Cm(o,A):E==="dangerouslySetInnerHTML"?_m(o,A):E==="children"?yl(o,A):Gd(o,E,A,p)}switch(y){case"input":vf(o,l);break;case"textarea":wm(o,l);break;case"select":var S=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var M=l.value;M!=null?Go(o,!!l.multiple,M,!1):S!==!!l.multiple&&(l.defaultValue!=null?Go(o,!!l.multiple,l.defaultValue,!0):Go(o,!!l.multiple,l.multiple?[]:"",!1))}o[Sl]=l}catch(X){jt(t,t.return,X)}}break;case 6:if(Fr(e,t),ri(t),i&4){if(t.stateNode===null)throw Error(ce(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(X){jt(t,t.return,X)}}break;case 3:if(Fr(e,t),ri(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Al(e.containerInfo)}catch(X){jt(t,t.return,X)}break;case 4:Fr(e,t),ri(t);break;case 13:Fr(e,t),ri(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(C1=Xt())),i&4&&wg(t);break;case 22:if(E=n!==null&&n.memoizedState!==null,t.mode&1?(On=(p=On)||E,Fr(e,t),On=p):Fr(e,t),ri(t),i&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!E&&t.mode&1)for(Ee=t,E=t.child;E!==null;){for(A=Ee=E;Ee!==null;){switch(S=Ee,M=S.child,S.tag){case 0:case 11:case 14:case 15:ll(4,S,S.return);break;case 1:jo(S,S.return);var j=S.stateNode;if(typeof j.componentWillUnmount=="function"){i=S,n=S.return;try{e=i,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(X){jt(i,n,X)}}break;case 5:jo(S,S.return);break;case 22:if(S.memoizedState!==null){_g(A);continue}}M!==null?(M.return=S,Ee=M):_g(A)}E=E.sibling}e:for(E=null,A=t;;){if(A.tag===5){if(E===null){E=A;try{o=A.stateNode,p?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(y=A.stateNode,x=A.memoizedProps.style,f=x!=null&&x.hasOwnProperty("display")?x.display:null,y.style.display=Am("display",f))}catch(X){jt(t,t.return,X)}}}else if(A.tag===6){if(E===null)try{A.stateNode.nodeValue=p?"":A.memoizedProps}catch(X){jt(t,t.return,X)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===t)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===t)break e;for(;A.sibling===null;){if(A.return===null||A.return===t)break e;E===A&&(E=null),A=A.return}E===A&&(E=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:Fr(e,t),ri(t),i&4&&wg(t);break;case 21:break;default:Fr(e,t),ri(t)}}function ri(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(q2(n)){var i=n;break e}n=n.return}throw Error(ce(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(yl(o,""),i.flags&=-33);var l=yg(t);sd(t,l,o);break;case 3:case 4:var f=i.stateNode.containerInfo,y=yg(t);id(t,y,f);break;default:throw Error(ce(161))}}catch(x){jt(t,t.return,x)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function w_(t,e,n){Ee=t,$2(t)}function $2(t,e,n){for(var i=(t.mode&1)!==0;Ee!==null;){var o=Ee,l=o.child;if(o.tag===22&&i){var f=o.memoizedState!==null||Rc;if(!f){var y=o.alternate,x=y!==null&&y.memoizedState!==null||On;y=Rc;var p=On;if(Rc=f,(On=x)&&!p)for(Ee=o;Ee!==null;)f=Ee,x=f.child,f.tag===22&&f.memoizedState!==null?Ag(o):x!==null?(x.return=f,Ee=x):Ag(o);for(;l!==null;)Ee=l,$2(l),l=l.sibling;Ee=o,Rc=y,On=p}Eg(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,Ee=l):Eg(t)}}function Eg(t){for(;Ee!==null;){var e=Ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:On||nh(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!On)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Vr(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&ig(e,l,i);break;case 3:var f=e.updateQueue;if(f!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ig(e,f,n)}break;case 5:var y=e.stateNode;if(n===null&&e.flags&4){n=y;var x=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":x.autoFocus&&n.focus();break;case"img":x.src&&(n.src=x.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var E=p.memoizedState;if(E!==null){var A=E.dehydrated;A!==null&&Al(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}On||e.flags&512&&rd(e)}catch(S){jt(e,e.return,S)}}if(e===t){Ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function _g(t){for(;Ee!==null;){var e=Ee;if(e===t){Ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ee=n;break}Ee=e.return}}function Ag(t){for(;Ee!==null;){var e=Ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nh(4,e)}catch(x){jt(e,n,x)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(x){jt(e,o,x)}}var l=e.return;try{rd(e)}catch(x){jt(e,l,x)}break;case 5:var f=e.return;try{rd(e)}catch(x){jt(e,f,x)}}}catch(x){jt(e,e.return,x)}if(e===t){Ee=null;break}var y=e.sibling;if(y!==null){y.return=e.return,Ee=y;break}Ee=e.return}}var E_=Math.ceil,_u=Bi.ReactCurrentDispatcher,_1=Bi.ReactCurrentOwner,Nr=Bi.ReactCurrentBatchConfig,et=0,dn=null,Qt=null,An=0,or=0,zo=Ns(0),tn=0,Pl=null,to=0,rh=0,A1=0,cl=null,Qn=null,C1=0,oa=1/0,Ci=null,Au=!1,od=null,hs=null,bc=!1,is=null,Cu=0,ul=0,ad=null,Kc=-1,qc=0;function Un(){return et&6?Xt():Kc!==-1?Kc:Kc=Xt()}function fs(t){return t.mode&1?et&2&&An!==0?An&-An:r_.transition!==null?(qc===0&&(qc=Mm()),qc):(t=ut,t!==0||(t=window.event,t=t===void 0?16:zm(t.type)),t):1}function Hr(t,e,n,i){if(50<ul)throw ul=0,ad=null,Error(ce(185));Hl(t,n,i),(!(et&2)||t!==dn)&&(t===dn&&(!(et&2)&&(rh|=n),tn===4&&ns(t,An)),nr(t,i),n===1&&et===0&&!(e.mode&1)&&(oa=Xt()+500,Ju&&Rs()))}function nr(t,e){var n=t.callbackNode;rE(t,e);var i=ou(t,t===dn?An:0);if(i===0)n!==null&&D0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&D0(n),e===1)t.tag===0?n_(Cg.bind(null,t)):a2(Cg.bind(null,t)),ZE(function(){!(et&6)&&Rs()}),n=null;else{switch(Lm(i)){case 1:n=Yd;break;case 4:n=Pm;break;case 16:n=su;break;case 536870912:n=km;break;default:n=su}n=sx(n,Z2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Z2(t,e){if(Kc=-1,qc=0,et&6)throw Error(ce(327));var n=t.callbackNode;if(Yo()&&t.callbackNode!==n)return null;var i=ou(t,t===dn?An:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=vu(t,i);else{e=i;var o=et;et|=2;var l=ex();(dn!==t||An!==e)&&(Ci=null,oa=Xt()+500,Qs(t,e));do try{C_();break}catch(y){J2(t,y)}while(1);l1(),_u.current=l,et=o,Qt!==null?e=0:(dn=null,An=0,e=tn)}if(e!==0){if(e===2&&(o=kf(t),o!==0&&(i=o,e=ld(t,o))),e===1)throw n=Pl,Qs(t,0),ns(t,i),nr(t,Xt()),n;if(e===6)ns(t,i);else{if(o=t.current.alternate,!(i&30)&&!__(o)&&(e=vu(t,i),e===2&&(l=kf(t),l!==0&&(i=l,e=ld(t,l))),e===1))throw n=Pl,Qs(t,0),ns(t,i),nr(t,Xt()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(ce(345));case 2:Gs(t,Qn,Ci);break;case 3:if(ns(t,i),(i&130023424)===i&&(e=C1+500-Xt(),10<e)){if(ou(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){Un(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=zf(Gs.bind(null,t,Qn,Ci),e);break}Gs(t,Qn,Ci);break;case 4:if(ns(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var f=31-zr(i);l=1<<f,f=e[f],f>o&&(o=f),i&=~l}if(i=o,i=Xt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*E_(i/1960))-i,10<i){t.timeoutHandle=zf(Gs.bind(null,t,Qn,Ci),i);break}Gs(t,Qn,Ci);break;case 5:Gs(t,Qn,Ci);break;default:throw Error(ce(329))}}}return nr(t,Xt()),t.callbackNode===n?Z2.bind(null,t):null}function ld(t,e){var n=cl;return t.current.memoizedState.isDehydrated&&(Qs(t,e).flags|=256),t=vu(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&cd(e)),t}function cd(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function __(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!Wr(l(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ns(t,e){for(e&=~A1,e&=~rh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zr(e),i=1<<n;t[n]=-1,e&=~i}}function Cg(t){if(et&6)throw Error(ce(327));Yo();var e=ou(t,0);if(!(e&1))return nr(t,Xt()),null;var n=vu(t,e);if(t.tag!==0&&n===2){var i=kf(t);i!==0&&(e=i,n=ld(t,i))}if(n===1)throw n=Pl,Qs(t,0),ns(t,e),nr(t,Xt()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,Qn,Ci),nr(t,Xt()),null}function v1(t,e){var n=et;et|=1;try{return t(e)}finally{et=n,et===0&&(oa=Xt()+500,Ju&&Rs())}}function no(t){is!==null&&is.tag===0&&!(et&6)&&Yo();var e=et;et|=1;var n=Nr.transition,i=ut;try{if(Nr.transition=null,ut=1,t)return t()}finally{ut=i,Nr.transition=n,et=e,!(et&6)&&Rs()}}function I1(){or=zo.current,St(zo)}function Qs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$E(n)),Qt!==null)for(n=Qt.return;n!==null;){var i=n;switch(s1(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&hu();break;case 3:ia(),St(er),St(kn),g1();break;case 5:d1(i);break;case 4:ia();break;case 13:St(kt);break;case 19:St(kt);break;case 10:c1(i.type._context);break;case 22:case 23:I1()}n=n.return}if(dn=t,Qt=t=ds(t.current,null),An=or=e,tn=0,Pl=null,A1=rh=to=0,Qn=cl=null,Ks!==null){for(e=0;e<Ks.length;e++)if(n=Ks[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,l=n.pending;if(l!==null){var f=l.next;l.next=o,i.next=f}n.pending=i}Ks=null}return t}function J2(t,e){do{var n=Qt;try{if(l1(),Gc.current=Eu,wu){for(var i=Mt.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}wu=!1}if(eo=0,fn=en=Mt=null,al=!1,bl=0,_1.current=null,n===null||n.return===null){tn=1,Pl=e,Qt=null;break}e:{var l=t,f=n.return,y=n,x=e;if(e=An,y.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){var p=x,E=y,A=E.tag;if(!(E.mode&1)&&(A===0||A===11||A===15)){var S=E.alternate;S?(E.updateQueue=S.updateQueue,E.memoizedState=S.memoizedState,E.lanes=S.lanes):(E.updateQueue=null,E.memoizedState=null)}var M=ug(f);if(M!==null){M.flags&=-257,hg(M,f,y,l,e),M.mode&1&&cg(l,p,e),e=M,x=p;var j=e.updateQueue;if(j===null){var X=new Set;X.add(x),e.updateQueue=X}else j.add(x);break e}else{if(!(e&1)){cg(l,p,e),T1();break e}x=Error(ce(426))}}else if(Rt&&y.mode&1){var q=ug(f);if(q!==null){!(q.flags&65536)&&(q.flags|=256),hg(q,f,y,l,e),o1(sa(x,y));break e}}l=x=sa(x,y),tn!==4&&(tn=2),cl===null?cl=[l]:cl.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var z=L2(l,x,e);rg(l,z);break e;case 1:y=x;var L=l.type,F=l.stateNode;if(!(l.flags&128)&&(typeof L.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(hs===null||!hs.has(F)))){l.flags|=65536,e&=-e,l.lanes|=e;var Z=B2(l,y,e);rg(l,Z);break e}}l=l.return}while(l!==null)}nx(n)}catch(le){e=le,Qt===n&&n!==null&&(Qt=n=n.return);continue}break}while(1)}function ex(){var t=_u.current;return _u.current=Eu,t===null?Eu:t}function T1(){(tn===0||tn===3||tn===2)&&(tn=4),dn===null||!(to&268435455)&&!(rh&268435455)||ns(dn,An)}function vu(t,e){var n=et;et|=2;var i=ex();(dn!==t||An!==e)&&(Ci=null,Qs(t,e));do try{A_();break}catch(o){J2(t,o)}while(1);if(l1(),et=n,_u.current=i,Qt!==null)throw Error(ce(261));return dn=null,An=0,tn}function A_(){for(;Qt!==null;)tx(Qt)}function C_(){for(;Qt!==null&&!qw();)tx(Qt)}function tx(t){var e=ix(t.alternate,t,or);t.memoizedProps=t.pendingProps,e===null?nx(t):Qt=e,_1.current=null}function nx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=m_(n,e),n!==null){n.flags&=32767,Qt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tn=6,Qt=null;return}}else if(n=p_(n,e,or),n!==null){Qt=n;return}if(e=e.sibling,e!==null){Qt=e;return}Qt=e=t}while(e!==null);tn===0&&(tn=5)}function Gs(t,e,n){var i=ut,o=Nr.transition;try{Nr.transition=null,ut=1,v_(t,e,n,i)}finally{Nr.transition=o,ut=i}return null}function v_(t,e,n,i){do Yo();while(is!==null);if(et&6)throw Error(ce(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(iE(t,l),t===dn&&(Qt=dn=null,An=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bc||(bc=!0,sx(su,function(){return Yo(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Nr.transition,Nr.transition=null;var f=ut;ut=1;var y=et;et|=4,_1.current=null,y_(t,n),Q2(n,t),GE(Uf),au=!!Vf,Uf=Vf=null,t.current=n,w_(n),Yw(),et=y,ut=f,Nr.transition=l}else t.current=n;if(bc&&(bc=!1,is=t,Cu=o),l=t.pendingLanes,l===0&&(hs=null),Zw(n.stateNode),nr(t,Xt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(Au)throw Au=!1,t=od,od=null,t;return Cu&1&&t.tag!==0&&Yo(),l=t.pendingLanes,l&1?t===ad?ul++:(ul=0,ad=t):ul=0,Rs(),null}function Yo(){if(is!==null){var t=Lm(Cu),e=Nr.transition,n=ut;try{if(Nr.transition=null,ut=16>t?16:t,is===null)var i=!1;else{if(t=is,is=null,Cu=0,et&6)throw Error(ce(331));var o=et;for(et|=4,Ee=t.current;Ee!==null;){var l=Ee,f=l.child;if(Ee.flags&16){var y=l.deletions;if(y!==null){for(var x=0;x<y.length;x++){var p=y[x];for(Ee=p;Ee!==null;){var E=Ee;switch(E.tag){case 0:case 11:case 15:ll(8,E,l)}var A=E.child;if(A!==null)A.return=E,Ee=A;else for(;Ee!==null;){E=Ee;var S=E.sibling,M=E.return;if(K2(E),E===p){Ee=null;break}if(S!==null){S.return=M,Ee=S;break}Ee=M}}}var j=l.alternate;if(j!==null){var X=j.child;if(X!==null){j.child=null;do{var q=X.sibling;X.sibling=null,X=q}while(X!==null)}}Ee=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,Ee=f;else e:for(;Ee!==null;){if(l=Ee,l.flags&2048)switch(l.tag){case 0:case 11:case 15:ll(9,l,l.return)}var z=l.sibling;if(z!==null){z.return=l.return,Ee=z;break e}Ee=l.return}}var L=t.current;for(Ee=L;Ee!==null;){f=Ee;var F=f.child;if(f.subtreeFlags&2064&&F!==null)F.return=f,Ee=F;else e:for(f=L;Ee!==null;){if(y=Ee,y.flags&2048)try{switch(y.tag){case 0:case 11:case 15:nh(9,y)}}catch(le){jt(y,y.return,le)}if(y===f){Ee=null;break e}var Z=y.sibling;if(Z!==null){Z.return=y.return,Ee=Z;break e}Ee=y.return}}if(et=o,Rs(),ci&&typeof ci.onPostCommitFiberRoot=="function")try{ci.onPostCommitFiberRoot(qu,t)}catch{}i=!0}return i}finally{ut=n,Nr.transition=e}}return!1}function vg(t,e,n){e=sa(n,e),e=L2(t,e,1),t=us(t,e,1),e=Un(),t!==null&&(Hl(t,1,e),nr(t,e))}function jt(t,e,n){if(t.tag===3)vg(t,t,n);else for(;e!==null;){if(e.tag===3){vg(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(hs===null||!hs.has(i))){t=sa(n,t),t=B2(e,t,1),e=us(e,t,1),t=Un(),e!==null&&(Hl(e,1,t),nr(e,t));break}}e=e.return}}function I_(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Un(),t.pingedLanes|=t.suspendedLanes&n,dn===t&&(An&n)===n&&(tn===4||tn===3&&(An&130023424)===An&&500>Xt()-C1?Qs(t,0):A1|=n),nr(t,e)}function rx(t,e){e===0&&(t.mode&1?(e=Ec,Ec<<=1,!(Ec&130023424)&&(Ec=4194304)):e=1);var n=Un();t=Di(t,e),t!==null&&(Hl(t,e,n),nr(t,n))}function T_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),rx(t,n)}function S_(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ce(314))}i!==null&&i.delete(e),rx(t,n)}var ix;ix=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||er.current)Jn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Jn=!1,g_(t,e,n);Jn=!!(t.flags&131072)}else Jn=!1,Rt&&e.flags&1048576&&l2(e,gu,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Xc(t,e),t=e.pendingProps;var o=ta(e,kn.current);qo(e,n),o=m1(null,e,i,t,o,n);var l=x1();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,tr(i)?(l=!0,fu(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,h1(e),o.updater=th,e.stateNode=o,o._reactInternals=e,Yf(e,i,t,n),e=Zf(null,e,i,!0,l,n)):(e.tag=0,Rt&&l&&i1(e),Vn(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Xc(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=R_(i),t=Vr(i,t),o){case 0:e=$f(null,e,i,t,n);break e;case 1:e=gg(null,e,i,t,n);break e;case 11:e=fg(null,e,i,t,n);break e;case 14:e=dg(null,e,i,Vr(i.type,t),n);break e}throw Error(ce(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Vr(i,o),$f(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Vr(i,o),gg(t,e,i,o,n);case 3:e:{if(j2(e),t===null)throw Error(ce(387));i=e.pendingProps,l=e.memoizedState,o=l.element,g2(t,e),xu(e,i,null,n);var f=e.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=sa(Error(ce(423)),e),e=pg(t,e,i,n,o);break e}else if(i!==o){o=sa(Error(ce(424)),e),e=pg(t,e,i,n,o);break e}else for(ar=cs(e.stateNode.containerInfo.firstChild),cr=e,Rt=!0,jr=null,n=f2(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(na(),i===o){e=Oi(t,e,n);break e}Vn(t,e,i,n)}e=e.child}return e;case 5:return p2(e),t===null&&Xf(e),i=e.type,o=e.pendingProps,l=t!==null?t.memoizedProps:null,f=o.children,jf(i,o)?f=null:l!==null&&jf(i,l)&&(e.flags|=32),U2(t,e),Vn(t,e,f,n),e.child;case 6:return t===null&&Xf(e),null;case 13:return z2(t,e,n);case 4:return f1(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ra(e,null,i,n):Vn(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Vr(i,o),fg(t,e,i,o,n);case 7:return Vn(t,e,e.pendingProps,n),e.child;case 8:return Vn(t,e,e.pendingProps.children,n),e.child;case 12:return Vn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,l=e.memoizedProps,f=o.value,Et(pu,i._currentValue),i._currentValue=f,l!==null)if(Wr(l.value,f)){if(l.children===o.children&&!er.current){e=Oi(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var y=l.dependencies;if(y!==null){f=l.child;for(var x=y.firstContext;x!==null;){if(x.context===i){if(l.tag===1){x=Ni(-1,n&-n),x.tag=2;var p=l.updateQueue;if(p!==null){p=p.shared;var E=p.pending;E===null?x.next=x:(x.next=E.next,E.next=x),p.pending=x}}l.lanes|=n,x=l.alternate,x!==null&&(x.lanes|=n),Kf(l.return,n,e),y.lanes|=n;break}x=x.next}}else if(l.tag===10)f=l.type===e.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(ce(341));f.lanes|=n,y=f.alternate,y!==null&&(y.lanes|=n),Kf(f,n,e),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}Vn(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,qo(e,n),o=Rr(o),i=i(o),e.flags|=1,Vn(t,e,i,n),e.child;case 14:return i=e.type,o=Vr(i,e.pendingProps),o=Vr(i.type,o),dg(t,e,i,o,n);case 15:return F2(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Vr(i,o),Xc(t,e),e.tag=1,tr(i)?(t=!0,fu(e)):t=!1,qo(e,n),M2(e,i,o),Yf(e,i,o,n),Zf(null,e,i,!0,t,n);case 19:return H2(t,e,n);case 22:return V2(t,e,n)}throw Error(ce(156,e.tag))};function sx(t,e){return Om(t,e)}function N_(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(t,e,n,i){return new N_(t,e,n,i)}function S1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R_(t){if(typeof t=="function")return S1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Xd)return 11;if(t===Kd)return 14}return 2}function ds(t,e){var n=t.alternate;return n===null?(n=Sr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yc(t,e,n,i,o,l){var f=2;if(i=t,typeof t=="function")S1(t)&&(f=1);else if(typeof t=="string")f=5;else e:switch(t){case Oo:return $s(n.children,o,l,e);case Wd:f=8,o|=8;break;case wf:return t=Sr(12,n,e,o|2),t.elementType=wf,t.lanes=l,t;case Ef:return t=Sr(13,n,e,o),t.elementType=Ef,t.lanes=l,t;case _f:return t=Sr(19,n,e,o),t.elementType=_f,t.lanes=l,t;case pm:return ih(n,o,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dm:f=10;break e;case gm:f=9;break e;case Xd:f=11;break e;case Kd:f=14;break e;case Ji:f=16,i=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=Sr(f,n,e,o),e.elementType=t,e.type=i,e.lanes=l,e}function $s(t,e,n,i){return t=Sr(7,t,i,e),t.lanes=n,t}function ih(t,e,n,i){return t=Sr(22,t,i,e),t.elementType=pm,t.lanes=n,t.stateNode={isHidden:!1},t}function tf(t,e,n){return t=Sr(6,t,null,e),t.lanes=n,t}function nf(t,e,n){return e=Sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function b_(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lh(0),this.expirationTimes=Lh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lh(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function N1(t,e,n,i,o,l,f,y,x){return t=new b_(t,e,n,y,x),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Sr(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},h1(l),t}function D_(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Do,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function ox(t){if(!t)return Es;t=t._reactInternals;e:{if(lo(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(tr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(tr(n))return o2(t,n,e)}return e}function ax(t,e,n,i,o,l,f,y,x){return t=N1(n,i,!0,t,o,l,f,y,x),t.context=ox(null),n=t.current,i=Un(),o=fs(n),l=Ni(i,o),l.callback=e??null,us(n,l,o),t.current.lanes=o,Hl(t,o,i),nr(t,i),t}function sh(t,e,n,i){var o=e.current,l=Un(),f=fs(o);return n=ox(n),e.context===null?e.context=n:e.pendingContext=n,e=Ni(l,f),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=us(o,e,f),t!==null&&(Hr(t,o,f,l),Hc(t,o,f)),f}function Iu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ig(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function R1(t,e){Ig(t,e),(t=t.alternate)&&Ig(t,e)}function O_(){return null}var lx=typeof reportError=="function"?reportError:function(t){console.error(t)};function b1(t){this._internalRoot=t}oh.prototype.render=b1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));sh(t,e,null,null)};oh.prototype.unmount=b1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;no(function(){sh(null,t,null,null)}),e[bi]=null}};function oh(t){this._internalRoot=t}oh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ts.length&&e!==0&&e<ts[n].priority;n++);ts.splice(n,0,t),n===0&&jm(t)}};function D1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ah(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function P_(t,e,n,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var p=Iu(f);l.call(p)}}var f=ax(e,i,t,0,null,!1,!1,"",Tg);return t._reactRootContainer=f,t[bi]=f.current,Il(t.nodeType===8?t.parentNode:t),no(),f}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var y=i;i=function(){var p=Iu(x);y.call(p)}}var x=N1(t,0,!1,null,null,!1,!1,"",Tg);return t._reactRootContainer=x,t[bi]=x.current,Il(t.nodeType===8?t.parentNode:t),no(function(){sh(e,x,n,i)}),x}function lh(t,e,n,i,o){var l=n._reactRootContainer;if(l){var f=l;if(typeof o=="function"){var y=o;o=function(){var x=Iu(f);y.call(x)}}sh(e,f,t,o)}else f=P_(n,e,t,o,i);return Iu(f)}Bm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qa(e.pendingLanes);n!==0&&(Qd(e,n|1),nr(e,Xt()),!(et&6)&&(oa=Xt()+500,Rs()))}break;case 13:no(function(){var i=Di(t,1);if(i!==null){var o=Un();Hr(i,t,1,o)}}),R1(t,1)}};$d=function(t){if(t.tag===13){var e=Di(t,134217728);if(e!==null){var n=Un();Hr(e,t,134217728,n)}R1(t,134217728)}};Fm=function(t){if(t.tag===13){var e=fs(t),n=Di(t,e);if(n!==null){var i=Un();Hr(n,t,e,i)}R1(t,e)}};Vm=function(){return ut};Um=function(t,e){var n=ut;try{return ut=t,e()}finally{ut=n}};Df=function(t,e,n){switch(e){case"input":if(vf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=Zu(i);if(!o)throw Error(ce(90));xm(i),vf(i,o)}}}break;case"textarea":wm(t,n);break;case"select":e=n.value,e!=null&&Go(t,!!n.multiple,e,!1)}};Tm=v1;Sm=no;var k_={usingClientEntryPoint:!1,Events:[Wl,Lo,Zu,vm,Im,v1]},Ha={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},M_={bundleType:Ha.bundleType,version:Ha.version,rendererPackageName:Ha.rendererPackageName,rendererConfig:Ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=bm(t),t===null?null:t.stateNode},findFiberByHostInstance:Ha.findFiberByHostInstance||O_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{qu=Dc.inject(M_),ci=Dc}catch{}}hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k_;hr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D1(e))throw Error(ce(200));return D_(t,e,null,n)};hr.createRoot=function(t,e){if(!D1(t))throw Error(ce(299));var n=!1,i="",o=lx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=N1(t,1,!1,null,null,n,!1,i,o),t[bi]=e.current,Il(t.nodeType===8?t.parentNode:t),new b1(e)};hr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=bm(e),t=t===null?null:t.stateNode,t};hr.flushSync=function(t){return no(t)};hr.hydrate=function(t,e,n){if(!ah(e))throw Error(ce(200));return lh(null,t,e,!0,n)};hr.hydrateRoot=function(t,e,n){if(!D1(t))throw Error(ce(405));var i=n!=null&&n.hydratedSources||null,o=!1,l="",f=lx;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),e=ax(e,null,t,1,n??null,o,!1,l,f),t[bi]=e.current,Il(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new oh(e)};hr.render=function(t,e,n){if(!ah(e))throw Error(ce(200));return lh(null,t,e,!1,n)};hr.unmountComponentAtNode=function(t){if(!ah(t))throw Error(ce(40));return t._reactRootContainer?(no(function(){lh(null,null,t,!1,function(){t._reactRootContainer=null,t[bi]=null})}),!0):!1};hr.unstable_batchedUpdates=v1;hr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ah(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return lh(t,e,n,!1,i)};hr.version="18.3.1-next-f1338f8080-20240426";function cx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cx)}catch(t){console.error(t)}}cx(),cm.exports=hr;var L_=cm.exports,Sg=L_;xf.createRoot=Sg.createRoot,xf.hydrateRoot=Sg.hydrateRoot;var B_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const F_=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V_=(t,e)=>{const n=Oe.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:f,children:y,...x},p)=>Oe.createElement("svg",{ref:p,...B_,width:o,height:o,stroke:i,strokeWidth:f?Number(l)*24/Number(o):l,className:`lucide lucide-${F_(t)}`,...x},[...e.map(([E,A])=>Oe.createElement(E,A)),...(Array.isArray(y)?y:[y])||[]]));return n.displayName=`${t}`,n};var xt=V_;const U_=xt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),rf=xt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),j_=xt("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]),z_=xt("BookDown",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M12 13V7",key:"h0r20n"}],["path",{d:"m9 10 3 3 3-3",key:"zt5b4y"}]]),H_=xt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),G_=xt("BookUp",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}],["path",{d:"M12 13V7",key:"h0r20n"}],["path",{d:"m9 10 3-3 3 3",key:"11gsxs"}]]),hl=xt("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),W_=xt("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ud=xt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),X_=xt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),K_=xt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),q_=xt("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),hd=xt("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),Y_=xt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Q_=xt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),$_=xt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),ux=xt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),hx=xt("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Z_=xt("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),J_=xt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),e3=xt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),fx=xt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),fd=xt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ng=xt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),t3=xt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Tu=xt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),sf=xt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),n3=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},r3=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const o=t[n++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=t[n++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=t[n++],f=t[n++],y=t[n++],x=((o&7)<<18|(l&63)<<12|(f&63)<<6|y&63)-65536;e[i++]=String.fromCharCode(55296+(x>>10)),e[i++]=String.fromCharCode(56320+(x&1023))}else{const l=t[n++],f=t[n++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|f&63)}}return e.join("")},gx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<t.length;o+=3){const l=t[o],f=o+1<t.length,y=f?t[o+1]:0,x=o+2<t.length,p=x?t[o+2]:0,E=l>>2,A=(l&3)<<4|y>>4;let S=(y&15)<<2|p>>6,M=p&63;x||(M=64,f||(S=64)),i.push(n[E],n[A],n[S],n[M])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):r3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<t.length;){const l=n[t.charAt(o++)],y=o<t.length?n[t.charAt(o)]:0;++o;const p=o<t.length?n[t.charAt(o)]:64;++o;const A=o<t.length?n[t.charAt(o)]:64;if(++o,l==null||y==null||p==null||A==null)throw new i3;const S=l<<2|y>>4;if(i.push(S),p!==64){const M=y<<4&240|p>>2;if(i.push(M),A!==64){const j=p<<6&192|A;i.push(j)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class i3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const s3=function(t){const e=dx(t);return gx.encodeByteArray(e,!0)},Su=function(t){return s3(t).replace(/\./g,"")},o3=function(t){try{return gx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=()=>a3().__FIREBASE_DEFAULTS__,c3=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},u3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&o3(t[1]);return e&&JSON.parse(e)},O1=()=>{try{return n3()||l3()||c3()||u3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},h3=t=>{var e,n;return(n=(e=O1())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},f3=t=>{const e=h3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},px=()=>{var t;return(t=O1())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function g3(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",o=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...t},y="";return[Su(JSON.stringify(n)),Su(JSON.stringify(f)),y].join(".")}const fl={};function m3(){const t={prod:[],emulator:[]};for(const e of Object.keys(fl))fl[e]?t.emulator.push(e):t.prod.push(e);return t}function x3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Rg=!1;function y3(t,e){if(typeof window>"u"||typeof document>"u"||!P1(window.location.host)||fl[t]===e||fl[t]||Rg)return;fl[t]=e;function n(S){return`__firebase__banner__${S}`}const i="__firebase__banner",l=m3().prod.length>0;function f(){const S=document.getElementById(i);S&&S.remove()}function y(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function x(S,M){S.setAttribute("width","24"),S.setAttribute("id",M),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Rg=!0,f()},S}function E(S,M){S.setAttribute("id",M),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function A(){const S=x3(i),M=n("text"),j=document.getElementById(M)||document.createElement("span"),X=n("learnmore"),q=document.getElementById(X)||document.createElement("a"),z=n("preprendIcon"),L=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const F=S.element;y(F),E(q,X);const Z=p();x(L,z),F.append(L,j,q,Z),document.body.appendChild(F)}l?(j.innerText="Preview backend disconnected.",L.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(L.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E3(){var e;const t=(e=O1())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _3(){return!E3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A3(){try{return typeof indexedDB=="object"}catch{return!1}}function C3(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3="FirebaseError";class ma extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=v3,Object.setPrototypeOf(this,ma.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mx.prototype.create)}}class mx{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],f=l?I3(l,i):"Error",y=`${this.serviceName}: ${f} (${o}).`;return new ma(o,y,i)}}function I3(t,e){return t.replace(T3,(n,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const T3=/\{\$([^}]+)}/g;function Nu(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const o of n){if(!i.includes(o))return!1;const l=t[o],f=e[o];if(bg(l)&&bg(f)){if(!Nu(l,f))return!1}else if(l!==f)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function bg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(t){return t&&t._delegate?t._delegate:t}class kl{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new d3;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(R3(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,f]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(l);i===y&&f.resolve(o)}return o}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:N3(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function N3(t){return t===Ws?void 0:t}function R3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new S3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ze||(Ze={}));const D3={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},O3=Ze.INFO,P3={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},k3=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),o=P3[e];if(o)console[o](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xx{constructor(e){this.name=e,this._logLevel=O3,this._logHandler=k3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?D3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const M3=(t,e)=>e.some(n=>t instanceof n);let Dg,Og;function L3(){return Dg||(Dg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B3(){return Og||(Og=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yx=new WeakMap,dd=new WeakMap,wx=new WeakMap,of=new WeakMap,k1=new WeakMap;function F3(t){const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("success",l),t.removeEventListener("error",f)},l=()=>{n(gs(t.result)),o()},f=()=>{i(t.error),o()};t.addEventListener("success",l),t.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&yx.set(n,t)}).catch(()=>{}),k1.set(e,t),e}function V3(t){if(dd.has(t))return;const e=new Promise((n,i)=>{const o=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",f),t.removeEventListener("abort",f)},l=()=>{n(),o()},f=()=>{i(t.error||new DOMException("AbortError","AbortError")),o()};t.addEventListener("complete",l),t.addEventListener("error",f),t.addEventListener("abort",f)});dd.set(t,e)}let gd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function U3(t){gd=t(gd)}function j3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(af(this),e,...n);return wx.set(i,e.sort?e.sort():[e]),gs(i)}:B3().includes(t)?function(...e){return t.apply(af(this),e),gs(yx.get(this))}:function(...e){return gs(t.apply(af(this),e))}}function z3(t){return typeof t=="function"?j3(t):(t instanceof IDBTransaction&&V3(t),M3(t,L3())?new Proxy(t,gd):t)}function gs(t){if(t instanceof IDBRequest)return F3(t);if(of.has(t))return of.get(t);const e=z3(t);return e!==t&&(of.set(t,e),k1.set(e,t)),e}const af=t=>k1.get(t);function H3(t,e,{blocked:n,upgrade:i,blocking:o,terminated:l}={}){const f=indexedDB.open(t,e),y=gs(f);return i&&f.addEventListener("upgradeneeded",x=>{i(gs(f.result),x.oldVersion,x.newVersion,gs(f.transaction),x)}),n&&f.addEventListener("blocked",x=>n(x.oldVersion,x.newVersion,x)),y.then(x=>{l&&x.addEventListener("close",()=>l()),o&&x.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),y}const G3=["get","getKey","getAll","getAllKeys","count"],W3=["put","add","delete","clear"],lf=new Map;function Pg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lf.get(e))return lf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,o=W3.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||G3.includes(n)))return;const l=async function(f,...y){const x=this.transaction(f,o?"readwrite":"readonly");let p=x.store;return i&&(p=p.index(y.shift())),(await Promise.all([p[n](...y),o&&x.done]))[0]};return lf.set(e,l),l}U3(t=>({...t,get:(e,n,i)=>Pg(e,n)||t.get(e,n,i),has:(e,n)=>!!Pg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(K3(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function K3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pd="@firebase/app",kg="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new xx("@firebase/app"),q3="@firebase/app-compat",Y3="@firebase/analytics-compat",Q3="@firebase/analytics",$3="@firebase/app-check-compat",Z3="@firebase/app-check",J3="@firebase/auth",eA="@firebase/auth-compat",tA="@firebase/database",nA="@firebase/data-connect",rA="@firebase/database-compat",iA="@firebase/functions",sA="@firebase/functions-compat",oA="@firebase/installations",aA="@firebase/installations-compat",lA="@firebase/messaging",cA="@firebase/messaging-compat",uA="@firebase/performance",hA="@firebase/performance-compat",fA="@firebase/remote-config",dA="@firebase/remote-config-compat",gA="@firebase/storage",pA="@firebase/storage-compat",mA="@firebase/firestore",xA="@firebase/ai",yA="@firebase/firestore-compat",wA="firebase",EA="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="[DEFAULT]",_A={[pd]:"fire-core",[q3]:"fire-core-compat",[Q3]:"fire-analytics",[Y3]:"fire-analytics-compat",[Z3]:"fire-app-check",[$3]:"fire-app-check-compat",[J3]:"fire-auth",[eA]:"fire-auth-compat",[tA]:"fire-rtdb",[nA]:"fire-data-connect",[rA]:"fire-rtdb-compat",[iA]:"fire-fn",[sA]:"fire-fn-compat",[oA]:"fire-iid",[aA]:"fire-iid-compat",[lA]:"fire-fcm",[cA]:"fire-fcm-compat",[uA]:"fire-perf",[hA]:"fire-perf-compat",[fA]:"fire-rc",[dA]:"fire-rc-compat",[gA]:"fire-gcs",[pA]:"fire-gcs-compat",[mA]:"fire-fst",[yA]:"fire-fst-compat",[xA]:"fire-vertex","fire-js":"fire-js",[wA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new Map,AA=new Map,xd=new Map;function Mg(t,e){try{t.container.addComponent(e)}catch(n){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bu(t){const e=t.name;if(xd.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;xd.set(e,t);for(const n of Ru.values())Mg(n,t);for(const n of AA.values())Mg(n,t);return!0}function CA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vA(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ps=new mx("app","Firebase",IA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new kl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ps.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=EA;function Ex(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:md,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw ps.create("bad-app-name",{appName:String(o)});if(n||(n=px()),!n)throw ps.create("no-options");const l=Ru.get(o);if(l){if(Nu(n,l.options)&&Nu(i,l.config))return l;throw ps.create("duplicate-app",{appName:o})}const f=new b3(o);for(const x of xd.values())f.addComponent(x);const y=new TA(n,i,f);return Ru.set(o,y),y}function NA(t=md){const e=Ru.get(t);if(!e&&t===md&&px())return Ex();if(!e)throw ps.create("no-app",{appName:t});return e}function Qo(t,e,n){let i=_A[t]??t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const f=[`Unable to register library "${i}" with version "${e}":`];o&&f.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&f.push("and"),l&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(f.join(" "));return}bu(new kl(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA="firebase-heartbeat-database",bA=1,Ml="firebase-heartbeat-store";let cf=null;function _x(){return cf||(cf=H3(RA,bA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ml)}catch(n){console.warn(n)}}}}).catch(t=>{throw ps.create("idb-open",{originalErrorMessage:t.message})})),cf}async function DA(t){try{const n=(await _x()).transaction(Ml),i=await n.objectStore(Ml).get(Ax(t));return await n.done,i}catch(e){if(e instanceof ma)ki.warn(e.message);else{const n=ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ki.warn(n.message)}}}async function Lg(t,e){try{const i=(await _x()).transaction(Ml,"readwrite");await i.objectStore(Ml).put(e,Ax(t)),await i.done}catch(n){if(n instanceof ma)ki.warn(n.message);else{const i=ps.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ki.warn(i.message)}}}function Ax(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=1024,PA=30;class kA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Bg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(f=>f.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>PA){const f=BA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ki.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Bg(),{heartbeatsToSend:i,unsentEntries:o}=MA(this._heartbeatsCache.heartbeats),l=Su(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return ki.warn(n),""}}}function Bg(){return new Date().toISOString().substring(0,10)}function MA(t,e=OA){const n=[];let i=t.slice();for(const o of t){const l=n.find(f=>f.agent===o.agent);if(l){if(l.dates.push(o.date),Fg(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Fg(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class LA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return A3()?C3().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await DA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Lg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Lg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Fg(t){return Su(JSON.stringify({version:2,heartbeats:t})).length}function BA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t){bu(new kl("platform-logger",e=>new X3(e),"PRIVATE")),bu(new kl("heartbeat",e=>new kA(e),"PRIVATE")),Qo(pd,kg,t),Qo(pd,kg,"esm2020"),Qo("fire-js","")}FA("");var VA="firebase",UA="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qo(VA,UA,"app");var Vg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ms,Cx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,D){function O(){}O.prototype=D.prototype,b.F=D.prototype,b.prototype=new O,b.prototype.constructor=b,b.D=function(U,H,W){for(var V=Array(arguments.length-2),He=2;He<arguments.length;He++)V[He-2]=arguments[He];return D.prototype[H].apply(U,V)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,D,O){O||(O=0);const U=Array(16);if(typeof D=="string")for(var H=0;H<16;++H)U[H]=D.charCodeAt(O++)|D.charCodeAt(O++)<<8|D.charCodeAt(O++)<<16|D.charCodeAt(O++)<<24;else for(H=0;H<16;++H)U[H]=D[O++]|D[O++]<<8|D[O++]<<16|D[O++]<<24;D=b.g[0],O=b.g[1],H=b.g[2];let W=b.g[3],V;V=D+(W^O&(H^W))+U[0]+3614090360&4294967295,D=O+(V<<7&4294967295|V>>>25),V=W+(H^D&(O^H))+U[1]+3905402710&4294967295,W=D+(V<<12&4294967295|V>>>20),V=H+(O^W&(D^O))+U[2]+606105819&4294967295,H=W+(V<<17&4294967295|V>>>15),V=O+(D^H&(W^D))+U[3]+3250441966&4294967295,O=H+(V<<22&4294967295|V>>>10),V=D+(W^O&(H^W))+U[4]+4118548399&4294967295,D=O+(V<<7&4294967295|V>>>25),V=W+(H^D&(O^H))+U[5]+1200080426&4294967295,W=D+(V<<12&4294967295|V>>>20),V=H+(O^W&(D^O))+U[6]+2821735955&4294967295,H=W+(V<<17&4294967295|V>>>15),V=O+(D^H&(W^D))+U[7]+4249261313&4294967295,O=H+(V<<22&4294967295|V>>>10),V=D+(W^O&(H^W))+U[8]+1770035416&4294967295,D=O+(V<<7&4294967295|V>>>25),V=W+(H^D&(O^H))+U[9]+2336552879&4294967295,W=D+(V<<12&4294967295|V>>>20),V=H+(O^W&(D^O))+U[10]+4294925233&4294967295,H=W+(V<<17&4294967295|V>>>15),V=O+(D^H&(W^D))+U[11]+2304563134&4294967295,O=H+(V<<22&4294967295|V>>>10),V=D+(W^O&(H^W))+U[12]+1804603682&4294967295,D=O+(V<<7&4294967295|V>>>25),V=W+(H^D&(O^H))+U[13]+4254626195&4294967295,W=D+(V<<12&4294967295|V>>>20),V=H+(O^W&(D^O))+U[14]+2792965006&4294967295,H=W+(V<<17&4294967295|V>>>15),V=O+(D^H&(W^D))+U[15]+1236535329&4294967295,O=H+(V<<22&4294967295|V>>>10),V=D+(H^W&(O^H))+U[1]+4129170786&4294967295,D=O+(V<<5&4294967295|V>>>27),V=W+(O^H&(D^O))+U[6]+3225465664&4294967295,W=D+(V<<9&4294967295|V>>>23),V=H+(D^O&(W^D))+U[11]+643717713&4294967295,H=W+(V<<14&4294967295|V>>>18),V=O+(W^D&(H^W))+U[0]+3921069994&4294967295,O=H+(V<<20&4294967295|V>>>12),V=D+(H^W&(O^H))+U[5]+3593408605&4294967295,D=O+(V<<5&4294967295|V>>>27),V=W+(O^H&(D^O))+U[10]+38016083&4294967295,W=D+(V<<9&4294967295|V>>>23),V=H+(D^O&(W^D))+U[15]+3634488961&4294967295,H=W+(V<<14&4294967295|V>>>18),V=O+(W^D&(H^W))+U[4]+3889429448&4294967295,O=H+(V<<20&4294967295|V>>>12),V=D+(H^W&(O^H))+U[9]+568446438&4294967295,D=O+(V<<5&4294967295|V>>>27),V=W+(O^H&(D^O))+U[14]+3275163606&4294967295,W=D+(V<<9&4294967295|V>>>23),V=H+(D^O&(W^D))+U[3]+4107603335&4294967295,H=W+(V<<14&4294967295|V>>>18),V=O+(W^D&(H^W))+U[8]+1163531501&4294967295,O=H+(V<<20&4294967295|V>>>12),V=D+(H^W&(O^H))+U[13]+2850285829&4294967295,D=O+(V<<5&4294967295|V>>>27),V=W+(O^H&(D^O))+U[2]+4243563512&4294967295,W=D+(V<<9&4294967295|V>>>23),V=H+(D^O&(W^D))+U[7]+1735328473&4294967295,H=W+(V<<14&4294967295|V>>>18),V=O+(W^D&(H^W))+U[12]+2368359562&4294967295,O=H+(V<<20&4294967295|V>>>12),V=D+(O^H^W)+U[5]+4294588738&4294967295,D=O+(V<<4&4294967295|V>>>28),V=W+(D^O^H)+U[8]+2272392833&4294967295,W=D+(V<<11&4294967295|V>>>21),V=H+(W^D^O)+U[11]+1839030562&4294967295,H=W+(V<<16&4294967295|V>>>16),V=O+(H^W^D)+U[14]+4259657740&4294967295,O=H+(V<<23&4294967295|V>>>9),V=D+(O^H^W)+U[1]+2763975236&4294967295,D=O+(V<<4&4294967295|V>>>28),V=W+(D^O^H)+U[4]+1272893353&4294967295,W=D+(V<<11&4294967295|V>>>21),V=H+(W^D^O)+U[7]+4139469664&4294967295,H=W+(V<<16&4294967295|V>>>16),V=O+(H^W^D)+U[10]+3200236656&4294967295,O=H+(V<<23&4294967295|V>>>9),V=D+(O^H^W)+U[13]+681279174&4294967295,D=O+(V<<4&4294967295|V>>>28),V=W+(D^O^H)+U[0]+3936430074&4294967295,W=D+(V<<11&4294967295|V>>>21),V=H+(W^D^O)+U[3]+3572445317&4294967295,H=W+(V<<16&4294967295|V>>>16),V=O+(H^W^D)+U[6]+76029189&4294967295,O=H+(V<<23&4294967295|V>>>9),V=D+(O^H^W)+U[9]+3654602809&4294967295,D=O+(V<<4&4294967295|V>>>28),V=W+(D^O^H)+U[12]+3873151461&4294967295,W=D+(V<<11&4294967295|V>>>21),V=H+(W^D^O)+U[15]+530742520&4294967295,H=W+(V<<16&4294967295|V>>>16),V=O+(H^W^D)+U[2]+3299628645&4294967295,O=H+(V<<23&4294967295|V>>>9),V=D+(H^(O|~W))+U[0]+4096336452&4294967295,D=O+(V<<6&4294967295|V>>>26),V=W+(O^(D|~H))+U[7]+1126891415&4294967295,W=D+(V<<10&4294967295|V>>>22),V=H+(D^(W|~O))+U[14]+2878612391&4294967295,H=W+(V<<15&4294967295|V>>>17),V=O+(W^(H|~D))+U[5]+4237533241&4294967295,O=H+(V<<21&4294967295|V>>>11),V=D+(H^(O|~W))+U[12]+1700485571&4294967295,D=O+(V<<6&4294967295|V>>>26),V=W+(O^(D|~H))+U[3]+2399980690&4294967295,W=D+(V<<10&4294967295|V>>>22),V=H+(D^(W|~O))+U[10]+4293915773&4294967295,H=W+(V<<15&4294967295|V>>>17),V=O+(W^(H|~D))+U[1]+2240044497&4294967295,O=H+(V<<21&4294967295|V>>>11),V=D+(H^(O|~W))+U[8]+1873313359&4294967295,D=O+(V<<6&4294967295|V>>>26),V=W+(O^(D|~H))+U[15]+4264355552&4294967295,W=D+(V<<10&4294967295|V>>>22),V=H+(D^(W|~O))+U[6]+2734768916&4294967295,H=W+(V<<15&4294967295|V>>>17),V=O+(W^(H|~D))+U[13]+1309151649&4294967295,O=H+(V<<21&4294967295|V>>>11),V=D+(H^(O|~W))+U[4]+4149444226&4294967295,D=O+(V<<6&4294967295|V>>>26),V=W+(O^(D|~H))+U[11]+3174756917&4294967295,W=D+(V<<10&4294967295|V>>>22),V=H+(D^(W|~O))+U[2]+718787259&4294967295,H=W+(V<<15&4294967295|V>>>17),V=O+(W^(H|~D))+U[9]+3951481745&4294967295,b.g[0]=b.g[0]+D&4294967295,b.g[1]=b.g[1]+(H+(V<<21&4294967295|V>>>11))&4294967295,b.g[2]=b.g[2]+H&4294967295,b.g[3]=b.g[3]+W&4294967295}i.prototype.v=function(b,D){D===void 0&&(D=b.length);const O=D-this.blockSize,U=this.C;let H=this.h,W=0;for(;W<D;){if(H==0)for(;W<=O;)o(this,b,W),W+=this.blockSize;if(typeof b=="string"){for(;W<D;)if(U[H++]=b.charCodeAt(W++),H==this.blockSize){o(this,U),H=0;break}}else for(;W<D;)if(U[H++]=b[W++],H==this.blockSize){o(this,U),H=0;break}}this.h=H,this.o+=D},i.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var D=1;D<b.length-8;++D)b[D]=0;D=this.o*8;for(var O=b.length-8;O<b.length;++O)b[O]=D&255,D/=256;for(this.v(b),b=Array(16),D=0,O=0;O<4;++O)for(let U=0;U<32;U+=8)b[D++]=this.g[O]>>>U&255;return b};function l(b,D){var O=y;return Object.prototype.hasOwnProperty.call(O,b)?O[b]:O[b]=D(b)}function f(b,D){this.h=D;const O=[];let U=!0;for(let H=b.length-1;H>=0;H--){const W=b[H]|0;U&&W==D||(O[H]=W,U=!1)}this.g=O}var y={};function x(b){return-128<=b&&b<128?l(b,function(D){return new f([D|0],D<0?-1:0)}):new f([b|0],b<0?-1:0)}function p(b){if(isNaN(b)||!isFinite(b))return A;if(b<0)return q(p(-b));const D=[];let O=1;for(let U=0;b>=O;U++)D[U]=b/O|0,O*=4294967296;return new f(D,0)}function E(b,D){if(b.length==0)throw Error("number format error: empty string");if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(b.charAt(0)=="-")return q(E(b.substring(1),D));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=p(Math.pow(D,8));let U=A;for(let W=0;W<b.length;W+=8){var H=Math.min(8,b.length-W);const V=parseInt(b.substring(W,W+H),D);H<8?(H=p(Math.pow(D,H)),U=U.j(H).add(p(V))):(U=U.j(O),U=U.add(p(V)))}return U}var A=x(0),S=x(1),M=x(16777216);t=f.prototype,t.m=function(){if(X(this))return-q(this).m();let b=0,D=1;for(let O=0;O<this.g.length;O++){const U=this.i(O);b+=(U>=0?U:4294967296+U)*D,D*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(j(this))return"0";if(X(this))return"-"+q(this).toString(b);const D=p(Math.pow(b,6));var O=this;let U="";for(;;){const H=Z(O,D).g;O=z(O,H.j(D));let W=((O.g.length>0?O.g[0]:O.h)>>>0).toString(b);if(O=H,j(O))return W+U;for(;W.length<6;)W="0"+W;U=W+U}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function j(b){if(b.h!=0)return!1;for(let D=0;D<b.g.length;D++)if(b.g[D]!=0)return!1;return!0}function X(b){return b.h==-1}t.l=function(b){return b=z(this,b),X(b)?-1:j(b)?0:1};function q(b){const D=b.g.length,O=[];for(let U=0;U<D;U++)O[U]=~b.g[U];return new f(O,~b.h).add(S)}t.abs=function(){return X(this)?q(this):this},t.add=function(b){const D=Math.max(this.g.length,b.g.length),O=[];let U=0;for(let H=0;H<=D;H++){let W=U+(this.i(H)&65535)+(b.i(H)&65535),V=(W>>>16)+(this.i(H)>>>16)+(b.i(H)>>>16);U=V>>>16,W&=65535,V&=65535,O[H]=V<<16|W}return new f(O,O[O.length-1]&-2147483648?-1:0)};function z(b,D){return b.add(q(D))}t.j=function(b){if(j(this)||j(b))return A;if(X(this))return X(b)?q(this).j(q(b)):q(q(this).j(b));if(X(b))return q(this.j(q(b)));if(this.l(M)<0&&b.l(M)<0)return p(this.m()*b.m());const D=this.g.length+b.g.length,O=[];for(var U=0;U<2*D;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(let H=0;H<b.g.length;H++){const W=this.i(U)>>>16,V=this.i(U)&65535,He=b.i(H)>>>16,re=b.i(H)&65535;O[2*U+2*H]+=V*re,L(O,2*U+2*H),O[2*U+2*H+1]+=W*re,L(O,2*U+2*H+1),O[2*U+2*H+1]+=V*He,L(O,2*U+2*H+1),O[2*U+2*H+2]+=W*He,L(O,2*U+2*H+2)}for(b=0;b<D;b++)O[b]=O[2*b+1]<<16|O[2*b];for(b=D;b<2*D;b++)O[b]=0;return new f(O,0)};function L(b,D){for(;(b[D]&65535)!=b[D];)b[D+1]+=b[D]>>>16,b[D]&=65535,D++}function F(b,D){this.g=b,this.h=D}function Z(b,D){if(j(D))throw Error("division by zero");if(j(b))return new F(A,A);if(X(b))return D=Z(q(b),D),new F(q(D.g),q(D.h));if(X(D))return D=Z(b,q(D)),new F(q(D.g),D.h);if(b.g.length>30){if(X(b)||X(D))throw Error("slowDivide_ only works with positive integers.");for(var O=S,U=D;U.l(b)<=0;)O=le(O),U=le(U);var H=Y(O,1),W=Y(U,1);for(U=Y(U,2),O=Y(O,2);!j(U);){var V=W.add(U);V.l(b)<=0&&(H=H.add(O),W=V),U=Y(U,1),O=Y(O,1)}return D=z(b,H.j(D)),new F(H,D)}for(H=A;b.l(D)>=0;){for(O=Math.max(1,Math.floor(b.m()/D.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),W=p(O),V=W.j(D);X(V)||V.l(b)>0;)O-=U,W=p(O),V=W.j(D);j(W)&&(W=S),H=H.add(W),b=z(b,V)}return new F(H,b)}t.B=function(b){return Z(this,b).h},t.and=function(b){const D=Math.max(this.g.length,b.g.length),O=[];for(let U=0;U<D;U++)O[U]=this.i(U)&b.i(U);return new f(O,this.h&b.h)},t.or=function(b){const D=Math.max(this.g.length,b.g.length),O=[];for(let U=0;U<D;U++)O[U]=this.i(U)|b.i(U);return new f(O,this.h|b.h)},t.xor=function(b){const D=Math.max(this.g.length,b.g.length),O=[];for(let U=0;U<D;U++)O[U]=this.i(U)^b.i(U);return new f(O,this.h^b.h)};function le(b){const D=b.g.length+1,O=[];for(let U=0;U<D;U++)O[U]=b.i(U)<<1|b.i(U-1)>>>31;return new f(O,b.h)}function Y(b,D){const O=D>>5;D%=32;const U=b.g.length-O,H=[];for(let W=0;W<U;W++)H[W]=D>0?b.i(W+O)>>>D|b.i(W+O+1)<<32-D:b.i(W+O);return new f(H,b.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Cx=i,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=p,f.fromString=E,ms=f}).apply(typeof Vg<"u"?Vg:typeof self<"u"?self:typeof window<"u"?window:{});var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vx,Za,Ix,Qc,yd,Tx,Sx,Nx;(function(){var t,e=Object.defineProperty;function n(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oc=="object"&&Oc];for(var _=0;_<g.length;++_){var v=g[_];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=n(this);function o(g,_){if(_)e:{var v=i;g=g.split(".");for(var P=0;P<g.length-1;P++){var Q=g[P];if(!(Q in v))break e;v=v[Q]}g=g[g.length-1],P=v[g],_=_(P),_!=P&&_!=null&&e(v,g,{configurable:!0,writable:!0,value:_})}}o("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(g){return g||function(_){var v=[],P;for(P in _)Object.prototype.hasOwnProperty.call(_,P)&&v.push([P,_[P]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},f=this||self;function y(g){var _=typeof g;return _=="object"&&g!=null||_=="function"}function x(g,_,v){return g.call.apply(g.bind,arguments)}function p(g,_,v){return p=x,p.apply(null,arguments)}function E(g,_){var v=Array.prototype.slice.call(arguments,1);return function(){var P=v.slice();return P.push.apply(P,arguments),g.apply(this,P)}}function A(g,_){function v(){}v.prototype=_.prototype,g.Z=_.prototype,g.prototype=new v,g.prototype.constructor=g,g.Ob=function(P,Q,ee){for(var de=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)de[Le-2]=arguments[Le];return _.prototype[Q].apply(P,de)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function M(g){const _=g.length;if(_>0){const v=Array(_);for(let P=0;P<_;P++)v[P]=g[P];return v}return[]}function j(g,_){for(let P=1;P<arguments.length;P++){const Q=arguments[P];var v=typeof Q;if(v=v!="object"?v:Q?Array.isArray(Q)?"array":v:"null",v=="array"||v=="object"&&typeof Q.length=="number"){v=g.length||0;const ee=Q.length||0;g.length=v+ee;for(let de=0;de<ee;de++)g[v+de]=Q[de]}else g.push(Q)}}class X{constructor(_,v){this.i=_,this.j=v,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function q(g){f.setTimeout(()=>{throw g},0)}function z(){var g=b;let _=null;return g.g&&(_=g.g,g.g=g.g.next,g.g||(g.h=null),_.next=null),_}class L{constructor(){this.h=this.g=null}add(_,v){const P=F.get();P.set(_,v),this.h?this.h.next=P:this.g=P,this.h=P}}var F=new X(()=>new Z,g=>g.reset());class Z{constructor(){this.next=this.g=this.h=null}set(_,v){this.h=_,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let le,Y=!1,b=new L,D=()=>{const g=Promise.resolve(void 0);le=()=>{g.then(O)}};function O(){for(var g;g=z();){try{g.h.call(g.g)}catch(v){q(v)}var _=F;_.j(g),_.h<100&&(_.h++,g.next=_.g,_.g=g)}Y=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(g,_){this.type=g,this.g=this.target=_,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var g=!1,_=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const v=()=>{};f.addEventListener("test",v,_),f.removeEventListener("test",v,_)}catch{}return g}();function V(g){return/^[\s\xa0]*$/.test(g)}function He(g,_){H.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,_)}A(He,H),He.prototype.init=function(g,_){const v=this.type=g.type,P=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=_,_=g.relatedTarget,_||(v=="mouseover"?_=g.fromElement:v=="mouseout"&&(_=g.toElement)),this.relatedTarget=_,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var re="closure_listenable_"+(Math.random()*1e6|0),Nt=0;function be(g,_,v,P,Q){this.listener=g,this.proxy=null,this.src=_,this.type=v,this.capture=!!P,this.ha=Q,this.key=++Nt,this.da=this.fa=!1}function pe(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ie(g,_,v){for(const P in g)_.call(v,g[P],P,g)}function Ne(g,_){for(const v in g)_.call(void 0,g[v],v,g)}function dt(g){const _={};for(const v in g)_[v]=g[v];return _}const Ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Mn(g,_){let v,P;for(let Q=1;Q<arguments.length;Q++){P=arguments[Q];for(v in P)g[v]=P[v];for(let ee=0;ee<Ve.length;ee++)v=Ve[ee],Object.prototype.hasOwnProperty.call(P,v)&&(g[v]=P[v])}}function ht(g){this.src=g,this.g={},this.h=0}ht.prototype.add=function(g,_,v,P,Q){const ee=g.toString();g=this.g[ee],g||(g=this.g[ee]=[],this.h++);const de=_e(g,_,P,Q);return de>-1?(_=g[de],v||(_.fa=!1)):(_=new be(_,this.src,ee,!!P,Q),_.fa=v,g.push(_)),_};function Dr(g,_){const v=_.type;if(v in g.g){var P=g.g[v],Q=Array.prototype.indexOf.call(P,_,void 0),ee;(ee=Q>=0)&&Array.prototype.splice.call(P,Q,1),ee&&(pe(_),g.g[v].length==0&&(delete g.g[v],g.h--))}}function _e(g,_,v,P){for(let Q=0;Q<g.length;++Q){const ee=g[Q];if(!ee.da&&ee.listener==_&&ee.capture==!!v&&ee.ha==P)return Q}return-1}var dr="closure_lm_"+(Math.random()*1e6|0),Ft={};function Fi(g,_,v,P,Q){if(P&&P.once)return Os(g,_,v,P,Q);if(Array.isArray(_)){for(let ee=0;ee<_.length;ee++)Fi(g,_[ee],v,P,Q);return null}return v=Ue(v),g&&g[re]?g.J(_,v,y(P)?!!P.capture:!!P,Q):Vi(g,_,v,!1,P,Q)}function Vi(g,_,v,P,Q,ee){if(!_)throw Error("Invalid event type");const de=y(Q)?!!Q.capture:!!Q;let Le=zt(g);if(Le||(g[dr]=Le=new ht(g)),v=Le.add(_,v,P,de,ee),v.proxy)return v;if(P=In(),v.proxy=P,P.src=g,P.listener=v,g.addEventListener)W||(Q=de),Q===void 0&&(Q=!1),g.addEventListener(_.toString(),P,Q);else if(g.attachEvent)g.attachEvent(rr(_.toString()),P);else if(g.addListener&&g.removeListener)g.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return v}function In(){function g(v){return _.call(g.src,g.listener,v)}const _=Ps;return g}function Os(g,_,v,P,Q){if(Array.isArray(_)){for(let ee=0;ee<_.length;ee++)Os(g,_[ee],v,P,Q);return null}return v=Ue(v),g&&g[re]?g.K(_,v,y(P)?!!P.capture:!!P,Q):Vi(g,_,v,!0,P,Q)}function Ke(g,_,v,P,Q){if(Array.isArray(_))for(var ee=0;ee<_.length;ee++)Ke(g,_[ee],v,P,Q);else P=y(P)?!!P.capture:!!P,v=Ue(v),g&&g[re]?(g=g.i,ee=String(_).toString(),ee in g.g&&(_=g.g[ee],v=_e(_,v,P,Q),v>-1&&(pe(_[v]),Array.prototype.splice.call(_,v,1),_.length==0&&(delete g.g[ee],g.h--)))):g&&(g=zt(g))&&(_=g.g[_.toString()],g=-1,_&&(g=_e(_,v,P,Q)),(v=g>-1?_[g]:null)&&Kr(v))}function Kr(g){if(typeof g!="number"&&g&&!g.da){var _=g.src;if(_&&_[re])Dr(_.i,g);else{var v=g.type,P=g.proxy;_.removeEventListener?_.removeEventListener(v,P,g.capture):_.detachEvent?_.detachEvent(rr(v),P):_.addListener&&_.removeListener&&_.removeListener(P),(v=zt(_))?(Dr(v,g),v.h==0&&(v.src=null,_[dr]=null)):pe(g)}}}function rr(g){return g in Ft?Ft[g]:Ft[g]="on"+g}function Ps(g,_){if(g.da)g=!0;else{_=new He(_,this);const v=g.listener,P=g.ha||g.src;g.fa&&Kr(g),g=v.call(P,_)}return g}function zt(g){return g=g[dr],g instanceof ht?g:null}var rt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ue(g){return typeof g=="function"?g:(g[rt]||(g[rt]=function(_){return g.handleEvent(_)}),g[rt])}function Ht(){U.call(this),this.i=new ht(this),this.M=this,this.G=null}A(Ht,U),Ht.prototype[re]=!0,Ht.prototype.removeEventListener=function(g,_,v,P){Ke(this,g,_,v,P)};function ge(g,_){var v,P=g.G;if(P)for(v=[];P;P=P.G)v.push(P);if(g=g.M,P=_.type||_,typeof _=="string")_=new H(_,g);else if(_ instanceof H)_.target=_.target||g;else{var Q=_;_=new H(P,g),Mn(_,Q)}Q=!0;let ee,de;if(v)for(de=v.length-1;de>=0;de--)ee=_.g=v[de],Q=mi(ee,P,!0,_)&&Q;if(ee=_.g=g,Q=mi(ee,P,!0,_)&&Q,Q=mi(ee,P,!1,_)&&Q,v)for(de=0;de<v.length;de++)ee=_.g=v[de],Q=mi(ee,P,!1,_)&&Q}Ht.prototype.N=function(){if(Ht.Z.N.call(this),this.i){var g=this.i;for(const _ in g.g){const v=g.g[_];for(let P=0;P<v.length;P++)pe(v[P]);delete g.g[_],g.h--}}this.G=null},Ht.prototype.J=function(g,_,v,P){return this.i.add(String(g),_,!1,v,P)},Ht.prototype.K=function(g,_,v,P){return this.i.add(String(g),_,!0,v,P)};function mi(g,_,v,P){if(_=g.i.g[String(_)],!_)return!0;_=_.concat();let Q=!0;for(let ee=0;ee<_.length;++ee){const de=_[ee];if(de&&!de.da&&de.capture==v){const Le=de.listener,Pt=de.ha||de.src;de.fa&&Dr(g.i,de),Q=Le.call(Pt,P)!==!1&&Q}}return Q&&!P.defaultPrevented}function tc(g,_){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:f.setTimeout(g,_||0)}function gr(g){g.g=tc(()=>{g.g=null,g.i&&(g.i=!1,gr(g))},g.l);const _=g.h;g.h=null,g.m.apply(null,_)}class Aa extends U{constructor(_,v){super(),this.m=_,this.l=v,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:gr(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gn(g){U.call(this),this.h=g,this.g={}}A(gn,U);var Ca=[];function Or(g){Ie(g.g,function(_,v){this.g.hasOwnProperty(v)&&Kr(_)},g),g.g={}}gn.prototype.N=function(){gn.Z.N.call(this),Or(this)},gn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jt=f.JSON.stringify,nc=f.JSON.parse,ho=class{stringify(g){return f.JSON.stringify(g,void 0)}parse(g){return f.JSON.parse(g,void 0)}};function rc(){}function bt(){}var fe={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Dt(){H.call(this,"d")}A(Dt,H);function nt(){H.call(this,"c")}A(nt,H);var it={},Ui=null;function ji(){return Ui=Ui||new Ht}it.Ia="serverreachability";function va(g){H.call(this,it.Ia,g)}A(va,H);function je(g){const _=ji();ge(_,new va(_))}it.STAT_EVENT="statevent";function qr(g,_){H.call(this,it.STAT_EVENT,g),this.stat=_}A(qr,H);function sn(g){const _=ji();ge(_,new qr(_,g))}it.Ja="timingevent";function Ia(g,_){H.call(this,it.Ja,g),this.size=_}A(Ia,H);function pn(g,_){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){g()},_)}function xi(){this.g=!0}xi.prototype.ua=function(){this.g=!1};function on(g,_,v,P,Q,ee){g.info(function(){if(g.g)if(ee){var de="",Le=ee.split("&");for(let lt=0;lt<Le.length;lt++){var Pt=Le[lt].split("=");if(Pt.length>1){const Gt=Pt[0];Pt=Pt[1];const _r=Gt.split("_");de=_r.length>=2&&_r[1]=="type"?de+(Gt+"="+Pt+"&"):de+(Gt+"=redacted&")}}}else de=null;else de=ee;return"XMLHTTP REQ ("+P+") [attempt "+Q+"]: "+_+`
`+v+`
`+de})}function zi(g,_,v,P,Q,ee,de){g.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+Q+"]: "+_+`
`+v+`
`+ee+" "+de})}function Pr(g,_,v,P){g.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ih(g,v)+(P?" "+P:"")})}function pr(g,_){g.info(function(){return"TIMEOUT: "+_})}xi.prototype.info=function(){};function Ih(g,_){if(!g.g)return _;if(!_)return null;try{const ee=JSON.parse(_);if(ee){for(g=0;g<ee.length;g++)if(Array.isArray(ee[g])){var v=ee[g];if(!(v.length<2)){var P=v[1];if(Array.isArray(P)&&!(P.length<1)){var Q=P[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let de=1;de<P.length;de++)P[de]=""}}}}return Jt(ee)}catch{return _}}var mr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},mn;function kr(){}A(kr,rc),kr.prototype.g=function(){return new XMLHttpRequest},mn=new kr;function an(g){return encodeURIComponent(String(g))}function me(g){var _=1;g=g.split(":");const v=[];for(;_>0&&g.length;)v.push(g.shift()),_--;return g.length&&v.push(g.join(":")),v}function Ln(g,_,v,P){this.j=g,this.i=_,this.l=v,this.S=P||1,this.V=new gn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new go}function go(){this.i=null,this.g="",this.h=!1}var xn={},Yr={};function Hi(g,_,v){g.M=1,g.A=mo(st(_)),g.u=v,g.R=!0,ks(g,null)}function ks(g,_){g.F=Date.now(),Bn(g),g.B=st(g.A);var v=g.B,P=g.S;Array.isArray(P)||(P=[String(P)]),Na(v.i,"t",P),g.C=0,v=g.j.L,g.h=new go,g.g=Vt(g.j,v?_:null,!g.u),g.P>0&&(g.O=new Aa(p(g.Y,g,g.g),g.P)),_=g.V,v=g.g,P=g.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(Ca[0]=Q.toString()),Q=Ca);for(let ee=0;ee<Q.length;ee++){const de=Fi(v,Q[ee],P||_.handleEvent,!1,_.h||_);if(!de)break;_.g[de.key]=de}_=g.J?dt(g.J):{},g.u?(g.v||(g.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,_)):(g.v="GET",g.g.ea(g.B,g.v,null,_)),je(),on(g.i,g.v,g.B,g.l,g.S,g.u)}Ln.prototype.ba=function(g){g=g.target;const _=this.O;_&&Wn(g)==3?_.j():this.Y(g)},Ln.prototype.Y=function(g){try{if(g==this.g)e:{const Le=Wn(this.g),Pt=this.g.ya(),lt=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||qi(this.g)))){this.K||Le!=4||Pt==7||(Pt==8||lt<=0?je(3):je(2)),ft(this);var _=this.g.ca();this.X=_;var v=xr(this);if(this.o=_==200,zi(this.i,this.v,this.B,this.l,this.S,Le,_),this.o){if(this.U&&!this.L){t:{if(this.g){var P,Q=this.g;if((P=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(P)){var ee=P;break t}}ee=null}if(g=ee)Pr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ms(this,g);else{this.o=!1,this.m=3,sn(12),Tn(this),Gi(this);break e}}if(this.R){g=!0;let Gt;for(;!this.K&&this.C<v.length;)if(Gt=Th(this,v),Gt==Yr){Le==4&&(this.m=4,sn(14),g=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(Gt==xn){this.m=4,sn(15),Pr(this.i,this.l,v,"[Invalid Chunk]"),g=!1;break}else Pr(this.i,this.l,Gt,null),Ms(this,Gt);if(ic(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||v.length!=0||this.h.h||(this.m=1,sn(16),g=!1),this.o=this.o&&g,!g)Pr(this.i,this.l,v,"[Invalid Chunked Response]"),Tn(this),Gi(this);else if(v.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),Me(de),de.P=!0,sn(11))}}else Pr(this.i,this.l,v,null),Ms(this,v);Le==4&&Tn(this),this.o&&!this.K&&(Le==4?Oa(this.j,this):(this.o=!1,Bn(this)))}else Sn(this.g),_==400&&v.indexOf("Unknown SID")>0?(this.m=3,sn(12)):(this.m=0,sn(13)),Tn(this),Gi(this)}}}catch{}finally{}};function xr(g){if(!ic(g))return g.g.la();const _=qi(g.g);if(_==="")return"";let v="";const P=_.length,Q=Wn(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Tn(g),Gi(g),"";g.h.i=new f.TextDecoder}for(let ee=0;ee<P;ee++)g.h.h=!0,v+=g.h.i.decode(_[ee],{stream:!(Q&&ee==P-1)});return _.length=0,g.h.g+=v,g.C=0,g.h.g}function ic(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Th(g,_){var v=g.C,P=_.indexOf(`
`,v);return P==-1?Yr:(v=Number(_.substring(v,P)),isNaN(v)?xn:(P+=1,P+v>_.length?Yr:(_=_.slice(P,P+v),g.C=P+v,_)))}Ln.prototype.cancel=function(){this.K=!0,Tn(this)};function Bn(g){g.T=Date.now()+g.H,ln(g,g.H)}function ln(g,_){if(g.D!=null)throw Error("WatchDog timer not null");g.D=pn(p(g.aa,g),_)}function ft(g){g.D&&(f.clearTimeout(g.D),g.D=null)}Ln.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(pr(this.i,this.B),this.M!=2&&(je(),sn(17)),Tn(this),this.m=2,Gi(this)):ln(this,this.T-g)};function Gi(g){g.j.I==0||g.K||Oa(g.j,g)}function Tn(g){ft(g);var _=g.O;_&&typeof _.dispose=="function"&&_.dispose(),g.O=null,Or(g.V),g.g&&(_=g.g,g.g=null,_.abort(),_.dispose())}function Ms(g,_){try{var v=g.j;if(v.I!=0&&(v.g==g||Ta(v.h,g))){if(!g.L&&Ta(v.h,g)&&v.I==3){try{var P=v.Ba.g.parse(_)}catch{P=null}if(Array.isArray(P)&&P.length==3){var Q=P;if(Q[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<g.F)Ei(v),wo(v);else break e;te(v),sn(18)}}else v.xa=Q[1],0<v.xa-v.K&&Q[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=pn(p(v.Va,v),6e3));yi(v.h)<=1&&v.ta&&(v.ta=void 0)}else _i(v,11)}else if((g.L||v.g==g)&&Ei(v),!V(_))for(Q=v.Ba.g.parse(_),_=0;_<Q.length;_++){let lt=Q[_];const Gt=lt[0];if(!(Gt<=v.K))if(v.K=Gt,lt=lt[1],v.I==2)if(lt[0]=="c"){v.M=lt[1],v.ba=lt[2];const _r=lt[3];_r!=null&&(v.ka=_r,v.j.info("VER="+v.ka));const Xn=lt[4];Xn!=null&&(v.za=Xn,v.j.info("SVER="+v.za));const Ar=lt[5];Ar!=null&&typeof Ar=="number"&&Ar>0&&(P=1.5*Ar,v.O=P,v.j.info("backChannelRequestTimeoutMs_="+P)),P=v;const Jr=g.g;if(Jr){const ei=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ei){var ee=P.h;ee.g||ei.indexOf("spdy")==-1&&ei.indexOf("quic")==-1&&ei.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(qe(ee,ee.h),ee.h=null))}if(P.G){const Pa=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Pa&&(P.wa=Pa,Qe(P.J,P.G,Pa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-g.F,v.j.info("Handshake RTT: "+v.T+"ms")),P=v;var de=g;if(P.na=_o(P,P.L?P.ba:null,P.W),de.L){Ye(P.h,de);var Le=de,Pt=P.O;Pt&&(Le.H=Pt),Le.D&&(ft(Le),Bn(Le)),P.g=de}else uc(P);v.i.length>0&&Eo(v)}else lt[0]!="stop"&&lt[0]!="close"||_i(v,7);else v.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?_i(v,7):yo(v):lt[0]!="noop"&&v.l&&v.l.qa(lt),v.A=0)}}je(4)}catch{}}var oe=class{constructor(g,_){this.g=g,this.map=_}};function sc(g){this.l=g||10,f.PerformanceNavigationTiming?(g=f.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _t(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function yi(g){return g.h?1:g.g?g.g.size:0}function Ta(g,_){return g.h?g.h==_:g.g?g.g.has(_):!1}function qe(g,_){g.g?g.g.add(_):g.h=_}function Ye(g,_){g.h&&g.h==_?g.h=null:g.g&&g.g.has(_)&&g.g.delete(_)}sc.prototype.cancel=function(){if(this.i=Fe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Fe(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let _=g.i;for(const v of g.g.values())_=_.concat(v.G);return _}return M(g.i)}var po=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sa(g,_){if(g){g=g.split("&");for(let v=0;v<g.length;v++){const P=g[v].indexOf("=");let Q,ee=null;P>=0?(Q=g[v].substring(0,P),ee=g[v].substring(P+1)):Q=g[v],_(Q,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function yr(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;g instanceof yr?(this.l=g.l,Hn(this,g.j),this.o=g.o,this.g=g.g,Ls(this,g.u),this.h=g.h,At(this,oc(g.i)),this.m=g.m):g&&(_=String(g).match(po))?(this.l=!1,Hn(this,_[1]||"",!0),this.o=wr(_[2]||""),this.g=wr(_[3]||"",!0),Ls(this,_[4]),this.h=wr(_[5]||"",!0),At(this,_[6]||"",!0),this.m=wr(_[7]||"")):(this.l=!1,this.i=new Bs(null,this.l))}yr.prototype.toString=function(){const g=[];var _=this.j;_&&g.push(tt(_,J,!0),":");var v=this.g;return(v||_=="file")&&(g.push("//"),(_=this.o)&&g.push(tt(_,J,!0),"@"),g.push(an(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&g.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&g.push("/"),g.push(tt(v,v.charAt(0)=="/"?Ae:k,!0))),(v=this.i.toString())&&g.push("?",v),(v=this.m)&&g.push("#",tt(v,Gn)),g.join("")},yr.prototype.resolve=function(g){const _=st(this);let v=!!g.j;v?Hn(_,g.j):v=!!g.o,v?_.o=g.o:v=!!g.g,v?_.g=g.g:v=g.u!=null;var P=g.h;if(v)Ls(_,g.u);else if(v=!!g.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var Q=_.h.lastIndexOf("/");Q!=-1&&(P=_.h.slice(0,Q+1)+P)}if(Q=P,Q==".."||Q==".")P="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){P=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ee=[];for(let de=0;de<Q.length;){const Le=Q[de++];Le=="."?P&&de==Q.length&&ee.push(""):Le==".."?((ee.length>1||ee.length==1&&ee[0]!="")&&ee.pop(),P&&de==Q.length&&ee.push("")):(ee.push(Le),P=!0)}P=ee.join("/")}else P=Q}return v?_.h=P:v=g.i.toString()!=="",v?At(_,oc(g.i)):v=!!g.m,v&&(_.m=g.m),_};function st(g){return new yr(g)}function Hn(g,_,v){g.j=v?wr(_,!0):_,g.j&&(g.j=g.j.replace(/:$/,""))}function Ls(g,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);g.u=_}else g.u=null}function At(g,_,v){_ instanceof Bs?(g.i=_,xo(g.i,g.l)):(v||(_=tt(_,Kt)),g.i=new Bs(_,g.l))}function Qe(g,_,v){g.i.set(_,v)}function mo(g){return Qe(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function wr(g,_){return g?_?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function tt(g,_,v){return typeof g=="string"?(g=encodeURI(g).replace(_,cn),v&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function cn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var J=/[#\/\?@]/g,k=/[#\?:]/g,Ae=/[#\?]/g,Kt=/[#\?@]/g,Gn=/#/g;function Bs(g,_){this.h=this.g=null,this.i=g||null,this.j=!!_}function Mr(g){g.g||(g.g=new Map,g.h=0,g.i&&Sa(g.i,function(_,v){g.add(decodeURIComponent(_.replace(/\+/g," ")),v)}))}t=Bs.prototype,t.add=function(g,_){Mr(this),this.i=null,g=Qr(this,g);let v=this.g.get(g);return v||this.g.set(g,v=[]),v.push(_),this.h+=1,this};function Fn(g,_){Mr(g),_=Qr(g,_),g.g.has(_)&&(g.i=null,g.h-=g.g.get(_).length,g.g.delete(_))}function ve(g,_){return Mr(g),_=Qr(g,_),g.g.has(_)}t.forEach=function(g,_){Mr(this),this.g.forEach(function(v,P){v.forEach(function(Q){g.call(_,Q,P,this)},this)},this)};function yt(g,_){Mr(g);let v=[];if(typeof _=="string")ve(g,_)&&(v=v.concat(g.g.get(Qr(g,_))));else for(g=Array.from(g.g.values()),_=0;_<g.length;_++)v=v.concat(g[_]);return v}t.set=function(g,_){return Mr(this),this.i=null,g=Qr(this,g),ve(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[_]),this.h+=1,this},t.get=function(g,_){return g?(g=yt(this,g),g.length>0?String(g[0]):_):_};function Na(g,_,v){Fn(g,_),v.length>0&&(g.i=null,g.g.set(Qr(g,_),M(v)),g.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],_=Array.from(this.g.keys());for(let P=0;P<_.length;P++){var v=_[P];const Q=an(v);v=yt(this,v);for(let ee=0;ee<v.length;ee++){let de=Q;v[ee]!==""&&(de+="="+an(v[ee])),g.push(de)}}return this.i=g.join("&")};function oc(g){const _=new Bs;return _.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),_}function Qr(g,_){return _=String(_),g.j&&(_=_.toLowerCase()),_}function xo(g,_){_&&!g.j&&(Mr(g),g.i=null,g.g.forEach(function(v,P){const Q=P.toLowerCase();P!=Q&&(Fn(this,P),Na(this,Q,v))},g)),g.j=_}function Ra(g,_){const v=new xi;if(f.Image){const P=new Image;P.onload=E(gt,v,"TestLoadImage: loaded",!0,_,P),P.onerror=E(gt,v,"TestLoadImage: error",!1,_,P),P.onabort=E(gt,v,"TestLoadImage: abort",!1,_,P),P.ontimeout=E(gt,v,"TestLoadImage: timeout",!1,_,P),f.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=g}else _(!1)}function Sh(g,_){const v=new xi,P=new AbortController,Q=setTimeout(()=>{P.abort(),gt(v,"TestPingServer: timeout",!1,_)},1e4);fetch(g,{signal:P.signal}).then(ee=>{clearTimeout(Q),ee.ok?gt(v,"TestPingServer: ok",!0,_):gt(v,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),gt(v,"TestPingServer: error",!1,_)})}function gt(g,_,v,P,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),P(v)}catch{}}function Fs(){this.g=new ho}function Er(g){this.i=g.Sb||null,this.h=g.ab||!1}A(Er,rc),Er.prototype.g=function(){return new Se(this.i,this.h)};function Se(g,_){Ht.call(this),this.H=g,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Se,Ht),t=Se.prototype,t.open=function(g,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=_,this.readyState=1,Ot(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(_.body=g),(this.H||f).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,De(this)),this.readyState=0},t.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,Ot(this)),this.g&&(this.readyState=3,Ot(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ac(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function ac(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}t.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var _=g.value?g.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!g.done}))&&(this.response=this.responseText+=_)}g.done?De(this):Ot(this),this.readyState==3&&ac(this)}},t.Oa=function(g){this.g&&(this.response=this.responseText=g,De(this))},t.Na=function(g){this.g&&(this.response=g,De(this))},t.ga=function(){this.g&&De(this)};function De(g){g.readyState=4,g.l=null,g.j=null,g.B=null,Ot(g)}t.setRequestHeader=function(g,_){this.A.append(g,_)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],_=this.h.entries();for(var v=_.next();!v.done;)v=v.value,g.push(v[0]+": "+v[1]),v=_.next();return g.join(`\r
`)};function Ot(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Se.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function lc(g){let _="";return Ie(g,function(v,P){_+=P,_+=":",_+=v,_+=`\r
`}),_}function Vs(g,_,v){e:{for(P in v){var P=!1;break e}P=!0}P||(v=lc(v),typeof g=="string"?v!=null&&an(v):Qe(g,_,v))}function Ct(g){Ht.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(Ct,Ht);var wi=/^https?$/i,Nh=["POST","PUT"];t=Ct.prototype,t.Fa=function(g){this.H=g},t.ea=function(g,_,v,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);_=_?_.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():mn.g(),this.g.onreadystatechange=S(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(g),!0),this.B=!1}catch(ee){Wi(this,ee);return}if(g=v||"",v=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var Q in P)v.set(Q,P[Q]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const ee of P.keys())v.set(ee,P.get(ee));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(v.keys()).find(ee=>ee.toLowerCase()=="content-type"),Q=f.FormData&&g instanceof f.FormData,!(Array.prototype.indexOf.call(Nh,_,void 0)>=0)||P||Q||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,de]of v)this.g.setRequestHeader(ee,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(ee){Wi(this,ee)}};function Wi(g,_){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=_,g.o=5,Xi(g),Us(g)}function Xi(g){g.A||(g.A=!0,ge(g,"complete"),ge(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,ge(this,"complete"),ge(this,"abort"),Us(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Us(this,!0)),Ct.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ki(this):this.Xa())},t.Xa=function(){Ki(this)};function Ki(g){if(g.h&&typeof l<"u"){if(g.v&&Wn(g)==4)setTimeout(g.Ca.bind(g),0);else if(ge(g,"readystatechange"),Wn(g)==4){g.h=!1;try{const ee=g.ca();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var v;if(!(v=_)){var P;if(P=ee===0){let de=String(g.D).match(po)[1]||null;!de&&f.self&&f.self.location&&(de=f.self.location.protocol.slice(0,-1)),P=!wi.test(de?de.toLowerCase():"")}v=P}if(v)ge(g,"complete"),ge(g,"success");else{g.o=6;try{var Q=Wn(g)>2?g.g.statusText:""}catch{Q=""}g.l=Q+" ["+g.ca()+"]",Xi(g)}}finally{Us(g)}}}}function Us(g,_){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const v=g.g;g.g=null,_||ge(g,"ready");try{v.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Wn(g){return g.g?g.g.readyState:0}t.ca=function(){try{return Wn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(g){if(this.g){var _=this.g.responseText;return g&&_.indexOf(g)==0&&(_=_.substring(g.length)),nc(_)}};function qi(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Sn(g){const _={};g=(g.g&&Wn(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<g.length;P++){if(V(g[P]))continue;var v=me(g[P]);const Q=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const ee=_[Q]||[];_[Q]=ee,ee.push(v)}Ne(_,function(P){return P.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Yi(g,_,v){return v&&v.internalChannelParams&&v.internalChannelParams[g]||_}function ba(g){this.za=0,this.i=[],this.j=new xi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Yi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Yi("baseRetryDelayMs",5e3,g),this.Za=Yi("retryDelaySeedMs",1e4,g),this.Ta=Yi("forwardChannelMaxRetries",2,g),this.va=Yi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new sc(g&&g.concurrentRequestLimit),this.Ba=new Fs,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ba.prototype,t.ka=8,t.I=1,t.connect=function(g,_,v,P){sn(0),this.W=g,this.H=_||{},v&&P!==void 0&&(this.H.OSID=v,this.H.OAID=P),this.F=this.X,this.J=_o(this,null,this.W),Eo(this)};function yo(g){if(cc(g),g.I==3){var _=g.V++,v=st(g.J);if(Qe(v,"SID",g.M),Qe(v,"RID",_),Qe(v,"TYPE","terminate"),$r(g,v),_=new Ln(g,g.j,_),_.M=2,_.A=mo(st(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(_.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=_.A,v=!0),v||(_.g=Vt(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Bn(_)}fc(g)}function wo(g){g.g&&(Me(g),g.g.cancel(),g.g=null)}function cc(g){wo(g),g.v&&(f.clearTimeout(g.v),g.v=null),Ei(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&f.clearTimeout(g.m),g.m=null)}function Eo(g){if(!_t(g.h)&&!g.m){g.m=!0;var _=g.Ea;le||D(),Y||(le(),Y=!0),b.add(_,g),g.D=0}}function ot(g,_){return yi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=_.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=pn(p(g.Ea,g,_),hc(g,g.D)),g.D++,!0)}t.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const Q=new Ln(this,this.j,g);let ee=this.o;if(this.U&&(ee?(ee=dt(ee),Mn(ee,this.U)):ee=this.U),this.u!==null||this.R||(Q.J=ee,ee=null),this.S)e:{for(var _=0,v=0;v<this.i.length;v++){t:{var P=this.i[v];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(_+=P,_>4096){_=v;break e}if(_===4096||v===this.i.length-1){_=v+1;break e}}_=1e3}else _=1e3;_=Lr(this,Q,_),v=st(this.J),Qe(v,"RID",g),Qe(v,"CVER",22),this.G&&Qe(v,"X-HTTP-Session-Id",this.G),$r(this,v),ee&&(this.R?_="headers="+an(lc(ee))+"&"+_:this.u&&Vs(v,this.u,ee)),qe(this.h,Q),this.Ra&&Qe(v,"TYPE","init"),this.S?(Qe(v,"$req",_),Qe(v,"SID","null"),Q.U=!0,Hi(Q,v,null)):Hi(Q,v,_),this.I=2}}else this.I==3&&(g?Da(this,g):this.i.length==0||_t(this.h)||Da(this))};function Da(g,_){var v;_?v=_.l:v=g.V++;const P=st(g.J);Qe(P,"SID",g.M),Qe(P,"RID",v),Qe(P,"AID",g.K),$r(g,P),g.u&&g.o&&Vs(P,g.u,g.o),v=new Ln(g,g.j,v,g.D+1),g.u===null&&(v.J=g.o),_&&(g.i=_.G.concat(g.i)),_=Lr(g,v,1e3),v.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),qe(g.h,v),Hi(v,P,_)}function $r(g,_){g.H&&Ie(g.H,function(v,P){Qe(_,P,v)}),g.l&&Ie({},function(v,P){Qe(_,P,v)})}function Lr(g,_,v){v=Math.min(g.i.length,v);const P=g.l?p(g.l.Ka,g.l,g):null;e:{var Q=g.i;let Le=-1;for(;;){const Pt=["count="+v];Le==-1?v>0?(Le=Q[0].g,Pt.push("ofs="+Le)):Le=0:Pt.push("ofs="+Le);let lt=!0;for(let Gt=0;Gt<v;Gt++){var ee=Q[Gt].g;const _r=Q[Gt].map;if(ee-=Le,ee<0)Le=Math.max(0,Q[Gt].g-100),lt=!1;else try{ee="req"+ee+"_"||"";try{var de=_r instanceof Map?_r:Object.entries(_r);for(const[Xn,Ar]of de){let Jr=Ar;y(Ar)&&(Jr=Jt(Ar)),Pt.push(ee+Xn+"="+encodeURIComponent(Jr))}}catch(Xn){throw Pt.push(ee+"type="+encodeURIComponent("_badmap")),Xn}}catch{P&&P(_r)}}if(lt){de=Pt.join("&");break e}}de=void 0}return g=g.i.splice(0,v),_.G=g,de}function uc(g){if(!g.g&&!g.v){g.Y=1;var _=g.Da;le||D(),Y||(le(),Y=!0),b.add(_,g),g.A=0}}function te(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=pn(p(g.Da,g),hc(g,g.A)),g.A++,!0)}t.Da=function(){if(this.v=null,qt(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=pn(p(this.Wa,this),g)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,sn(10),wo(this),qt(this))};function Me(g){g.B!=null&&(f.clearTimeout(g.B),g.B=null)}function qt(g){g.g=new Ln(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var _=st(g.na);Qe(_,"RID","rpc"),Qe(_,"SID",g.M),Qe(_,"AID",g.K),Qe(_,"CI",g.F?"0":"1"),!g.F&&g.ia&&Qe(_,"TO",g.ia),Qe(_,"TYPE","xmlhttp"),$r(g,_),g.u&&g.o&&Vs(_,g.u,g.o),g.O&&(g.g.H=g.O);var v=g.g;g=g.ba,v.M=1,v.A=mo(st(_)),v.u=null,v.R=!0,ks(v,g)}t.Va=function(){this.C!=null&&(this.C=null,wo(this),te(this),sn(19))};function Ei(g){g.C!=null&&(f.clearTimeout(g.C),g.C=null)}function Oa(g,_){var v=null;if(g.g==_){Ei(g),Me(g),g.g=null;var P=2}else if(Ta(g.h,_))v=_.G,Ye(g.h,_),P=1;else return;if(g.I!=0){if(_.o)if(P==1){v=_.u?_.u.length:0,_=Date.now()-_.F;var Q=g.D;P=ji(),ge(P,new Ia(P,v)),Eo(g)}else uc(g);else if(Q=_.m,Q==3||Q==0&&_.X>0||!(P==1&&ot(g,_)||P==2&&te(g)))switch(v&&v.length>0&&(_=g.h,_.i=_.i.concat(v)),Q){case 1:_i(g,5);break;case 4:_i(g,10);break;case 3:_i(g,6);break;default:_i(g,2)}}}function hc(g,_){let v=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(v*=2),v*_}function _i(g,_){if(g.j.info("Error code "+_),_==2){var v=p(g.bb,g),P=g.Ua;const Q=!P;P=new yr(P||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Hn(P,"https"),mo(P),Q?Ra(P.toString(),v):Sh(P.toString(),v)}else sn(2);g.I=0,g.l&&g.l.pa(_),fc(g),cc(g)}t.bb=function(g){g?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function fc(g){if(g.I=0,g.ja=[],g.l){const _=Fe(g.h);(_.length!=0||g.i.length!=0)&&(j(g.ja,_),j(g.ja,g.i),g.h.i.length=0,M(g.i),g.i.length=0),g.l.oa()}}function _o(g,_,v){var P=v instanceof yr?st(v):new yr(v);if(P.g!="")_&&(P.g=_+"."+P.g),Ls(P,P.u);else{var Q=f.location;P=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;const ee=new yr(null);P&&Hn(ee,P),_&&(ee.g=_),Q&&Ls(ee,Q),v&&(ee.h=v),P=ee}return v=g.G,_=g.wa,v&&_&&Qe(P,v,_),Qe(P,"VER",g.ka),$r(g,P),P}function Vt(g,_,v){if(_&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=g.Aa&&!g.ma?new Ct(new Er({ab:v})):new Ct(g.ma),_.Fa(g.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ao(){}t=Ao.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function pt(){}pt.prototype.g=function(g,_){return new un(g,_)};function un(g,_){Ht.call(this),this.g=new ba(_),this.l=g,this.h=_&&_.messageUrlParams||null,g=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(g?g["X-WebChannel-Content-Type"]=_.messageContentType:g={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(g?g["X-WebChannel-Client-Profile"]=_.sa:g={"X-WebChannel-Client-Profile":_.sa}),this.g.U=g,(g=_&&_.Qb)&&!V(g)&&(this.g.u=g),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!V(_)&&(this.g.G=_,g=this.h,g!==null&&_ in g&&(g=this.h,_ in g&&delete g[_])),this.j=new Ce(this)}A(un,Ht),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){yo(this.g)},un.prototype.o=function(g){var _=this.g;if(typeof g=="string"){var v={};v.__data__=g,g=v}else this.v&&(v={},v.__data__=Jt(g),g=v);_.i.push(new oe(_.Ya++,g)),_.I==3&&Eo(_)},un.prototype.N=function(){this.g.l=null,delete this.j,yo(this.g),delete this.g,un.Z.N.call(this)};function Zr(g){Dt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var _=g.__sm__;if(_){e:{for(const v in _){g=v;break e}g=void 0}(this.i=g)&&(g=this.i,_=_!==null&&g in _?_[g]:void 0),this.data=_}else this.data=g}A(Zr,Dt);function at(){nt.call(this),this.status=1}A(at,nt);function Ce(g){this.g=g}A(Ce,Ao),Ce.prototype.ra=function(){ge(this.g,"a")},Ce.prototype.qa=function(g){ge(this.g,new Zr(g))},Ce.prototype.pa=function(g){ge(this.g,new at)},Ce.prototype.oa=function(){ge(this.g,"b")},pt.prototype.createWebChannel=pt.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,Nx=function(){return new pt},Sx=function(){return ji()},Tx=it,yd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mr.NO_ERROR=0,mr.TIMEOUT=8,mr.HTTP_ERROR=6,Qc=mr,fo.COMPLETE="complete",Ix=fo,bt.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",Ht.prototype.listen=Ht.prototype.J,Za=bt,Ct.prototype.listenOnce=Ct.prototype.K,Ct.prototype.getLastError=Ct.prototype.Ha,Ct.prototype.getLastErrorCode=Ct.prototype.ya,Ct.prototype.getStatus=Ct.prototype.ca,Ct.prototype.getResponseJson=Ct.prototype.La,Ct.prototype.getResponseText=Ct.prototype.la,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Fa,vx=Ct}).apply(typeof Oc<"u"?Oc:typeof self<"u"?self:typeof window<"u"?window:{});const Ug="@firebase/firestore",jg="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new xx("@firebase/firestore");function So(){return ro.logLevel}function ye(t,...e){if(ro.logLevel<=Ze.DEBUG){const n=e.map(M1);ro.debug(`Firestore (${xa}): ${t}`,...n)}}function Mi(t,...e){if(ro.logLevel<=Ze.ERROR){const n=e.map(M1);ro.error(`Firestore (${xa}): ${t}`,...n)}}function aa(t,...e){if(ro.logLevel<=Ze.WARN){const n=e.map(M1);ro.warn(`Firestore (${xa}): ${t}`,...n)}}function M1(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,Rx(t,i,n)}function Rx(t,e,n){let i=`FIRESTORE (${xa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Mi(i),new Error(i)}function ct(t,e,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,t||Rx(e,o,i)}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends ma{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dn.UNAUTHENTICATED))}shutdown(){}}class zA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HA{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ct(this.o===void 0,42304);let i=this.i;const o=x=>this.i!==i?(i=this.i,n(x)):Promise.resolve();let l=new xs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new xs,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const x=l;e.enqueueRetryable(async()=>{await x.promise,await o(this.currentUser)})},y=x=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=x,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(x=>y(x)),setTimeout(()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?y(x):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new xs)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ct(typeof i.accessToken=="string",31837,{l:i}),new bx(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}}class GA{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class WA{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new GA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ct(this.o===void 0,3512);const i=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const f=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ct(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=KA(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<n&&(i+=e.charAt(o[l]%62))}return i}}function We(t,e){return t<e?-1:t>e?1:0}function wd(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const o=t.charAt(i),l=e.charAt(i);if(o!==l)return uf(o)===uf(l)?We(o,l):uf(o)?1:-1}return We(t.length,e.length)}const qA=55296,YA=57343;function uf(t){const e=t.charCodeAt(0);return e>=qA&&e<=YA}function la(t,e,n){return t.length===e.length&&t.every((i,o)=>n(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="__name__";class oi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Re(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let o=0;o<i;o++){const l=oi.compareSegments(e.get(o),n.get(o));if(l!==0)return l}return We(e.length,n.length)}static compareSegments(e,n){const i=oi.isNumericId(e),o=oi.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?oi.extractNumericId(e).compare(oi.extractNumericId(n)):wd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ms.fromString(e.substring(4,e.length-2))}}class wt extends oi{construct(e,n,i){return new wt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new xe(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(o=>o.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const QA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _n extends oi{construct(e,n,i){return new _n(e,n,i)}static isValidIdentifier(e){return QA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hg}static keyField(){return new _n([Hg])}static fromServerFormat(e){const n=[];let i="",o=0;const l=()=>{if(i.length===0)throw new xe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let f=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new xe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const x=e[o+1];if(x!=="\\"&&x!=="."&&x!=="`")throw new xe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=x,o+=2}else y==="`"?(f=!f,o++):y!=="."||f?(i+=y,o++):(l(),o++)}if(l(),f)throw new xe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _n(n)}static emptyPath(){return new _n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(wt.fromString(e))}static fromName(e){return new Te(wt.fromString(e).popFirst(5))}static empty(){return new Te(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new wt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(t,e,n){if(!n)throw new xe(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $A(t,e,n,i){if(e===!0&&i===!0)throw new xe(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gg(t){if(!Te.isDocumentKey(t))throw new xe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wg(t){if(Te.isDocumentKey(t))throw new xe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ox(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ch(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function io(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ch(t);throw new xe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Kl(t,e){if(!Ox(t))throw new xe(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const f=t[i];if(o&&typeof f!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&f!==l.value){n=`Expected '${i}' field to equal '${l.value}'`;break}}if(n)throw new xe(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg=-62135596800,Kg=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*Kg);return new Tt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new xe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new xe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Xg)throw new xe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kg}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Kl(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:Zt("string",Tt._jsonSchemaVersion),seconds:Zt("number"),nanoseconds:Zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{static fromTimestamp(e){return new Pe(e)}static min(){return new Pe(new Tt(0,0))}static max(){return new Pe(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;function ZA(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,o=Pe.fromTimestamp(i===1e9?new Tt(n+1,0):new Tt(n,i));return new _s(o,Te.empty(),e)}function JA(t){return new _s(t.readTime,t.key,Ll)}class _s{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new _s(Pe.min(),Te.empty(),Ll)}static max(){return new _s(Pe.max(),Te.empty(),Ll)}}function eC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(t.documentKey,e.documentKey),n!==0?n:We(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==tC)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(i,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):se.reject(n)}static resolve(e){return new se((n,i)=>{n(e)})}static reject(e){return new se((n,i)=>{i(e)})}static waitFor(e){return new se((n,i)=>{let o=0,l=0,f=!1;e.forEach(y=>{++o,y.next(()=>{++l,f&&l===o&&n()},x=>i(x))}),f=!0,l===o&&n()})}static or(e){let n=se.resolve(!1);for(const i of e)n=n.next(o=>o?se.resolve(o):i());return n}static forEach(e,n){const i=[];return e.forEach((o,l)=>{i.push(n.call(this,o,l))}),this.waitFor(i)}static mapArray(e,n){return new se((i,o)=>{const l=e.length,f=new Array(l);let y=0;for(let x=0;x<l;x++){const p=x;n(e[p]).next(E=>{f[p]=E,++y,y===l&&i(f)},E=>o(E))}})}static doWhile(e,n){return new se((i,o)=>{const l=()=>{e()===!0?n().next(()=>{l()},o):i()};l()})}}function rC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}uh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=-1;function hh(t){return t==null}function Du(t){return t===0&&1/t==-1/0}function iC(t){return typeof t=="number"&&Number.isInteger(t)&&!Du(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px="";function sC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=qg(e)),e=oC(t.get(n),e);return qg(e)}function oC(t,e){let n=e;const i=t.length;for(let o=0;o<i;o++){const l=t.charAt(o);switch(l){case"\0":n+="";break;case Px:n+="";break;default:n+=l}}return n}function qg(t){return t+Px+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,n){this.comparator=e,this.root=n||En.EMPTY}insert(e,n){return new Bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new Bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pc(this.root,e,this.comparator,!0)}}class Pc{constructor(e,n,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?i(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,n,i,o,l){this.key=e,this.value=n,this.color=i??En.RED,this.left=o??En.EMPTY,this.right=l??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,o,l){return new En(e??this.key,n??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,i),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return En.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,i,o,l){return this}insert(e,n,i){return new En(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.comparator=e,this.data=new Bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qg(this.data.getIterator())}getIteratorFrom(e){return new Qg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rn(this.comparator);return n.data=e,n}}class Qg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.fields=e,e.sort(_n.comparator)}static empty(){return new lr([])}unionWith(e){let n=new rn(_n.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new lr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return la(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Mx("Invalid base64 string: "+l):l}}(e);return new vn(n)}static fromUint8Array(e){const n=function(o){let l="";for(let f=0;f<o.length;++f)l+=String.fromCharCode(o[f]);return l}(e);return new vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const aC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if(ct(!!t,39018),typeof t=="string"){let e=0;const n=aC.exec(t);if(ct(!!n,46558,{timestamp:t}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Wt(t.seconds),nanos:Wt(t.nanos)}}function Wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?vn.fromBase64String(t):vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="server_timestamp",Bx="__type__",Fx="__previous_value__",Vx="__local_write_time__";function F1(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Bx])==null?void 0:i.stringValue)===Lx}function fh(t){const e=t.mapValue.fields[Fx];return F1(e)?fh(e):e}function Bl(t){const e=As(t.mapValue.fields[Vx].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,i,o,l,f,y,x,p,E){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=f,this.autoDetectLongPolling=y,this.longPollingOptions=x,this.useFetchStreams=p,this.isUsingEmulator=E}}const Ou="(default)";class Fl{constructor(e,n){this.projectId=e,this.database=n||Ou}static empty(){return new Fl("","")}get isDefaultDatabase(){return this.database===Ou}isEqual(e){return e instanceof Fl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="__type__",jx="__max__",kc={mapValue:{fields:{__type__:{stringValue:jx}}}},zx="__vector__",Pu="value";function vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?F1(t)?4:uC(t)?9007199254740991:cC(t)?10:11:Re(28295,{value:t})}function pi(t,e){if(t===e)return!0;const n=vs(t);if(n!==vs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bl(t).isEqual(Bl(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const f=As(o.timestampValue),y=As(l.timestampValue);return f.seconds===y.seconds&&f.nanos===y.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(o,l){return Cs(o.bytesValue).isEqual(Cs(l.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(o,l){return Wt(o.geoPointValue.latitude)===Wt(l.geoPointValue.latitude)&&Wt(o.geoPointValue.longitude)===Wt(l.geoPointValue.longitude)}(t,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return Wt(o.integerValue)===Wt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const f=Wt(o.doubleValue),y=Wt(l.doubleValue);return f===y?Du(f)===Du(y):isNaN(f)&&isNaN(y)}return!1}(t,e);case 9:return la(t.arrayValue.values||[],e.arrayValue.values||[],pi);case 10:case 11:return function(o,l){const f=o.mapValue.fields||{},y=l.mapValue.fields||{};if(Yg(f)!==Yg(y))return!1;for(const x in f)if(f.hasOwnProperty(x)&&(y[x]===void 0||!pi(f[x],y[x])))return!1;return!0}(t,e);default:return Re(52216,{left:t})}}function Vl(t,e){return(t.values||[]).find(n=>pi(n,e))!==void 0}function ca(t,e){if(t===e)return 0;const n=vs(t),i=vs(e);if(n!==i)return We(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(t.booleanValue,e.booleanValue);case 2:return function(l,f){const y=Wt(l.integerValue||l.doubleValue),x=Wt(f.integerValue||f.doubleValue);return y<x?-1:y>x?1:y===x?0:isNaN(y)?isNaN(x)?0:-1:1}(t,e);case 3:return $g(t.timestampValue,e.timestampValue);case 4:return $g(Bl(t),Bl(e));case 5:return wd(t.stringValue,e.stringValue);case 6:return function(l,f){const y=Cs(l),x=Cs(f);return y.compareTo(x)}(t.bytesValue,e.bytesValue);case 7:return function(l,f){const y=l.split("/"),x=f.split("/");for(let p=0;p<y.length&&p<x.length;p++){const E=We(y[p],x[p]);if(E!==0)return E}return We(y.length,x.length)}(t.referenceValue,e.referenceValue);case 8:return function(l,f){const y=We(Wt(l.latitude),Wt(f.latitude));return y!==0?y:We(Wt(l.longitude),Wt(f.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zg(t.arrayValue,e.arrayValue);case 10:return function(l,f){var S,M,j,X;const y=l.fields||{},x=f.fields||{},p=(S=y[Pu])==null?void 0:S.arrayValue,E=(M=x[Pu])==null?void 0:M.arrayValue,A=We(((j=p==null?void 0:p.values)==null?void 0:j.length)||0,((X=E==null?void 0:E.values)==null?void 0:X.length)||0);return A!==0?A:Zg(p,E)}(t.mapValue,e.mapValue);case 11:return function(l,f){if(l===kc.mapValue&&f===kc.mapValue)return 0;if(l===kc.mapValue)return 1;if(f===kc.mapValue)return-1;const y=l.fields||{},x=Object.keys(y),p=f.fields||{},E=Object.keys(p);x.sort(),E.sort();for(let A=0;A<x.length&&A<E.length;++A){const S=wd(x[A],E[A]);if(S!==0)return S;const M=ca(y[x[A]],p[E[A]]);if(M!==0)return M}return We(x.length,E.length)}(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function $g(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return We(t,e);const n=As(t),i=As(e),o=We(n.seconds,i.seconds);return o!==0?o:We(n.nanos,i.nanos)}function Zg(t,e){const n=t.values||[],i=e.values||[];for(let o=0;o<n.length&&o<i.length;++o){const l=ca(n[o],i[o]);if(l)return l}return We(n.length,i.length)}function ua(t){return Ed(t)}function Ed(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=As(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",o=!0;for(const l of n.values||[])o?o=!1:i+=",",i+=Ed(l);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const f of i)l?l=!1:o+=",",o+=`${f}:${Ed(n.fields[f])}`;return o+"}"}(t.mapValue):Re(61005,{value:t})}function $c(t){switch(vs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fh(t);return e?16+$c(e):16;case 5:return 2*t.stringValue.length;case 6:return Cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+$c(l),0)}(t.arrayValue);case 10:case 11:return function(i){let o=0;return bs(i.fields,(l,f)=>{o+=l.length+$c(f)}),o}(t.mapValue);default:throw Re(13486,{value:t})}}function Jg(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _d(t){return!!t&&"integerValue"in t}function V1(t){return!!t&&"arrayValue"in t}function ep(t){return!!t&&"nullValue"in t}function tp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zc(t){return!!t&&"mapValue"in t}function cC(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Ux])==null?void 0:i.stringValue)===zx}function dl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return bs(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=dl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dl(t.arrayValue.values[n]);return e}return{...t}}function uC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===jx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.value=e}static empty(){return new $n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Zc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dl(n)}setAll(e){let n=_n.emptyPath(),i={},o=[];e.forEach((f,y)=>{if(!n.isImmediateParentOf(y)){const x=this.getFieldsMap(n);this.applyChanges(x,i,o),i={},o=[],n=y.popLast()}f?i[y.lastSegment()]=dl(f):o.push(y.lastSegment())});const l=this.getFieldsMap(n);this.applyChanges(l,i,o)}delete(e){const n=this.field(e.popLast());Zc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=n.mapValue.fields[e.get(i)];Zc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,i){bs(n,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new $n(dl(this.value))}}function Hx(t){const e=[];return bs(t.fields,(n,i)=>{const o=new _n([n]);if(Zc(i)){const l=Hx(i.mapValue).fields;if(l.length===0)e.push(o);else for(const f of l)e.push(o.child(f))}else e.push(o)}),new lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,i,o,l,f,y){this.key=e,this.documentType=n,this.version=i,this.readTime=o,this.createTime=l,this.data=f,this.documentState=y}static newInvalidDocument(e){return new Pn(e,0,Pe.min(),Pe.min(),Pe.min(),$n.empty(),0)}static newFoundDocument(e,n,i,o){return new Pn(e,1,n,Pe.min(),i,o,0)}static newNoDocument(e,n){return new Pn(e,2,n,Pe.min(),Pe.min(),$n.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Pe.min(),Pe.min(),$n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n){this.position=e,this.inclusive=n}}function np(t,e,n){let i=0;for(let o=0;o<t.position.length;o++){const l=e[o],f=t.position[o];if(l.field.isKeyField()?i=Te.comparator(Te.fromName(f.referenceValue),n.key):i=ca(f,n.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function rp(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n="asc"){this.field=e,this.dir=n}}function hC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{}class $t extends Gx{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new dC(e,n,i):n==="array-contains"?new mC(e,i):n==="in"?new xC(e,i):n==="not-in"?new yC(e,i):n==="array-contains-any"?new wC(e,i):new $t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new gC(e,i):new pC(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ca(n,this.value)):n!==null&&vs(this.value)===vs(n)&&this.matchesComparison(ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xr extends Gx{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xr(e,n)}matches(e){return Wx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wx(t){return t.op==="and"}function Xx(t){return fC(t)&&Wx(t)}function fC(t){for(const e of t.filters)if(e instanceof Xr)return!1;return!0}function Ad(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+ua(t.value);if(Xx(t))return t.filters.map(e=>Ad(e)).join(",");{const e=t.filters.map(n=>Ad(n)).join(",");return`${t.op}(${e})`}}function Kx(t,e){return t instanceof $t?function(i,o){return o instanceof $t&&i.op===o.op&&i.field.isEqual(o.field)&&pi(i.value,o.value)}(t,e):t instanceof Xr?function(i,o){return o instanceof Xr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,f,y)=>l&&Kx(f,o.filters[y]),!0):!1}(t,e):void Re(19439)}function qx(t){return t instanceof $t?function(n){return`${n.field.canonicalString()} ${n.op} ${ua(n.value)}`}(t):t instanceof Xr?function(n){return n.op.toString()+" {"+n.getFilters().map(qx).join(" ,")+"}"}(t):"Filter"}class dC extends $t{constructor(e,n,i){super(e,n,i),this.key=Te.fromName(i.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class gC extends $t{constructor(e,n){super(e,"in",n),this.keys=Yx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pC extends $t{constructor(e,n){super(e,"not-in",n),this.keys=Yx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Yx(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>Te.fromName(i.referenceValue))}class mC extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return V1(n)&&Vl(n.arrayValue,this.value)}}class xC extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Vl(this.value.arrayValue,n)}}class yC extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vl(this.value.arrayValue,n)}}class wC extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!V1(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Vl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n=null,i=[],o=[],l=null,f=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=f,this.endAt=y,this.Te=null}}function ip(t,e=null,n=[],i=[],o=null,l=null,f=null){return new EC(t,e,n,i,o,l,f)}function U1(t){const e=ke(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Ad(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),hh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>ua(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>ua(i)).join(",")),e.Te=n}return e.Te}function j1(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Kx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rp(t.startAt,e.startAt)&&rp(t.endAt,e.endAt)}function Cd(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n=null,i=[],o=[],l=null,f="F",y=null,x=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=f,this.startAt=y,this.endAt=x,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _C(t,e,n,i,o,l,f,y){return new ql(t,e,n,i,o,l,f,y)}function Qx(t){return new ql(t)}function sp(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function $x(t){return t.collectionGroup!==null}function gl(t){const e=ke(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let y=new rn(_n.comparator);return f.filters.forEach(x=>{x.getFlattenedFilters().forEach(p=>{p.isInequality()&&(y=y.add(p.field))})}),y})(e).forEach(l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Mu(l,i))}),n.has(_n.keyField().canonicalString())||e.Ie.push(new Mu(_n.keyField(),i))}return e.Ie}function hi(t){const e=ke(t);return e.Ee||(e.Ee=AC(e,gl(t))),e.Ee}function AC(t,e){if(t.limitType==="F")return ip(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Mu(o.field,l)});const n=t.endAt?new ku(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ku(t.startAt.position,t.startAt.inclusive):null;return ip(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function vd(t,e){const n=t.filters.concat([e]);return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Id(t,e,n){return new ql(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dh(t,e){return j1(hi(t),hi(e))&&t.limitType===e.limitType}function Zx(t){return`${U1(hi(t))}|lt:${t.limitType}`}function No(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(o=>qx(o)).join(", ")}]`),hh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(o=>ua(o)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(o=>ua(o)).join(",")),`Target(${i})`}(hi(t))}; limitType=${t.limitType})`}function gh(t,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Te.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(t,e)&&function(i,o){for(const l of gl(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(t,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(t,e)&&function(i,o){return!(i.startAt&&!function(f,y,x){const p=np(f,y,x);return f.inclusive?p<=0:p<0}(i.startAt,gl(i),o)||i.endAt&&!function(f,y,x){const p=np(f,y,x);return f.inclusive?p>=0:p>0}(i.endAt,gl(i),o))}(t,e)}function CC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Jx(t){return(e,n)=>{let i=!1;for(const o of gl(t)){const l=vC(o,e,n);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function vC(t,e,n){const i=t.field.isKeyField()?Te.comparator(e.key,n.key):function(l,f,y){const x=f.data.field(l),p=y.data.field(l);return x!==null&&p!==null?ca(x,p):Re(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bs(this.inner,(n,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return kx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new Bt(Te.comparator);function Li(){return IC}const ey=new Bt(Te.comparator);function Ja(...t){let e=ey;for(const n of t)e=e.insert(n.key,n);return e}function ty(t){let e=ey;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Ys(){return pl()}function ny(){return pl()}function pl(){return new co(t=>t.toString(),(t,e)=>t.isEqual(e))}const TC=new Bt(Te.comparator),SC=new rn(Te.comparator);function Xe(...t){let e=SC;for(const n of t)e=e.add(n);return e}const NC=new rn(We);function RC(){return NC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Du(e)?"-0":e}}function ry(t){return{integerValue:""+t}}function bC(t,e){return iC(e)?ry(e):z1(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(){this._=void 0}}function DC(t,e,n){return t instanceof Lu?function(o,l){const f={fields:{[Bx]:{stringValue:Lx},[Vx]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&F1(l)&&(l=fh(l)),l&&(f.fields[Fx]=l),{mapValue:f}}(n,e):t instanceof Ul?sy(t,e):t instanceof jl?oy(t,e):function(o,l){const f=iy(o,l),y=op(f)+op(o.Ae);return _d(f)&&_d(o.Ae)?ry(y):z1(o.serializer,y)}(t,e)}function OC(t,e,n){return t instanceof Ul?sy(t,e):t instanceof jl?oy(t,e):n}function iy(t,e){return t instanceof Bu?function(i){return _d(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Lu extends ph{}class Ul extends ph{constructor(e){super(),this.elements=e}}function sy(t,e){const n=ay(e);for(const i of t.elements)n.some(o=>pi(o,i))||n.push(i);return{arrayValue:{values:n}}}class jl extends ph{constructor(e){super(),this.elements=e}}function oy(t,e){let n=ay(e);for(const i of t.elements)n=n.filter(o=>!pi(o,i));return{arrayValue:{values:n}}}class Bu extends ph{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function op(t){return Wt(t.integerValue||t.doubleValue)}function ay(t){return V1(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function PC(t,e){return t.field.isEqual(e.field)&&function(i,o){return i instanceof Ul&&o instanceof Ul||i instanceof jl&&o instanceof jl?la(i.elements,o.elements,pi):i instanceof Bu&&o instanceof Bu?pi(i.Ae,o.Ae):i instanceof Lu&&o instanceof Lu}(t.transform,e.transform)}class kC{constructor(e,n){this.version=e,this.transformResults=n}}class Gr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gr}static exists(e){return new Gr(void 0,e)}static updateTime(e){return new Gr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mh{}function ly(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new H1(t.key,Gr.none()):new Yl(t.key,t.data,Gr.none());{const n=t.data,i=$n.empty();let o=new rn(_n.comparator);for(let l of e.fields)if(!o.has(l)){let f=n.field(l);f===null&&l.length>1&&(l=l.popLast(),f=n.field(l)),f===null?i.delete(l):i.set(l,f),o=o.add(l)}return new Ds(t.key,i,new lr(o.toArray()),Gr.none())}}function MC(t,e,n){t instanceof Yl?function(o,l,f){const y=o.value.clone(),x=lp(o.fieldTransforms,l,f.transformResults);y.setAll(x),l.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(t,e,n):t instanceof Ds?function(o,l,f){if(!Jc(o.precondition,l))return void l.convertToUnknownDocument(f.version);const y=lp(o.fieldTransforms,l,f.transformResults),x=l.data;x.setAll(cy(o)),x.setAll(y),l.convertToFoundDocument(f.version,x).setHasCommittedMutations()}(t,e,n):function(o,l,f){l.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function ml(t,e,n,i){return t instanceof Yl?function(l,f,y,x){if(!Jc(l.precondition,f))return y;const p=l.value.clone(),E=cp(l.fieldTransforms,x,f);return p.setAll(E),f.convertToFoundDocument(f.version,p).setHasLocalMutations(),null}(t,e,n,i):t instanceof Ds?function(l,f,y,x){if(!Jc(l.precondition,f))return y;const p=cp(l.fieldTransforms,x,f),E=f.data;return E.setAll(cy(l)),E.setAll(p),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),y===null?null:y.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(A=>A.field))}(t,e,n,i):function(l,f,y){return Jc(l.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):y}(t,e,n)}function LC(t,e){let n=null;for(const i of t.fieldTransforms){const o=e.data.field(i.field),l=iy(i.transform,o||null);l!=null&&(n===null&&(n=$n.empty()),n.set(i.field,l))}return n||null}function ap(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&la(i,o,(l,f)=>PC(l,f))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yl extends mh{constructor(e,n,i,o=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ds extends mh{constructor(e,n,i,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function cy(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function lp(t,e,n){const i=new Map;ct(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let o=0;o<n.length;o++){const l=t[o],f=l.transform,y=e.data.field(l.field);i.set(l.field,OC(f,y,n[o]))}return i}function cp(t,e,n){const i=new Map;for(const o of t){const l=o.transform,f=n.data.field(o.field);i.set(o.field,DC(l,f,e))}return i}class H1 extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BC extends mh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n,i,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&MC(l,e,i[o])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ml(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ml(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=ny();return this.mutations.forEach(o=>{const l=e.get(o.key),f=l.overlayedDocument;let y=this.applyToLocalView(f,l.mutatedFields);y=n.has(o.key)?null:y;const x=ly(f,y);x!==null&&i.set(o.key,x),f.isValidDocument()||f.convertToNoDocument(Pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Xe())}isEqual(e){return this.batchId===e.batchId&&la(this.mutations,e.mutations,(n,i)=>ap(n,i))&&la(this.baseMutations,e.baseMutations,(n,i)=>ap(n,i))}}class G1{constructor(e,n,i,o){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(e,n,i){ct(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=function(){return TC}();const l=e.mutations;for(let f=0;f<l.length;f++)o=o.insert(l[f].key,i[f].version);return new G1(e,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,$e;function jC(t){switch(t){case ie.OK:return Re(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function uy(t){if(t===void 0)return Mi("GRPC error has no .code"),ie.UNKNOWN;switch(t){case Yt.OK:return ie.OK;case Yt.CANCELLED:return ie.CANCELLED;case Yt.UNKNOWN:return ie.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return ie.INTERNAL;case Yt.UNAVAILABLE:return ie.UNAVAILABLE;case Yt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Yt.NOT_FOUND:return ie.NOT_FOUND;case Yt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Yt.ABORTED:return ie.ABORTED;case Yt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Yt.DATA_LOSS:return ie.DATA_LOSS;default:return Re(39323,{code:t})}}($e=Yt||(Yt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HC=new ms([4294967295,4294967295],0);function up(t){const e=zC().encode(t),n=new Cx;return n.update(e),new Uint8Array(n.digest())}function hp(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ms([n,i],0),new ms([o,l],0)]}class W1{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new el(`Invalid padding: ${n}`);if(i<0)throw new el(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new el(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new el(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ms.fromNumber(this.ge)}ye(e,n,i){let o=e.add(n.multiply(ms.fromNumber(i)));return o.compare(HC)===1&&(o=new ms([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=up(e),[i,o]=hp(n);for(let l=0;l<this.hashCount;l++){const f=this.ye(i,o,l);if(!this.we(f))return!1}return!0}static create(e,n,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),f=new W1(l,o,n);return i.forEach(y=>f.insert(y)),f}insert(e){if(this.ge===0)return;const n=up(e),[i,o]=hp(n);for(let l=0;l<this.hashCount;l++){const f=this.ye(i,o,l);this.Se(f)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class el extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,i,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const o=new Map;return o.set(e,Ql.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new xh(Pe.min(),o,new Bt(We),Li(),Xe())}}class Ql{constructor(e,n,i,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Ql(i,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n,i,o){this.be=e,this.removedTargetIds=n,this.key=i,this.De=o}}class hy{constructor(e,n){this.targetId=e,this.Ce=n}}class fy{constructor(e,n,i=vn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=o}}class fp{constructor(){this.ve=0,this.Fe=dp(),this.Me=vn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),n=Xe(),i=Xe();return this.Fe.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:Re(38017,{changeType:l})}}),new Ql(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=dp()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Li(),this.Je=Mc(),this.He=Mc(),this.Ye=new Bt(We)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,i=e.Ce.count,o=this.ot(n);if(o){const l=o.target;if(Cd(l))if(i===0){const f=new Te(l.path);this.et(n,f,Pn.newNoDocument(f,Pe.min()))}else ct(i===1,20013,{expectedCount:i});else{const f=this._t(n);if(f!==i){const y=this.ut(e),x=y?this.ct(y,e,f):1;if(x!==0){this.it(n);const p=x===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=n;let f,y;try{f=Cs(i).toUint8Array()}catch(x){if(x instanceof Mx)return aa("Decoding the base64 bloom filter in existence filter failed ("+x.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw x}try{y=new W1(f,o,l)}catch(x){return aa(x instanceof el?"BloomFilter error: ":"Applying bloom filter failed: ",x),null}return y.ge===0?null:y}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach(l=>{const f=this.Ge.ht(),y=`projects/${f.projectId}/databases/${f.database}/documents/${l.path.canonicalString()}`;e.mightContain(y)||(this.et(n,l,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((l,f)=>{const y=this.ot(f);if(y){if(l.current&&Cd(y.target)){const x=new Te(y.target.path);this.It(x).has(f)||this.Et(f,x)||this.et(f,x,Pn.newNoDocument(x,e))}l.Be&&(n.set(f,l.ke()),l.qe())}});let i=Xe();this.He.forEach((l,f)=>{let y=!0;f.forEachWhile(x=>{const p=this.ot(x);return!p||p.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)}),y&&(i=i.add(l))}),this.je.forEach((l,f)=>f.setReadTime(e));const o=new xh(e,n,this.Ye,this.je,i);return this.je=Li(),this.Je=Mc(),this.He=Mc(),this.Ye=new Bt(We),o}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new fp,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new rn(We),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new rn(We),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fp),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Mc(){return new Bt(Te.comparator)}function dp(){return new Bt(Te.comparator)}const WC=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),XC=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),KC=(()=>({and:"AND",or:"OR"}))();class qC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Td(t,e){return t.useProto3Json||hh(e)?e:{value:e}}function Fu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dy(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YC(t,e){return Fu(t,e.toTimestamp())}function fi(t){return ct(!!t,49232),Pe.fromTimestamp(function(n){const i=As(n);return new Tt(i.seconds,i.nanos)}(t))}function X1(t,e){return Sd(t,e).canonicalString()}function Sd(t,e){const n=function(o){return new wt(["projects",o.projectId,"databases",o.database])}(t).child("documents");return e===void 0?n:n.child(e)}function gy(t){const e=wt.fromString(t);return ct(wy(e),10190,{key:e.toString()}),e}function Nd(t,e){return X1(t.databaseId,e.path)}function hf(t,e){const n=gy(e);if(n.get(1)!==t.databaseId.projectId)throw new xe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Te(my(n))}function py(t,e){return X1(t.databaseId,e)}function QC(t){const e=gy(t);return e.length===4?wt.emptyPath():my(e)}function Rd(t){return new wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function my(t){return ct(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gp(t,e,n){return{name:Nd(t,e),fields:n.value.mapValue.fields}}function $C(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Re(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(p,E){return p.useProto3Json?(ct(E===void 0||typeof E=="string",58123),vn.fromBase64String(E||"")):(ct(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),vn.fromUint8Array(E||new Uint8Array))}(t,e.targetChange.resumeToken),f=e.targetChange.cause,y=f&&function(p){const E=p.code===void 0?ie.UNKNOWN:uy(p.code);return new xe(E,p.message||"")}(f);n=new fy(i,o,l,y||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=hf(t,i.document.name),l=fi(i.document.updateTime),f=i.document.createTime?fi(i.document.createTime):Pe.min(),y=new $n({mapValue:{fields:i.document.fields}}),x=Pn.newFoundDocument(o,l,f,y),p=i.targetIds||[],E=i.removedTargetIds||[];n=new eu(p,E,x.key,x)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=hf(t,i.document),l=i.readTime?fi(i.readTime):Pe.min(),f=Pn.newNoDocument(o,l),y=i.removedTargetIds||[];n=new eu([],y,f.key,f)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=hf(t,i.document),l=i.removedTargetIds||[];n=new eu([],l,o,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,f=new UC(o,l),y=i.targetId;n=new hy(y,f)}}return n}function ZC(t,e){let n;if(e instanceof Yl)n={update:gp(t,e.key,e.value)};else if(e instanceof H1)n={delete:Nd(t,e.key)};else if(e instanceof Ds)n={update:gp(t,e.key,e.data),updateMask:av(e.fieldMask)};else{if(!(e instanceof BC))return Re(16599,{Vt:e.type});n={verify:Nd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(l,f){const y=f.transform;if(y instanceof Lu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Ul)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof jl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Bu)return{fieldPath:f.field.canonicalString(),increment:y.Ae};throw Re(20930,{transform:f.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:YC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Re(27497)}(t,e.precondition)),n}function JC(t,e){return t&&t.length>0?(ct(e!==void 0,14353),t.map(n=>function(o,l){let f=o.updateTime?fi(o.updateTime):fi(l);return f.isEqual(Pe.min())&&(f=fi(l)),new kC(f,o.transformResults||[])}(n,e))):[]}function ev(t,e){return{documents:[py(t,e.path)]}}function tv(t,e){const n={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=py(t,o);const l=function(p){if(p.length!==0)return yy(Xr.create(p,"and"))}(e.filters);l&&(n.structuredQuery.where=l);const f=function(p){if(p.length!==0)return p.map(E=>function(S){return{field:Ro(S.field),direction:iv(S.dir)}}(E))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const y=Td(t,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{ft:n,parent:o}}function nv(t){let e=QC(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){ct(i===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let l=[];n.where&&(l=function(A){const S=xy(A);return S instanceof Xr&&Xx(S)?S.getFilters():[S]}(n.where));let f=[];n.orderBy&&(f=function(A){return A.map(S=>function(j){return new Mu(bo(j.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(S))}(n.orderBy));let y=null;n.limit&&(y=function(A){let S;return S=typeof A=="object"?A.value:A,hh(S)?null:S}(n.limit));let x=null;n.startAt&&(x=function(A){const S=!!A.before,M=A.values||[];return new ku(M,S)}(n.startAt));let p=null;return n.endAt&&(p=function(A){const S=!A.before,M=A.values||[];return new ku(M,S)}(n.endAt)),_C(e,o,f,l,y,"F",x,p)}function rv(t,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function xy(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=bo(n.unaryFilter.field);return $t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(n.unaryFilter.field);return $t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=bo(n.unaryFilter.field);return $t.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=bo(n.unaryFilter.field);return $t.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}}(t):t.fieldFilter!==void 0?function(n){return $t.create(bo(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xr.create(n.compositeFilter.filters.map(i=>xy(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Re(1026)}}(n.compositeFilter.op))}(t):Re(30097,{filter:t})}function iv(t){return WC[t]}function sv(t){return XC[t]}function ov(t){return KC[t]}function Ro(t){return{fieldPath:t.canonicalString()}}function bo(t){return _n.fromServerFormat(t.fieldPath)}function yy(t){return t instanceof $t?function(n){if(n.op==="=="){if(tp(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NAN"}};if(ep(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tp(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NAN"}};if(ep(n.value))return{unaryFilter:{field:Ro(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ro(n.field),op:sv(n.op),value:n.value}}}(t):t instanceof Xr?function(n){const i=n.getFilters().map(o=>yy(o));return i.length===1?i[0]:{compositeFilter:{op:ov(n.op),filters:i}}}(t):Re(54877,{filter:t})}function av(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n,i,o,l=Pe.min(),f=Pe.min(),y=vn.EMPTY_BYTE_STRING,x=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=y,this.expectedCount=x}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.yt=e}}function cv(t){const e=nv({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Id(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.Cn=new hv}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(_s.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(_s.min())}updateCollectionGroup(e,n,i){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class hv{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n]||new rn(wt.comparator),l=!o.has(i);return this.index[n]=o.add(i),l}has(e){const n=e.lastSegment(),i=e.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(e){return(this.index[e]||new rn(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ey=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(Ey,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ha(0)}static cr(){return new ha(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="LruGarbageCollector",fv=1048576;function xp([t,e],[n,i]){const o=We(t,n);return o===0?We(e,i):o}class dv{constructor(e){this.Ir=e,this.buffer=new rn(xp),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();xp(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gv{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(mp,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wa(n)?ye(mp,"Ignoring IndexedDB error during garbage collection: ",n):await ya(n)}await this.Vr(3e5)})}}class pv{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return se.resolve(uh.ce);const i=new dv(n);return this.mr.forEachTarget(e,o=>i.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>i.Ar(o))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(pp)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pp):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,o,l,f,y,x,p;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,f=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(i=A,y=Date.now(),this.removeTargets(e,i,n))).next(A=>(l=A,x=Date.now(),this.removeOrphanedDocuments(e,i))).next(A=>(p=Date.now(),So()<=Ze.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(y-f)+`ms
	Removed ${l} targets in `+(x-y)+`ms
	Removed ${A} documents in `+(p-x)+`ms
Total Duration: ${p-E}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:A})))}}function mv(t,e){return new pv(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.changes=new co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?se.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,n,i,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(i!==null&&ml(i.mutation,o,lr.empty(),Tt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Xe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Xe()){const o=Ys();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,i).next(l=>{let f=Ja();return l.forEach((y,x)=>{f=f.insert(y,x.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const i=Ys();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Xe()))}populateOverlays(e,n,i){const o=[];return i.forEach(l=>{n.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((f,y)=>{n.set(f,y)})})}computeViews(e,n,i,o){let l=Li();const f=pl(),y=function(){return pl()}();return n.forEach((x,p)=>{const E=i.get(p.key);o.has(p.key)&&(E===void 0||E.mutation instanceof Ds)?l=l.insert(p.key,p):E!==void 0?(f.set(p.key,E.mutation.getFieldMask()),ml(E.mutation,p,E.mutation.getFieldMask(),Tt.now())):f.set(p.key,lr.empty())}),this.recalculateAndSaveOverlays(e,l).next(x=>(x.forEach((p,E)=>f.set(p,E)),n.forEach((p,E)=>y.set(p,new yv(E,f.get(p)??null))),y))}recalculateAndSaveOverlays(e,n){const i=pl();let o=new Bt((f,y)=>f-y),l=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const y of f)y.keys().forEach(x=>{const p=n.get(x);if(p===null)return;let E=i.get(x)||lr.empty();E=y.applyToLocalView(p,E),i.set(x,E);const A=(o.get(y.batchId)||Xe()).add(x);o=o.insert(y.batchId,A)})}).next(()=>{const f=[],y=o.getReverseIterator();for(;y.hasNext();){const x=y.getNext(),p=x.key,E=x.value,A=ny();E.forEach(S=>{if(!l.has(S)){const M=ly(n.get(S),i.get(S));M!==null&&A.set(S,M),l=l.add(S)}}),f.push(this.documentOverlayCache.saveOverlays(e,p,A))}return se.waitFor(f)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,o){return function(f){return Te.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):$x(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,o):this.getDocumentsMatchingCollectionQuery(e,n,i,o)}getNextDocuments(e,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,o).next(l=>{const f=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,o-l.size):se.resolve(Ys());let y=Ll,x=l;return f.next(p=>se.forEach(p,(E,A)=>(y<A.largestBatchId&&(y=A.largestBatchId),l.get(E)?se.resolve():this.remoteDocumentCache.getEntry(e,E).next(S=>{x=x.insert(E,S)}))).next(()=>this.populateOverlays(e,p,l)).next(()=>this.computeViews(e,x,p,Xe())).next(E=>({batchId:y,changes:ty(E)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next(i=>{let o=Ja();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,i,o){const l=n.collectionGroup;let f=Ja();return this.indexManager.getCollectionParents(e,l).next(y=>se.forEach(y,x=>{const p=function(A,S){return new ql(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)}(n,x.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,o).next(E=>{E.forEach((A,S)=>{f=f.insert(A,S)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(f=>(l=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,l,o))).next(f=>{l.forEach((x,p)=>{const E=p.getKey();f.get(E)===null&&(f=f.insert(E,Pn.newInvalidDocument(E)))});let y=Ja();return f.forEach((x,p)=>{const E=l.get(x);E!==void 0&&ml(E.mutation,p,lr.empty(),Tt.now()),gh(n,p)&&(y=y.insert(x,p))}),y})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:fi(o.createTime)}}(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:cv(o.bundledQuery),readTime:fi(o.readTime)}}(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(){this.overlays=new Bt(Te.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Ys();return se.forEach(n,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((o,l)=>{this.St(e,n,l)}),se.resolve()}removeOverlaysForBatchId(e,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,n,i){const o=Ys(),l=n.length+1,f=new Te(n.child("")),y=this.overlays.getIteratorFrom(f);for(;y.hasNext();){const x=y.getNext().value,p=x.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===l&&x.largestBatchId>i&&o.set(x.getKey(),x)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,i,o){let l=new Bt((p,E)=>p-E);const f=this.overlays.getIterator();for(;f.hasNext();){const p=f.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>i){let E=l.get(p.largestBatchId);E===null&&(E=Ys(),l=l.insert(p.largestBatchId,E)),E.set(p.getKey(),p)}}const y=Ys(),x=l.getIterator();for(;x.hasNext()&&(x.getNext().value.forEach((p,E)=>y.set(p,E)),!(y.size()>=o)););return se.resolve(y)}St(e,n,i){const o=this.overlays.get(i.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(i.key,new VC(n,i));let l=this.qr.get(n);l===void 0&&(l=Xe(),this.qr.set(n,l)),this.qr.set(n,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(){this.Qr=new rn(hn.$r),this.Ur=new rn(hn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new hn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new hn(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new Te(new wt([])),i=new hn(n,e),o=new hn(n,e+1),l=[];return this.Ur.forEachInRange([i,o],f=>{this.Gr(f),l.push(f.key)}),l}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new wt([])),i=new hn(n,e),o=new hn(n,e+1);let l=Xe();return this.Ur.forEachInRange([i,o],f=>{l=l.add(f.key)}),l}containsKey(e){const n=new hn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class hn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||We(e.Yr,n.Yr)}static Kr(e,n){return We(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new rn(hn.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new FC(l,n,i,o);this.mutationQueue.push(f);for(const y of o)this.Zr=this.Zr.add(new hn(y.key,l)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return se.resolve(f)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,o=this.ei(i),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?B1:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new hn(n,0),o=new hn(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],f=>{const y=this.Xr(f.Yr);l.push(y)}),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new rn(We);return n.forEach(o=>{const l=new hn(o,0),f=new hn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,f],y=>{i=i.add(y.Yr)})}),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,o=i.length+1;let l=i;Te.isDocumentKey(l)||(l=l.child(""));const f=new hn(new Te(l),0);let y=new rn(We);return this.Zr.forEachWhile(x=>{const p=x.key.path;return!!i.isPrefixOf(p)&&(p.length===o&&(y=y.add(x.Yr)),!0)},f),se.resolve(this.ti(y))}ti(e){const n=[];return e.forEach(i=>{const o=this.Xr(i);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){ct(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(n.mutations,o=>{const l=new hn(o.key,n.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new hn(n,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){this.ri=e,this.docs=function(){return new Bt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,o=this.docs.get(i),l=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:f}),this.size+=f-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return se.resolve(i?i.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let i=Li();return n.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Pn.newInvalidDocument(o))}),se.resolve(i)}getDocumentsMatchingQuery(e,n,i,o){let l=Li();const f=n.path,y=new Te(f.child("__id-9223372036854775808__")),x=this.docs.getIteratorFrom(y);for(;x.hasNext();){const{key:p,value:{document:E}}=x.getNext();if(!f.isPrefixOf(p.path))break;p.path.length>f.length+1||eC(JA(E),i)<=0||(o.has(E.key)||gh(n,E))&&(l=l.insert(E.key,E.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,n,i,o){Re(9500)}ii(e,n){return se.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Iv(this)}getSize(e){return se.resolve(this.size)}}class Iv extends xv{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)}),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){this.persistence=e,this.si=new co(n=>U1(n),j1),this.lastRemoteSnapshotVersion=Pe.min(),this.highestTargetId=0,this.oi=0,this._i=new K1,this.targetCount=0,this.ai=ha.ur()}forEachTarget(e,n){return this.si.forEach((i,o)=>n(o)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ha(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,i){let o=0;const l=[];return this.si.forEach((f,y)=>{y.sequenceNumber<=n&&i.get(y.targetId)===null&&(this.si.delete(f),l.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)}),se.waitFor(l).next(()=>o)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return se.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),se.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach(f=>{l.push(o.markPotentiallyOrphaned(e,f))}),se.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return se.resolve(i)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,n){this.ui={},this.overlays={},this.ci=new uh(0),this.li=!1,this.li=!0,this.hi=new Av,this.referenceDelegate=e(this),this.Pi=new Tv(this),this.indexManager=new uv,this.remoteDocumentCache=function(o){return new vv(o)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new lv(n),this.Ii=new Ev(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _v,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new Cv(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ye("MemoryPersistence","Starting transaction:",e);const o=new Sv(this.ci.next());return this.referenceDelegate.Ei(),i(o).next(l=>this.referenceDelegate.di(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ai(e,n){return se.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class Sv extends nC{constructor(e){super(),this.currentSequenceNumber=e}}class q1{constructor(e){this.persistence=e,this.Ri=new K1,this.Vi=null}static mi(e){return new q1(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),se.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(l=>this.fi.add(l.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,i=>{const o=Te.fromPath(i);return this.gi(e,o).next(l=>{l||n.removeEntry(o,Pe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vu{constructor(e,n){this.persistence=e,this.pi=new co(i=>sC(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=mv(this,n)}static mi(e,n){return new Vu(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(o=>i+o))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return se.forEach(this.pi,(i,o)=>this.br(e,i,o).next(l=>l?se.resolve():n(o)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,f=>this.br(e,f,n).next(y=>{y||(i++,l.removeEntry(f,Pe.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=$c(e.data.value)),n}br(e,n,i){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n,i,o){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=o}static As(e,n){let i=Xe(),o=Xe();for(const l of n.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Y1(e,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return _3()?8:rC(w3())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,o){const l={result:null};return this.ys(e,n).next(f=>{l.result=f}).next(()=>{if(!l.result)return this.ws(e,n,o,i).next(f=>{l.result=f})}).next(()=>{if(l.result)return;const f=new Nv;return this.Ss(e,n,f).next(y=>{if(l.result=y,this.Vs)return this.bs(e,n,f,y.size)})}).next(()=>l.result)}bs(e,n,i,o){return i.documentReadCount<this.fs?(So()<=Ze.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",No(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(So()<=Ze.DEBUG&&ye("QueryEngine","Query:",No(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(So()<=Ze.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",No(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(n))):se.resolve())}ys(e,n){if(sp(n))return se.resolve(null);let i=hi(n);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Id(n,null,"F"),i=hi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const f=Xe(...l);return this.ps.getDocuments(e,f).next(y=>this.indexManager.getMinOffset(e,i).next(x=>{const p=this.Ds(n,y);return this.Cs(n,p,f,x.readTime)?this.ys(e,Id(n,null,"F")):this.vs(e,p,n,x)}))})))}ws(e,n,i,o){return sp(n)||o.isEqual(Pe.min())?se.resolve(null):this.ps.getDocuments(e,i).next(l=>{const f=this.Ds(n,l);return this.Cs(n,f,i,o)?se.resolve(null):(So()<=Ze.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),No(n)),this.vs(e,f,n,ZA(o,Ll)).next(y=>y))})}Ds(e,n){let i=new rn(Jx(e));return n.forEach((o,l)=>{gh(e,l)&&(i=i.add(l))}),i}Cs(e,n,i,o){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,n,i){return So()<=Ze.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",No(n)),this.ps.getDocumentsMatchingQuery(e,n,_s.min(),i)}vs(e,n,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next(l=>(n.forEach(f=>{l=l.insert(f.key,f)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="LocalStore",bv=3e8;class Dv{constructor(e,n,i,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Bt(We),this.xs=new co(l=>U1(l),j1),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wv(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Ov(t,e,n,i){return new Dv(t,e,n,i)}async function Ay(t,e){const n=ke(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(l=>{const f=[],y=[];let x=Xe();for(const p of o){f.push(p.batchId);for(const E of p.mutations)x=x.add(E.key)}for(const p of l){y.push(p.batchId);for(const E of p.mutations)x=x.add(E.key)}return n.localDocuments.getDocuments(i,x).next(p=>({Ls:p,removedBatchIds:f,addedBatchIds:y}))})})}function Pv(t,e){const n=ke(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return function(y,x,p,E){const A=p.batch,S=A.keys();let M=se.resolve();return S.forEach(j=>{M=M.next(()=>E.getEntry(x,j)).next(X=>{const q=p.docVersions.get(j);ct(q!==null,48541),X.version.compareTo(q)<0&&(A.applyToRemoteDocument(X,p),X.isValidDocument()&&(X.setReadTime(p.commitVersion),E.addEntry(X)))})}),M.next(()=>y.mutationQueue.removeMutationBatch(x,A))}(n,i,e,l).next(()=>l.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(y){let x=Xe();for(let p=0;p<y.mutationResults.length;++p)y.mutationResults[p].transformResults.length>0&&(x=x.add(y.batch.mutations[p].key));return x}(e))).next(()=>n.localDocuments.getDocuments(i,o))})}function Cy(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function kv(t,e){const n=ke(t),i=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const y=[];e.targetChanges.forEach((E,A)=>{const S=o.get(A);if(!S)return;y.push(n.Pi.removeMatchingKeys(l,E.removedDocuments,A).next(()=>n.Pi.addMatchingKeys(l,E.addedDocuments,A)));let M=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(A)!==null?M=M.withResumeToken(vn.EMPTY_BYTE_STRING,Pe.min()).withLastLimboFreeSnapshotVersion(Pe.min()):E.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(E.resumeToken,i)),o=o.insert(A,M),function(X,q,z){return X.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=bv?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(S,M,E)&&y.push(n.Pi.updateTargetData(l,M))});let x=Li(),p=Xe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(l,E))}),y.push(Mv(l,f,e.documentUpdates).next(E=>{x=E.ks,p=E.qs})),!i.isEqual(Pe.min())){const E=n.Pi.getLastRemoteSnapshotVersion(l).next(A=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i));y.push(E)}return se.waitFor(y).next(()=>f.apply(l)).next(()=>n.localDocuments.getLocalViewOfDocuments(l,x,p)).next(()=>x)}).then(l=>(n.Ms=o,l))}function Mv(t,e,n){let i=Xe(),o=Xe();return n.forEach(l=>i=i.add(l)),e.getEntries(t,i).next(l=>{let f=Li();return n.forEach((y,x)=>{const p=l.get(y);x.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(y)),x.isNoDocument()&&x.version.isEqual(Pe.min())?(e.removeEntry(y,x.readTime),f=f.insert(y,x)):!p.isValidDocument()||x.version.compareTo(p.version)>0||x.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(x),f=f.insert(y,x)):ye(Q1,"Ignoring outdated watch update for ",y,". Current version:",p.version," Watch version:",x.version)}),{ks:f,qs:o}})}function Lv(t,e){const n=ke(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=B1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Bv(t,e){const n=ke(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return n.Pi.getTargetData(i,e).next(l=>l?(o=l,se.resolve(o)):n.Pi.allocateTargetId(i).next(f=>(o=new ss(e,f,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function bd(t,e,n){const i=ke(t),o=i.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",l,f=>i.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!wa(f))throw f;ye(Q1,`Failed to update sequence numbers for target ${e}: ${f}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function yp(t,e,n){const i=ke(t);let o=Pe.min(),l=Xe();return i.persistence.runTransaction("Execute query","readwrite",f=>function(x,p,E){const A=ke(x),S=A.xs.get(E);return S!==void 0?se.resolve(A.Ms.get(S)):A.Pi.getTargetData(p,E)}(i,f,hi(e)).next(y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(f,y.targetId).next(x=>{l=x})}).next(()=>i.Fs.getDocumentsMatchingQuery(f,e,n?o:Pe.min(),n?l:Xe())).next(y=>(Fv(i,CC(e),y),{documents:y,Qs:l})))}function Fv(t,e,n){let i=t.Os.get(e)||Pe.min();n.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),t.Os.set(e,i)}class wp{constructor(){this.activeTargetIds=RC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vv{constructor(){this.Mo=new wp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wp,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="ConnectivityMonitor";class _p{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(Ep,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(Ep,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lc=null;function Dd(){return Lc===null?Lc=function(){return 268435456+Math.round(2147483648*Math.random())}():Lc++,"0x"+Lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="RestConnection",jv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zv{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===Ou?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,n,i,o,l){const f=Dd(),y=this.zo(e,n.toUriEncodedString());ye(ff,`Sending RPC '${e}' ${f}:`,y,i);const x={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(x,o,l);const{host:p}=new URL(y),E=P1(p);return this.Jo(e,y,x,i,E).then(A=>(ye(ff,`Received RPC '${e}' ${f}: `,A),A),A=>{throw aa(ff,`RPC '${e}' ${f} failed with error: `,A,"url: ",y,"request:",i),A})}Ho(e,n,i,o,l,f){return this.Go(e,n,i,o,l)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,l)=>e[l]=o),i&&i.headers.forEach((o,l)=>e[l]=o)}zo(e,n){const i=jv[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class Gv extends zv{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,o,l){const f=Dd();return new Promise((y,x)=>{const p=new vx;p.setWithCredentials(!0),p.listenOnce(Ix.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Qc.NO_ERROR:const A=p.getResponseJson();ye(bn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),y(A);break;case Qc.TIMEOUT:ye(bn,`RPC '${e}' ${f} timed out`),x(new xe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Qc.HTTP_ERROR:const S=p.getStatus();if(ye(bn,`RPC '${e}' ${f} failed with status:`,S,"response text:",p.getResponseText()),S>0){let M=p.getResponseJson();Array.isArray(M)&&(M=M[0]);const j=M==null?void 0:M.error;if(j&&j.status&&j.message){const X=function(z){const L=z.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(L)>=0?L:ie.UNKNOWN}(j.status);x(new xe(X,j.message))}else x(new xe(ie.UNKNOWN,"Server responded with status "+p.getStatus()))}else x(new xe(ie.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:f,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ye(bn,`RPC '${e}' ${f} completed.`)}});const E=JSON.stringify(o);ye(bn,`RPC '${e}' ${f} sending request:`,o),p.send(n,"POST",E,i,15)})}T_(e,n,i){const o=Dd(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=Nx(),y=Sx(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(x.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(x.useFetchStreams=!0),this.jo(x.initMessageHeaders,n,i),x.encodeInitMessageHeaders=!0;const E=l.join("");ye(bn,`Creating RPC '${e}' stream ${o}: ${E}`,x);const A=f.createWebChannel(E,x);this.I_(A);let S=!1,M=!1;const j=new Hv({Yo:q=>{M?ye(bn,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(S||(ye(bn,`Opening RPC '${e}' stream ${o} transport.`),A.open(),S=!0),ye(bn,`RPC '${e}' stream ${o} sending:`,q),A.send(q))},Zo:()=>A.close()}),X=(q,z,L)=>{q.listen(z,F=>{try{L(F)}catch(Z){setTimeout(()=>{throw Z},0)}})};return X(A,Za.EventType.OPEN,()=>{M||(ye(bn,`RPC '${e}' stream ${o} transport opened.`),j.o_())}),X(A,Za.EventType.CLOSE,()=>{M||(M=!0,ye(bn,`RPC '${e}' stream ${o} transport closed`),j.a_(),this.E_(A))}),X(A,Za.EventType.ERROR,q=>{M||(M=!0,aa(bn,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),j.a_(new xe(ie.UNAVAILABLE,"The operation could not be completed")))}),X(A,Za.EventType.MESSAGE,q=>{var z;if(!M){const L=q.data[0];ct(!!L,16349);const F=L,Z=(F==null?void 0:F.error)||((z=F[0])==null?void 0:z.error);if(Z){ye(bn,`RPC '${e}' stream ${o} received error:`,Z);const le=Z.status;let Y=function(O){const U=Yt[O];if(U!==void 0)return uy(U)}(le),b=Z.message;Y===void 0&&(Y=ie.INTERNAL,b="Unknown error status: "+le+" with message "+Z.message),M=!0,j.a_(new xe(Y,b)),A.close()}else ye(bn,`RPC '${e}' stream ${o} received:`,L),j.u_(L)}}),X(y,Tx.STAT_EVENT,q=>{q.stat===yd.PROXY?ye(bn,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===yd.NOPROXY&&ye(bn,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{j.__()},0),j}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function df(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yh(t){return new qC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="PersistentStream";class Iy{constructor(e,n,i,o,l,f,y,x){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=y,this.listener=x,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vy(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(Mi(n.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.D_===n&&this.G_(i,o)},i=>{e(()=>{const o=new xe(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{i(()=>this.z_(o))}),this.stream.onMessage(o=>{i(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ye(Ap,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ye(Ap,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wv extends Iy{constructor(e,n,i,o,l,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,f),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=$C(this.serializer,e),i=function(l){if(!("targetChange"in l))return Pe.min();const f=l.targetChange;return f.targetIds&&f.targetIds.length?Pe.min():f.readTime?fi(f.readTime):Pe.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Rd(this.serializer),n.addTarget=function(l,f){let y;const x=f.target;if(y=Cd(x)?{documents:ev(l,x)}:{query:tv(l,x).ft},y.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){y.resumeToken=dy(l,f.resumeToken);const p=Td(l,f.expectedCount);p!==null&&(y.expectedCount=p)}else if(f.snapshotVersion.compareTo(Pe.min())>0){y.readTime=Fu(l,f.snapshotVersion.toTimestamp());const p=Td(l,f.expectedCount);p!==null&&(y.expectedCount=p)}return y}(this.serializer,e);const i=rv(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Rd(this.serializer),n.removeTarget=e,this.q_(n)}}class Xv extends Iy{constructor(e,n,i,o,l,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,f),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=JC(e.writeResults,e.commitTime),i=fi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Rd(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>ZC(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{}class qv extends Kv{constructor(e,n,i,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new xe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,f])=>this.connection.Go(e,Sd(n,i),o,l,f)).catch(l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new xe(ie.UNKNOWN,l.toString())})}Ho(e,n,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,y])=>this.connection.Ho(e,Sd(n,i),o,f,y,l)).catch(f=>{throw f.name==="FirebaseError"?(f.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new xe(ie.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Yv{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mi(n),this.aa=!1):ye("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class Qv{constructor(e,n,i,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo(f=>{i.enqueueAndForget(async()=>{uo(this)&&(ye(so,"Restarting streams for network reachability change."),await async function(x){const p=ke(x);p.Ea.add(4),await $l(p),p.Ra.set("Unknown"),p.Ea.delete(4),await wh(p)}(this))})}),this.Ra=new Yv(i,o)}}async function wh(t){if(uo(t))for(const e of t.da)await e(!0)}async function $l(t){for(const e of t.da)await e(!1)}function Ty(t,e){const n=ke(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),e0(n)?J1(n):Ea(n).O_()&&Z1(n,e))}function $1(t,e){const n=ke(t),i=Ea(n);n.Ia.delete(e),i.O_()&&Sy(n,e),n.Ia.size===0&&(i.O_()?i.L_():uo(n)&&n.Ra.set("Unknown"))}function Z1(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ea(t).Y_(e)}function Sy(t,e){t.Va.Ue(e),Ea(t).Z_(e)}function J1(t){t.Va=new GC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ea(t).start(),t.Ra.ua()}function e0(t){return uo(t)&&!Ea(t).x_()&&t.Ia.size>0}function uo(t){return ke(t).Ea.size===0}function Ny(t){t.Va=void 0}async function $v(t){t.Ra.set("Online")}async function Zv(t){t.Ia.forEach((e,n)=>{Z1(t,e)})}async function Jv(t,e){Ny(t),e0(t)?(t.Ra.ha(e),J1(t)):t.Ra.set("Unknown")}async function e4(t,e,n){if(t.Ra.set("Online"),e instanceof fy&&e.state===2&&e.cause)try{await async function(o,l){const f=l.cause;for(const y of l.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,f),o.Ia.delete(y),o.Va.removeTarget(y))}(t,e)}catch(i){ye(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Uu(t,i)}else if(e instanceof eu?t.Va.Ze(e):e instanceof hy?t.Va.st(e):t.Va.tt(e),!n.isEqual(Pe.min()))try{const i=await Cy(t.localStore);n.compareTo(i)>=0&&await function(l,f){const y=l.Va.Tt(f);return y.targetChanges.forEach((x,p)=>{if(x.resumeToken.approximateByteSize()>0){const E=l.Ia.get(p);E&&l.Ia.set(p,E.withResumeToken(x.resumeToken,f))}}),y.targetMismatches.forEach((x,p)=>{const E=l.Ia.get(x);if(!E)return;l.Ia.set(x,E.withResumeToken(vn.EMPTY_BYTE_STRING,E.snapshotVersion)),Sy(l,x);const A=new ss(E.target,x,p,E.sequenceNumber);Z1(l,A)}),l.remoteSyncer.applyRemoteEvent(y)}(t,n)}catch(i){ye(so,"Failed to raise snapshot:",i),await Uu(t,i)}}async function Uu(t,e,n){if(!wa(e))throw e;t.Ea.add(1),await $l(t),t.Ra.set("Offline"),n||(n=()=>Cy(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ye(so,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await wh(t)})}function Ry(t,e){return e().catch(n=>Uu(t,n,e))}async function Eh(t){const e=ke(t),n=Is(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:B1;for(;t4(e);)try{const o=await Lv(e.localStore,i);if(o===null){e.Ta.length===0&&n.L_();break}i=o.batchId,n4(e,o)}catch(o){await Uu(e,o)}by(e)&&Dy(e)}function t4(t){return uo(t)&&t.Ta.length<10}function n4(t,e){t.Ta.push(e);const n=Is(t);n.O_()&&n.X_&&n.ea(e.mutations)}function by(t){return uo(t)&&!Is(t).x_()&&t.Ta.length>0}function Dy(t){Is(t).start()}async function r4(t){Is(t).ra()}async function i4(t){const e=Is(t);for(const n of t.Ta)e.ea(n.mutations)}async function s4(t,e,n){const i=t.Ta.shift(),o=G1.from(i,e,n);await Ry(t,()=>t.remoteSyncer.applySuccessfulWrite(o)),await Eh(t)}async function o4(t,e){e&&Is(t).X_&&await async function(i,o){if(function(f){return jC(f)&&f!==ie.ABORTED}(o.code)){const l=i.Ta.shift();Is(i).B_(),await Ry(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Eh(i)}}(t,e),by(t)&&Dy(t)}async function Cp(t,e){const n=ke(t);n.asyncQueue.verifyOperationInProgress(),ye(so,"RemoteStore received new credentials");const i=uo(n);n.Ea.add(3),await $l(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wh(n)}async function a4(t,e){const n=ke(t);e?(n.Ea.delete(2),await wh(n)):e||(n.Ea.add(2),await $l(n),n.Ra.set("Unknown"))}function Ea(t){return t.ma||(t.ma=function(n,i,o){const l=ke(n);return l.sa(),new Wv(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Xo:$v.bind(null,t),t_:Zv.bind(null,t),r_:Jv.bind(null,t),H_:e4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),e0(t)?J1(t):t.Ra.set("Unknown")):(await t.ma.stop(),Ny(t))})),t.ma}function Is(t){return t.fa||(t.fa=function(n,i,o){const l=ke(n);return l.sa(),new Xv(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:r4.bind(null,t),r_:o4.bind(null,t),ta:i4.bind(null,t),na:s4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Eh(t)):(await t.fa.stop(),t.Ta.length>0&&(ye(so,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,n,i,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,o,l){const f=Date.now()+i,y=new t0(e,n,f,o,l);return y.start(i),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n0(t,e){if(Mi("AsyncQueue",`${e}: ${t}`),wa(t))return new xe(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{static emptySet(e){return new $o(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Te.comparator(n.key,i.key):(n,i)=>Te.comparator(n.key,i.key),this.keyedMap=Ja(),this.sortedSet=new Bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new $o;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(){this.ga=new Bt(Te.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class fa{constructor(e,n,i,o,l,f,y,x,p){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=f,this.syncStateChanged=y,this.excludesMetadataChanges=x,this.hasCachedResults=p}static fromInitialDocuments(e,n,i,o,l){const f=[];return n.forEach(y=>{f.push({type:0,doc:y})}),new fa(e,n,$o.emptySet(n),f,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class c4{constructor(){this.queries=Ip(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=ke(n),l=o.queries;o.queries=Ip(),l.forEach((f,y)=>{for(const x of y.Sa)x.onError(i)})})(this,new xe(ie.ABORTED,"Firestore shutting down"))}}function Ip(){return new co(t=>Zx(t),dh)}async function u4(t,e){const n=ke(t);let i=3;const o=e.query;let l=n.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new l4,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await n.onListen(o,!0);break;case 1:l.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const y=n0(f,`Initialization of query '${No(e.query)}' failed`);return void e.onError(y)}n.queries.set(o,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&r0(n)}async function h4(t,e){const n=ke(t),i=e.query;let o=3;const l=n.queries.get(i);if(l){const f=l.Sa.indexOf(e);f>=0&&(l.Sa.splice(f,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function f4(t,e){const n=ke(t);let i=!1;for(const o of e){const l=o.query,f=n.queries.get(l);if(f){for(const y of f.Sa)y.Fa(o)&&(i=!0);f.wa=o}}i&&r0(n)}function d4(t,e,n){const i=ke(t),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(n);i.queries.delete(e)}function r0(t){t.Ca.forEach(e=>{e.next()})}var Od,Tp;(Tp=Od||(Od={})).Ma="default",Tp.Cache="cache";class g4{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new fa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Od.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this.key=e}}class Py{constructor(e){this.key=e}}class p4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Xe(),this.mutatedKeys=Xe(),this.eu=Jx(e),this.tu=new $o(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new vp,o=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,f=o,y=!1;const x=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,A)=>{const S=o.get(E),M=gh(this.query,A)?A:null,j=!!S&&this.mutatedKeys.has(S.key),X=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let q=!1;S&&M?S.data.isEqual(M.data)?j!==X&&(i.track({type:3,doc:M}),q=!0):this.su(S,M)||(i.track({type:2,doc:M}),q=!0,(x&&this.eu(M,x)>0||p&&this.eu(M,p)<0)&&(y=!0)):!S&&M?(i.track({type:0,doc:M}),q=!0):S&&!M&&(i.track({type:1,doc:S}),q=!0,(x||p)&&(y=!0)),q&&(M?(f=f.add(M),l=X?l.add(E):l.delete(E)):(f=f.delete(E),l=l.delete(E)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),l=l.delete(E.key),i.track({type:1,doc:E})}return{tu:f,iu:i,Cs:y,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort((E,A)=>function(M,j){const X=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:q})}};return X(M)-X(j)}(E.type,A.type)||this.eu(E.doc,A.doc)),this.ou(i),o=o??!1;const y=n&&!o?this._u():[],x=this.Xa.size===0&&this.current&&!o?1:0,p=x!==this.Za;return this.Za=x,f.length!==0||p?{snapshot:new fa(this.query,e.tu,l,f,e.mutatedKeys,x===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Xe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new Py(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new Oy(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const i0="SyncEngine";class m4{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class x4{constructor(e){this.key=e,this.hu=!1}}class y4{constructor(e,n,i,o,l,f){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new co(y=>Zx(y),dh),this.Iu=new Map,this.Eu=new Set,this.du=new Bt(Te.comparator),this.Au=new Map,this.Ru=new K1,this.Vu={},this.mu=new Map,this.fu=ha.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function w4(t,e,n=!0){const i=Vy(t);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await ky(i,e,n,!0),o}async function E4(t,e){const n=Vy(t);await ky(n,e,!0,!1)}async function ky(t,e,n,i){const o=await Bv(t.localStore,hi(e)),l=o.targetId,f=t.sharedClientState.addLocalQueryTarget(l,n);let y;return i&&(y=await _4(t,e,l,f==="current",o.resumeToken)),t.isPrimaryClient&&n&&Ty(t.remoteStore,o),y}async function _4(t,e,n,i,o){t.pu=(A,S,M)=>async function(X,q,z,L){let F=q.view.ru(z);F.Cs&&(F=await yp(X.localStore,q.query,!1).then(({documents:b})=>q.view.ru(b,F)));const Z=L&&L.targetChanges.get(q.targetId),le=L&&L.targetMismatches.get(q.targetId)!=null,Y=q.view.applyChanges(F,X.isPrimaryClient,Z,le);return Np(X,q.targetId,Y.au),Y.snapshot}(t,A,S,M);const l=await yp(t.localStore,e,!0),f=new p4(e,l.Qs),y=f.ru(l.documents),x=Ql.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",o),p=f.applyChanges(y,t.isPrimaryClient,x);Np(t,n,p.au);const E=new m4(e,n,f);return t.Tu.set(e,E),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),p.snapshot}async function A4(t,e,n){const i=ke(t),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter(f=>!dh(f,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await bd(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),n&&$1(i.remoteStore,o.targetId),Pd(i,o.targetId)}).catch(ya)):(Pd(i,o.targetId),await bd(i.localStore,o.targetId,!0))}async function C4(t,e){const n=ke(t),i=n.Tu.get(e),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),$1(n.remoteStore,i.targetId))}async function v4(t,e,n){const i=D4(t);try{const o=await function(f,y){const x=ke(f),p=Tt.now(),E=y.reduce((M,j)=>M.add(j.key),Xe());let A,S;return x.persistence.runTransaction("Locally write mutations","readwrite",M=>{let j=Li(),X=Xe();return x.Ns.getEntries(M,E).next(q=>{j=q,j.forEach((z,L)=>{L.isValidDocument()||(X=X.add(z))})}).next(()=>x.localDocuments.getOverlayedDocuments(M,j)).next(q=>{A=q;const z=[];for(const L of y){const F=LC(L,A.get(L.key).overlayedDocument);F!=null&&z.push(new Ds(L.key,F,Hx(F.value.mapValue),Gr.exists(!0)))}return x.mutationQueue.addMutationBatch(M,p,z,y)}).next(q=>{S=q;const z=q.applyToLocalDocumentSet(A,X);return x.documentOverlayCache.saveOverlays(M,q.batchId,z)})}).then(()=>({batchId:S.batchId,changes:ty(A)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(f,y,x){let p=f.Vu[f.currentUser.toKey()];p||(p=new Bt(We)),p=p.insert(y,x),f.Vu[f.currentUser.toKey()]=p}(i,o.batchId,n),await Zl(i,o.changes),await Eh(i.remoteStore)}catch(o){const l=n0(o,"Failed to persist write");n.reject(l)}}async function My(t,e){const n=ke(t);try{const i=await kv(n.localStore,e);e.targetChanges.forEach((o,l)=>{const f=n.Au.get(l);f&&(ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?ct(f.hu,14607):o.removedDocuments.size>0&&(ct(f.hu,42227),f.hu=!1))}),await Zl(n,i,e)}catch(i){await ya(i)}}function Sp(t,e,n){const i=ke(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach((l,f)=>{const y=f.view.va(e);y.snapshot&&o.push(y.snapshot)}),function(f,y){const x=ke(f);x.onlineState=y;let p=!1;x.queries.forEach((E,A)=>{for(const S of A.Sa)S.va(y)&&(p=!0)}),p&&r0(x)}(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function I4(t,e,n){const i=ke(t);i.sharedClientState.updateQueryState(e,"rejected",n);const o=i.Au.get(e),l=o&&o.key;if(l){let f=new Bt(Te.comparator);f=f.insert(l,Pn.newNoDocument(l,Pe.min()));const y=Xe().add(l),x=new xh(Pe.min(),new Map,new Bt(We),f,y);await My(i,x),i.du=i.du.remove(l),i.Au.delete(e),s0(i)}else await bd(i.localStore,e,!1).then(()=>Pd(i,e,n)).catch(ya)}async function T4(t,e){const n=ke(t),i=e.batch.batchId;try{const o=await Pv(n.localStore,e);By(n,i,null),Ly(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Zl(n,o)}catch(o){await ya(o)}}async function S4(t,e,n){const i=ke(t);try{const o=await function(f,y){const x=ke(f);return x.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let E;return x.mutationQueue.lookupMutationBatch(p,y).next(A=>(ct(A!==null,37113),E=A.keys(),x.mutationQueue.removeMutationBatch(p,A))).next(()=>x.mutationQueue.performConsistencyCheck(p)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(p,E,y)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,E)).next(()=>x.localDocuments.getDocuments(p,E))})}(i.localStore,e);By(i,e,n),Ly(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Zl(i,o)}catch(o){await ya(o)}}function Ly(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function By(t,e,n){const i=ke(t);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function Pd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||Fy(t,i)})}function Fy(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&($1(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),s0(t))}function Np(t,e,n){for(const i of n)i instanceof Oy?(t.Ru.addReference(i.key,e),N4(t,i)):i instanceof Py?(ye(i0,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||Fy(t,i.key)):Re(19791,{wu:i})}function N4(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ye(i0,"New document in limbo: "+n),t.Eu.add(i),s0(t))}function s0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Te(wt.fromString(e)),i=t.fu.next();t.Au.set(i,new x4(n)),t.du=t.du.insert(n,i),Ty(t.remoteStore,new ss(hi(Qx(n.path)),i,"TargetPurposeLimboResolution",uh.ce))}}async function Zl(t,e,n){const i=ke(t),o=[],l=[],f=[];i.Tu.isEmpty()||(i.Tu.forEach((y,x)=>{f.push(i.pu(x,e,n).then(p=>{var E;if((p||n)&&i.isPrimaryClient){const A=p?!p.fromCache:(E=n==null?void 0:n.targetChanges.get(x.targetId))==null?void 0:E.current;i.sharedClientState.updateQueryState(x.targetId,A?"current":"not-current")}if(p){o.push(p);const A=Y1.As(x.targetId,p);l.push(A)}}))}),await Promise.all(f),i.Pu.H_(o),await async function(x,p){const E=ke(x);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>se.forEach(p,S=>se.forEach(S.Es,M=>E.persistence.referenceDelegate.addReference(A,S.targetId,M)).next(()=>se.forEach(S.ds,M=>E.persistence.referenceDelegate.removeReference(A,S.targetId,M)))))}catch(A){if(!wa(A))throw A;ye(Q1,"Failed to update sequence numbers: "+A)}for(const A of p){const S=A.targetId;if(!A.fromCache){const M=E.Ms.get(S),j=M.snapshotVersion,X=M.withLastLimboFreeSnapshotVersion(j);E.Ms=E.Ms.insert(S,X)}}}(i.localStore,l))}async function R4(t,e){const n=ke(t);if(!n.currentUser.isEqual(e)){ye(i0,"User change. New user:",e.toKey());const i=await Ay(n.localStore,e);n.currentUser=e,function(l,f){l.mu.forEach(y=>{y.forEach(x=>{x.reject(new xe(ie.CANCELLED,f))})}),l.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Zl(n,i.Ls)}}function b4(t,e){const n=ke(t),i=n.Au.get(e);if(i&&i.hu)return Xe().add(i.key);{let o=Xe();const l=n.Iu.get(e);if(!l)return o;for(const f of l){const y=n.Tu.get(f);o=o.unionWith(y.view.nu)}return o}}function Vy(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=My.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I4.bind(null,e),e.Pu.H_=f4.bind(null,e.eventManager),e.Pu.yu=d4.bind(null,e.eventManager),e}function D4(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=S4.bind(null,e),e}class ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ov(this.persistence,new Rv,e.initialUser,this.serializer)}Cu(e){return new _y(q1.mi,this.serializer)}Du(e){return new Vv}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ju.provider={build:()=>new ju};class O4 extends ju{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ct(this.persistence.referenceDelegate instanceof Vu,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new gv(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new _y(i=>Vu.mi(i,n),this.serializer)}}class kd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Sp(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=R4.bind(null,this.syncEngine),await a4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new c4}()}createDatastore(e){const n=yh(e.databaseInfo.databaseId),i=function(l){return new Gv(l)}(e.databaseInfo);return function(l,f,y,x){return new qv(l,f,y,x)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,o,l,f,y){return new Qv(i,o,l,f,y)}(this.localStore,this.datastore,e.asyncQueue,n=>Sp(this.syncEngine,n,0),function(){return _p.v()?new _p:new Uv}())}createSyncEngine(e,n){return function(o,l,f,y,x,p,E){const A=new y4(o,l,f,y,x,p);return E&&(A.gu=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const l=ke(o);ye(so,"RemoteStore shutting down."),l.Ea.add(5),await $l(l),l.Aa.shutdown(),l.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}kd.provider={build:()=>new kd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="FirestoreClient";class k4{constructor(e,n,i,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=Dn.UNAUTHENTICATED,this.clientId=L1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async f=>{ye(Ts,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(i,f=>(ye(Ts,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=n0(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function gf(t,e){t.asyncQueue.verifyOperationInProgress(),ye(Ts,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async o=>{i.isEqual(o)||(await Ay(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Rp(t,e){t.asyncQueue.verifyOperationInProgress();const n=await M4(t);ye(Ts,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Cp(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>Cp(e.remoteStore,o)),t._onlineComponents=e}async function M4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye(Ts,"Using user provided OfflineComponentProvider");try{await gf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===ie.FAILED_PRECONDITION||o.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;aa("Error using user provided cache. Falling back to memory cache: "+n),await gf(t,new ju)}}else ye(Ts,"Using default OfflineComponentProvider"),await gf(t,new O4(void 0));return t._offlineComponents}async function Uy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye(Ts,"Using user provided OnlineComponentProvider"),await Rp(t,t._uninitializedComponentsProvider._online)):(ye(Ts,"Using default OnlineComponentProvider"),await Rp(t,new kd))),t._onlineComponents}function L4(t){return Uy(t).then(e=>e.syncEngine)}async function B4(t){const e=await Uy(t),n=e.eventManager;return n.onListen=w4.bind(null,e.syncEngine),n.onUnlisten=A4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=E4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=C4.bind(null,e.syncEngine),n}function F4(t,e,n={}){const i=new xs;return t.asyncQueue.enqueueAndForget(async()=>function(l,f,y,x,p){const E=new P4({next:S=>{E.Nu(),f.enqueueAndForget(()=>h4(l,A)),S.fromCache&&x.source==="server"?p.reject(new xe(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),A=new g4(y,E,{includeMetadataChanges:!0,qa:!0});return u4(l,A)}(await B4(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="firestore.googleapis.com",Dp=!0;class Op{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zy,this.ssl=Dp}else this.host=e.host,this.ssl=e.ssl??Dp;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ey;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fv)throw new xe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$A("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jy(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _h{constructor(e,n,i,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Op({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Op(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new jA;switch(i.type){case"firstParty":return new WA(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new xe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=bp.get(n);i&&(ye("ComponentProvider","Removing Datastore"),bp.delete(n),i.terminate())}(this),Promise.resolve()}}function V4(t,e,n,i={}){var p;t=io(t,_h);const o=P1(e),l=t._getSettings(),f={...l,emulatorOptions:t._getEmulatorOptions()},y=`${e}:${n}`;o&&(g3(`https://${y}`),y3("Firestore",!0)),l.host!==zy&&l.host!==y&&aa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const x={...l,host:y,ssl:o,emulatorOptions:i};if(!Nu(x,f)&&(t._setSettings(x),i.mockUserToken)){let E,A;if(typeof i.mockUserToken=="string")E=i.mockUserToken,A=Dn.MOCK_USER;else{E=p3(i.mockUserToken,(p=t._app)==null?void 0:p.options.projectId);const S=i.mockUserToken.sub||i.mockUserToken.user_id;if(!S)throw new xe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new Dn(S)}t._authCredentials=new zA(new bx(E,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _a(this.firestore,e,this._query)}}class nn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ys(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Kl(n,nn._jsonSchema))return new nn(e,i||null,new Te(wt.fromString(n.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:Zt("string",nn._jsonSchemaVersion),referencePath:Zt("string")};class ys extends _a{constructor(e,n,i){super(e,n,Qx(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new Te(e))}withConverter(e){return new ys(this.firestore,e,this._path)}}function o0(t,e,...n){if(t=Pi(t),Dx("collection","path",e),t instanceof _h){const i=wt.fromString(e,...n);return Wg(i),new ys(t,null,i)}{if(!(t instanceof nn||t instanceof ys))throw new xe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(wt.fromString(e,...n));return Wg(i),new ys(t.firestore,null,i)}}function Zi(t,e,...n){if(t=Pi(t),arguments.length===1&&(e=L1.newId()),Dx("doc","path",e),t instanceof _h){const i=wt.fromString(e,...n);return Gg(i),new nn(t,null,new Te(i))}{if(!(t instanceof nn||t instanceof ys))throw new xe(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(wt.fromString(e,...n));return Gg(i),new nn(t.firestore,t instanceof ys?t.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp="AsyncQueue";class kp{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vy(this,"async_queue_retry"),this._c=()=>{const i=df();i&&ye(Pp,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=df();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=df();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!wa(e))throw e;ye(Pp,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Mi("INTERNAL UNHANDLED ERROR: ",Mp(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=t0.createAndSchedule(this,e,n,i,l=>this.hc(l));return this.tc.push(o),o}uc(){this.nc&&Re(47125,{Pc:Mp(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Mp(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Jl extends _h{constructor(e,n,i,o){super(e,n,i,o),this.type="firestore",this._queue=new kp,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kp(e),this._firestoreClient=void 0,await e}}}function U4(t,e){const n=typeof t=="object"?t:NA(),i=typeof t=="string"?t:e||Ou,o=CA(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=f3("firestore");l&&V4(o,...l)}return o}function Hy(t){if(t._terminated)throw new xe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||j4(t),t._firestoreClient}function j4(t){var i,o,l;const e=t._freezeSettings(),n=function(y,x,p,E){return new lC(y,x,p,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,jy(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new k4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(y){const x=y==null?void 0:y._online.build();return{_offline:y==null?void 0:y._offline.build(x),_online:x}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(vn.fromBase64String(e))}catch(n){throw new xe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tr(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Kl(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:Zt("string",Tr._jsonSchemaVersion),bytes:Zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new xe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new xe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new xe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:di._jsonSchemaVersion}}static fromJSON(e){if(Kl(e,di._jsonSchema))return new di(e.latitude,e.longitude)}}di._jsonSchemaVersion="firestore/geoPoint/1.0",di._jsonSchema={type:Zt("string",di._jsonSchemaVersion),latitude:Zt("number"),longitude:Zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Kl(e,gi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gi(e.vectorValues);throw new xe(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:Zt("string",gi._jsonSchemaVersion),vectorValues:Zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=/^__.*__$/;class H4{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yl(e,this.data,n,this.fieldTransforms)}}class Gy{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Ds(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Wy(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class l0{constructor(e,n,i,o,l,f){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new l0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Wy(this.Ac)&&z4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class G4{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||yh(e)}Cc(e,n,i,o=!1){return new l0({Ac:e,methodName:n,Dc:i,path:_n.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function c0(t){const e=t._freezeSettings(),n=yh(t._databaseId);return new G4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function W4(t,e,n,i,o,l={}){const f=t.Cc(l.merge||l.mergeFields?2:0,e,n,o);u0("Data must be an object, but it was:",f,i);const y=Xy(i,f);let x,p;if(l.merge)x=new lr(f.fieldMask),p=f.fieldTransforms;else if(l.mergeFields){const E=[];for(const A of l.mergeFields){const S=Md(e,A,n);if(!f.contains(S))throw new xe(ie.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);qy(E,S)||E.push(S)}x=new lr(E),p=f.fieldTransforms.filter(A=>x.covers(A.field))}else x=null,p=f.fieldTransforms;return new H4(new $n(y),x,p)}class Ch extends a0{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ch}}function X4(t,e,n,i){const o=t.Cc(1,e,n);u0("Data must be an object, but it was:",o,i);const l=[],f=$n.empty();bs(i,(x,p)=>{const E=h0(e,x,n);p=Pi(p);const A=o.yc(E);if(p instanceof Ch)l.push(E);else{const S=ec(p,A);S!=null&&(l.push(E),f.set(E,S))}});const y=new lr(l);return new Gy(f,y,o.fieldTransforms)}function K4(t,e,n,i,o,l){const f=t.Cc(1,e,n),y=[Md(e,i,n)],x=[o];if(l.length%2!=0)throw new xe(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)y.push(Md(e,l[S])),x.push(l[S+1]);const p=[],E=$n.empty();for(let S=y.length-1;S>=0;--S)if(!qy(p,y[S])){const M=y[S];let j=x[S];j=Pi(j);const X=f.yc(M);if(j instanceof Ch)p.push(M);else{const q=ec(j,X);q!=null&&(p.push(M),E.set(M,q))}}const A=new lr(p);return new Gy(E,A,f.fieldTransforms)}function q4(t,e,n,i=!1){return ec(n,t.Cc(i?4:3,e))}function ec(t,e){if(Ky(t=Pi(t)))return u0("Unsupported field value:",e,t),Xy(t,e);if(t instanceof a0)return function(i,o){if(!Wy(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,o){const l=[];let f=0;for(const y of i){let x=ec(y,o.wc(f));x==null&&(x={nullValue:"NULL_VALUE"}),l.push(x),f++}return{arrayValue:{values:l}}}(t,e)}return function(i,o){if((i=Pi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return bC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=Tt.fromDate(i);return{timestampValue:Fu(o.serializer,l)}}if(i instanceof Tt){const l=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Fu(o.serializer,l)}}if(i instanceof di)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Tr)return{bytesValue:dy(o.serializer,i._byteString)};if(i instanceof nn){const l=o.databaseId,f=i.firestore._databaseId;if(!f.isEqual(l))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:X1(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof gi)return function(f,y){return{mapValue:{fields:{[Ux]:{stringValue:zx},[Pu]:{arrayValue:{values:f.toArray().map(p=>{if(typeof p!="number")throw y.Sc("VectorValues must only contain numeric values.");return z1(y.serializer,p)})}}}}}}(i,o);throw o.Sc(`Unsupported field value: ${ch(i)}`)}(t,e)}function Xy(t,e){const n={};return kx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bs(t,(i,o)=>{const l=ec(o,e.mc(i));l!=null&&(n[i]=l)}),{mapValue:{fields:n}}}function Ky(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof di||t instanceof Tr||t instanceof nn||t instanceof a0||t instanceof gi)}function u0(t,e,n){if(!Ky(n)||!Ox(n)){const i=ch(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Md(t,e,n){if((e=Pi(e))instanceof Ah)return e._internalPath;if(typeof e=="string")return h0(t,e);throw zu("Field path arguments must be of type string or ",t,!1,void 0,n)}const Y4=new RegExp("[~\\*/\\[\\]]");function h0(t,e,n){if(e.search(Y4)>=0)throw zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ah(...e.split("."))._internalPath}catch{throw zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zu(t,e,n,i,o){const l=i&&!i.isEmpty(),f=o!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let x="";return(l||f)&&(x+=" (found",l&&(x+=` in field ${i}`),f&&(x+=` in document ${o}`),x+=")"),new xe(ie.INVALID_ARGUMENT,y+t+x)}function qy(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,n,i,o,l){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(f0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Q4 extends Yy{data(){return super.data()}}function f0(t,e){return typeof e=="string"?h0(t,e):e instanceof Ah?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new xe(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class d0{}class Z4 extends d0{}function js(t,e,...n){let i=[];e instanceof d0&&i.push(e),i=i.concat(n),function(l){const f=l.filter(x=>x instanceof g0).length,y=l.filter(x=>x instanceof vh).length;if(f>1||f>0&&y>0)throw new xe(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)t=o._apply(t);return t}class vh extends Z4{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new vh(e,n,i)}_apply(e){const n=this._parse(e);return Qy(e._query,n),new _a(e.firestore,e.converter,vd(e._query,n))}_parse(e){const n=c0(e.firestore);return function(l,f,y,x,p,E,A){let S;if(p.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new xe(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Bp(A,E);const j=[];for(const X of A)j.push(Lp(x,l,X));S={arrayValue:{values:j}}}else S=Lp(x,l,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Bp(A,E),S=q4(y,f,A,E==="in"||E==="not-in");return $t.create(p,E,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zs(t,e,n){const i=e,o=f0("where",t);return vh._create(o,i,n)}class g0 extends d0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new g0(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Xr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,l){let f=o;const y=l.getFlattenedFilters();for(const x of y)Qy(f,x),f=vd(f,x)}(e._query,n),new _a(e.firestore,e.converter,vd(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Lp(t,e,n){if(typeof(n=Pi(n))=="string"){if(n==="")throw new xe(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$x(e)&&n.indexOf("/")!==-1)throw new xe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(wt.fromString(n));if(!Te.isDocumentKey(i))throw new xe(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Jg(t,new Te(i))}if(n instanceof nn)return Jg(t,n._key);throw new xe(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ch(n)}.`)}function Bp(t,e){if(!Array.isArray(t)||t.length===0)throw new xe(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qy(t,e){const n=function(o,l){for(const f of o)for(const y of f.getFlattenedFilters())if(l.indexOf(y.op)>=0)return y.op;return null}(t.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new xe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new xe(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class J4{convertValue(e,n="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return bs(e,(o,l)=>{i[o]=this.convertValue(l,n)}),i}convertVectorValue(e){var i,o,l;const n=(l=(o=(i=e.fields)==null?void 0:i[Pu].arrayValue)==null?void 0:o.values)==null?void 0:l.map(f=>Wt(f.doubleValue));return new gi(n)}convertGeoPoint(e){return new di(Wt(e.latitude),Wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=fh(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Bl(e));default:return null}}convertTimestamp(e){const n=As(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=wt.fromString(e);ct(wy(i),9688,{name:e});const o=new Fl(i.get(1),i.get(3)),l=new Te(i.popFirst(5));return o.isEqual(n)||Mi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class Bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zo extends Yy{constructor(e,n,i,o,l,f){super(e,n,i,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(f0("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zo._jsonSchema={type:Zt("string",Zo._jsonSchemaVersion),bundleSource:Zt("string","DocumentSnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class tu extends Zo{data(e={}){return super.data(e)}}class Jo{constructor(e,n,i,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Bc(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new tu(this._firestore,this._userDataWriter,i.key,i,new Bc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new xe(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(y=>{const x=new tu(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Bc(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:x,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(y=>l||y.type!==3).map(y=>{const x=new tu(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Bc(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,E=-1;return y.type!==0&&(p=f.indexOf(y.doc.key),f=f.delete(y.doc.key)),y.type!==1&&(f=f.add(y.doc),E=f.indexOf(y.doc.key)),{type:tI(y.type),doc:x,oldIndex:p,newIndex:E}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new xe(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=L1.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach(l=>{l._document!==null&&(n.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}Jo._jsonSchemaVersion="firestore/querySnapshot/1.0",Jo._jsonSchema={type:Zt("string",Jo._jsonSchemaVersion),bundleSource:Zt("string","QuerySnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class nI extends J4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function ii(t){t=io(t,_a);const e=io(t.firestore,Jl),n=Hy(e),i=new nI(e);return $4(t._query),F4(n,t._query).then(o=>new Jo(e,i,t,o))}function Ga(t,e,n,...i){t=io(t,nn);const o=io(t.firestore,Jl),l=c0(o);let f;return f=typeof(e=Pi(e))=="string"||e instanceof Ah?K4(l,"updateDoc",t._key,e,n,i):X4(l,"updateDoc",t._key,e),p0(o,[f.toMutation(t._key,Gr.exists(!0))])}function Fp(t){return p0(io(t.firestore,Jl),[new H1(t._key,Gr.none())])}function pf(t,e){const n=io(t.firestore,Jl),i=Zi(t),o=eI(t.converter,e);return p0(n,[W4(c0(t.firestore),"addDoc",i._key,o,t.converter!==null,{}).toMutation(i._key,Gr.exists(!1))]).then(()=>i)}function p0(t,e){return function(i,o){const l=new xs;return i.asyncQueue.enqueueAndForget(async()=>v4(await L4(i),o,l)),l.promise}(Hy(t),e)}(function(e,n=!0){(function(o){xa=o})(SA),bu(new kl("firestore",(i,{instanceIdentifier:o,options:l})=>{const f=i.getProvider("app").getImmediate(),y=new Jl(new HA(i.getProvider("auth-internal")),new XA(f,i.getProvider("app-check-internal")),function(p,E){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new xe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fl(p.options.projectId,E)}(f,o),f);return l={useFetchStreams:n,...l},y._setSettings(l),y},"PUBLIC").setMultipleInstances(!0)),Qo(Ug,jg,e),Qo(Ug,jg,"esm2020")})();var Si=(t=>(t.AVAILABLE="AVAILABLE",t.BORROWED="BORROWED",t.LOST="LOST",t))(Si||{});const rI={apiKey:"AIzaSyBwlK6cJQdiBuxSzKCeV25VzWtsYD6Wd1I",authDomain:"libratech-db.firebaseapp.com",projectId:"libratech-db",storageBucket:"libratech-db.firebasestorage.app",messagingSenderId:"766487965530",appId:"1:766487965530:web:34ab9cc14f5ff6296e0d63"},iI=Ex(rI),ai=U4(iI),Wa=o0(ai,"books"),Xa=o0(ai,"students"),mf=o0(ai,"transactions"),To=t=>({id:t.id,...t.data()}),Zn={getBooks:async()=>(await ii(Wa)).docs.map(e=>To(e)),addBook:async t=>{try{const e=js(Wa,zs("isbn","==",t.isbn));if(!(await ii(e)).empty)return{success:!1,message:"Bu ISBN numarasna sahip bir kitap zaten var."};const i={...t,status:Si.AVAILABLE,addedDate:new Date().toISOString()};return await pf(Wa,i),{success:!0,message:"Kitap baaryla eklendi."}}catch(e){return{success:!1,message:"Hata: "+e.message}}},deleteBook:async t=>{await Fp(Zi(ai,"books",t))},getStudents:async()=>(await ii(Xa)).docs.map(e=>To(e)),addStudent:async t=>{try{const e=js(Xa,zs("studentNumber","==",t.studentNumber));if(!(await ii(e)).empty)return{success:!1,message:"Bu numaraya sahip bir renci zaten kaytl."};const i={...t,readingHistory:[]};return await pf(Xa,i),{success:!0,message:"renci baaryla eklendi."}}catch(e){return{success:!1,message:"Hata: "+e.message}}},deleteStudent:async t=>{await Fp(Zi(ai,"students",t))},getActiveTransactions:async()=>{const n=(await ii(mf)).docs.map(l=>To(l)).filter(l=>!l.isReturned);if(n.length===0)return[];const[i,o]=await Promise.all([Zn.getBooks(),Zn.getStudents()]);return n.map(l=>{const f=i.find(x=>x.id===l.bookId),y=o.find(x=>x.id===l.studentId);return!f||!y?null:{...l,book:f,student:y}}).filter(l=>l!==null)},issueBook:async(t,e,n)=>{try{const i=js(Wa,zs("isbn","==",t)),o=await ii(i);if(o.empty)return{success:!1,message:"Bu ISBN/QR kodu ile kitap bulunamad."};const l=o.docs[0],f=To(l),y=js(Xa,zs("studentNumber","==",e)),x=await ii(y);if(x.empty)return{success:!1,message:"Bu numara/QR ile renci bulunamad."};const p=x.docs[0],E=To(p);if(f.status!==Si.AVAILABLE)return{success:!1,message:"Kitap u anda bakasnda dnte."};const A=E.readingHistory&&E.readingHistory.includes(f.id);let S;A&&(S=`Dikkat! ${E.name} isimli renci "${f.title}" kitabn daha nce okumu.`);const M={bookId:f.id,studentId:E.id,issueDate:new Date().toISOString(),dueDate:new Date(Date.now()+n*24*60*60*1e3).toISOString(),isReturned:!1};await pf(mf,M),await Ga(Zi(ai,"books",f.id),{status:Si.BORROWED});const j=E.readingHistory||[];return await Ga(Zi(ai,"students",E.id),{readingHistory:[...j,f.id]}),{success:!0,message:"Kitap baaryla dn verildi.",warning:S}}catch(i){return{success:!1,message:"lem Baarsz: "+i.message}}},returnBook:async t=>{try{const e=js(Wa,zs("isbn","==",t)),n=await ii(e);if(n.empty)return{success:!1,message:"Kitap bulunamad."};const i=n.docs[0],o=To(i),l=js(mf,zs("bookId","==",o.id),zs("isReturned","==",!1)),f=await ii(l);if(f.empty)return{success:!1,message:"Bu kitap u anda dnte grnmyor."};const y=f.docs[0];return await Ga(Zi(ai,"transactions",y.id),{isReturned:!0,returnDate:new Date().toISOString()}),await Ga(Zi(ai,"books",o.id),{status:Si.AVAILABLE}),{success:!0,message:"Kitap envantere baaryla iade edildi."}}catch(e){return{success:!1,message:"ade Baarsz: "+e.message}}},resetDatabase:async()=>{console.warn("Reset Database functionality is disabled in Remote DB mode for safety."),alert("Bulut veritabannda toplu silme ilemi gvenlik nedeniyle devre d braklmtr. Verileri manuel siliniz.")},removeBookFromHistory:async(t,e)=>{try{const n=Zi(ai,"students",t),o=(await ii(js(Xa))).docs.find(y=>y.id===t);if(!o)return{success:!1,message:"renci bulunamad."};const f=(o.data().readingHistory||[]).filter(y=>y!==e);return await Ga(n,{readingHistory:f}),{success:!0,message:"Kitap gemiten silindi."}}catch(n){return{success:!1,message:"Hata: "+n.message}}}},sI=({children:t,currentPage:e,onNavigate:n,onLogout:i,user:o})=>{const[l,f]=Oe.useState(!1),y=[{id:"dashboard",label:"Panel",icon:q_},{id:"circulation",label:"dn lemleri",icon:j_},{id:"books",label:"Kitap Envanteri",icon:H_},{id:"students",label:"renciler",icon:t3}],x=()=>{window.confirm("TM VERLER SLNECEK ve fabrika ayarlarna dnlecek. Onaylyor musunuz?")&&Zn.resetDatabase()},p=E=>{n(E),f(!1)};return N.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden flex-col md:flex-row",children:[N.jsxs("div",{className:"md:hidden bg-indigo-900 text-white p-4 flex justify-between items-center shadow-md z-20 no-print",children:[N.jsxs("div",{className:"flex items-center space-x-2",children:[N.jsx(hd,{size:24}),N.jsx("span",{className:"font-bold text-lg",children:"LibraTech"})]}),N.jsx("button",{onClick:()=>f(!l),className:"p-1 hover:bg-indigo-800 rounded focus:outline-none",children:l?N.jsx(Tu,{size:24}):N.jsx($_,{size:24})})]}),l&&N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden transition-opacity",onClick:()=>f(!1)}),N.jsxs("div",{className:`
        fixed md:static inset-y-0 left-0 z-40 w-64 bg-indigo-900 text-white flex flex-col shadow-xl 
        transform transition-transform duration-300 ease-in-out md:translate-x-0 no-print
        ${l?"translate-x-0":"-translate-x-full"}
      `,children:[N.jsxs("div",{className:"hidden md:flex p-6 items-center space-x-3 border-b border-indigo-800",children:[N.jsx("div",{className:"bg-indigo-500 p-2 rounded-lg",children:N.jsx(hd,{size:24})}),N.jsxs("div",{children:[N.jsx("h1",{className:"font-bold text-lg",children:"LibraTech"}),N.jsx("p",{className:"text-xs text-indigo-300",children:"Okul Ktphanesi"})]})]}),N.jsxs("div",{className:"md:hidden p-4 border-b border-indigo-800 flex items-center justify-between bg-indigo-950",children:[N.jsx("span",{className:"font-bold text-sm uppercase tracking-wider text-indigo-400",children:"Men"}),N.jsx("button",{onClick:()=>f(!1),children:N.jsx(Tu,{size:20})})]}),N.jsx("nav",{className:"flex-1 p-4 space-y-2",children:y.map(E=>{const A=E.icon,S=e===E.id;return N.jsxs("button",{onClick:()=>p(E.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ${S?"bg-indigo-700 text-white shadow-md":"text-indigo-200 hover:bg-indigo-800 hover:text-white"}`,children:[N.jsx(A,{size:20}),N.jsx("span",{className:"font-medium",children:E.label})]},E.id)})}),N.jsxs("div",{className:"p-4 border-t border-indigo-800 space-y-2",children:[N.jsxs("div",{className:"flex items-center space-x-3 px-4 py-3 mb-2",children:[N.jsx("img",{src:`https://ui-avatars.com/api/?name=${o.name}&background=random`,alt:"Profile",className:"w-8 h-8 rounded-full"}),N.jsxs("div",{className:"flex-1 min-w-0",children:[N.jsx("p",{className:"text-sm font-medium truncate",children:o.name}),N.jsx("p",{className:"text-xs text-indigo-300 truncate",children:o.email})]})]}),N.jsxs("button",{onClick:x,className:"w-full flex items-center space-x-3 px-4 py-2 text-indigo-300 hover:bg-indigo-950 hover:text-white rounded-lg transition-colors",title:"Veritabann Sfrla",children:[N.jsx(Z_,{size:18}),N.jsx("span",{className:"text-xs",children:"Verileri Sfrla"})]}),N.jsxs("button",{onClick:i,className:"w-full flex items-center space-x-3 px-4 py-2 text-red-300 hover:bg-indigo-950 hover:text-red-200 rounded-lg transition-colors",children:[N.jsx(Q_,{size:18}),N.jsx("span",{children:"k Yap"})]})]})]}),N.jsx("main",{className:"flex-1 overflow-auto w-full relative bg-gray-50",children:N.jsx("div",{className:"max-w-7xl mx-auto p-4 md:p-8 pb-20 md:pb-8",children:t})})]})},oI=({onLogin:t})=>N.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:N.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 space-y-8",children:[N.jsxs("div",{className:"text-center",children:[N.jsx("div",{className:"mx-auto bg-indigo-600 w-16 h-16 rounded-xl flex items-center justify-center text-white mb-4",children:N.jsx(hd,{size:32})}),N.jsx("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Ktphane Ynetimi"}),N.jsx("p",{className:"mt-2 text-gray-600",children:"Ynetmek iin giri yapn"})]}),N.jsxs("div",{className:"space-y-4",children:[N.jsx("button",{onClick:t,className:"w-full flex items-center justify-center px-4 py-3 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors shadow-lg shadow-indigo-200",children:"Google ile Giri Yap"}),N.jsx("button",{onClick:t,className:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Email ile Giri Yap"})]}),N.jsx("p",{className:"text-center text-xs text-gray-400",children:"Demo Uygulamas - Herhangi bir butona basarak Admin olarak giri yapabilirsiniz."})]})}),Vp=()=>{const[t,e]=Oe.useState([]),[n,i]=Oe.useState(!0),o=async()=>{i(!0);const y=await Zn.getActiveTransactions();e(y),i(!1)};Oe.useEffect(()=>{o()},[]);const l=y=>{const x=new Date(y),E=Math.abs(new Date().getTime()-x.getTime());return Math.ceil(E/(1e3*60*60*24))},f=y=>new Date>new Date(y);return n?N.jsx("div",{className:"p-8 text-center",children:"Panel verileri ykleniyor..."}):N.jsxs("div",{className:"space-y-6",children:[N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Ktphane Paneli"}),N.jsx("button",{onClick:o,className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Verileri Yenile"})]}),N.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[N.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsxs("div",{children:[N.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Aktif dnler"}),N.jsx("h3",{className:"text-3xl font-bold text-gray-800 mt-1",children:t.length})]}),N.jsx("div",{className:"bg-blue-50 p-3 rounded-lg text-blue-600",children:N.jsx(K_,{size:24})})]})}),N.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsxs("div",{children:[N.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Gecikmi Kitaplar"}),N.jsx("h3",{className:"text-3xl font-bold text-red-600 mt-1",children:t.filter(y=>f(y.dueDate)).length})]}),N.jsx("div",{className:"bg-red-50 p-3 rounded-lg text-red-600",children:N.jsx(U_,{size:24})})]})}),N.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:N.jsxs("div",{className:"flex items-center justify-between",children:[N.jsxs("div",{children:[N.jsx("p",{className:"text-sm text-gray-500 font-medium",children:"Zamannda Teslimler"}),N.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-1",children:t.filter(y=>!f(y.dueDate)).length})]}),N.jsx("div",{className:"bg-green-50 p-3 rounded-lg text-green-600",children:N.jsx(W_,{size:24})})]})})]}),N.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[N.jsx("div",{className:"px-6 py-4 border-b border-gray-100 bg-gray-50",children:N.jsx("h3",{className:"font-semibold text-gray-800",children:"u An dnte Olan Kitaplar"})}),N.jsx("div",{className:"overflow-x-auto",children:N.jsxs("table",{className:"w-full text-left",children:[N.jsx("thead",{children:N.jsxs("tr",{className:"bg-gray-50 text-gray-500 text-sm border-b border-gray-100",children:[N.jsx("th",{className:"px-6 py-3 font-medium",children:"renci"}),N.jsx("th",{className:"px-6 py-3 font-medium",children:"Kitap Ad"}),N.jsx("th",{className:"px-6 py-3 font-medium",children:"Verili Tarihi"}),N.jsx("th",{className:"px-6 py-3 font-medium",children:"Teslim Tarihi"}),N.jsx("th",{className:"px-6 py-3 font-medium",children:"Geen Gn"}),N.jsx("th",{className:"px-6 py-3 font-medium",children:"Durum"})]})}),N.jsx("tbody",{className:"divide-y divide-gray-100",children:t.length===0?N.jsx("tr",{children:N.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-400",children:"u anda dn verilmi kitap yok."})}):t.map(y=>{const x=f(y.dueDate),p=l(y.issueDate);return N.jsxs("tr",{className:`transition-colors ${x?"bg-red-50 hover:bg-red-100":"hover:bg-gray-50"}`,children:[N.jsxs("td",{className:"px-6 py-4",children:[N.jsx("div",{className:"font-medium text-gray-900",children:y.student.name}),N.jsx("div",{className:"text-xs text-gray-500",children:y.student.studentNumber})]}),N.jsxs("td",{className:"px-6 py-4",children:[N.jsx("div",{className:"text-gray-900",children:y.book.title}),N.jsxs("div",{className:"text-xs text-gray-500",children:["ISBN: ",y.book.isbn]})]}),N.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(y.issueDate).toLocaleDateString("tr-TR")}),N.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(y.dueDate).toLocaleDateString("tr-TR")}),N.jsxs("td",{className:"px-6 py-4 text-sm font-medium",children:[p," gn"]}),N.jsx("td",{className:"px-6 py-4",children:N.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${x?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:x?"Gecikmi":"Zamannda"})})]},y.id)})})]})})]})]})};var we;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(we||(we={}));var Up=new Map([[we.QR_CODE,"QR_CODE"],[we.AZTEC,"AZTEC"],[we.CODABAR,"CODABAR"],[we.CODE_39,"CODE_39"],[we.CODE_93,"CODE_93"],[we.CODE_128,"CODE_128"],[we.DATA_MATRIX,"DATA_MATRIX"],[we.MAXICODE,"MAXICODE"],[we.ITF,"ITF"],[we.EAN_13,"EAN_13"],[we.EAN_8,"EAN_8"],[we.PDF_417,"PDF_417"],[we.RSS_14,"RSS_14"],[we.RSS_EXPANDED,"RSS_EXPANDED"],[we.UPC_A,"UPC_A"],[we.UPC_E,"UPC_E"],[we.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),jp;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(jp||(jp={}));function aI(t){return Object.values(we).includes(t)}var Hu;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Hu||(Hu={}));var lI=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Hu.SCAN_TYPE_CAMERA,Hu.SCAN_TYPE_FILE],t}(),$y=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Up.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Up.get(e))},t}(),zp=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Ld;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ld||(Ld={}));var cI=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Ld.UNKWOWN_ERROR}},t}(),uI=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function Ai(t){return typeof t>"u"||t===null}var Ho=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Zy=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),f=Object.keys(e),y=0,x=f;y<x.length;y++){var p=x[y];if(l.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t}(),Bd={exports:{}};(function(t,e){(function(n,i){i(e)})(Ma,function(n){function i(I){return I==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,r){I.__proto__=r}||function(I,r){for(var s in r)r.hasOwnProperty(s)&&(I[s]=r[s])};function l(I,r){o(I,r);function s(){this.constructor=I}I.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function f(I,r){var s=Object.setPrototypeOf;s?s(I,r):I.__proto__=r}function y(I,r){r===void 0&&(r=I.constructor);var s=Error.captureStackTrace;s&&s(I,r)}var x=function(I){l(r,I);function r(s){var a=this.constructor,c=I.call(this,s)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),f(c,a.prototype),y(c),c}return r}(Error);class p extends x{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}p.kind="Exception";class E extends p{}E.kind="ArgumentException";class A extends p{}A.kind="IllegalArgumentException";class S{constructor(r){if(this.binarizer=r,r===null)throw new A("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,a,c){const u=this.binarizer.getLuminanceSource().crop(r,s,a,c);return new S(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new S(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new S(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class M extends p{static getChecksumInstance(){return new M}}M.kind="ChecksumException";class j{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class X{static arraycopy(r,s,a,c,u){for(;u--;)a[c++]=r[s++]}static currentTimeMillis(){return Date.now()}}class q extends p{}q.kind="IndexOutOfBoundsException";class z extends q{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}z.kind="ArrayIndexOutOfBoundsException";class L{static fill(r,s){for(let a=0,c=r.length;a<c;a++)r[a]=s}static fillWithin(r,s,a,c){L.rangeCheck(r.length,s,a);for(let u=s;u<a;u++)r[u]=c}static rangeCheck(r,s,a){if(s>a)throw new A("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new z(s);if(a>r)throw new z(a)}static asList(...r){return r}static create(r,s,a){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(a))}static createInt32Array(r,s,a){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(a))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let a=0,c=r.length;a<c;a++)if(r[a]!==s[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const a of r)s=31*s+a;return s}static fillUint8Array(r,s){for(let a=0;a!==r.length;a++)r[a]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const a=new Uint8Array(s);return a.set(r),a}return r.slice(0,s)}static copyOfRange(r,s,a){const c=a-s,u=new Int32Array(c);return X.arraycopy(r,s,u,0,c),u}static binarySearch(r,s,a){a===void 0&&(a=L.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const h=u+c>>1,d=a(s,r[h]);if(d>0)c=h+1;else if(d<0)u=h-1;else return h}return-c-1}static numberComparator(r,s){return r-s}}class F{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let a=31;return s=r<<16,s!==0&&(a-=16,r=s),s=r<<8,s!==0&&(a-=8,r=s),s=r<<4,s!==0&&(a-=4,r=s),s=r<<2,s!==0&&(a-=2,r=s),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Z{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=Z.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=Z.makeArray(r);X.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=a[c];u&=~((1<<(r&31))-1);const h=a.length;for(;u===0;){if(++c===h)return s;u=a[c]}const d=c*32+F.numberOfTrailingZeros(u);return d>s?s:d}getNextUnset(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=~a[c];u&=~((1<<(r&31))-1);const h=a.length;for(;u===0;){if(++c===h)return s;u=~a[c]}const d=c*32+F.numberOfTrailingZeros(u);return d>s?s:d}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new A;if(s===r)return;s--;const a=Math.floor(r/32),c=Math.floor(s/32),u=this.bits;for(let h=a;h<=c;h++){const d=h>a?0:r&31,w=(2<<(h<c?31:s&31))-(1<<d);u[h]|=w}}clear(){const r=this.bits.length,s=this.bits;for(let a=0;a<r;a++)s[a]=0}isRange(r,s,a){if(s<r||r<0||s>this.size)throw new A;if(s===r)return!0;s--;const c=Math.floor(r/32),u=Math.floor(s/32),h=this.bits;for(let d=c;d<=u;d++){const m=d>c?0:r&31,C=(2<<(d<u?31:s&31))-(1<<m)&4294967295;if((h[d]&C)!==(a?C:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new A("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new A("Sizes don't match");const s=this.bits;for(let a=0,c=s.length;a<c;a++)s[a]^=r.bits[a]}toBytes(r,s,a,c){for(let u=0;u<c;u++){let h=0;for(let d=0;d<8;d++)this.get(r)&&(h|=1<<7-d),r++;s[a+u]=h}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,c=this.bits;for(let u=0;u<a;u++){let h=c[u];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,r[s-u]=h}if(this.size!==a*32){const u=a*32-this.size;let h=r[0]>>>u;for(let d=1;d<a;d++){const m=r[d];h|=m<<32-u,r[d-1]=h,h=m>>>u}r[a-1]=h}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof Z))return!1;const s=r;return this.size===s.size&&L.equals(this.bits,s.bits)}hashCode(){return 31*this.size+L.hashCode(this.bits)}toString(){let r="";for(let s=0,a=this.size;s<a;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new Z(this.size,this.bits.slice())}}var le;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(le||(le={}));var Y=le;class b extends p{static getFormatInstance(){return new b}}b.kind="FormatException";var D;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})(D||(D={}));class O{constructor(r,s,a,...c){this.valueIdentifier=r,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,O.VALUE_IDENTIFIER_TO_ECI.set(r,this),O.NAME_TO_ECI.set(a,this);const u=this.values;for(let h=0,d=u.length;h!==d;h++){const m=u[h];O.VALUES_TO_ECI.set(m,this)}for(const h of c)O.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new b("incorect value");const s=O.VALUES_TO_ECI.get(r);if(s===void 0)throw new b("incorect value");return s}static getCharacterSetECIByName(r){const s=O.NAME_TO_ECI.get(r);if(s===void 0)throw new b("incorect value");return s}equals(r){if(!(r instanceof O))return!1;const s=r;return this.getName()===s.getName()}}O.VALUE_IDENTIFIER_TO_ECI=new Map,O.VALUES_TO_ECI=new Map,O.NAME_TO_ECI=new Map,O.Cp437=new O(D.Cp437,Int32Array.from([0,2]),"Cp437"),O.ISO8859_1=new O(D.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),O.ISO8859_2=new O(D.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),O.ISO8859_3=new O(D.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),O.ISO8859_4=new O(D.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),O.ISO8859_5=new O(D.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),O.ISO8859_6=new O(D.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),O.ISO8859_7=new O(D.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),O.ISO8859_8=new O(D.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),O.ISO8859_9=new O(D.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),O.ISO8859_10=new O(D.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),O.ISO8859_11=new O(D.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),O.ISO8859_13=new O(D.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),O.ISO8859_14=new O(D.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),O.ISO8859_15=new O(D.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),O.ISO8859_16=new O(D.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),O.SJIS=new O(D.SJIS,20,"SJIS","Shift_JIS"),O.Cp1250=new O(D.Cp1250,21,"Cp1250","windows-1250"),O.Cp1251=new O(D.Cp1251,22,"Cp1251","windows-1251"),O.Cp1252=new O(D.Cp1252,23,"Cp1252","windows-1252"),O.Cp1256=new O(D.Cp1256,24,"Cp1256","windows-1256"),O.UnicodeBigUnmarked=new O(D.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),O.UTF8=new O(D.UTF8,26,"UTF8","UTF-8"),O.ASCII=new O(D.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),O.Big5=new O(D.Big5,28,"Big5"),O.GB18030=new O(D.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),O.EUC_KR=new O(D.EUC_KR,30,"EUC_KR","EUC-KR");class U extends p{}U.kind="UnsupportedOperationException";class H{static decode(r,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!H.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof O?r:O.getCharacterSetECIByName(r)}static decodeFallback(r,s){const a=this.encodingCharacterSet(s);if(H.isDecodeFallbackSupported(a)){let c="";for(let u=0,h=r.length;u<h;u++){let d=r[u].toString(16);d.length<2&&(d="0"+d),c+="%"+d}return decodeURIComponent(c)}if(a.equals(O.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new U(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(O.UTF8)||r.equals(O.ISO8859_1)||r.equals(O.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class W{static castAsNonUtf8Char(r,s=null){const a=s?s.getName():this.ISO88591;return H.decode(new Uint8Array([r]),a)}static guessEncoding(r,s){if(s!=null&&s.get(Y.CHARACTER_SET)!==void 0)return s.get(Y.CHARACTER_SET).toString();const a=r.length;let c=!0,u=!0,h=!0,d=0,m=0,w=0,C=0,T=0,R=0,B=0,G=0,K=0,$=0,ne=0;const ue=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let he=0;he<a&&(c||u||h);he++){const ae=r[he]&255;h&&(d>0?ae&128?d--:h=!1:ae&128&&(ae&64?(d++,ae&32?(d++,ae&16?(d++,ae&8?h=!1:C++):w++):m++):h=!1)),c&&(ae>127&&ae<160?c=!1:ae>159&&(ae<192||ae===215||ae===247)&&ne++),u&&(T>0?ae<64||ae===127||ae>252?u=!1:T--:ae===128||ae===160||ae>239?u=!1:ae>160&&ae<224?(R++,G=0,B++,B>K&&(K=B)):ae>127?(T++,B=0,G++,G>$&&($=G)):(B=0,G=0))}return h&&d>0&&(h=!1),u&&T>0&&(u=!1),h&&(ue||m+w+C>0)?W.UTF8:u&&(W.ASSUME_SHIFT_JIS||K>=3||$>=3)?W.SHIFT_JIS:c&&u?K===2&&R===2||ne*10>=a?W.SHIFT_JIS:W.ISO88591:c?W.ISO88591:u?W.SHIFT_JIS:h?W.UTF8:W.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let a=-1;function c(h,d,m,w,C,T){if(h==="%%")return"%";if(s[++a]===void 0)return;h=w?parseInt(w.substr(1)):void 0;let R=C?parseInt(C.substr(1)):void 0,B;switch(T){case"s":B=s[a];break;case"c":B=s[a][0];break;case"f":B=parseFloat(s[a]).toFixed(h);break;case"p":B=parseFloat(s[a]).toPrecision(h);break;case"e":B=parseFloat(s[a]).toExponential(h);break;case"x":B=parseInt(s[a]).toString(R||16);break;case"d":B=parseFloat(parseInt(s[a],R||10).toPrecision(h)).toFixed(0);break}B=typeof B=="object"?JSON.stringify(B):(+B).toString(R);let G=parseInt(m),K=m&&m[0]+""=="0"?"0":" ";for(;B.length<G;)B=d!==void 0?B+K:K+B;return B}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,s){return H.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}W.SHIFT_JIS=O.SJIS.getName(),W.GB2312="GB2312",W.ISO88591=O.ISO8859_1.getName(),W.EUC_JP="EUC_JP",W.UTF8=O.UTF8.getName(),W.PLATFORM_DEFAULT_ENCODING=W.UTF8,W.ASSUME_SHIFT_JIS=!1;class V{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=W.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,a){for(let c=s;s<s+a;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class He{constructor(r,s,a,c){if(this.width=r,this.height=s,this.rowSize=a,this.bits=c,s==null&&(s=r),this.height=s,r<1||s<1)throw new A("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,a=r[0].length,c=new He(a,s);for(let u=0;u<s;u++){const h=r[u];for(let d=0;d<a;d++)h[d]&&c.set(d,u)}return c}static parseFromString(r,s,a){if(r===null)throw new A("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,h=0,d=-1,m=0,w=0;for(;w<r.length;)if(r.charAt(w)===`
`||r.charAt(w)==="\r"){if(u>h){if(d===-1)d=u-h;else if(u-h!==d)throw new A("row lengths do not match");h=u,m++}w++}else if(r.substring(w,w+s.length)===s)w+=s.length,c[u]=!0,u++;else if(r.substring(w,w+a.length)===a)w+=a.length,c[u]=!1,u++;else throw new A("illegal character encountered: "+r.substring(w));if(u>h){if(d===-1)d=u-h;else if(u-h!==d)throw new A("row lengths do not match");m++}const C=new He(d,m);for(let T=0;T<u;T++)c[T]&&C.set(Math.floor(T%d),Math.floor(T/d));return C}get(r,s){const a=s*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new A("input matrix dimensions do not match");const s=new Z(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,h=this.height;u<h;u++){const d=u*a,m=r.getRow(u,s).getBitArray();for(let w=0;w<a;w++)c[d+w]^=m[w]}}clear(){const r=this.bits,s=r.length;for(let a=0;a<s;a++)r[a]=0}setRegion(r,s,a,c){if(s<0||r<0)throw new A("Left and top must be nonnegative");if(c<1||a<1)throw new A("Height and width must be at least 1");const u=r+a,h=s+c;if(h>this.height||u>this.width)throw new A("The region must fit inside the matrix");const d=this.rowSize,m=this.bits;for(let w=s;w<h;w++){const C=w*d;for(let T=r;T<u;T++)m[C+Math.floor(T/32)]|=1<<(T&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new Z(this.width):s.clear();const a=this.rowSize,c=this.bits,u=r*a;for(let h=0;h<a;h++)s.setBulk(h*32,c[u+h]);return s}setRow(r,s){X.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let a=new Z(r),c=new Z(r);for(let u=0,h=Math.floor((s+1)/2);u<h;u++)a=this.getRow(u,a),c=this.getRow(s-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(s-1-u,a)}getEnclosingRectangle(){const r=this.width,s=this.height,a=this.rowSize,c=this.bits;let u=r,h=s,d=-1,m=-1;for(let w=0;w<s;w++)for(let C=0;C<a;C++){const T=c[w*a+C];if(T!==0){if(w<h&&(h=w),w>m&&(m=w),C*32<u){let R=0;for(;!(T<<31-R&4294967295);)R++;C*32+R<u&&(u=C*32+R)}if(C*32+31>d){let R=31;for(;!(T>>>R);)R--;C*32+R>d&&(d=C*32+R)}}}return d<u||m<h?null:Int32Array.from([u,h,d-u+1,m-h+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const c=a/r;let u=a%r*32;const h=s[a];let d=0;for(;!(h<<31-d&4294967295);)d++;return u+=d,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/r);let u=Math.floor(a%r)*32;const h=s[a];let d=31;for(;!(h>>>d);)d--;return u+=d,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof He))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&L.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+L.hashCode(this.bits),r}toString(r="X ",s="  ",a=`
`){return this.buildToString(r,s,a)}buildToString(r,s,a){let c=new V;for(let u=0,h=this.height;u<h;u++){for(let d=0,m=this.width;d<m;d++)c.append(this.get(d,u)?r:s);c.append(a)}return c.toString()}clone(){return new He(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends p{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class Nt extends j{constructor(r){super(r),this.luminances=Nt.EMPTY,this.buckets=new Int32Array(Nt.LUMINANCE_BUCKETS)}getBlackRow(r,s){const a=this.getLuminanceSource(),c=a.getWidth();s==null||s.getSize()<c?s=new Z(c):s.clear(),this.initArrays(c);const u=a.getRow(r,this.luminances),h=this.buckets;for(let m=0;m<c;m++)h[(u[m]&255)>>Nt.LUMINANCE_SHIFT]++;const d=Nt.estimateBlackPoint(h);if(c<3)for(let m=0;m<c;m++)(u[m]&255)<d&&s.set(m);else{let m=u[0]&255,w=u[1]&255;for(let C=1;C<c-1;C++){const T=u[C+1]&255;(w*4-m-T)/2<d&&s.set(C),m=w,w=T}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight(),c=new He(s,a);this.initArrays(s);const u=this.buckets;for(let m=1;m<5;m++){const w=Math.floor(a*m/5),C=r.getRow(w,this.luminances),T=Math.floor(s*4/5);for(let R=Math.floor(s/5);R<T;R++){const B=C[R]&255;u[B>>Nt.LUMINANCE_SHIFT]++}}const h=Nt.estimateBlackPoint(u),d=r.getMatrix();for(let m=0;m<a;m++){const w=m*s;for(let C=0;C<s;C++)(d[w+C]&255)<h&&c.set(C,m)}return c}createBinarizer(r){return new Nt(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let a=0;a<Nt.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(r){const s=r.length;let a=0,c=0,u=0;for(let C=0;C<s;C++)r[C]>u&&(c=C,u=r[C]),r[C]>a&&(a=r[C]);let h=0,d=0;for(let C=0;C<s;C++){const T=C-c,R=r[C]*T*T;R>d&&(h=C,d=R)}if(c>h){const C=c;c=h,h=C}if(h-c<=s/16)throw new re;let m=h-1,w=-1;for(let C=h-1;C>c;C--){const T=C-c,R=T*T*(h-C)*(a-r[C]);R>w&&(m=C,w=R)}return m<<Nt.LUMINANCE_SHIFT}}Nt.LUMINANCE_BITS=5,Nt.LUMINANCE_SHIFT=8-Nt.LUMINANCE_BITS,Nt.LUMINANCE_BUCKETS=1<<Nt.LUMINANCE_BITS,Nt.EMPTY=Uint8ClampedArray.from([0]);class be extends Nt{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight();if(s>=be.MINIMUM_DIMENSION&&a>=be.MINIMUM_DIMENSION){const c=r.getMatrix();let u=s>>be.BLOCK_SIZE_POWER;s&be.BLOCK_SIZE_MASK&&u++;let h=a>>be.BLOCK_SIZE_POWER;a&be.BLOCK_SIZE_MASK&&h++;const d=be.calculateBlackPoints(c,u,h,s,a),m=new He(s,a);be.calculateThresholdForBlock(c,u,h,s,a,d,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new be(r)}static calculateThresholdForBlock(r,s,a,c,u,h,d){const m=u-be.BLOCK_SIZE,w=c-be.BLOCK_SIZE;for(let C=0;C<a;C++){let T=C<<be.BLOCK_SIZE_POWER;T>m&&(T=m);const R=be.cap(C,2,a-3);for(let B=0;B<s;B++){let G=B<<be.BLOCK_SIZE_POWER;G>w&&(G=w);const K=be.cap(B,2,s-3);let $=0;for(let ue=-2;ue<=2;ue++){const he=h[R+ue];$+=he[K-2]+he[K-1]+he[K]+he[K+1]+he[K+2]}const ne=$/25;be.thresholdBlock(r,G,T,ne,c,d)}}}static cap(r,s,a){return r<s?s:r>a?a:r}static thresholdBlock(r,s,a,c,u,h){for(let d=0,m=a*u+s;d<be.BLOCK_SIZE;d++,m+=u)for(let w=0;w<be.BLOCK_SIZE;w++)(r[m+w]&255)<=c&&h.set(s+w,a+d)}static calculateBlackPoints(r,s,a,c,u){const h=u-be.BLOCK_SIZE,d=c-be.BLOCK_SIZE,m=new Array(a);for(let w=0;w<a;w++){m[w]=new Int32Array(s);let C=w<<be.BLOCK_SIZE_POWER;C>h&&(C=h);for(let T=0;T<s;T++){let R=T<<be.BLOCK_SIZE_POWER;R>d&&(R=d);let B=0,G=255,K=0;for(let ne=0,ue=C*c+R;ne<be.BLOCK_SIZE;ne++,ue+=c){for(let he=0;he<be.BLOCK_SIZE;he++){const ae=r[ue+he]&255;B+=ae,ae<G&&(G=ae),ae>K&&(K=ae)}if(K-G>be.MIN_DYNAMIC_RANGE)for(ne++,ue+=c;ne<be.BLOCK_SIZE;ne++,ue+=c)for(let he=0;he<be.BLOCK_SIZE;he++)B+=r[ue+he]&255}let $=B>>be.BLOCK_SIZE_POWER*2;if(K-G<=be.MIN_DYNAMIC_RANGE&&($=G/2,w>0&&T>0)){const ne=(m[w-1][T]+2*m[w][T-1]+m[w-1][T-1])/4;G<ne&&($=ne)}m[w][T]=$}}return m}}be.BLOCK_SIZE_POWER=3,be.BLOCK_SIZE=1<<be.BLOCK_SIZE_POWER,be.BLOCK_SIZE_MASK=be.BLOCK_SIZE-1,be.MINIMUM_DIMENSION=be.BLOCK_SIZE*5,be.MIN_DYNAMIC_RANGE=24;class pe{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,a,c){throw new U("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new U("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new U("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new V;for(let a=0;a<this.height;a++){const c=this.getRow(a,r);for(let u=0;u<this.width;u++){const h=c[u]&255;let d;h<64?d="#":h<128?d="+":h<192?d=".":d=" ",s.append(d)}s.append(`
`)}return s.toString()}}class Ie extends pe{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const a=this.delegate.getRow(r,s),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let c=0;c<s;c++)a[c]=255-(r[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,a,c){return new Ie(this.delegate.crop(r,s,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ie(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ie(this.delegate.rotateCounterClockwise45())}}class Ne extends pe{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=Ne.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return Ne.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,a){const c=new Uint8ClampedArray(s*a);for(let u=0,h=0,d=r.length;u<d;u+=4,h++){let m;if(r[u+3]===0)m=255;else{const C=r[u],T=r[u+1],R=r[u+2];m=306*C+601*T+117*R+512>>10}c[h]=m}return c}getRow(r,s){if(r<0||r>=this.getHeight())throw new A("Requested row is outside the image: "+r);const a=this.getWidth(),c=r*a;return s===null?s=this.buffer.slice(c,c+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(c,c+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,a,c){return super.crop(r,s,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),a=s.getContext("2d"),c=r*Ne.DEGREE_TO_RADIANS,u=this.canvas.width,h=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*h),m=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*h);return s.width=d,s.height=m,a.translate(d/2,m/2),a.rotate(c),a.drawImage(this.canvas,u/-2,h/-2),this.buffer=Ne.makeBufferFromCanvasImageData(s),this}invert(){return new Ie(this)}}Ne.DEGREE_TO_RADIANS=Math.PI/180;class dt{constructor(r,s,a){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ve=(globalThis||Ma||self||window||void 0)&&(globalThis||Ma||self||window||void 0).__awaiter||function(I,r,s,a){function c(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function d(C){try{w(a.next(C))}catch(T){h(T)}}function m(C){try{w(a.throw(C))}catch(T){h(T)}}function w(C){C.done?u(C.value):c(C.value).then(d,m)}w((a=a.apply(I,r||[])).next())})};class Mn{constructor(r,s=500,a){this.reader=r,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Ve(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of r){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,h=a.label||`Video device ${s.length+1}`,d=a.groupId,m={deviceId:u,label:h,kind:c,groupId:d};s.push(m)}return s})}getVideoInputDevices(){return Ve(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new dt(s.deviceId,s.label))})}findDeviceById(r){return Ve(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Ve(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Ve(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(r,s){return Ve(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(r,s){return Ve(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,s,a){return Ve(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,a)})}decodeFromVideoDevice(r,s,a){return Ve(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,s,a)})}decodeFromConstraints(r,s,a){return Ve(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,s,a)})}decodeFromStream(r,s,a){return Ve(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Ve(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((s,a)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Ve(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const a=document.getElementById(r);if(!a)throw new E(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new E(`element with id '${r}' must be an ${s} element`);return a}decodeFromImage(r,s){if(!r&&!s)throw new E("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new E("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,a){if(r===void 0&&s===void 0)throw new E("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new E("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(r){if(!r)throw new E("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new E("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=r,a}decodeFromVideoUrl(r){if(!r)throw new E("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=r,a}decodeFromVideoUrlContinuously(r,s){if(!r)throw new E("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,s);return a.src=r,c}_decodeOnLoadImage(r){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Ve(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Ve(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,h)=>{if(this._stopAsyncDecode){h(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(r);u(d)}catch(d){const m=s&&d instanceof re,C=(d instanceof M||d instanceof b)&&a;if(m||C)return setTimeout(c,this._timeBetweenDecodingAttempts,u,h);h(d)}};return new Promise((u,h)=>c(u,h))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);s(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){s(null,c);const u=c instanceof M||c instanceof b,h=c instanceof re;(u||h)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,a){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),a=new Ne(s),c=new be(a);return new S(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),s.style.width=a+"px",s.style.height=c+"px",s.width=a,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class ht{constructor(r,s,a=s==null?0:8*s.length,c,u,h=X.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=h,this.text=r,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,h==null?this.timestamp=X.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(s.length+r.length);X.arraycopy(s,0,a,0,s.length),X.arraycopy(r,0,a,s.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Dr;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Dr||(Dr={}));var _e=Dr,dr;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(dr||(dr={}));var Ft=dr;class Fi{constructor(r,s,a,c,u=-1,h=-1){this.rawBytes=r,this.text=s,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=h,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Vi{exp(r){return this.expTable[r]}log(r){if(r===0)throw new A;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class In{constructor(r,s){if(s.length===0)throw new A;this.field=r;const a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),X.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(r===1){a=0;for(let h=0,d=s.length;h!==d;h++){const m=s[h];a=Vi.addOrSubtract(a,m)}return a}a=s[0];const c=s.length,u=this.field;for(let h=1;h<c;h++)a=Vi.addOrSubtract(u.multiply(r,a),s[h]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){const h=s;s=a,a=h}let c=new Int32Array(a.length);const u=a.length-s.length;X.arraycopy(a,0,c,0,u);for(let h=u;h<a.length;h++)c[h]=Vi.addOrSubtract(s[h-u],a[h]);return new In(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new A("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,h=new Int32Array(a+u-1),d=this.field;for(let m=0;m<a;m++){const w=s[m];for(let C=0;C<u;C++)h[m+C]=Vi.addOrSubtract(h[m+C],d.multiply(w,c[C]))}return new In(d,h)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,a=this.field,c=new Int32Array(s),u=this.coefficients;for(let h=0;h<s;h++)c[h]=a.multiply(u[h],r);return new In(a,c)}multiplyByMonomial(r,s){if(r<0)throw new A;if(s===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+r),h=this.field;for(let d=0;d<c;d++)u[d]=h.multiply(a[d],s);return new In(h,u)}divide(r){if(!this.field.equals(r.field))throw new A("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new A("Divide by 0");const s=this.field;let a=s.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),h=s.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const d=c.getDegree()-r.getDegree(),m=s.multiply(c.getCoefficient(c.getDegree()),h),w=r.multiplyByMonomial(d,m),C=s.buildMonomial(d,m);a=a.addOrSubtract(C),c=c.addOrSubtract(w)}return[a,c]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),s===0||a!==1){const c=this.field.log(a);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Os extends p{}Os.kind="ArithmeticException";class Ke extends Vi{constructor(r,s,a){super(),this.primitive=r,this.size=s,this.generatorBase=a;const c=new Int32Array(s);let u=1;for(let d=0;d<s;d++)c[d]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=c;const h=new Int32Array(s);for(let d=0;d<s-1;d++)h[c[d]]=d;this.logTable=h,this.zero=new In(this,Int32Array.from([0])),this.one=new In(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new A;if(s===0)return this.zero;const a=new Int32Array(r+1);return a[0]=s,new In(this,a)}inverse(r){if(r===0)throw new Os;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Ke.AZTEC_DATA_12=new Ke(4201,4096,1),Ke.AZTEC_DATA_10=new Ke(1033,1024,1),Ke.AZTEC_DATA_6=new Ke(67,64,1),Ke.AZTEC_PARAM=new Ke(19,16,1),Ke.QR_CODE_FIELD_256=new Ke(285,256,0),Ke.DATA_MATRIX_FIELD_256=new Ke(301,256,1),Ke.AZTEC_DATA_8=Ke.DATA_MATRIX_FIELD_256,Ke.MAXICODE_FIELD_64=Ke.AZTEC_DATA_6;class Kr extends p{}Kr.kind="ReedSolomonException";class rr extends p{}rr.kind="IllegalStateException";class Ps{constructor(r){this.field=r}decode(r,s){const a=this.field,c=new In(a,r),u=new Int32Array(s);let h=!0;for(let B=0;B<s;B++){const G=c.evaluateAt(a.exp(B+a.getGeneratorBase()));u[u.length-1-B]=G,G!==0&&(h=!1)}if(h)return;const d=new In(a,u),m=this.runEuclideanAlgorithm(a.buildMonomial(s,1),d,s),w=m[0],C=m[1],T=this.findErrorLocations(w),R=this.findErrorMagnitudes(C,T);for(let B=0;B<T.length;B++){const G=r.length-1-a.log(T[B]);if(G<0)throw new Kr("Bad error location");r[G]=Ke.addOrSubtract(r[G],R[B])}}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){const B=r;r=s,s=B}const c=this.field;let u=r,h=s,d=c.getZero(),m=c.getOne();for(;h.getDegree()>=(a/2|0);){let B=u,G=d;if(u=h,d=m,u.isZero())throw new Kr("r_{i-1} was zero");h=B;let K=c.getZero();const $=u.getCoefficient(u.getDegree()),ne=c.inverse($);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){const ue=h.getDegree()-u.getDegree(),he=c.multiply(h.getCoefficient(h.getDegree()),ne);K=K.addOrSubtract(c.buildMonomial(ue,he)),h=h.addOrSubtract(u.multiplyByMonomial(ue,he))}if(m=K.multiply(d).addOrSubtract(G),h.getDegree()>=u.getDegree())throw new rr("Division algorithm failed to reduce polynomial?")}const w=m.getCoefficient(0);if(w===0)throw new Kr("sigmaTilde(0) was zero");const C=c.inverse(w),T=m.multiplyScalar(C),R=h.multiplyScalar(C);return[T,R]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(s);let c=0;const u=this.field;for(let h=1;h<u.getSize()&&c<s;h++)r.evaluateAt(h)===0&&(a[c]=u.inverse(h),c++);if(c!==s)throw new Kr("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,s){const a=s.length,c=new Int32Array(a),u=this.field;for(let h=0;h<a;h++){const d=u.inverse(s[h]);let m=1;for(let w=0;w<a;w++)if(h!==w){const C=u.multiply(s[w],d),T=C&1?C&-2:C|1;m=u.multiply(m,T)}c[h]=u.multiply(r.evaluateAt(d),u.inverse(m)),u.getGeneratorBase()!==0&&(c[h]=u.multiply(c[h],d))}return c}}var zt;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})(zt||(zt={}));class rt{decode(r){this.ddata=r;let s=r.getBits(),a=this.extractBits(s),c=this.correctBits(a),u=rt.convertBoolArrayToByteArray(c),h=rt.getEncodedData(c),d=new Fi(u,h,null,null);return d.setNumBits(c.length),d}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,a=zt.UPPER,c=zt.UPPER,u="",h=0;for(;h<s;)if(c===zt.BINARY){if(s-h<5)break;let d=rt.readCode(r,h,5);if(h+=5,d===0){if(s-h<11)break;d=rt.readCode(r,h,11)+31,h+=11}for(let m=0;m<d;m++){if(s-h<8){h=s;break}const w=rt.readCode(r,h,8);u+=W.castAsNonUtf8Char(w),h+=8}c=a}else{let d=c===zt.DIGIT?4:5;if(s-h<d)break;let m=rt.readCode(r,h,d);h+=d;let w=rt.getCharacter(c,m);w.startsWith("CTRL_")?(a=c,c=rt.getTable(w.charAt(5)),w.charAt(6)==="L"&&(a=c)):(u+=w,c=a)}return u}static getTable(r){switch(r){case"L":return zt.LOWER;case"P":return zt.PUNCT;case"M":return zt.MIXED;case"D":return zt.DIGIT;case"B":return zt.BINARY;case"U":default:return zt.UPPER}}static getCharacter(r,s){switch(r){case zt.UPPER:return rt.UPPER_TABLE[s];case zt.LOWER:return rt.LOWER_TABLE[s];case zt.MIXED:return rt.MIXED_TABLE[s];case zt.PUNCT:return rt.PUNCT_TABLE[s];case zt.DIGIT:return rt.DIGIT_TABLE[s];default:throw new rr("Bad table")}}correctBits(r){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=Ke.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=Ke.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=Ke.AZTEC_DATA_10):(a=12,s=Ke.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/a;if(u<c)throw new b;let h=r.length%a,d=new Int32Array(u);for(let R=0;R<u;R++,h+=a)d[R]=rt.readCode(r,h,a);try{new Ps(s).decode(d,u-c)}catch(R){throw new b(R)}let m=(1<<a)-1,w=0;for(let R=0;R<c;R++){let B=d[R];if(B===0||B===m)throw new b;(B===1||B===m-1)&&w++}let C=new Array(c*a-w),T=0;for(let R=0;R<c;R++){let B=d[R];if(B===1||B===m-1)C.fill(B>1,T,T+a-1),T+=a-1;else for(let G=a-1;G>=0;--G)C[T++]=(B&1<<G)!==0}return C}extractBits(r){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(s?11:14)+a*4,u=new Int32Array(c),h=new Array(this.totalBitsInLayer(a,s));if(s)for(let d=0;d<u.length;d++)u[d]=d;else{let d=c+1+2*F.truncDivision(F.truncDivision(c,2)-1,15),m=c/2,w=F.truncDivision(d,2);for(let C=0;C<m;C++){let T=C+F.truncDivision(C,15);u[m-C-1]=w-T-1,u[m+C]=w+T+1}}for(let d=0,m=0;d<a;d++){let w=(a-d)*4+(s?9:12),C=d*2,T=c-1-C;for(let R=0;R<w;R++){let B=R*2;for(let G=0;G<2;G++)h[m+B+G]=r.get(u[C+G],u[C+R]),h[m+2*w+B+G]=r.get(u[C+R],u[T-G]),h[m+4*w+B+G]=r.get(u[T-G],u[T-R]),h[m+6*w+B+G]=r.get(u[T-R],u[C+G])}m+=w*8}return h}static readCode(r,s,a){let c=0;for(let u=s;u<s+a;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,s){let a=r.length-s;return a>=8?rt.readCode(r,s,8):rt.readCode(r,s,a)<<8-a}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let a=0;a<s.length;a++)s[a]=rt.readByte(r,8*a);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Ue{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,a,c){const u=r-a,h=s-c;return Math.sqrt(u*u+h*h)}static sum(r){let s=0;for(let a=0,c=r.length;a!==c;a++){const u=r[a];s+=u}return s}}class Ht{static floatToIntBits(r){return r}}Ht.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ge{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof ge){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Ht.floatToIntBits(this.x)+Ht.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,h,d;if(a>=s&&a>=c?(h=r[0],u=r[1],d=r[2]):c>=a&&c>=s?(h=r[1],u=r[0],d=r[2]):(h=r[2],u=r[0],d=r[1]),this.crossProductZ(u,h,d)<0){const m=u;u=d,d=m}r[0]=u,r[1]=h,r[2]=d}static distance(r,s){return Ue.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,a){const c=s.x,u=s.y;return(a.x-c)*(r.y-u)-(a.y-u)*(r.x-c)}}class mi{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class tc extends mi{constructor(r,s,a,c,u){super(r,s),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class gr{constructor(r,s,a,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=gr.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let r=this.leftInit,s=this.rightInit,a=this.upInit,c=this.downInit,u=!1,h=!0,d=!1,m=!1,w=!1,C=!1,T=!1;const R=this.width,B=this.height;for(;h;){h=!1;let G=!0;for(;(G||!m)&&s<R;)G=this.containsBlackPoint(a,c,s,!1),G?(s++,h=!0,m=!0):m||s++;if(s>=R){u=!0;break}let K=!0;for(;(K||!w)&&c<B;)K=this.containsBlackPoint(r,s,c,!0),K?(c++,h=!0,w=!0):w||c++;if(c>=B){u=!0;break}let $=!0;for(;($||!C)&&r>=0;)$=this.containsBlackPoint(a,c,r,!1),$?(r--,h=!0,C=!0):C||r--;if(r<0){u=!0;break}let ne=!0;for(;(ne||!T)&&a>=0;)ne=this.containsBlackPoint(r,s,a,!0),ne?(a--,h=!0,T=!0):T||a--;if(a<0){u=!0;break}h&&(d=!0)}if(!u&&d){const G=s-r;let K=null;for(let he=1;K===null&&he<G;he++)K=this.getBlackPointOnSegment(r,c-he,r+he,c);if(K==null)throw new re;let $=null;for(let he=1;$===null&&he<G;he++)$=this.getBlackPointOnSegment(r,a+he,r+he,a);if($==null)throw new re;let ne=null;for(let he=1;ne===null&&he<G;he++)ne=this.getBlackPointOnSegment(s,a+he,s-he,a);if(ne==null)throw new re;let ue=null;for(let he=1;ue===null&&he<G;he++)ue=this.getBlackPointOnSegment(s,c-he,s-he,c);if(ue==null)throw new re;return this.centerEdges(ue,K,ne,$)}else throw new re}getBlackPointOnSegment(r,s,a,c){const u=Ue.round(Ue.distance(r,s,a,c)),h=(a-r)/u,d=(c-s)/u,m=this.image;for(let w=0;w<u;w++){const C=Ue.round(r+w*h),T=Ue.round(s+w*d);if(m.get(C,T))return new ge(C,T)}return null}centerEdges(r,s,a,c){const u=r.getX(),h=r.getY(),d=s.getX(),m=s.getY(),w=a.getX(),C=a.getY(),T=c.getX(),R=c.getY(),B=gr.CORR;return u<this.width/2?[new ge(T-B,R+B),new ge(d+B,m+B),new ge(w-B,C-B),new ge(u+B,h-B)]:[new ge(T+B,R+B),new ge(d+B,m-B),new ge(w-B,C+B),new ge(u-B,h-B)]}containsBlackPoint(r,s,a,c){const u=this.image;if(c){for(let h=r;h<=s;h++)if(u.get(h,a))return!0}else for(let h=r;h<=s;h++)if(u.get(a,h))return!0;return!1}}gr.INIT_SIZE=10,gr.CORR=1;class Aa{static checkAndNudgePoints(r,s){const a=r.getWidth(),c=r.getHeight();let u=!0;for(let h=0;h<s.length&&u;h+=2){const d=Math.floor(s[h]),m=Math.floor(s[h+1]);if(d<-1||d>a||m<-1||m>c)throw new re;u=!1,d===-1?(s[h]=0,u=!0):d===a&&(s[h]=a-1,u=!0),m===-1?(s[h+1]=0,u=!0):m===c&&(s[h+1]=c-1,u=!0)}u=!0;for(let h=s.length-2;h>=0&&u;h-=2){const d=Math.floor(s[h]),m=Math.floor(s[h+1]);if(d<-1||d>a||m<-1||m>c)throw new re;u=!1,d===-1?(s[h]=0,u=!0):d===a&&(s[h]=a-1,u=!0),m===-1?(s[h+1]=0,u=!0):m===c&&(s[h+1]=c-1,u=!0)}}}class gn{constructor(r,s,a,c,u,h,d,m,w){this.a11=r,this.a21=s,this.a31=a,this.a12=c,this.a22=u,this.a32=h,this.a13=d,this.a23=m,this.a33=w}static quadrilateralToQuadrilateral(r,s,a,c,u,h,d,m,w,C,T,R,B,G,K,$){const ne=gn.quadrilateralToSquare(r,s,a,c,u,h,d,m);return gn.squareToQuadrilateral(w,C,T,R,B,G,K,$).times(ne)}transformPoints(r){const s=r.length,a=this.a11,c=this.a12,u=this.a13,h=this.a21,d=this.a22,m=this.a23,w=this.a31,C=this.a32,T=this.a33;for(let R=0;R<s;R+=2){const B=r[R],G=r[R+1],K=u*B+m*G+T;r[R]=(a*B+h*G+w)/K,r[R+1]=(c*B+d*G+C)/K}}transformPointsWithValues(r,s){const a=this.a11,c=this.a12,u=this.a13,h=this.a21,d=this.a22,m=this.a23,w=this.a31,C=this.a32,T=this.a33,R=r.length;for(let B=0;B<R;B++){const G=r[B],K=s[B],$=u*G+m*K+T;r[B]=(a*G+h*K+w)/$,s[B]=(c*G+d*K+C)/$}}static squareToQuadrilateral(r,s,a,c,u,h,d,m){const w=r-a+u-d,C=s-c+h-m;if(w===0&&C===0)return new gn(a-r,u-a,r,c-s,h-c,s,0,0,1);{const T=a-u,R=d-u,B=c-h,G=m-h,K=T*G-R*B,$=(w*G-R*C)/K,ne=(T*C-w*B)/K;return new gn(a-r+$*a,d-r+ne*d,r,c-s+$*c,m-s+ne*m,s,$,ne,1)}}static quadrilateralToSquare(r,s,a,c,u,h,d,m){return gn.squareToQuadrilateral(r,s,a,c,u,h,d,m).buildAdjoint()}buildAdjoint(){return new gn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new gn(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class Ca extends Aa{sampleGrid(r,s,a,c,u,h,d,m,w,C,T,R,B,G,K,$,ne,ue,he){const ae=gn.quadrilateralToQuadrilateral(c,u,h,d,m,w,C,T,R,B,G,K,$,ne,ue,he);return this.sampleGridWithTransform(r,s,a,ae)}sampleGridWithTransform(r,s,a,c){if(s<=0||a<=0)throw new re;const u=new He(s,a),h=new Float32Array(2*s);for(let d=0;d<a;d++){const m=h.length,w=d+.5;for(let C=0;C<m;C+=2)h[C]=C/2+.5,h[C+1]=w;c.transformPoints(h),Aa.checkAndNudgePoints(r,h);try{for(let C=0;C<m;C+=2)r.get(Math.floor(h[C]),Math.floor(h[C+1]))&&u.set(C/2,d)}catch{throw new re}}return u}}class Or{static setGridSampler(r){Or.gridSampler=r}static getInstance(){return Or.gridSampler}}Or.gridSampler=new Ca;class Jt{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new ge(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class nc{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(r){let h=a[0];a[0]=a[2],a[2]=h}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new tc(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new re;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(a,s);let c=0;for(let h=0;h<4;h++){let d=a[(this.shift+h)%4];this.compact?(c<<=7,c+=d>>1&127):(c<<=10,c+=(d>>2&992)+(d>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let a=0;r.forEach((c,u,h)=>{let d=(c>>s-2<<1)+(c&1);a=(a<<3)+d}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(F.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new re}getCorrectedParameterData(r,s){let a,c;s?(a=7,c=2):(a=10,c=4);let u=a-c,h=new Int32Array(a);for(let m=a-1;m>=0;--m)h[m]=r&15,r>>=4;try{new Ps(Ke.AZTEC_PARAM).decode(h,u)}catch{throw new re}let d=0;for(let m=0;m<c;m++)d=(d<<4)+h[m];return d}getBullsEyeCorners(r){let s=r,a=r,c=r,u=r,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let T=this.getFirstDifferent(s,h,1,-1),R=this.getFirstDifferent(a,h,1,1),B=this.getFirstDifferent(c,h,-1,1),G=this.getFirstDifferent(u,h,-1,-1);if(this.nbCenterLayers>2){let K=this.distancePoint(G,T)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(K<.75||K>1.25||!this.isWhiteOrBlackRectangle(T,R,B,G))break}s=T,a=R,c=B,u=G,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let d=new ge(s.getX()+.5,s.getY()-.5),m=new ge(a.getX()+.5,a.getY()+.5),w=new ge(c.getX()-.5,c.getY()+.5),C=new ge(u.getX()-.5,u.getY()-.5);return this.expandSquare([d,m,w,C],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,a,c;try{let d=new gr(this.image).detect();r=d[0],s=d[1],a=d[2],c=d[3]}catch{let m=this.image.getWidth()/2,w=this.image.getHeight()/2;r=this.getFirstDifferent(new Jt(m+7,w-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Jt(m+7,w+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Jt(m-7,w+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Jt(m-7,w-7),!1,-1,-1).toResultPoint()}let u=Ue.round((r.getX()+c.getX()+s.getX()+a.getX())/4),h=Ue.round((r.getY()+c.getY()+s.getY()+a.getY())/4);try{let d=new gr(this.image,15,u,h).detect();r=d[0],s=d[1],a=d[2],c=d[3]}catch{r=this.getFirstDifferent(new Jt(u+7,h-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Jt(u+7,h+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Jt(u-7,h+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Jt(u-7,h-7),!1,-1,-1).toResultPoint()}return u=Ue.round((r.getX()+c.getX()+s.getX()+a.getX())/4),h=Ue.round((r.getY()+c.getY()+s.getY()+a.getY())/4),new Jt(u,h)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,a,c,u){let h=Or.getInstance(),d=this.getDimension(),m=d/2-this.nbCenterLayers,w=d/2+this.nbCenterLayers;return h.sampleGrid(r,d,d,m,m,w,m,w,w,m,w,s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,s,a){let c=0,u=this.distanceResultPoint(r,s),h=u/a,d=r.getX(),m=r.getY(),w=h*(s.getX()-r.getX())/u,C=h*(s.getY()-r.getY())/u;for(let T=0;T<a;T++)this.image.get(Ue.round(d+T*w),Ue.round(m+T*C))&&(c|=1<<a-T-1);return c}isWhiteOrBlackRectangle(r,s,a,c){let u=3;r=new Jt(r.getX()-u,r.getY()+u),s=new Jt(s.getX()-u,s.getY()-u),a=new Jt(a.getX()+u,a.getY()-u),c=new Jt(c.getX()+u,c.getY()+u);let h=this.getColor(c,r);if(h===0)return!1;let d=this.getColor(r,s);return d!==h||(d=this.getColor(s,a),d!==h)?!1:(d=this.getColor(a,c),d===h)}getColor(r,s){let a=this.distancePoint(r,s),c=(s.getX()-r.getX())/a,u=(s.getY()-r.getY())/a,h=0,d=r.getX(),m=r.getY(),w=this.image.get(r.getX(),r.getY()),C=Math.ceil(a);for(let R=0;R<C;R++)d+=c,m+=u,this.image.get(Ue.round(d),Ue.round(m))!==w&&h++;let T=h/a;return T>.1&&T<.9?0:T<=.1===w?1:-1}getFirstDifferent(r,s,a,c){let u=r.getX()+a,h=r.getY()+c;for(;this.isValid(u,h)&&this.image.get(u,h)===s;)u+=a,h+=c;for(u-=a,h-=c;this.isValid(u,h)&&this.image.get(u,h)===s;)u+=a;for(u-=a;this.isValid(u,h)&&this.image.get(u,h)===s;)h+=c;return h-=c,new Jt(u,h)}expandSquare(r,s,a){let c=a/(2*s),u=r[0].getX()-r[2].getX(),h=r[0].getY()-r[2].getY(),d=(r[0].getX()+r[2].getX())/2,m=(r[0].getY()+r[2].getY())/2,w=new ge(d+c*u,m+c*h),C=new ge(d-c*u,m-c*h);u=r[1].getX()-r[3].getX(),h=r[1].getY()-r[3].getY(),d=(r[1].getX()+r[3].getX())/2,m=(r[1].getY()+r[3].getY())/2;let T=new ge(d+c*u,m+c*h),R=new ge(d-c*u,m-c*h);return[w,T,C,R]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=Ue.round(r.getX()),a=Ue.round(r.getY());return this.isValid(s,a)}distancePoint(r,s){return Ue.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return Ue.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class ho{decode(r,s=null){let a=null,c=new nc(r.getBlackMatrix()),u=null,h=null;try{let C=c.detectMirror(!1);u=C.getPoints(),this.reportFoundResultPoints(s,u),h=new rt().decode(C)}catch(C){a=C}if(h==null)try{let C=c.detectMirror(!0);u=C.getPoints(),this.reportFoundResultPoints(s,u),h=new rt().decode(C)}catch(C){throw a??C}let d=new ht(h.getText(),h.getRawBytes(),h.getNumBits(),u,_e.AZTEC,X.currentTimeMillis()),m=h.getByteSegments();m!=null&&d.putMetadata(Ft.BYTE_SEGMENTS,m);let w=h.getECLevel();return w!=null&&d.putMetadata(Ft.ERROR_CORRECTION_LEVEL,w),d}reportFoundResultPoints(r,s){if(r!=null){let a=r.get(Y.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((c,u,h)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class rc extends Mn{constructor(r=500){super(new ho,r)}}class bt{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(Y.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),h=this.doDecode(u,s),d=h.getResultMetadata();let m=270;d!==null&&d.get(Ft.ORIENTATION)===!0&&(m=m+d.get(Ft.ORIENTATION)%360),h.putMetadata(Ft.ORIENTATION,m);const w=h.getResultPoints();if(w!==null){const C=u.getHeight();for(let T=0;T<w.length;T++)w[T]=new ge(C-w[T].getY()-1,w[T].getX())}return h}else throw new re}}reset(){}doDecode(r,s){const a=r.getWidth(),c=r.getHeight();let u=new Z(a);const h=s&&s.get(Y.TRY_HARDER)===!0,d=Math.max(1,c>>(h?8:5));let m;h?m=c:m=15;const w=Math.trunc(c/2);for(let C=0;C<m;C++){const T=Math.trunc((C+1)/2),R=(C&1)===0,B=w+d*(R?T:-T);if(B<0||B>=c)break;try{u=r.getBlackRow(B,u)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(u.reverse(),s&&s.get(Y.NEED_RESULT_POINT_CALLBACK)===!0)){const K=new Map;s.forEach(($,ne)=>K.set(ne,$)),K.delete(Y.NEED_RESULT_POINT_CALLBACK),s=K}try{const K=this.decodeRow(B,u,s);if(G===1){K.putMetadata(Ft.ORIENTATION,180);const $=K.getResultPoints();$!==null&&($[0]=new ge(a-$[0].getX()-1,$[0].getY()),$[1]=new ge(a-$[1].getX()-1,$[1].getY()))}return K}catch{}}}throw new re}static recordPattern(r,s,a){const c=a.length;for(let w=0;w<c;w++)a[w]=0;const u=r.getSize();if(s>=u)throw new re;let h=!r.get(s),d=0,m=s;for(;m<u;){if(r.get(m)!==h)a[d]++;else{if(++d===c)break;a[d]=1,h=!h}m++}if(!(d===c||d===c-1&&m===u))throw new re}static recordPatternInReverse(r,s,a){let c=a.length,u=r.get(s);for(;s>0&&c>=0;)r.get(--s)!==u&&(c--,u=!u);if(c>=0)throw new re;bt.recordPattern(r,s+1,a)}static patternMatchVariance(r,s,a){const c=r.length;let u=0,h=0;for(let w=0;w<c;w++)u+=r[w],h+=s[w];if(u<h)return Number.POSITIVE_INFINITY;const d=u/h;a*=d;let m=0;for(let w=0;w<c;w++){const C=r[w],T=s[w]*d,R=C>T?C-T:T-C;if(R>a)return Number.POSITIVE_INFINITY;m+=R}return m/u}}class fe extends bt{static findStartPattern(r){const s=r.getSize(),a=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),h=a,d=!1;const m=6;for(let w=a;w<s;w++)if(r.get(w)!==d)u[c]++;else{if(c===m-1){let C=fe.MAX_AVG_VARIANCE,T=-1;for(let R=fe.CODE_START_A;R<=fe.CODE_START_C;R++){const B=bt.patternMatchVariance(u,fe.CODE_PATTERNS[R],fe.MAX_INDIVIDUAL_VARIANCE);B<C&&(C=B,T=R)}if(T>=0&&r.isRange(Math.max(0,h-(w-h)/2),h,!1))return Int32Array.from([h,w,T]);h+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,d=!d}throw new re}static decodeCode(r,s,a){bt.recordPattern(r,a,s);let c=fe.MAX_AVG_VARIANCE,u=-1;for(let h=0;h<fe.CODE_PATTERNS.length;h++){const d=fe.CODE_PATTERNS[h],m=this.patternMatchVariance(s,d,fe.MAX_INDIVIDUAL_VARIANCE);m<c&&(c=m,u=h)}if(u>=0)return u;throw new re}decodeRow(r,s,a){const c=a&&a.get(Y.ASSUME_GS1)===!0,u=fe.findStartPattern(s),h=u[2];let d=0;const m=new Uint8Array(20);m[d++]=h;let w;switch(h){case fe.CODE_START_A:w=fe.CODE_CODE_A;break;case fe.CODE_START_B:w=fe.CODE_CODE_B;break;case fe.CODE_START_C:w=fe.CODE_CODE_C;break;default:throw new b}let C=!1,T=!1,R="",B=u[0],G=u[1];const K=Int32Array.from([0,0,0,0,0,0]);let $=0,ne=0,ue=h,he=0,ae=!0,Ge=!1,Be=!1;for(;!C;){const vo=T;switch(T=!1,$=ne,ne=fe.decodeCode(s,K,G),m[d++]=ne,ne!==fe.CODE_STOP&&(ae=!0),ne!==fe.CODE_STOP&&(he++,ue+=he*ne),B=G,G+=K.reduce((lw,cw)=>lw+cw,0),ne){case fe.CODE_START_A:case fe.CODE_START_B:case fe.CODE_START_C:throw new b}switch(w){case fe.CODE_CODE_A:if(ne<64)Be===Ge?R+=String.fromCharCode(" ".charCodeAt(0)+ne):R+=String.fromCharCode(" ".charCodeAt(0)+ne+128),Be=!1;else if(ne<96)Be===Ge?R+=String.fromCharCode(ne-64):R+=String.fromCharCode(ne+64),Be=!1;else switch(ne!==fe.CODE_STOP&&(ae=!1),ne){case fe.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+=String.fromCharCode(29));break;case fe.CODE_FNC_2:case fe.CODE_FNC_3:break;case fe.CODE_FNC_4_A:!Ge&&Be?(Ge=!0,Be=!1):Ge&&Be?(Ge=!1,Be=!1):Be=!0;break;case fe.CODE_SHIFT:T=!0,w=fe.CODE_CODE_B;break;case fe.CODE_CODE_B:w=fe.CODE_CODE_B;break;case fe.CODE_CODE_C:w=fe.CODE_CODE_C;break;case fe.CODE_STOP:C=!0;break}break;case fe.CODE_CODE_B:if(ne<96)Be===Ge?R+=String.fromCharCode(" ".charCodeAt(0)+ne):R+=String.fromCharCode(" ".charCodeAt(0)+ne+128),Be=!1;else switch(ne!==fe.CODE_STOP&&(ae=!1),ne){case fe.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+=String.fromCharCode(29));break;case fe.CODE_FNC_2:case fe.CODE_FNC_3:break;case fe.CODE_FNC_4_B:!Ge&&Be?(Ge=!0,Be=!1):Ge&&Be?(Ge=!1,Be=!1):Be=!0;break;case fe.CODE_SHIFT:T=!0,w=fe.CODE_CODE_A;break;case fe.CODE_CODE_A:w=fe.CODE_CODE_A;break;case fe.CODE_CODE_C:w=fe.CODE_CODE_C;break;case fe.CODE_STOP:C=!0;break}break;case fe.CODE_CODE_C:if(ne<100)ne<10&&(R+="0"),R+=ne;else switch(ne!==fe.CODE_STOP&&(ae=!1),ne){case fe.CODE_FNC_1:c&&(R.length===0?R+="]C1":R+=String.fromCharCode(29));break;case fe.CODE_CODE_A:w=fe.CODE_CODE_A;break;case fe.CODE_CODE_B:w=fe.CODE_CODE_B;break;case fe.CODE_STOP:C=!0;break}break}vo&&(w=w===fe.CODE_CODE_A?fe.CODE_CODE_B:fe.CODE_CODE_A)}const Kn=G-B;if(G=s.getNextUnset(G),!s.isRange(G,Math.min(s.getSize(),G+(G-B)/2),!1))throw new re;if(ue-=he*$,ue%103!==$)throw new M;const Br=R.length;if(Br===0)throw new re;Br>0&&ae&&(w===fe.CODE_CODE_C?R=R.substring(0,Br-2):R=R.substring(0,Br-1));const qn=(u[1]+u[0])/2,mt=B+Kn/2,yn=m.length,ir=new Uint8Array(yn);for(let vo=0;vo<yn;vo++)ir[vo]=m[vo];const Co=[new ge(qn,r),new ge(mt,r)];return new ht(R,ir,0,Co,_e.CODE_128,new Date().getTime())}}fe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],fe.MAX_AVG_VARIANCE=.25,fe.MAX_INDIVIDUAL_VARIANCE=.7,fe.CODE_SHIFT=98,fe.CODE_CODE_C=99,fe.CODE_CODE_B=100,fe.CODE_CODE_A=101,fe.CODE_FNC_1=102,fe.CODE_FNC_2=97,fe.CODE_FNC_3=96,fe.CODE_FNC_4_A=101,fe.CODE_FNC_4_B=100,fe.CODE_START_A=103,fe.CODE_START_B=104,fe.CODE_START_C=105,fe.CODE_STOP=106;class Dt extends bt{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=Dt.findAsteriskPattern(s,c),h=s.getNextSet(u[1]),d=s.getSize(),m,w;do{Dt.recordPattern(s,h,c);let K=Dt.toNarrowWidePattern(c);if(K<0)throw new re;m=Dt.patternToChar(K),this.decodeRowResult+=m,w=h;for(let $ of c)h+=$;h=s.getNextSet(h)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let C=0;for(let K of c)C+=K;let T=h-w-C;if(h!==d&&T*2<C)throw new re;if(this.usingCheckDigit){let K=this.decodeRowResult.length-1,$=0;for(let ne=0;ne<K;ne++)$+=Dt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ne));if(this.decodeRowResult.charAt(K)!==Dt.ALPHABET_STRING.charAt($%43))throw new M;this.decodeRowResult=this.decodeRowResult.substring(0,K)}if(this.decodeRowResult.length===0)throw new re;let R;this.extendedMode?R=Dt.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;let B=(u[1]+u[0])/2,G=w+C/2;return new ht(R,null,0,[new ge(B,r),new ge(G,r)],_e.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let a=r.getSize(),c=r.getNextSet(0),u=0,h=c,d=!1,m=s.length;for(let w=c;w<a;w++)if(r.get(w)!==d)s[u]++;else{if(u===m-1){if(this.toNarrowWidePattern(s)===Dt.ASTERISK_ENCODING&&r.isRange(Math.max(0,h-Math.floor((w-h)/2)),h,!1))return[h,w];h+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,d=!d}throw new re}static toNarrowWidePattern(r){let s=r.length,a=0,c;do{let u=2147483647;for(let m of r)m<u&&m>a&&(u=m);a=u,c=0;let h=0,d=0;for(let m=0;m<s;m++){let w=r[m];w>a&&(d|=1<<s-1-m,c++,h+=w)}if(c===3){for(let m=0;m<s&&c>0;m++){let w=r[m];if(w>a&&(c--,w*2>=h))return-1}return d}}while(c>3);return-1}static patternToChar(r){for(let s=0;s<Dt.CHARACTER_ENCODINGS.length;s++)if(Dt.CHARACTER_ENCODINGS[s]===r)return Dt.ALPHABET_STRING.charAt(s);if(r===Dt.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(r){let s=r.length,a="";for(let c=0;c<s;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let h=r.charAt(c+1),d="\0";switch(u){case"+":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)+32);else throw new b;break;case"$":if(h>="A"&&h<="Z")d=String.fromCharCode(h.charCodeAt(0)-64);else throw new b;break;case"%":if(h>="A"&&h<="E")d=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")d=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")d=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")d="\0";else if(h==="V")d="@";else if(h==="W")d="`";else if(h==="X"||h==="Y"||h==="Z")d="";else throw new b;break;case"/":if(h>="A"&&h<="O")d=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")d=":";else throw new b;break}a+=d,c++}else a+=u}return a}}Dt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Dt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Dt.ASTERISK_ENCODING=148;class nt extends bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,a){let c=this.decodeStart(s),u=this.decodeEnd(s),h=new V;nt.decodeMiddle(s,c[1],u[0],h);let d=h.toString(),m=null;a!=null&&(m=a.get(Y.ALLOWED_LENGTHS)),m==null&&(m=nt.DEFAULT_ALLOWED_LENGTHS);let w=d.length,C=!1,T=0;for(let G of m){if(w===G){C=!0;break}G>T&&(T=G)}if(!C&&w>T&&(C=!0),!C)throw new b;const R=[new ge(c[1],r),new ge(u[0],r)];return new ht(d,null,0,R,_e.ITF,new Date().getTime())}static decodeMiddle(r,s,a,c){let u=new Int32Array(10),h=new Int32Array(5),d=new Int32Array(5);for(u.fill(0),h.fill(0),d.fill(0);s<a;){bt.recordPattern(r,s,u);for(let w=0;w<5;w++){let C=2*w;h[w]=u[C],d[w]=u[C+1]}let m=nt.decodeDigit(h);c.append(m.toString()),m=this.decodeDigit(d),c.append(m.toString()),u.forEach(function(w){s+=w})}}decodeStart(r){let s=nt.skipWhiteSpace(r),a=nt.findGuardPattern(r,s,nt.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let c=s-1;a>0&&c>=0&&!r.get(c);c--)a--;if(a!==0)throw new re}static skipWhiteSpace(r){const s=r.getSize(),a=r.getNextSet(0);if(a===s)throw new re;return a}decodeEnd(r){r.reverse();try{let s=nt.skipWhiteSpace(r),a;try{a=nt.findGuardPattern(r,s,nt.END_PATTERN_REVERSED[0])}catch(u){u instanceof re&&(a=nt.findGuardPattern(r,s,nt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let c=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-c,a}finally{r.reverse()}}static findGuardPattern(r,s,a){let c=a.length,u=new Int32Array(c),h=r.getSize(),d=!1,m=0,w=s;u.fill(0);for(let C=s;C<h;C++)if(r.get(C)!==d)u[m]++;else{if(m===c-1){if(bt.patternMatchVariance(u,a,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return[w,C];w+=u[0]+u[1],X.arraycopy(u,2,u,0,m-1),u[m-1]=0,u[m]=0,m--}else m++;u[m]=1,d=!d}throw new re}static decodeDigit(r){let s=nt.MAX_AVG_VARIANCE,a=-1,c=nt.PATTERNS.length;for(let u=0;u<c;u++){let h=nt.PATTERNS[u],d=bt.patternMatchVariance(r,h,nt.MAX_INDIVIDUAL_VARIANCE);d<s?(s=d,a=u):d===s&&(a=-1)}if(a>=0)return a%10;throw new re}}nt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],nt.MAX_AVG_VARIANCE=.38,nt.MAX_INDIVIDUAL_VARIANCE=.5,nt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],nt.START_PATTERN=Int32Array.from([1,1,1,1]),nt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class it extends bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),a=it.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let h=a[0];c=a[1];let d=h-(c-h);d>=0&&(s=r.isRange(d,h,!1))}return a}static checkChecksum(r){return it.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return it.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new b;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new b;a+=u}return(1e3-a)%10}static decodeEnd(r,s){return it.findGuardPattern(r,s,!1,it.START_END_PATTERN,new Int32Array(it.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,a,c){return this.findGuardPattern(r,s,a,c,new Int32Array(c.length))}static findGuardPattern(r,s,a,c,u){let h=r.getSize();s=a?r.getNextUnset(s):r.getNextSet(s);let d=0,m=s,w=c.length,C=a;for(let T=s;T<h;T++)if(r.get(T)!==C)u[d]++;else{if(d===w-1){if(bt.patternMatchVariance(u,c,it.MAX_INDIVIDUAL_VARIANCE)<it.MAX_AVG_VARIANCE)return Int32Array.from([m,T]);m+=u[0]+u[1];let R=u.slice(2,u.length-1);for(let B=0;B<d-1;B++)u[B]=R[B];u[d-1]=0,u[d]=0,d--}else d++;u[d]=1,C=!C}throw new re}static decodeDigit(r,s,a,c){this.recordPattern(r,a,s);let u=this.MAX_AVG_VARIANCE,h=-1,d=c.length;for(let m=0;m<d;m++){let w=c[m],C=bt.patternMatchVariance(s,w,it.MAX_INDIVIDUAL_VARIANCE);C<u&&(u=C,h=m)}if(h>=0)return h;throw new re}}it.MAX_AVG_VARIANCE=.48,it.MAX_INDIVIDUAL_VARIANCE=.7,it.START_END_PATTERN=Int32Array.from([1,1,1]),it.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),it.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),it.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ui{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),h=c.toString(),d=Ui.parseExtensionString(h),m=[new ge((a[0]+a[1])/2,r),new ge(u,r)],w=new ht(h,null,0,m,_e.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&w.putAllMetadata(d),w}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1],d=0;for(let w=0;w<5&&h<u;w++){let C=it.decodeDigit(r,c,h,it.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let T of c)h+=T;C>=10&&(d|=1<<4-w),w!==4&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(a.length!==5)throw new re;let m=this.determineCheckDigit(d);if(Ui.extensionChecksum(a.toString())!==m)throw new re;return h}static extensionChecksum(r){let s=r.length,a=0;for(let c=s-2;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);a*=3;for(let c=s-1;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);return a*=3,a%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new re}static parseExtensionString(r){if(r.length!==5)return null;let s=Ui.parseExtension5String(r);return s==null?null:new Map([[Ft.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(r.substring(1)),c=(a/100).toString(),u=a%100,h=u<10?"0"+u:u.toString();return s+c+"."+h}}class ji{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),h=c.toString(),d=ji.parseExtensionString(h),m=[new ge((a[0]+a[1])/2,r),new ge(u,r)],w=new ht(h,null,0,m,_e.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&w.putAllMetadata(d),w}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1],d=0;for(let m=0;m<2&&h<u;m++){let w=it.decodeDigit(r,c,h,it.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+w%10);for(let C of c)h+=C;w>=10&&(d|=1<<1-m),m!==1&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(a.length!==2)throw new re;if(parseInt(a.toString())%4!==d)throw new re;return h}static parseExtensionString(r){return r.length!==2?null:new Map([[Ft.ISSUE_NUMBER,parseInt(r)]])}}class va{static decodeRow(r,s,a){let c=it.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ui().decodeRow(r,s,c)}catch{return new ji().decodeRow(r,s,c)}}}va.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class je extends it{constructor(){super(),this.decodeRowStringBuffer="",je.L_AND_G_PATTERNS=je.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=je.L_PATTERNS[r-10],a=new Int32Array(s.length);for(let c=0;c<s.length;c++)a[c]=s[s.length-c-1];je.L_AND_G_PATTERNS[r]=a}}decodeRow(r,s,a){let c=je.findStartGuardPattern(s),u=a==null?null:a.get(Y.NEED_RESULT_POINT_CALLBACK);if(u!=null){const ae=new ge((c[0]+c[1])/2,r);u.foundPossibleResultPoint(ae)}let h=this.decodeMiddle(s,c,this.decodeRowStringBuffer),d=h.rowOffset,m=h.resultString;if(u!=null){const ae=new ge(d,r);u.foundPossibleResultPoint(ae)}let w=this.decodeEnd(s,d);if(u!=null){const ae=new ge((w[0]+w[1])/2,r);u.foundPossibleResultPoint(ae)}let C=w[1],T=C+(C-w[0]);if(T>=s.getSize()||!s.isRange(C,T,!1))throw new re;let R=m.toString();if(R.length<8)throw new b;if(!je.checkChecksum(R))throw new M;let B=(c[1]+c[0])/2,G=(w[1]+w[0])/2,K=this.getBarcodeFormat(),$=[new ge(B,r),new ge(G,r)],ne=new ht(R,null,0,$,K,new Date().getTime()),ue=0;try{let ae=va.decodeRow(r,s,w[1]);ne.putMetadata(Ft.UPC_EAN_EXTENSION,ae.getText()),ne.putAllMetadata(ae.getResultMetadata()),ne.addResultPoints(ae.getResultPoints()),ue=ae.getText().length}catch{}let he=a==null?null:a.get(Y.ALLOWED_EAN_EXTENSIONS);if(he!=null){let ae=!1;for(let Ge in he)if(ue.toString()===Ge){ae=!0;break}if(!ae)throw new re}return ne}decodeEnd(r,s){return je.findGuardPattern(r,s,!1,je.START_END_PATTERN,new Int32Array(je.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return je.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return je.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new b;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new b;a+=u}return(1e3-a)%10}}class qr extends je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1],d=0;for(let w=0;w<6&&h<u;w++){let C=je.decodeDigit(r,c,h,je.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let T of c)h+=T;C>=10&&(d|=1<<5-w)}a=qr.determineFirstDigit(a,d),h=je.findGuardPattern(r,h,!0,je.MIDDLE_PATTERN,new Int32Array(je.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&h<u;w++){let C=je.decodeDigit(r,c,h,je.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+C);for(let T of c)h+=T}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return _e.EAN_13}static determineFirstDigit(r,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode("0".charCodeAt(0)+a)+r,r;throw new re}}qr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class sn extends je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1];for(let m=0;m<4&&h<u;m++){let w=je.decodeDigit(r,c,h,je.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+w);for(let C of c)h+=C}h=je.findGuardPattern(r,h,!0,je.MIDDLE_PATTERN,new Int32Array(je.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&h<u;m++){let w=je.decodeDigit(r,c,h,je.L_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+w);for(let C of c)h+=C}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return _e.EAN_8}}class Ia extends je{constructor(){super(...arguments),this.ean13Reader=new qr}getBarcodeFormat(){return _e.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,a))}decodeMiddle(r,s,a){return this.ean13Reader.decodeMiddle(r,s,a)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let a=new ht(s.substring(1),null,null,r.getResultPoints(),_e.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new re}reset(){this.ean13Reader.reset()}}class pn extends je{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters.map(w=>w);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let h=s[1],d=0;for(let w=0;w<6&&h<u;w++){const C=pn.decodeDigit(r,c,h,pn.L_AND_G_PATTERNS);a+=String.fromCharCode("0".charCodeAt(0)+C%10);for(let T of c)h+=T;C>=10&&(d|=1<<5-w)}let m=pn.determineNumSysAndCheckDigit(a,d);return{rowOffset:h,resultString:m}}decodeEnd(r,s){return pn.findGuardPatternWithoutCounters(r,s,!0,pn.MIDDLE_END_PATTERN)}checkChecksum(r){return je.checkChecksum(pn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode("0".charCodeAt(0)+a),h=String.fromCharCode("0".charCodeAt(0)+c);return u+r+h}throw re.getNotFoundInstance()}getBarcodeFormat(){return _e.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new V;a.append(r.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(c),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(c);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}pn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class xi extends bt{constructor(r){super();let s=r==null?null:r.get(Y.POSSIBLE_FORMATS),a=[];i(s)?(a.push(new qr),a.push(new Ia),a.push(new sn),a.push(new pn)):(s.indexOf(_e.EAN_13)>-1&&a.push(new qr),s.indexOf(_e.UPC_A)>-1&&a.push(new Ia),s.indexOf(_e.EAN_8)>-1&&a.push(new sn),s.indexOf(_e.UPC_E)>-1&&a.push(new pn)),this.readers=a}decodeRow(r,s,a){for(let c of this.readers)try{const u=c.decodeRow(r,s,a),h=u.getBarcodeFormat()===_e.EAN_13&&u.getText().charAt(0)==="0",d=a==null?null:a.get(Y.POSSIBLE_FORMATS),m=d==null||d.includes(_e.UPC_A);if(h&&m){const w=u.getRawBytes(),C=new ht(u.getText().substring(1),w,w?w.length:null,u.getResultPoints(),_e.UPC_A);return C.putAllMetadata(u.getResultMetadata()),C}return u}catch{}throw new re}reset(){for(let r of this.readers)r.reset()}}class on extends bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let a=0;a<s.length;a++)if(bt.patternMatchVariance(r,s[a],on.MAX_INDIVIDUAL_VARIANCE)<on.MAX_AVG_VARIANCE)return a;throw new re}static count(r){return Ue.sum(new Int32Array(r))}static increment(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]>c&&(c=s[u],a=u);r[a]++}static decrement(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]<c&&(c=s[u],a=u);r[a]--}static isFinderPattern(r){let s=r[0]+r[1],a=s+r[2]+r[3],c=s/a;if(c>=on.MIN_FINDER_PATTERN_RATIO&&c<=on.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let d of r)d>h&&(h=d),d<u&&(u=d);return h<10*u}return!1}}on.MAX_AVG_VARIANCE=.2,on.MAX_INDIVIDUAL_VARIANCE=.45,on.MIN_FINDER_PATTERN_RATIO=9.5/12,on.MAX_FINDER_PATTERN_RATIO=12.5/14;class zi{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof zi))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Pr{constructor(r,s,a,c,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new ge(a,u)),this.resultPoints.push(new ge(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Pr))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class pr{constructor(){}static getRSSvalue(r,s,a){let c=0;for(let m of r)c+=m;let u=0,h=0,d=r.length;for(let m=0;m<d-1;m++){let w;for(w=1,h|=1<<m;w<r[m];w++,h&=~(1<<m)){let C=pr.combins(c-w-1,d-m-2);if(a&&h===0&&c-w-(d-m-1)>=d-m-1&&(C-=pr.combins(c-w-(d-m),d-m-2)),d-m-1>1){let T=0;for(let R=c-w-(d-m-2);R>s;R--)T+=pr.combins(c-w-R-1,d-m-3);C-=T*(d-1-m)}else c-w>s&&C--;u+=C}c-=w}return u}static combins(r,s){let a,c;r-s>s?(c=s,a=r-s):(c=r-s,a=s);let u=1,h=1;for(let d=r;d>a;d--)u*=d,h<=c&&(u/=h,h++);for(;h<=c;)u/=h,h++;return u}}class Ih{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let a=12*s,c=new Z(a),u=0,d=r[0].getRightChar().getValue();for(let m=11;m>=0;--m)d&1<<m&&c.set(u),u++;for(let m=1;m<r.length;++m){let w=r[m],C=w.getLeftChar().getValue();for(let T=11;T>=0;--T)C&1<<T&&c.set(u),u++;if(w.getRightChar()!=null){let T=w.getRightChar().getValue();for(let R=11;R>=0;--R)T&1<<R&&c.set(u),u++}}return c}}class mr{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class fo{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class mn extends fo{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===mn.FNC1}}mn.FNC1="$";class kr extends fo{constructor(r,s,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class an extends fo{constructor(r,s,a){if(super(r),s<0||s>10||a<0||a>10)throw new b;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===an.FNC1}isSecondDigitFNC1(){return this.secondDigit===an.FNC1}isAnyFNC1(){return this.firstDigit===an.FNC1||this.secondDigit===an.FNC1}}an.FNC1=10;class me{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new re;let s=r.substring(0,2);for(let u of me.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===me.VARIABLE_LENGTH?me.processVariableAI(2,u[2],r):me.processFixedAI(2,u[1],r);if(r.length<3)throw new re;let a=r.substring(0,3);for(let u of me.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===me.VARIABLE_LENGTH?me.processVariableAI(3,u[2],r):me.processFixedAI(3,u[1],r);for(let u of me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,u[2],r):me.processFixedAI(4,u[1],r);if(r.length<4)throw new re;let c=r.substring(0,4);for(let u of me.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,u[2],r):me.processFixedAI(4,u[1],r);throw new re}static processFixedAI(r,s,a){if(a.length<r)throw new re;let c=a.substring(0,r);if(a.length<r+s)throw new re;let u=a.substring(r,r+s),h=a.substring(r+s),d="("+c+")"+u,m=me.parseFieldsInGeneralPurpose(h);return m==null?d:d+m}static processVariableAI(r,s,a){let c=a.substring(0,r),u;a.length<r+s?u=a.length:u=r+s;let h=a.substring(r,u),d=a.substring(u),m="("+c+")"+h,w=me.parseFieldsInGeneralPurpose(d);return w==null?m:m+w}}me.VARIABLE_LENGTH=[],me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",me.VARIABLE_LENGTH,20],["22",me.VARIABLE_LENGTH,29],["30",me.VARIABLE_LENGTH,8],["37",me.VARIABLE_LENGTH,8],["90",me.VARIABLE_LENGTH,30],["91",me.VARIABLE_LENGTH,30],["92",me.VARIABLE_LENGTH,30],["93",me.VARIABLE_LENGTH,30],["94",me.VARIABLE_LENGTH,30],["95",me.VARIABLE_LENGTH,30],["96",me.VARIABLE_LENGTH,30],["97",me.VARIABLE_LENGTH,3],["98",me.VARIABLE_LENGTH,30],["99",me.VARIABLE_LENGTH,30]],me.THREE_DIGIT_DATA_LENGTH=[["240",me.VARIABLE_LENGTH,30],["241",me.VARIABLE_LENGTH,30],["242",me.VARIABLE_LENGTH,6],["250",me.VARIABLE_LENGTH,30],["251",me.VARIABLE_LENGTH,30],["253",me.VARIABLE_LENGTH,17],["254",me.VARIABLE_LENGTH,20],["400",me.VARIABLE_LENGTH,30],["401",me.VARIABLE_LENGTH,30],["402",17],["403",me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",me.VARIABLE_LENGTH,20],["421",me.VARIABLE_LENGTH,15],["422",3],["423",me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",me.VARIABLE_LENGTH,15],["391",me.VARIABLE_LENGTH,18],["392",me.VARIABLE_LENGTH,15],["393",me.VARIABLE_LENGTH,18],["703",me.VARIABLE_LENGTH,30]],me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",me.VARIABLE_LENGTH,20],["8003",me.VARIABLE_LENGTH,30],["8004",me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",me.VARIABLE_LENGTH,30],["8008",me.VARIABLE_LENGTH,12],["8018",18],["8020",me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",me.VARIABLE_LENGTH,70],["8200",me.VARIABLE_LENGTH,70]];class Ln{constructor(r){this.buffer=new V,this.information=r}decodeAllCodes(r,s){let a=s,c=null;do{let u=this.decodeGeneralPurposeField(a,c),h=me.parseFieldsInGeneralPurpose(u.getNewString());if(h!=null&&r.append(h),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new an(this.information.getSize(),an.FNC1,an.FNC1):new an(this.information.getSize(),u-1,an.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),a=(s-8)/11,c=(s-8)%11;return new an(r+7,a,c)}extractNumericValueFromBitArray(r,s){return Ln.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,a){let c=0;for(let u=0;u<a;++u)r.get(s+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new kr(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new kr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new kr(this.current.getPosition(),this.buffer.toString()):s=new kr(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new mr(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new kr(this.current.getPosition(),this.buffer.toString());return new mr(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new mr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new kr(this.current.getPosition(),this.buffer.toString());return new mr(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new mr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new kr(this.current.getPosition(),this.buffer.toString());return new mr(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new mr(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new mn(r+5,mn.FNC1);if(s>=5&&s<15)return new mn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new mn(r+7,""+(a+1));if(a>=90&&a<116)return new mn(r+7,""+(a+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new b}return new mn(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new mn(r+5,mn.FNC1);if(s>=5&&s<15)return new mn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new mn(r+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new rr("Decoding invalid alphanumeric value: "+a)}return new mn(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class go{constructor(r){this.information=r,this.generalDecoder=new Ln(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class xn extends go{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,a)}encodeCompressedGtinWithoutAI(r,s,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}xn.appendCheckDigit(r,a)}static appendCheckDigit(r,s){let a=0;for(let c=0;c<13;c++){let u=r.charAt(c+s).charCodeAt(0)-"0".charCodeAt(0);a+=c&1?u:3*u}a=10-a%10,a===10&&(a=0),r.append(a)}}xn.GTIN_SIZE=40;class Yr extends xn{constructor(r){super(r)}parseInformation(){let r=new V;r.append("(01)");let s=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(Yr.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,Yr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Yr.HEADER_SIZE+44)}}Yr.HEADER_SIZE=1+1+2;class Hi extends go{constructor(r){super(r)}parseInformation(){let r=new V;return this.getGeneralDecoder().decodeAllCodes(r,Hi.HEADER_SIZE)}}Hi.HEADER_SIZE=2+1+2;class ks extends xn{constructor(r){super(r)}encodeCompressedWeight(r,s,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(r,c);let u=this.checkWeight(c),h=1e5;for(let d=0;d<5;++d)u/h===0&&r.append("0"),h/=10;r.append(u)}}class xr extends ks{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=xr.HEADER_SIZE+ks.GTIN_SIZE+xr.WEIGHT_SIZE)throw new re;let r=new V;return this.encodeCompressedGtin(r,xr.HEADER_SIZE),this.encodeCompressedWeight(r,xr.HEADER_SIZE+ks.GTIN_SIZE,xr.WEIGHT_SIZE),r.toString()}}xr.HEADER_SIZE=4+1,xr.WEIGHT_SIZE=15;class ic extends xr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class Th extends xr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Bn extends xn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Bn.HEADER_SIZE+xn.GTIN_SIZE)throw new re;let r=new V;this.encodeCompressedGtin(r,Bn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Bn.HEADER_SIZE+xn.GTIN_SIZE,Bn.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Bn.HEADER_SIZE+xn.GTIN_SIZE+Bn.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}Bn.HEADER_SIZE=5+1+2,Bn.LAST_DIGIT_SIZE=2;class ln extends xn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<ln.HEADER_SIZE+xn.GTIN_SIZE)throw new re;let r=new V;this.encodeCompressedGtin(r,ln.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(ln.HEADER_SIZE+xn.GTIN_SIZE,ln.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(ln.HEADER_SIZE+xn.GTIN_SIZE+ln.LAST_DIGIT_SIZE,ln.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(ln.HEADER_SIZE+xn.GTIN_SIZE+ln.LAST_DIGIT_SIZE+ln.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}ln.HEADER_SIZE=5+1+2,ln.LAST_DIGIT_SIZE=2,ln.FIRST_THREE_DIGITS_SIZE=10;class ft extends ks{constructor(r,s,a){super(r),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=ft.HEADER_SIZE+ft.GTIN_SIZE+ft.WEIGHT_SIZE+ft.DATE_SIZE)throw new re;let r=new V;return this.encodeCompressedGtin(r,ft.HEADER_SIZE),this.encodeCompressedWeight(r,ft.HEADER_SIZE+ft.GTIN_SIZE,ft.WEIGHT_SIZE),this.encodeCompressedDate(r,ft.HEADER_SIZE+ft.GTIN_SIZE+ft.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,ft.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let h=a;h/10==0&&r.append("0"),r.append(h),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}ft.HEADER_SIZE=7+1,ft.WEIGHT_SIZE=20,ft.DATE_SIZE=16;function Gi(I){try{if(I.get(1))return new Yr(I);if(!I.get(2))return new Hi(I);switch(Ln.extractNumericValueFromBitArray(I,1,4)){case 4:return new ic(I);case 5:return new Th(I)}switch(Ln.extractNumericValueFromBitArray(I,1,5)){case 12:return new Bn(I);case 13:return new ln(I)}switch(Ln.extractNumericValueFromBitArray(I,1,7)){case 56:return new ft(I,"310","11");case 57:return new ft(I,"320","11");case 58:return new ft(I,"310","13");case 59:return new ft(I,"320","13");case 60:return new ft(I,"310","15");case 61:return new ft(I,"320","15");case 62:return new ft(I,"310","17");case 63:return new ft(I,"320","17")}}catch(r){throw console.log(r),new rr("unknown decoder: "+I)}}class Tn{constructor(r,s,a,c){this.leftchar=r,this.rightchar=s,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Tn?Tn.equalsOrNull(r.leftchar,s.leftchar)&&Tn.equalsOrNull(r.rightchar,s.rightchar)&&Tn.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Tn.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ms{constructor(r,s,a){this.pairs=r,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof Ms?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let a;return r.forEach((c,u)=>{s.forEach(h=>{c.getLeftChar().getValue()===h.getLeftChar().getValue()&&c.getRightChar().getValue()===h.getRightChar().getValue()&&c.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(a=!0)})}),a}}class oe extends on{constructor(r){super(...arguments),this.pairs=new Array(oe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,a){this.pairs.length=0,this.startFromEven=!1;try{return oe.constructResult(this.decodeRow2pairs(r,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,oe.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof re){if(!this.pairs.length)throw new re;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new re}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let a=s;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let h of r)this.pairs.push(h.getPairs());if(this.pairs.push(c.getPairs()),!oe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,a+1)}catch(h){this.verbose&&console.log(h)}}throw new re}static isValidSequence(r){for(let s of oe.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let a=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=s[c]){a=!1;break}if(a)return!0}return!1}storeRow(r,s){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let h=this.rows[a];if(h.getRowNumber()>r){u=h.isEquivalent(this.pairs);break}c=h.isEquivalent(this.pairs),a++}u||c||oe.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Ms(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let a of s)if(a.getPairs().length!==r.length){for(let c of a.getPairs())for(let u of r)if(Tn.equals(c,u))break}}static isPartialRow(r,s){for(let a of s){let c=!0;for(let u of r){let h=!1;for(let d of a.getPairs())if(u.equals(d)){h=!0;break}if(!h){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=Ih.buildBitArray(r),c=Gi(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),h=r[r.length-1].getFinderPattern().getResultPoints(),d=[u[0],u[1],h[0],h[1]];return new ht(c,null,null,d,_e.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let d=1;d<this.pairs.size();++d){let m=this.pairs.get(d);c+=m.getLeftChar().getChecksumPortion(),u++;let w=m.getRightChar();w!=null&&(c+=w.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==s.getValue()}static getNextSecondBar(r,s){let a;return r.get(s)?(a=r.getNextUnset(s),a=r.getNextSet(a)):(a=r.getNextSet(s),a=r.getNextUnset(a)),a}retrieveNextPair(r,s,a){let c=s.length%2==0;this.startFromEven&&(c=!c);let u,h=!0,d=-1;do this.findNextPair(r,s,d),u=this.parseFoundFinderPattern(r,a,c),u==null?d=oe.getNextSecondBar(r,this.startEnd[0]):h=!1;while(h);let m=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new re;let w;try{w=this.decodeDataCharacter(r,u,c,!1)}catch(C){w=null,this.verbose&&console.log(C)}return new Tn(m,w,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h;a>=0?h=a:this.isEmptyPair(s)?h=0:h=s[s.length-1].getFinderPattern().getStartEnd()[1];let d=s.length%2!=0;this.startFromEven&&(d=!d);let m=!1;for(;h<u&&(m=!r.get(h),!!m);)h++;let w=0,C=h;for(let T=h;T<u;T++)if(r.get(T)!=m)c[w]++;else{if(w==3){if(d&&oe.reverseCounters(c),oe.isFinderPattern(c)){this.startEnd[0]=C,this.startEnd[1]=T;return}d&&oe.reverseCounters(c),C+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,m=!m}throw new re}static reverseCounters(r){let s=r.length;for(let a=0;a<s/2;++a){let c=r[a];r[a]=r[s-a-1],r[s-a-1]=c}}parseFoundFinderPattern(r,s,a){let c,u,h;if(a){let w=this.startEnd[0]-1;for(;w>=0&&!r.get(w);)w--;w++,c=this.startEnd[0]-w,u=w,h=this.startEnd[1]}else u=this.startEnd[0],h=r.getNextUnset(this.startEnd[1]+1),c=h-this.startEnd[1];let d=this.getDecodeFinderCounters();X.arraycopy(d,0,d,1,d.length-1),d[0]=c;let m;try{m=this.parseFinderValue(d,oe.FINDER_PATTERNS)}catch{return null}return new Pr(m,[u,h],u,h,s)}decodeDataCharacter(r,s,a,c){let u=this.getDataCharacterCounters();for(let mt=0;mt<u.length;mt++)u[mt]=0;if(c)oe.recordPatternInReverse(r,s.getStartEnd()[0],u);else{oe.recordPattern(r,s.getStartEnd()[1],u);for(let mt=0,yn=u.length-1;mt<yn;mt++,yn--){let ir=u[mt];u[mt]=u[yn],u[yn]=ir}}let h=17,d=Ue.sum(new Int32Array(u))/h,m=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(d-m)/m>.3)throw new re;let w=this.getOddCounts(),C=this.getEvenCounts(),T=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let mt=0;mt<u.length;mt++){let yn=1*u[mt]/d,ir=yn+.5;if(ir<1){if(yn<.3)throw new re;ir=1}else if(ir>8){if(yn>8.7)throw new re;ir=8}let Co=mt/2;mt&1?(C[Co]=ir,R[Co]=yn-ir):(w[Co]=ir,T[Co]=yn-ir)}this.adjustOddEvenCounts(h);let B=4*s.getValue()+(a?0:2)+(c?0:1)-1,G=0,K=0;for(let mt=w.length-1;mt>=0;mt--){if(oe.isNotA1left(s,a,c)){let yn=oe.WEIGHTS[B][2*mt];K+=w[mt]*yn}G+=w[mt]}let $=0;for(let mt=C.length-1;mt>=0;mt--)if(oe.isNotA1left(s,a,c)){let yn=oe.WEIGHTS[B][2*mt+1];$+=C[mt]*yn}let ne=K+$;if(G&1||G>13||G<4)throw new re;let ue=(13-G)/2,he=oe.SYMBOL_WIDEST[ue],ae=9-he,Ge=pr.getRSSvalue(w,he,!0),Be=pr.getRSSvalue(C,ae,!1),Kn=oe.EVEN_TOTAL_SUBSET[ue],Br=oe.GSUM[ue],qn=Ge*Kn+Be+Br;return new zi(qn,ne)}static isNotA1left(r,s,a){return!(r.getValue()==0&&s&&a)}adjustOddEvenCounts(r){let s=Ue.sum(new Int32Array(this.getOddCounts())),a=Ue.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;s>13?u=!0:s<4&&(c=!0);let h=!1,d=!1;a>13?d=!0:a<4&&(h=!0);let m=s+a-r,w=(s&1)==1,C=(a&1)==0;if(m==1)if(w){if(C)throw new re;u=!0}else{if(!C)throw new re;d=!0}else if(m==-1)if(w){if(C)throw new re;c=!0}else{if(!C)throw new re;h=!0}else if(m==0){if(w){if(!C)throw new re;s<a?(c=!0,d=!0):(u=!0,h=!0)}else if(C)throw new re}else throw new re;if(c){if(u)throw new re;oe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&oe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(d)throw new re;oe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&oe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}oe.SYMBOL_WIDEST=[7,5,4,3,1],oe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],oe.GSUM=[0,348,1388,2948,3988],oe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],oe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],oe.FINDER_PAT_A=0,oe.FINDER_PAT_B=1,oe.FINDER_PAT_C=2,oe.FINDER_PAT_D=3,oe.FINDER_PAT_E=4,oe.FINDER_PAT_F=5,oe.FINDER_PATTERN_SEQUENCES=[[oe.FINDER_PAT_A,oe.FINDER_PAT_A],[oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B],[oe.FINDER_PAT_A,oe.FINDER_PAT_C,oe.FINDER_PAT_B,oe.FINDER_PAT_D],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_C],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_D,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_E,oe.FINDER_PAT_B,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_D],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_E],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F],[oe.FINDER_PAT_A,oe.FINDER_PAT_A,oe.FINDER_PAT_B,oe.FINDER_PAT_B,oe.FINDER_PAT_C,oe.FINDER_PAT_D,oe.FINDER_PAT_D,oe.FINDER_PAT_E,oe.FINDER_PAT_E,oe.FINDER_PAT_F,oe.FINDER_PAT_F]],oe.MAX_PAIRS=11;class sc extends zi{constructor(r,s,a){super(r,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class _t extends on{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,a){const c=this.decodePair(s,!1,r,a);_t.addOrTally(this.possibleLeftPairs,c),s.reverse();let u=this.decodePair(s,!0,r,a);_t.addOrTally(this.possibleRightPairs,u),s.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&_t.checkChecksum(h,d))return _t.constructResult(h,d)}throw new re}static addOrTally(r,s){if(s==null)return;let a=!1;for(let c of r)if(c.getValue()===s.getValue()){c.incrementCount(),a=!0;break}a||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let a=4537077*r.getValue()+s.getValue(),c=new String(a).toString(),u=new V;for(let w=13-c.length;w>0;w--)u.append("0");u.append(c);let h=0;for(let w=0;w<13;w++){let C=u.charAt(w).charCodeAt(0)-"0".charCodeAt(0);h+=w&1?C:3*C}h=10-h%10,h===10&&(h=0),u.append(h.toString());let d=r.getFinderPattern().getResultPoints(),m=s.getFinderPattern().getResultPoints();return new ht(u.toString(),null,0,[d[0],d[1],m[0],m[1]],_e.RSS_14,new Date().getTime())}static checkChecksum(r,s){let a=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(r,s,a,c){try{let u=this.findFinderPattern(r,s),h=this.parseFoundFinderPattern(r,a,s,u),d=c==null?null:c.get(Y.NEED_RESULT_POINT_CALLBACK);if(d!=null){let C=(u[0]+u[1])/2;s&&(C=r.getSize()-1-C),d.foundPossibleResultPoint(new ge(C,a))}let m=this.decodeDataCharacter(r,h,!0),w=this.decodeDataCharacter(r,h,!1);return new sc(1597*m.getValue()+w.getValue(),m.getChecksumPortion()+4*w.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(r,s,a){let c=this.getDataCharacterCounters();for(let $=0;$<c.length;$++)c[$]=0;if(a)bt.recordPatternInReverse(r,s.getStartEnd()[0],c);else{bt.recordPattern(r,s.getStartEnd()[1]+1,c);for(let $=0,ne=c.length-1;$<ne;$++,ne--){let ue=c[$];c[$]=c[ne],c[ne]=ue}}let u=a?16:15,h=Ue.sum(new Int32Array(c))/u,d=this.getOddCounts(),m=this.getEvenCounts(),w=this.getOddRoundingErrors(),C=this.getEvenRoundingErrors();for(let $=0;$<c.length;$++){let ne=c[$]/h,ue=Math.floor(ne+.5);ue<1?ue=1:ue>8&&(ue=8);let he=Math.floor($/2);$&1?(m[he]=ue,C[he]=ne-ue):(d[he]=ue,w[he]=ne-ue)}this.adjustOddEvenCounts(a,u);let T=0,R=0;for(let $=d.length-1;$>=0;$--)R*=9,R+=d[$],T+=d[$];let B=0,G=0;for(let $=m.length-1;$>=0;$--)B*=9,B+=m[$],G+=m[$];let K=R+3*B;if(a){if(T&1||T>12||T<4)throw new re;let $=(12-T)/2,ne=_t.OUTSIDE_ODD_WIDEST[$],ue=9-ne,he=pr.getRSSvalue(d,ne,!1),ae=pr.getRSSvalue(m,ue,!0),Ge=_t.OUTSIDE_EVEN_TOTAL_SUBSET[$],Be=_t.OUTSIDE_GSUM[$];return new zi(he*Ge+ae+Be,K)}else{if(G&1||G>10||G<4)throw new re;let $=(10-G)/2,ne=_t.INSIDE_ODD_WIDEST[$],ue=9-ne,he=pr.getRSSvalue(d,ne,!0),ae=pr.getRSSvalue(m,ue,!1),Ge=_t.INSIDE_ODD_TOTAL_SUBSET[$],Be=_t.INSIDE_GSUM[$];return new zi(ae*Ge+he+Be,K)}}findFinderPattern(r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),u=!1,h=0;for(;h<c&&(u=!r.get(h),s!==u);)h++;let d=0,m=h;for(let w=h;w<c;w++)if(r.get(w)!==u)a[d]++;else{if(d===3){if(on.isFinderPattern(a))return[m,w];m+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,d--}else d++;a[d]=1,u=!u}throw new re}parseFoundFinderPattern(r,s,a,c){let u=r.get(c[0]),h=c[0]-1;for(;h>=0&&u!==r.get(h);)h--;h++;const d=c[0]-h,m=this.getDecodeFinderCounters(),w=new Int32Array(m.length);X.arraycopy(m,0,w,1,m.length-1),w[0]=d;const C=this.parseFinderValue(w,_t.FINDER_PATTERNS);let T=h,R=c[1];return a&&(T=r.getSize()-1-T,R=r.getSize()-1-R),new Pr(C,[h,c[1]],T,R,s)}adjustOddEvenCounts(r,s){let a=Ue.sum(new Int32Array(this.getOddCounts())),c=Ue.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1,d=!1,m=!1;r?(a>12?h=!0:a<4&&(u=!0),c>12?m=!0:c<4&&(d=!0)):(a>11?h=!0:a<5&&(u=!0),c>10?m=!0:c<4&&(d=!0));let w=a+c-s,C=(a&1)===(r?1:0),T=(c&1)===1;if(w===1)if(C){if(T)throw new re;h=!0}else{if(!T)throw new re;m=!0}else if(w===-1)if(C){if(T)throw new re;u=!0}else{if(!T)throw new re;d=!0}else if(w===0){if(C){if(!T)throw new re;a<c?(u=!0,m=!0):(h=!0,d=!0)}else if(T)throw new re}else throw new re;if(u){if(h)throw new re;on.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&on.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(m)throw new re;on.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&on.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}_t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],_t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],_t.OUTSIDE_GSUM=[0,161,961,2015,2715],_t.INSIDE_GSUM=[0,336,1036,1516],_t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],_t.INSIDE_ODD_WIDEST=[2,4,6,8],_t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class yi extends bt{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const a=r?r.get(Y.POSSIBLE_FORMATS):null,c=r&&r.get(Y.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(_e.EAN_13)||a.includes(_e.UPC_A)||a.includes(_e.EAN_8)||a.includes(_e.UPC_E))&&this.readers.push(new xi(r)),a.includes(_e.CODE_39)&&this.readers.push(new Dt(c)),a.includes(_e.CODE_128)&&this.readers.push(new fe),a.includes(_e.ITF)&&this.readers.push(new nt),a.includes(_e.RSS_14)&&this.readers.push(new _t),a.includes(_e.RSS_EXPANDED)&&this.readers.push(new oe(this.verbose))):(this.readers.push(new xi(r)),this.readers.push(new Dt),this.readers.push(new xi(r)),this.readers.push(new fe),this.readers.push(new nt),this.readers.push(new _t),this.readers.push(new oe(this.verbose)))}decodeRow(r,s,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,s,a)}catch{}throw new re}reset(){this.readers.forEach(r=>r.reset())}}class Ta extends Mn{constructor(r=500,s){super(new yi(s),r,s)}}class qe{constructor(r,s,a){this.ecCodewords=r,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ye{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Fe{constructor(r,s,a,c,u,h){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=h;let d=0;const m=h.getECCodewords(),w=h.getECBlocks();for(let C of w)d+=C.getCount()*(C.getDataCodewords()+m);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new b;for(let a of Fe.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===s)return a;throw new b}toString(){return""+this.versionNumber}static buildVersions(){return[new Fe(1,10,10,8,8,new qe(5,new Ye(1,3))),new Fe(2,12,12,10,10,new qe(7,new Ye(1,5))),new Fe(3,14,14,12,12,new qe(10,new Ye(1,8))),new Fe(4,16,16,14,14,new qe(12,new Ye(1,12))),new Fe(5,18,18,16,16,new qe(14,new Ye(1,18))),new Fe(6,20,20,18,18,new qe(18,new Ye(1,22))),new Fe(7,22,22,20,20,new qe(20,new Ye(1,30))),new Fe(8,24,24,22,22,new qe(24,new Ye(1,36))),new Fe(9,26,26,24,24,new qe(28,new Ye(1,44))),new Fe(10,32,32,14,14,new qe(36,new Ye(1,62))),new Fe(11,36,36,16,16,new qe(42,new Ye(1,86))),new Fe(12,40,40,18,18,new qe(48,new Ye(1,114))),new Fe(13,44,44,20,20,new qe(56,new Ye(1,144))),new Fe(14,48,48,22,22,new qe(68,new Ye(1,174))),new Fe(15,52,52,24,24,new qe(42,new Ye(2,102))),new Fe(16,64,64,14,14,new qe(56,new Ye(2,140))),new Fe(17,72,72,16,16,new qe(36,new Ye(4,92))),new Fe(18,80,80,18,18,new qe(48,new Ye(4,114))),new Fe(19,88,88,20,20,new qe(56,new Ye(4,144))),new Fe(20,96,96,22,22,new qe(68,new Ye(4,174))),new Fe(21,104,104,24,24,new qe(56,new Ye(6,136))),new Fe(22,120,120,18,18,new qe(68,new Ye(6,175))),new Fe(23,132,132,20,20,new qe(62,new Ye(8,163))),new Fe(24,144,144,22,22,new qe(62,new Ye(8,156),new Ye(2,155))),new Fe(25,8,18,6,16,new qe(7,new Ye(1,5))),new Fe(26,8,32,6,14,new qe(11,new Ye(1,10))),new Fe(27,12,26,10,24,new qe(14,new Ye(1,16))),new Fe(28,12,36,10,16,new qe(18,new Ye(1,22))),new Fe(29,16,36,14,16,new qe(24,new Ye(1,32))),new Fe(30,16,48,14,22,new qe(28,new Ye(1,49)))]}}Fe.VERSIONS=Fe.buildVersions();class po{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new b;this.version=po.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new He(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),a=r.getWidth();return Fe.getVersionForDimensions(s,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let d=!1,m=!1,w=!1,C=!1;do if(a===u&&c===0&&!d)r[s++]=this.readCorner1(u,h)&255,a-=2,c+=2,d=!0;else if(a===u-2&&c===0&&h&3&&!m)r[s++]=this.readCorner2(u,h)&255,a-=2,c+=2,m=!0;else if(a===u+4&&c===2&&!(h&7)&&!w)r[s++]=this.readCorner3(u,h)&255,a-=2,c+=2,w=!0;else if(a===u-2&&c===0&&(h&7)===4&&!C)r[s++]=this.readCorner4(u,h)&255,a-=2,c+=2,C=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,h)&255),a-=2,c+=2;while(a>=0&&c<h);a+=1,c+=3;do a>=0&&c<h&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,h)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<h);if(s!==this.version.getTotalCodewords())throw new b;return r}readModule(r,s,a,c){return r<0&&(r+=a,s+=4-(a+4&7)),s<0&&(s+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,a,c){let u=0;return this.readModule(r-2,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-2,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s,a,c)&&(u|=1),u<<=1,this.readModule(r,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r,s,a,c)&&(u|=1),u}readCorner1(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,1,r,s)&&(a|=1),a<<=1,this.readModule(r-1,2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}readCorner2(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-4,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner3(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-3,r,s)&&(a|=1),a<<=1,this.readModule(1,s-2,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner4(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new A("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),h=s/c|0,d=a/u|0,m=h*c,w=d*u,C=new He(w,m);for(let T=0;T<h;++T){const R=T*c;for(let B=0;B<d;++B){const G=B*u;for(let K=0;K<c;++K){const $=T*(c+2)+1+K,ne=R+K;for(let ue=0;ue<u;++ue){const he=B*(u+2)+1+ue;if(r.get(he,$)){const ae=G+ue;C.set(ae,ne)}}}}}return C}}class Sa{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const a=s.getECBlocks();let c=0;const u=a.getECBlocks();for(let K of u)c+=K.getCount();const h=new Array(c);let d=0;for(let K of u)for(let $=0;$<K.getCount();$++){const ne=K.getDataCodewords(),ue=a.getECCodewords()+ne;h[d++]=new Sa(ne,new Uint8Array(ue))}const w=h[0].codewords.length-a.getECCodewords(),C=w-1;let T=0;for(let K=0;K<C;K++)for(let $=0;$<d;$++)h[$].codewords[K]=r[T++];const R=s.getVersionNumber()===24,B=R?8:d;for(let K=0;K<B;K++)h[K].codewords[w-1]=r[T++];const G=h[0].codewords.length;for(let K=w;K<G;K++)for(let $=0;$<d;$++){const ne=R?($+8)%d:$,ue=R&&ne>7?K-1:K;h[ne].codewords[ue]=r[T++]}if(T!==r.length)throw new A;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class yr{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new A(""+r);let s=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const h=8-a,d=r<h?r:h,m=h-d,w=255>>8-d<<m;s=(u[c]&w)>>m,r-=d,a+=d,a===8&&(a=0,c++)}if(r>0){for(;r>=8;)s=s<<8|u[c]&255,c++,r-=8;if(r>0){const h=8-r,d=255>>h<<h;s=s<<r|(u[c]&d)>>h,a+=r}}return this.bitOffset=a,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var st;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(st||(st={}));class Hn{static decode(r){const s=new yr(r),a=new V,c=new V,u=new Array;let h=st.ASCII_ENCODE;do if(h===st.ASCII_ENCODE)h=this.decodeAsciiSegment(s,a,c);else{switch(h){case st.C40_ENCODE:this.decodeC40Segment(s,a);break;case st.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case st.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case st.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case st.BASE256_ENCODE:this.decodeBase256Segment(s,a,u);break;default:throw new b}h=st.ASCII_ENCODE}while(h!==st.PAD_ENCODE&&s.available()>0);return c.length()>0&&a.append(c.toString()),new Fi(r,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,a){let c=!1;do{let u=r.readBits(8);if(u===0)throw new b;if(u<=128)return c&&(u+=128),s.append(String.fromCharCode(u-1)),st.ASCII_ENCODE;if(u===129)return st.PAD_ENCODE;if(u<=229){const h=u-130;h<10&&s.append("0"),s.append(""+h)}else switch(u){case 230:return st.C40_ENCODE;case 231:return st.BASE256_ENCODE;case 232:s.append(String.fromCharCode(29));break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return st.ANSIX12_ENCODE;case 239:return st.TEXT_ENCODE;case 240:return st.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new b;break}}while(r.available()>0);return st.ASCII_ENCODE}static decodeC40Segment(r,s){let a=!1;const c=[];let u=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),c);for(let d=0;d<3;d++){const m=c[d];switch(u){case 0:if(m<3)u=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[m];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else throw new b;break;case 1:a?(s.append(String.fromCharCode(m+128)),a=!1):s.append(String.fromCharCode(m)),u=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[m];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else switch(m){case 27:s.append(String.fromCharCode(29));break;case 30:a=!0;break;default:throw new b}u=0;break;case 3:a?(s.append(String.fromCharCode(m+224)),a=!1):s.append(String.fromCharCode(m+96)),u=0;break;default:throw new b}}}while(r.available()>0)}static decodeTextSegment(r,s){let a=!1,c=[],u=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),c);for(let d=0;d<3;d++){const m=c[d];switch(u){case 0:if(m<3)u=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[m];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else throw new b;break;case 1:a?(s.append(String.fromCharCode(m+128)),a=!1):s.append(String.fromCharCode(m)),u=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[m];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w)}else switch(m){case 27:s.append(String.fromCharCode(29));break;case 30:a=!0;break;default:throw new b}u=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[m];a?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),a=!1):s.append(w),u=0}else throw new b;break;default:throw new b}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const a=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),a);for(let u=0;u<3;u++){const h=a[u];switch(h){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(h<14)s.append(String.fromCharCode(h+44));else if(h<40)s.append(String.fromCharCode(h+51));else throw new b;break}}}while(r.available()>0)}static parseTwoBytes(r,s,a){let c=(r<<8)+s-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,s,a){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let h;if(u===0?h=r.available()/8|0:u<250?h=u:h=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),h<0)throw new b;const d=new Uint8Array(h);for(let m=0;m<h;m++){if(r.available()<8)throw new b;d[m]=this.unrandomize255State(r.readBits(8),c++)}a.push(d);try{s.append(H.decode(d,W.ISO88591))}catch(m){throw new rr("Platform does not support required encoding: "+m.message)}}static unrandomize255State(r,s){const a=149*s%255+1,c=r-a;return c>=0?c:c+256}}Hn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Hn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Hn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Hn.TEXT_SHIFT2_SET_CHARS=Hn.C40_SHIFT2_SET_CHARS,Hn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class Ls{constructor(){this.rsDecoder=new Ps(Ke.DATA_MATRIX_FIELD_256)}decode(r){const s=new po(r),a=s.getVersion(),c=s.readCodewords(),u=Sa.getDataBlocks(c,a);let h=0;for(let w of u)h+=w.getNumDataCodewords();const d=new Uint8Array(h),m=u.length;for(let w=0;w<m;w++){const C=u[w],T=C.getCodewords(),R=C.getNumDataCodewords();this.correctErrors(T,R);for(let B=0;B<R;B++)d[B*m+w]=T[B]}return Hn.decode(d)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new M}for(let c=0;c<s;c++)r[c]=a[c]}}class At{constructor(r){this.image=r,this.rectangleDetector=new gr(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new re;s=this.shiftToModuleCenter(s);const a=s[0],c=s[1],u=s[2],h=s[3];let d=this.transitionsBetween(a,h)+1,m=this.transitionsBetween(u,h)+1;(d&1)===1&&(d+=1),(m&1)===1&&(m+=1),4*d<7*m&&4*m<7*d&&(d=m=Math.max(d,m));let w=At.sampleGrid(this.image,a,c,u,h,d,m);return new mi(w,[a,c,u,h])}static shiftPoint(r,s,a){let c=(s.getX()-r.getX())/(a+1),u=(s.getY()-r.getY())/(a+1);return new ge(r.getX()+c,r.getY()+u)}static moveAway(r,s,a){let c=r.getX(),u=r.getY();return c<s?c-=1:c+=1,u<a?u-=1:u+=1,new ge(c,u)}detectSolid1(r){let s=r[0],a=r[1],c=r[3],u=r[2],h=this.transitionsBetween(s,a),d=this.transitionsBetween(a,c),m=this.transitionsBetween(c,u),w=this.transitionsBetween(u,s),C=h,T=[u,s,a,c];return C>d&&(C=d,T[0]=s,T[1]=a,T[2]=c,T[3]=u),C>m&&(C=m,T[0]=a,T[1]=c,T[2]=u,T[3]=s),C>w&&(T[0]=c,T[1]=u,T[2]=s,T[3]=a),T}detectSolid2(r){let s=r[0],a=r[1],c=r[2],u=r[3],h=this.transitionsBetween(s,u),d=At.shiftPoint(a,c,(h+1)*4),m=At.shiftPoint(c,a,(h+1)*4),w=this.transitionsBetween(d,s),C=this.transitionsBetween(m,u);return w<C?(r[0]=s,r[1]=a,r[2]=c,r[3]=u):(r[0]=a,r[1]=c,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],a=r[1],c=r[2],u=r[3],h=this.transitionsBetween(s,u),d=this.transitionsBetween(a,u),m=At.shiftPoint(s,a,(d+1)*4),w=At.shiftPoint(c,a,(h+1)*4);h=this.transitionsBetween(m,u),d=this.transitionsBetween(w,u);let C=new ge(u.getX()+(c.getX()-a.getX())/(h+1),u.getY()+(c.getY()-a.getY())/(h+1)),T=new ge(u.getX()+(s.getX()-a.getX())/(d+1),u.getY()+(s.getY()-a.getY())/(d+1));if(!this.isValid(C))return this.isValid(T)?T:null;if(!this.isValid(T))return C;let R=this.transitionsBetween(m,C)+this.transitionsBetween(w,C),B=this.transitionsBetween(m,T)+this.transitionsBetween(w,T);return R>B?C:T}shiftToModuleCenter(r){let s=r[0],a=r[1],c=r[2],u=r[3],h=this.transitionsBetween(s,u)+1,d=this.transitionsBetween(c,u)+1,m=At.shiftPoint(s,a,d*4),w=At.shiftPoint(c,a,h*4);h=this.transitionsBetween(m,u)+1,d=this.transitionsBetween(w,u)+1,(h&1)===1&&(h+=1),(d&1)===1&&(d+=1);let C=(s.getX()+a.getX()+c.getX()+u.getX())/4,T=(s.getY()+a.getY()+c.getY()+u.getY())/4;s=At.moveAway(s,C,T),a=At.moveAway(a,C,T),c=At.moveAway(c,C,T),u=At.moveAway(u,C,T);let R,B;return m=At.shiftPoint(s,a,d*4),m=At.shiftPoint(m,u,h*4),R=At.shiftPoint(a,s,d*4),R=At.shiftPoint(R,c,h*4),w=At.shiftPoint(c,u,d*4),w=At.shiftPoint(w,a,h*4),B=At.shiftPoint(u,c,d*4),B=At.shiftPoint(B,s,h*4),[m,R,w,B]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,a,c,u,h,d){return Or.getInstance().sampleGrid(r,h,d,.5,.5,h-.5,.5,h-.5,d-.5,.5,d-.5,s.getX(),s.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(r,s){let a=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(s.getX()),h=Math.trunc(s.getY()),d=Math.abs(h-c)>Math.abs(u-a);if(d){let K=a;a=c,c=K,K=u,u=h,h=K}let m=Math.abs(u-a),w=Math.abs(h-c),C=-m/2,T=c<h?1:-1,R=a<u?1:-1,B=0,G=this.image.get(d?c:a,d?a:c);for(let K=a,$=c;K!==u;K+=R){let ne=this.image.get(d?$:K,d?K:$);if(ne!==G&&(B++,G=ne),C+=w,C>0){if($===h)break;$+=T,C-=m}}return B}}class Qe{constructor(){this.decoder=new Ls}decode(r,s=null){let a,c;if(s!=null&&s.has(Y.PURE_BARCODE)){const w=Qe.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(w),c=Qe.NO_POINTS}else{const w=new At(r.getBlackMatrix()).detect();a=this.decoder.decode(w.getBits()),c=w.getPoints()}const u=a.getRawBytes(),h=new ht(a.getText(),u,8*u.length,c,_e.DATA_MATRIX,X.currentTimeMillis()),d=a.getByteSegments();d!=null&&h.putMetadata(Ft.BYTE_SEGMENTS,d);const m=a.getECLevel();return m!=null&&h.putMetadata(Ft.ERROR_CORRECTION_LEVEL,m),h}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s==null||a==null)throw new re;const c=this.moduleSize(s,r);let u=s[1];const h=a[1];let d=s[0];const w=(a[0]-d+1)/c,C=(h-u+1)/c;if(w<=0||C<=0)throw new re;const T=c/2;u+=T,d+=T;const R=new He(w,C);for(let B=0;B<C;B++){const G=u+B*c;for(let K=0;K<w;K++)r.get(d+K*c,G)&&R.set(K,B)}return R}static moduleSize(r,s){const a=s.getWidth();let c=r[0];const u=r[1];for(;c<a&&s.get(c,u);)c++;if(c===a)throw new re;const h=c-r[0];if(h===0)throw new re;return h}}Qe.NO_POINTS=[];class mo extends Mn{constructor(r=500){super(new Qe,r)}}var wr;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(wr||(wr={}));class tt{constructor(r,s,a){this.value=r,this.stringValue=s,this.bits=a,tt.FOR_BITS.set(a,this),tt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return tt.L;case"M":return tt.M;case"Q":return tt.Q;case"H":return tt.H;default:throw new E(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof tt))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=tt.FOR_BITS.size)throw new A;return tt.FOR_BITS.get(r)}}tt.FOR_BITS=new Map,tt.FOR_VALUE=new Map,tt.L=new tt(wr.L,"L",1),tt.M=new tt(wr.M,"M",0),tt.Q=new tt(wr.Q,"Q",3),tt.H=new tt(wr.H,"H",2);class cn{constructor(r){this.errorCorrectionLevel=tt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return F.bitCount(r^s)}static decodeFormatInformation(r,s){const a=cn.doDecodeFormatInformation(r,s);return a!==null?a:cn.doDecodeFormatInformation(r^cn.FORMAT_INFO_MASK_QR,s^cn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of cn.FORMAT_INFO_DECODE_LOOKUP){const h=u[0];if(h===r||h===s)return new cn(u[1]);let d=cn.numBitsDiffering(r,h);d<a&&(c=u[1],a=d),r!==s&&(d=cn.numBitsDiffering(s,h),d<a&&(c=u[1],a=d))}return a<=3?new cn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof cn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}cn.FORMAT_INFO_MASK_QR=21522,cn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class J{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const a of s)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class k{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ae{constructor(r,s,...a){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();for(const d of h)c+=d.getCount()*(d.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new b;try{return this.getVersionForNumber((r-17)/4)}catch{throw new b}}static getVersionForNumber(r){if(r<1||r>40)throw new A;return Ae.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<Ae.VERSION_DECODE_INFO.length;c++){const u=Ae.VERSION_DECODE_INFO[c];if(u===r)return Ae.getVersionForNumber(c+7);const h=cn.numBitsDiffering(r,u);h<s&&(a=c+7,s=h)}return s<=3?Ae.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new He(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let h=0;h<a;h++)c===0&&(h===0||h===a-1)||c===a-1&&h===0||s.setRegion(this.alignmentPatternCenters[h]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}Ae.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ae.VERSIONS=[new Ae(1,new Int32Array(0),new J(7,new k(1,19)),new J(10,new k(1,16)),new J(13,new k(1,13)),new J(17,new k(1,9))),new Ae(2,Int32Array.from([6,18]),new J(10,new k(1,34)),new J(16,new k(1,28)),new J(22,new k(1,22)),new J(28,new k(1,16))),new Ae(3,Int32Array.from([6,22]),new J(15,new k(1,55)),new J(26,new k(1,44)),new J(18,new k(2,17)),new J(22,new k(2,13))),new Ae(4,Int32Array.from([6,26]),new J(20,new k(1,80)),new J(18,new k(2,32)),new J(26,new k(2,24)),new J(16,new k(4,9))),new Ae(5,Int32Array.from([6,30]),new J(26,new k(1,108)),new J(24,new k(2,43)),new J(18,new k(2,15),new k(2,16)),new J(22,new k(2,11),new k(2,12))),new Ae(6,Int32Array.from([6,34]),new J(18,new k(2,68)),new J(16,new k(4,27)),new J(24,new k(4,19)),new J(28,new k(4,15))),new Ae(7,Int32Array.from([6,22,38]),new J(20,new k(2,78)),new J(18,new k(4,31)),new J(18,new k(2,14),new k(4,15)),new J(26,new k(4,13),new k(1,14))),new Ae(8,Int32Array.from([6,24,42]),new J(24,new k(2,97)),new J(22,new k(2,38),new k(2,39)),new J(22,new k(4,18),new k(2,19)),new J(26,new k(4,14),new k(2,15))),new Ae(9,Int32Array.from([6,26,46]),new J(30,new k(2,116)),new J(22,new k(3,36),new k(2,37)),new J(20,new k(4,16),new k(4,17)),new J(24,new k(4,12),new k(4,13))),new Ae(10,Int32Array.from([6,28,50]),new J(18,new k(2,68),new k(2,69)),new J(26,new k(4,43),new k(1,44)),new J(24,new k(6,19),new k(2,20)),new J(28,new k(6,15),new k(2,16))),new Ae(11,Int32Array.from([6,30,54]),new J(20,new k(4,81)),new J(30,new k(1,50),new k(4,51)),new J(28,new k(4,22),new k(4,23)),new J(24,new k(3,12),new k(8,13))),new Ae(12,Int32Array.from([6,32,58]),new J(24,new k(2,92),new k(2,93)),new J(22,new k(6,36),new k(2,37)),new J(26,new k(4,20),new k(6,21)),new J(28,new k(7,14),new k(4,15))),new Ae(13,Int32Array.from([6,34,62]),new J(26,new k(4,107)),new J(22,new k(8,37),new k(1,38)),new J(24,new k(8,20),new k(4,21)),new J(22,new k(12,11),new k(4,12))),new Ae(14,Int32Array.from([6,26,46,66]),new J(30,new k(3,115),new k(1,116)),new J(24,new k(4,40),new k(5,41)),new J(20,new k(11,16),new k(5,17)),new J(24,new k(11,12),new k(5,13))),new Ae(15,Int32Array.from([6,26,48,70]),new J(22,new k(5,87),new k(1,88)),new J(24,new k(5,41),new k(5,42)),new J(30,new k(5,24),new k(7,25)),new J(24,new k(11,12),new k(7,13))),new Ae(16,Int32Array.from([6,26,50,74]),new J(24,new k(5,98),new k(1,99)),new J(28,new k(7,45),new k(3,46)),new J(24,new k(15,19),new k(2,20)),new J(30,new k(3,15),new k(13,16))),new Ae(17,Int32Array.from([6,30,54,78]),new J(28,new k(1,107),new k(5,108)),new J(28,new k(10,46),new k(1,47)),new J(28,new k(1,22),new k(15,23)),new J(28,new k(2,14),new k(17,15))),new Ae(18,Int32Array.from([6,30,56,82]),new J(30,new k(5,120),new k(1,121)),new J(26,new k(9,43),new k(4,44)),new J(28,new k(17,22),new k(1,23)),new J(28,new k(2,14),new k(19,15))),new Ae(19,Int32Array.from([6,30,58,86]),new J(28,new k(3,113),new k(4,114)),new J(26,new k(3,44),new k(11,45)),new J(26,new k(17,21),new k(4,22)),new J(26,new k(9,13),new k(16,14))),new Ae(20,Int32Array.from([6,34,62,90]),new J(28,new k(3,107),new k(5,108)),new J(26,new k(3,41),new k(13,42)),new J(30,new k(15,24),new k(5,25)),new J(28,new k(15,15),new k(10,16))),new Ae(21,Int32Array.from([6,28,50,72,94]),new J(28,new k(4,116),new k(4,117)),new J(26,new k(17,42)),new J(28,new k(17,22),new k(6,23)),new J(30,new k(19,16),new k(6,17))),new Ae(22,Int32Array.from([6,26,50,74,98]),new J(28,new k(2,111),new k(7,112)),new J(28,new k(17,46)),new J(30,new k(7,24),new k(16,25)),new J(24,new k(34,13))),new Ae(23,Int32Array.from([6,30,54,78,102]),new J(30,new k(4,121),new k(5,122)),new J(28,new k(4,47),new k(14,48)),new J(30,new k(11,24),new k(14,25)),new J(30,new k(16,15),new k(14,16))),new Ae(24,Int32Array.from([6,28,54,80,106]),new J(30,new k(6,117),new k(4,118)),new J(28,new k(6,45),new k(14,46)),new J(30,new k(11,24),new k(16,25)),new J(30,new k(30,16),new k(2,17))),new Ae(25,Int32Array.from([6,32,58,84,110]),new J(26,new k(8,106),new k(4,107)),new J(28,new k(8,47),new k(13,48)),new J(30,new k(7,24),new k(22,25)),new J(30,new k(22,15),new k(13,16))),new Ae(26,Int32Array.from([6,30,58,86,114]),new J(28,new k(10,114),new k(2,115)),new J(28,new k(19,46),new k(4,47)),new J(28,new k(28,22),new k(6,23)),new J(30,new k(33,16),new k(4,17))),new Ae(27,Int32Array.from([6,34,62,90,118]),new J(30,new k(8,122),new k(4,123)),new J(28,new k(22,45),new k(3,46)),new J(30,new k(8,23),new k(26,24)),new J(30,new k(12,15),new k(28,16))),new Ae(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new k(3,117),new k(10,118)),new J(28,new k(3,45),new k(23,46)),new J(30,new k(4,24),new k(31,25)),new J(30,new k(11,15),new k(31,16))),new Ae(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new k(7,116),new k(7,117)),new J(28,new k(21,45),new k(7,46)),new J(30,new k(1,23),new k(37,24)),new J(30,new k(19,15),new k(26,16))),new Ae(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new k(5,115),new k(10,116)),new J(28,new k(19,47),new k(10,48)),new J(30,new k(15,24),new k(25,25)),new J(30,new k(23,15),new k(25,16))),new Ae(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new k(13,115),new k(3,116)),new J(28,new k(2,46),new k(29,47)),new J(30,new k(42,24),new k(1,25)),new J(30,new k(23,15),new k(28,16))),new Ae(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new k(17,115)),new J(28,new k(10,46),new k(23,47)),new J(30,new k(10,24),new k(35,25)),new J(30,new k(19,15),new k(35,16))),new Ae(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new k(17,115),new k(1,116)),new J(28,new k(14,46),new k(21,47)),new J(30,new k(29,24),new k(19,25)),new J(30,new k(11,15),new k(46,16))),new Ae(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new k(13,115),new k(6,116)),new J(28,new k(14,46),new k(23,47)),new J(30,new k(44,24),new k(7,25)),new J(30,new k(59,16),new k(1,17))),new Ae(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new k(12,121),new k(7,122)),new J(28,new k(12,47),new k(26,48)),new J(30,new k(39,24),new k(14,25)),new J(30,new k(22,15),new k(41,16))),new Ae(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new k(6,121),new k(14,122)),new J(28,new k(6,47),new k(34,48)),new J(30,new k(46,24),new k(10,25)),new J(30,new k(2,15),new k(64,16))),new Ae(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new k(17,122),new k(4,123)),new J(28,new k(29,46),new k(14,47)),new J(30,new k(49,24),new k(10,25)),new J(30,new k(24,15),new k(46,16))),new Ae(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new k(4,122),new k(18,123)),new J(28,new k(13,46),new k(32,47)),new J(30,new k(48,24),new k(14,25)),new J(30,new k(42,15),new k(32,16))),new Ae(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new k(20,117),new k(4,118)),new J(28,new k(40,47),new k(7,48)),new J(30,new k(43,24),new k(22,25)),new J(30,new k(10,15),new k(67,16))),new Ae(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new k(19,118),new k(6,119)),new J(28,new k(18,47),new k(31,48)),new J(30,new k(34,24),new k(34,25)),new J(30,new k(20,15),new k(61,16)))];var Kt;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(Kt||(Kt={}));class Gn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let a=0;a<s;a++)for(let c=0;c<s;c++)this.isMasked(a,c)&&r.flip(c,a)}}Gn.values=new Map([[Kt.DATA_MASK_000,new Gn(Kt.DATA_MASK_000,(I,r)=>(I+r&1)===0)],[Kt.DATA_MASK_001,new Gn(Kt.DATA_MASK_001,(I,r)=>(I&1)===0)],[Kt.DATA_MASK_010,new Gn(Kt.DATA_MASK_010,(I,r)=>r%3===0)],[Kt.DATA_MASK_011,new Gn(Kt.DATA_MASK_011,(I,r)=>(I+r)%3===0)],[Kt.DATA_MASK_100,new Gn(Kt.DATA_MASK_100,(I,r)=>(Math.floor(I/2)+Math.floor(r/3)&1)===0)],[Kt.DATA_MASK_101,new Gn(Kt.DATA_MASK_101,(I,r)=>I*r%6===0)],[Kt.DATA_MASK_110,new Gn(Kt.DATA_MASK_110,(I,r)=>I*r%6<3)],[Kt.DATA_MASK_111,new Gn(Kt.DATA_MASK_111,(I,r)=>(I+r+I*r%3&1)===0)]]);class Bs{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new b;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let a=0;const c=s-7;for(let u=s-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=s-8;u<s;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=cn.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new b}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return Ae.getVersionForNumber(s);let a=0;const c=r-11;for(let h=5;h>=0;h--)for(let d=r-9;d>=c;d--)a=this.copyBit(d,h,a);let u=Ae.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;a=0;for(let h=5;h>=0;h--)for(let d=r-9;d>=c;d--)a=this.copyBit(h,d,a);if(u=Ae.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new b}copyBit(r,s,a){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),a=Gn.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=s.buildFunctionPattern();let h=!0;const d=new Uint8Array(s.getTotalCodewords());let m=0,w=0,C=0;for(let T=c-1;T>0;T-=2){T===6&&T--;for(let R=0;R<c;R++){const B=h?c-1-R:R;for(let G=0;G<2;G++)u.get(T-G,B)||(C++,w<<=1,this.bitMatrix.get(T-G,B)&&(w|=1),C===8&&(d[m++]=w,C=0,w=0))}h=!h}if(m!==s.getTotalCodewords())throw new b;return d}remask(){if(this.parsedFormatInfo===null)return;const r=Gn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,a=r.getWidth();s<a;s++)for(let c=s+1,u=r.getHeight();c<u;c++)r.get(s,c)!==r.get(c,s)&&(r.flip(c,s),r.flip(s,c))}}class Mr{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,a){if(r.length!==s.getTotalCodewords())throw new A;const c=s.getECBlocksForLevel(a);let u=0;const h=c.getECBlocks();for(const G of h)u+=G.getCount();const d=new Array(u);let m=0;for(const G of h)for(let K=0;K<G.getCount();K++){const $=G.getDataCodewords(),ne=c.getECCodewordsPerBlock()+$;d[m++]=new Mr($,new Uint8Array(ne))}const w=d[0].codewords.length;let C=d.length-1;for(;C>=0&&d[C].codewords.length!==w;)C--;C++;const T=w-c.getECCodewordsPerBlock();let R=0;for(let G=0;G<T;G++)for(let K=0;K<m;K++)d[K].codewords[G]=r[R++];for(let G=C;G<m;G++)d[G].codewords[T]=r[R++];const B=d[0].codewords.length;for(let G=T;G<B;G++)for(let K=0;K<m;K++){const $=K<C?G:G+1;d[K].codewords[$]=r[R++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Fn;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(Fn||(Fn={}));class ve{constructor(r,s,a,c){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=c,ve.FOR_BITS.set(c,this),ve.FOR_VALUE.set(r,this)}static forBits(r){const s=ve.FOR_BITS.get(r);if(s===void 0)throw new A;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof ve))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}ve.FOR_BITS=new Map,ve.FOR_VALUE=new Map,ve.TERMINATOR=new ve(Fn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ve.NUMERIC=new ve(Fn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ve.ALPHANUMERIC=new ve(Fn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ve.STRUCTURED_APPEND=new ve(Fn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ve.BYTE=new ve(Fn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ve.ECI=new ve(Fn.ECI,"ECI",Int32Array.from([0,0,0]),7),ve.KANJI=new ve(Fn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ve.FNC1_FIRST_POSITION=new ve(Fn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ve.FNC1_SECOND_POSITION=new ve(Fn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ve.HANZI=new ve(Fn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class yt{static decode(r,s,a,c){const u=new yr(r);let h=new V;const d=new Array;let m=-1,w=-1;try{let C=null,T=!1,R;do{if(u.available()<4)R=ve.TERMINATOR;else{const B=u.readBits(4);R=ve.forBits(B)}switch(R){case ve.TERMINATOR:break;case ve.FNC1_FIRST_POSITION:case ve.FNC1_SECOND_POSITION:T=!0;break;case ve.STRUCTURED_APPEND:if(u.available()<16)throw new b;m=u.readBits(8),w=u.readBits(8);break;case ve.ECI:const B=yt.parseECIValue(u);if(C=O.getCharacterSetECIByValue(B),C===null)throw new b;break;case ve.HANZI:const G=u.readBits(4),K=u.readBits(R.getCharacterCountBits(s));G===yt.GB2312_SUBSET&&yt.decodeHanziSegment(u,h,K);break;default:const $=u.readBits(R.getCharacterCountBits(s));switch(R){case ve.NUMERIC:yt.decodeNumericSegment(u,h,$);break;case ve.ALPHANUMERIC:yt.decodeAlphanumericSegment(u,h,$,T);break;case ve.BYTE:yt.decodeByteSegment(u,h,$,C,d,c);break;case ve.KANJI:yt.decodeKanjiSegment(u,h,$);break;default:throw new b}break}}while(R!==ve.TERMINATOR)}catch{throw new b}return new Fi(r,h.toString(),d.length===0?null:d,a===null?null:a.toString(),m,w)}static decodeHanziSegment(r,s,a){if(a*13>r.available())throw new b;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const h=r.readBits(13);let d=h/96<<8&4294967295|h%96;d<959?d+=41377:d+=42657,c[u]=d>>8&255,c[u+1]=d&255,u+=2,a--}try{s.append(H.decode(c,W.GB2312))}catch(h){throw new b(h)}}static decodeKanjiSegment(r,s,a){if(a*13>r.available())throw new b;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const h=r.readBits(13);let d=h/192<<8&4294967295|h%192;d<7936?d+=33088:d+=49472,c[u]=d>>8,c[u+1]=d,u+=2,a--}try{s.append(H.decode(c,W.SHIFT_JIS))}catch(h){throw new b(h)}}static decodeByteSegment(r,s,a,c,u,h){if(8*a>r.available())throw new b;const d=new Uint8Array(a);for(let w=0;w<a;w++)d[w]=r.readBits(8);let m;c===null?m=W.guessEncoding(d,h):m=c.getName();try{s.append(H.decode(d,m))}catch(w){throw new b(w)}u.push(d)}static toAlphaNumericChar(r){if(r>=yt.ALPHANUMERIC_CHARS.length)throw new b;return yt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,a,c){const u=s.length();for(;a>1;){if(r.available()<11)throw new b;const h=r.readBits(11);s.append(yt.toAlphaNumericChar(Math.floor(h/45))),s.append(yt.toAlphaNumericChar(h%45)),a-=2}if(a===1){if(r.available()<6)throw new b;s.append(yt.toAlphaNumericChar(r.readBits(6)))}if(c)for(let h=u;h<s.length();h++)s.charAt(h)==="%"&&(h<s.length()-1&&s.charAt(h+1)==="%"?s.deleteCharAt(h+1):s.setCharAt(h,String.fromCharCode(29)))}static decodeNumericSegment(r,s,a){for(;a>=3;){if(r.available()<10)throw new b;const c=r.readBits(10);if(c>=1e3)throw new b;s.append(yt.toAlphaNumericChar(Math.floor(c/100))),s.append(yt.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(yt.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(r.available()<7)throw new b;const c=r.readBits(7);if(c>=100)throw new b;s.append(yt.toAlphaNumericChar(Math.floor(c/10))),s.append(yt.toAlphaNumericChar(c%10))}else if(a===1){if(r.available()<4)throw new b;const c=r.readBits(4);if(c>=10)throw new b;s.append(yt.toAlphaNumericChar(c))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=r.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=r.readBits(16);return(s&31)<<16&4294967295|a}throw new b}}yt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",yt.GB2312_SUBSET=1;class Na{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class oc{constructor(){this.rsDecoder=new Ps(Ke.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(He.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const a=new Bs(r);let c=null;try{return this.decodeBitMatrixParser(a,s)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,s);return u.setOther(new Na(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,s){const a=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),h=Mr.getDataBlocks(u,a,c);let d=0;for(const C of h)d+=C.getNumDataCodewords();const m=new Uint8Array(d);let w=0;for(const C of h){const T=C.getCodewords(),R=C.getNumDataCodewords();this.correctErrors(T,R);for(let B=0;B<R;B++)m[w++]=T[B]}return yt.decode(m,a,c,s)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new M}for(let c=0;c<s;c++)r[c]=a[c]}}class Qr extends ge{constructor(r,s,a){super(r,s),this.estimatedModuleSize=a}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=(this.getX()+s)/2,u=(this.getY()+r)/2,h=(this.estimatedModuleSize+a)/2;return new Qr(c,u,h)}}class xo{constructor(r,s,a,c,u,h,d){this.image=r,this.startX=s,this.startY=a,this.width=c,this.height=u,this.moduleSize=h,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,a=this.width,c=r+a,u=this.startY+s/2,h=new Int32Array(3),d=this.image;for(let m=0;m<s;m++){const w=u+(m&1?-Math.floor((m+1)/2):Math.floor((m+1)/2));h[0]=0,h[1]=0,h[2]=0;let C=r;for(;C<c&&!d.get(C,w);)C++;let T=0;for(;C<c;){if(d.get(C,w))if(T===1)h[1]++;else if(T===2){if(this.foundPatternCross(h)){const R=this.handlePossibleCenter(h,w,C);if(R!==null)return R}h[0]=h[2],h[1]=1,h[2]=0,T=1}else h[++T]++;else T===1&&T++,h[T]++;C++}if(this.foundPatternCross(h)){const R=this.handlePossibleCenter(h,w,c);if(R!==null)return R}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,a=s/2;for(let c=0;c<3;c++)if(Math.abs(s-r[c])>=a)return!1;return!0}crossCheckVertical(r,s,a,c){const u=this.image,h=u.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let m=r;for(;m>=0&&u.get(s,m)&&d[1]<=a;)d[1]++,m--;if(m<0||d[1]>a)return NaN;for(;m>=0&&!u.get(s,m)&&d[0]<=a;)d[0]++,m--;if(d[0]>a)return NaN;for(m=r+1;m<h&&u.get(s,m)&&d[1]<=a;)d[1]++,m++;if(m===h||d[1]>a)return NaN;for(;m<h&&!u.get(s,m)&&d[2]<=a;)d[2]++,m++;if(d[2]>a)return NaN;const w=d[0]+d[1]+d[2];return 5*Math.abs(w-c)>=2*c?NaN:this.foundPatternCross(d)?xo.centerFromEnd(d,m):NaN}handlePossibleCenter(r,s,a){const c=r[0]+r[1]+r[2],u=xo.centerFromEnd(r,a),h=this.crossCheckVertical(s,u,2*r[1],c);if(!isNaN(h)){const d=(r[0]+r[1]+r[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(d,h,u))return w.combineEstimate(h,u,d);const m=new Qr(u,h,d);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class Ra extends ge{constructor(r,s,a,c){super(r,s),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=this.count+1,u=(this.count*this.getX()+s)/c,h=(this.count*this.getY()+r)/c,d=(this.count*this.estimatedModuleSize+a)/c;return new Ra(u,h,d,c)}}class Sh{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class gt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(Y.TRY_HARDER)!==void 0,a=r!=null&&r.get(Y.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),h=c.getWidth();let d=Math.floor(3*u/(4*gt.MAX_MODULES));(d<gt.MIN_SKIP||s)&&(d=gt.MIN_SKIP);let m=!1;const w=new Int32Array(5);for(let T=d-1;T<u&&!m;T+=d){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let R=0;for(let B=0;B<h;B++)if(c.get(B,T))(R&1)===1&&R++,w[R]++;else if(R&1)w[R]++;else if(R===4)if(gt.foundPatternCross(w)){if(this.handlePossibleCenter(w,T,B,a)===!0)if(d=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const K=this.findRowSkip();K>w[2]&&(T+=K-w[2]-d,B=h-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,R=3;continue}R=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,R=3;else w[++R]++;gt.foundPatternCross(w)&&this.handlePossibleCenter(w,T,h,a)===!0&&(d=w[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const C=this.selectBestPatterns();return ge.orderBestPatterns(C),new Sh(C)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const h=r[u];if(h===0)return!1;s+=h}if(s<7)return!1;const a=s/7,c=a/2;return Math.abs(a-r[0])<c&&Math.abs(a-r[1])<c&&Math.abs(3*a-r[2])<3*c&&Math.abs(a-r[3])<c&&Math.abs(a-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,a,c){const u=this.getCrossCheckStateCount();let h=0;const d=this.image;for(;r>=h&&s>=h&&d.get(s-h,r-h);)u[2]++,h++;if(r<h||s<h)return!1;for(;r>=h&&s>=h&&!d.get(s-h,r-h)&&u[1]<=a;)u[1]++,h++;if(r<h||s<h||u[1]>a)return!1;for(;r>=h&&s>=h&&d.get(s-h,r-h)&&u[0]<=a;)u[0]++,h++;if(u[0]>a)return!1;const m=d.getHeight(),w=d.getWidth();for(h=1;r+h<m&&s+h<w&&d.get(s+h,r+h);)u[2]++,h++;if(r+h>=m||s+h>=w)return!1;for(;r+h<m&&s+h<w&&!d.get(s+h,r+h)&&u[3]<a;)u[3]++,h++;if(r+h>=m||s+h>=w||u[3]>=a)return!1;for(;r+h<m&&s+h<w&&d.get(s+h,r+h)&&u[4]<a;)u[4]++,h++;if(u[4]>=a)return!1;const C=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(C-c)<2*c&&gt.foundPatternCross(u)}crossCheckVertical(r,s,a,c){const u=this.image,h=u.getHeight(),d=this.getCrossCheckStateCount();let m=r;for(;m>=0&&u.get(s,m);)d[2]++,m--;if(m<0)return NaN;for(;m>=0&&!u.get(s,m)&&d[1]<=a;)d[1]++,m--;if(m<0||d[1]>a)return NaN;for(;m>=0&&u.get(s,m)&&d[0]<=a;)d[0]++,m--;if(d[0]>a)return NaN;for(m=r+1;m<h&&u.get(s,m);)d[2]++,m++;if(m===h)return NaN;for(;m<h&&!u.get(s,m)&&d[3]<a;)d[3]++,m++;if(m===h||d[3]>=a)return NaN;for(;m<h&&u.get(s,m)&&d[4]<a;)d[4]++,m++;if(d[4]>=a)return NaN;const w=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(w-c)>=2*c?NaN:gt.foundPatternCross(d)?gt.centerFromEnd(d,m):NaN}crossCheckHorizontal(r,s,a,c){const u=this.image,h=u.getWidth(),d=this.getCrossCheckStateCount();let m=r;for(;m>=0&&u.get(m,s);)d[2]++,m--;if(m<0)return NaN;for(;m>=0&&!u.get(m,s)&&d[1]<=a;)d[1]++,m--;if(m<0||d[1]>a)return NaN;for(;m>=0&&u.get(m,s)&&d[0]<=a;)d[0]++,m--;if(d[0]>a)return NaN;for(m=r+1;m<h&&u.get(m,s);)d[2]++,m++;if(m===h)return NaN;for(;m<h&&!u.get(m,s)&&d[3]<a;)d[3]++,m++;if(m===h||d[3]>=a)return NaN;for(;m<h&&u.get(m,s)&&d[4]<a;)d[4]++,m++;if(d[4]>=a)return NaN;const w=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(w-c)>=c?NaN:gt.foundPatternCross(d)?gt.centerFromEnd(d,m):NaN}handlePossibleCenter(r,s,a,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let h=gt.centerFromEnd(r,a),d=this.crossCheckVertical(s,Math.floor(h),r[2],u);if(!isNaN(d)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(d),r[2],u),!isNaN(h)&&(!c||this.crossCheckDiagonal(Math.floor(d),Math.floor(h),r[2],u)))){const m=u/7;let w=!1;const C=this.possibleCenters;for(let T=0,R=C.length;T<R;T++){const B=C[T];if(B.aboutEquals(m,d,h)){C[T]=B.combineEstimate(d,h,m),w=!0;break}}if(!w){const T=new Ra(h,d,m);C.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=gt.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const a=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=gt.CENTER_QUORUM&&(r++,s+=h.getEstimatedModuleSize());if(r<3)return!1;const c=s/a;let u=0;for(const h of this.possibleCenters)u+=Math.abs(h.getEstimatedModuleSize()-c);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new re;const s=this.possibleCenters;let a;if(r>3){let c=0,u=0;for(const m of this.possibleCenters){const w=m.getEstimatedModuleSize();c+=w,u+=w*w}a=c/r;let h=Math.sqrt(u/r-a*a);s.sort((m,w)=>{const C=Math.abs(w.getEstimatedModuleSize()-a),T=Math.abs(m.getEstimatedModuleSize()-a);return C<T?-1:C>T?1:0});const d=Math.max(.2*a,h);for(let m=0;m<s.length&&s.length>3;m++){const w=s[m];Math.abs(w.getEstimatedModuleSize()-a)>d&&(s.splice(m,1),m--)}}if(s.length>3){let c=0;for(const u of s)c+=u.getEstimatedModuleSize();a=c/s.length,s.sort((u,h)=>{if(h.getCount()===u.getCount()){const d=Math.abs(h.getEstimatedModuleSize()-a),m=Math.abs(u.getEstimatedModuleSize()-a);return d<m?1:d>m?-1:0}else return h.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}gt.CENTER_QUORUM=2,gt.MIN_SKIP=3,gt.MAX_MODULES=57;class Fs{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(Y.NEED_RESULT_POINT_CALLBACK);const a=new gt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const s=r.getTopLeft(),a=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(s,a,c);if(u<1)throw new re("No pattern found in proccess finder.");const h=Fs.computeDimension(s,a,c,u),d=Ae.getProvisionalVersionForDimension(h),m=d.getDimensionForVersion()-7;let w=null;if(d.getAlignmentPatternCenters().length>0){const B=a.getX()-s.getX()+c.getX(),G=a.getY()-s.getY()+c.getY(),K=1-3/m,$=Math.floor(s.getX()+K*(B-s.getX())),ne=Math.floor(s.getY()+K*(G-s.getY()));for(let ue=4;ue<=16;ue<<=1)try{w=this.findAlignmentInRegion(u,$,ne,ue);break}catch(he){if(!(he instanceof re))throw he}}const C=Fs.createTransform(s,a,c,w,h),T=Fs.sampleGrid(this.image,C,h);let R;return w===null?R=[c,s,a]:R=[c,s,a,w],new mi(T,R)}static createTransform(r,s,a,c,u){const h=u-3.5;let d,m,w,C;return c!==null?(d=c.getX(),m=c.getY(),w=h-3,C=w):(d=s.getX()-r.getX()+a.getX(),m=s.getY()-r.getY()+a.getY(),w=h,C=h),gn.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,w,C,3.5,h,r.getX(),r.getY(),s.getX(),s.getY(),d,m,a.getX(),a.getY())}static sampleGrid(r,s,a){return Or.getInstance().sampleGridWithTransform(r,a,a,s)}static computeDimension(r,s,a,c){const u=Ue.round(ge.distance(r,s)/c),h=Ue.round(ge.distance(r,a)/c);let d=Math.floor((u+h)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new re("Dimensions could be not found.")}return d}calculateModuleSize(r,s,a){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,a,c){let u=this.sizeOfBlackWhiteBlackRun(r,s,a,c),h=1,d=r-(a-r);d<0?(h=r/(r-d),d=0):d>=this.image.getWidth()&&(h=(this.image.getWidth()-1-r)/(d-r),d=this.image.getWidth()-1);let m=Math.floor(s-(c-s)*h);return h=1,m<0?(h=s/(s-m),m=0):m>=this.image.getHeight()&&(h=(this.image.getHeight()-1-s)/(m-s),m=this.image.getHeight()-1),d=Math.floor(r+(d-r)*h),u+=this.sizeOfBlackWhiteBlackRun(r,s,d,m),u-1}sizeOfBlackWhiteBlackRun(r,s,a,c){const u=Math.abs(c-s)>Math.abs(a-r);if(u){let B=r;r=s,s=B,B=a,a=c,c=B}const h=Math.abs(a-r),d=Math.abs(c-s);let m=-h/2;const w=r<a?1:-1,C=s<c?1:-1;let T=0;const R=a+w;for(let B=r,G=s;B!==R;B+=w){const K=u?G:B,$=u?B:G;if(T===1===this.image.get(K,$)){if(T===2)return Ue.distance(B,G,r,s);T++}if(m+=d,m>0){if(G===c)break;G+=C,m-=h}}return T===2?Ue.distance(a+w,c,r,s):NaN}findAlignmentInRegion(r,s,a,c){const u=Math.floor(c*r),h=Math.max(0,s-u),d=Math.min(this.image.getWidth()-1,s+u);if(d-h<r*3)throw new re("Alignment top exceeds estimated module size.");const m=Math.max(0,a-u),w=Math.min(this.image.getHeight()-1,a+u);if(w-m<r*3)throw new re("Alignment bottom exceeds estimated module size.");return new xo(this.image,h,m,d-h,w-m,r,this.resultPointCallback).find()}}class Er{constructor(){this.decoder=new oc}getDecoder(){return this.decoder}decode(r,s){let a,c;if(s!=null&&s.get(Y.PURE_BARCODE)!==void 0){const m=Er.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(m,s),c=Er.NO_POINTS}else{const m=new Fs(r.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(m.getBits(),s),c=m.getPoints()}a.getOther()instanceof Na&&a.getOther().applyMirroredCorrection(c);const u=new ht(a.getText(),a.getRawBytes(),void 0,c,_e.QR_CODE,void 0),h=a.getByteSegments();h!==null&&u.putMetadata(Ft.BYTE_SEGMENTS,h);const d=a.getECLevel();return d!==null&&u.putMetadata(Ft.ERROR_CORRECTION_LEVEL,d),a.hasStructuredAppend()&&(u.putMetadata(Ft.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(Ft.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s===null||a===null)throw new re;const c=this.moduleSize(s,r);let u=s[1],h=a[1],d=s[0],m=a[0];if(d>=m||u>=h)throw new re;if(h-u!==m-d&&(m=d+(h-u),m>=r.getWidth()))throw new re;const w=Math.round((m-d+1)/c),C=Math.round((h-u+1)/c);if(w<=0||C<=0)throw new re;if(C!==w)throw new re;const T=Math.floor(c/2);u+=T,d+=T;const R=d+Math.floor((w-1)*c)-m;if(R>0){if(R>T)throw new re;d-=R}const B=u+Math.floor((C-1)*c)-h;if(B>0){if(B>T)throw new re;u-=B}const G=new He(w,C);for(let K=0;K<C;K++){const $=u+Math.floor(K*c);for(let ne=0;ne<w;ne++)r.get(d+Math.floor(ne*c),$)&&G.set(ne,K)}return G}static moduleSize(r,s){const a=s.getHeight(),c=s.getWidth();let u=r[0],h=r[1],d=!0,m=0;for(;u<c&&h<a;){if(d!==s.get(u,h)){if(++m===5)break;d=!d}u++,h++}if(u===c||h===a)throw new re;return(u-r[0])/7}}Er.NO_POINTS=new Array;class Se{PDF417Common(){}static getBitCountSum(r){return Ue.sum(r)}static toIntArray(r){if(r==null||!r.length)return Se.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let a=0;for(const c of r)s[a++]=c;return s}static getCodeword(r){const s=L.binarySearch(Se.SYMBOL_TABLE,r&262143);return s<0?-1:(Se.CODEWORD_TABLE[s]-1)%Se.NUMBER_OF_CODEWORDS}}Se.NUMBER_OF_CODEWORDS=929,Se.MAX_CODEWORDS_IN_BARCODE=Se.NUMBER_OF_CODEWORDS-1,Se.MIN_ROWS_IN_BARCODE=3,Se.MAX_ROWS_IN_BARCODE=90,Se.MODULES_IN_CODEWORD=17,Se.MODULES_IN_STOP_PATTERN=18,Se.BARS_IN_MODULE=8,Se.EMPTY_INT_ARRAY=new Int32Array([]),Se.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Se.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ac{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class De{static detectMultiple(r,s,a){let c=r.getBlackMatrix(),u=De.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=De.detect(a,c)),new ac(c,u)}static detect(r,s){const a=new Array;let c=0,u=0,h=!1;for(;c<s.getHeight();){const d=De.findVertices(s,c,u);if(d[0]==null&&d[3]==null){if(!h)break;h=!1,u=0;for(const m of a)m[1]!=null&&(c=Math.trunc(Math.max(c,m[1].getY()))),m[3]!=null&&(c=Math.max(c,Math.trunc(m[3].getY())));c+=De.ROW_STEP;continue}if(h=!0,a.push(d),!r)break;d[2]!=null?(u=Math.trunc(d[2].getX()),c=Math.trunc(d[2].getY())):(u=Math.trunc(d[4].getX()),c=Math.trunc(d[4].getY()))}return a}static findVertices(r,s,a){const c=r.getHeight(),u=r.getWidth(),h=new Array(8);return De.copyToResult(h,De.findRowsWithPattern(r,c,u,s,a,De.START_PATTERN),De.INDEXES_START_PATTERN),h[4]!=null&&(a=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY())),De.copyToResult(h,De.findRowsWithPattern(r,c,u,s,a,De.STOP_PATTERN),De.INDEXES_STOP_PATTERN),h}static copyToResult(r,s,a){for(let c=0;c<a.length;c++)r[a[c]]=s[c]}static findRowsWithPattern(r,s,a,c,u,h){const d=new Array(4);let m=!1;const w=new Int32Array(h.length);for(;c<s;c+=De.ROW_STEP){let T=De.findGuardPattern(r,u,c,a,!1,h,w);if(T!=null){for(;c>0;){const R=De.findGuardPattern(r,u,--c,a,!1,h,w);if(R!=null)T=R;else{c++;break}}d[0]=new ge(T[0],c),d[1]=new ge(T[1],c),m=!0;break}}let C=c+1;if(m){let T=0,R=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;C<s;C++){const B=De.findGuardPattern(r,R[0],C,a,!1,h,w);if(B!=null&&Math.abs(R[0]-B[0])<De.MAX_PATTERN_DRIFT&&Math.abs(R[1]-B[1])<De.MAX_PATTERN_DRIFT)R=B,T=0;else{if(T>De.SKIPPED_ROW_COUNT_MAX)break;T++}}C-=T+1,d[2]=new ge(R[0],C),d[3]=new ge(R[1],C)}return C-c<De.BARCODE_MIN_HEIGHT&&L.fill(d,null),d}static findGuardPattern(r,s,a,c,u,h,d){L.fillWithin(d,0,d.length,0);let m=s,w=0;for(;r.get(m,a)&&m>0&&w++<De.MAX_PIXEL_DRIFT;)m--;let C=m,T=0,R=h.length;for(let B=u;C<c;C++)if(r.get(C,a)!==B)d[T]++;else{if(T===R-1){if(De.patternMatchVariance(d,h,De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE)return new Int32Array([m,C]);m+=d[0]+d[1],X.arraycopy(d,2,d,0,T-1),d[T-1]=0,d[T]=0,T--}else T++;d[T]=1,B=!B}return T===R-1&&De.patternMatchVariance(d,h,De.MAX_INDIVIDUAL_VARIANCE)<De.MAX_AVG_VARIANCE?new Int32Array([m,C-1]):null}static patternMatchVariance(r,s,a){let c=r.length,u=0,h=0;for(let w=0;w<c;w++)u+=r[w],h+=s[w];if(u<h)return 1/0;let d=u/h;a*=d;let m=0;for(let w=0;w<c;w++){let C=r[w],T=s[w]*d,R=C>T?C-T:T-C;if(R>a)return 1/0;m+=R}return m/u}}De.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),De.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),De.MAX_AVG_VARIANCE=.42,De.MAX_INDIVIDUAL_VARIANCE=.8,De.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),De.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),De.MAX_PIXEL_DRIFT=3,De.MAX_PATTERN_DRIFT=5,De.SKIPPED_ROW_COUNT_MAX=25,De.ROW_STEP=5,De.BARCODE_MIN_HEIGHT=10;class Ot{constructor(r,s){if(s.length===0)throw new A;this.field=r;let a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),X.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let s=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)s=this.field.add(this.field.multiply(r,s),this.coefficients[c]);return s}add(r){if(!this.field.equals(r.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){let h=s;s=a,a=h}let c=new Int32Array(a.length),u=a.length-s.length;X.arraycopy(a,0,c,0,u);for(let h=u;h<a.length;h++)c[h]=this.field.add(s[h-u],a[h]);return new Ot(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new A("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof Ot?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new A("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new Ot(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,h=new Int32Array(a+u-1);for(let d=0;d<a;d++){let m=s[d];for(let w=0;w<u;w++)h[d+w]=this.field.add(h[d+w],this.field.multiply(m,c[w]))}return new Ot(this.field,h)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new Ot(this.field,s)}multiplyScalar(r){if(r===0)return new Ot(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],r);return new Ot(this.field,a)}multiplyByMonomial(r,s){if(r<0)throw new A;if(s===0)return new Ot(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+r);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new Ot(this.field,c)}toString(){let r=new V;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(s===0||a!==1)&&r.append(a),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class lc{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new A;return this.logTable[r]}inverse(r){if(r===0)throw new Os;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class Vs extends lc{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let c=0;c<r;c++)this.expTable[c]=a,a=a*s%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new Ot(this,new Int32Array([0])),this.one=new Ot(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new A;if(s===0)return this.zero;let a=new Int32Array(r+1);return a[0]=s,new Ot(this,a)}}Vs.PDF417_GF=new Vs(Se.NUMBER_OF_CODEWORDS,3);class Ct{constructor(){this.field=Vs.PDF417_GF}decode(r,s,a){let c=new Ot(this.field,r),u=new Int32Array(s),h=!1;for(let G=s;G>0;G--){let K=c.evaluateAt(this.field.exp(G));u[s-G]=K,K!==0&&(h=!0)}if(!h)return 0;let d=this.field.getOne();if(a!=null)for(const G of a){let K=this.field.exp(r.length-1-G),$=new Ot(this.field,new Int32Array([this.field.subtract(0,K),1]));d=d.multiply($)}let m=new Ot(this.field,u),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),m,s),C=w[0],T=w[1],R=this.findErrorLocations(C),B=this.findErrorMagnitudes(T,C,R);for(let G=0;G<R.length;G++){let K=r.length-1-this.field.log(R[G]);if(K<0)throw M.getChecksumInstance();r[K]=this.field.subtract(r[K],B[G])}return R.length}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){let R=r;r=s,s=R}let c=r,u=s,h=this.field.getZero(),d=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let R=c,B=h;if(c=u,h=d,c.isZero())throw M.getChecksumInstance();u=R;let G=this.field.getZero(),K=c.getCoefficient(c.getDegree()),$=this.field.inverse(K);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let ne=u.getDegree()-c.getDegree(),ue=this.field.multiply(u.getCoefficient(u.getDegree()),$);G=G.add(this.field.buildMonomial(ne,ue)),u=u.subtract(c.multiplyByMonomial(ne,ue))}d=G.multiply(h).subtract(B).negative()}let m=d.getCoefficient(0);if(m===0)throw M.getChecksumInstance();let w=this.field.inverse(m),C=d.multiply(w),T=u.multiply(w);return[C,T]}findErrorLocations(r){let s=r.getDegree(),a=new Int32Array(s),c=0;for(let u=1;u<this.field.getSize()&&c<s;u++)r.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==s)throw M.getChecksumInstance();return a}findErrorMagnitudes(r,s,a){let c=s.getDegree(),u=new Int32Array(c);for(let w=1;w<=c;w++)u[c-w]=this.field.multiply(w,s.getCoefficient(w));let h=new Ot(this.field,u),d=a.length,m=new Int32Array(d);for(let w=0;w<d;w++){let C=this.field.inverse(a[w]),T=this.field.subtract(0,r.evaluateAt(C)),R=this.field.inverse(h.evaluateAt(C));m[w]=this.field.multiply(T,R)}return m}}class wi{constructor(r,s,a,c,u){r instanceof wi?this.constructor_2(r):this.constructor_1(r,s,a,c,u)}constructor_1(r,s,a,c,u){const h=s==null||a==null,d=c==null||u==null;if(h&&d)throw new re;h?(s=new ge(0,c.getY()),a=new ge(0,u.getY())):d&&(c=new ge(r.getWidth()-1,s.getY()),u=new ge(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=s,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new wi(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,a){let c=this.topLeft,u=this.bottomLeft,h=this.topRight,d=this.bottomRight;if(r>0){let m=a?this.topLeft:this.topRight,w=Math.trunc(m.getY()-r);w<0&&(w=0);let C=new ge(m.getX(),w);a?c=C:h=C}if(s>0){let m=a?this.bottomLeft:this.bottomRight,w=Math.trunc(m.getY()+s);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let C=new ge(m.getX(),w);a?u=C:d=C}return new wi(this.image,c,u,h,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Nh{constructor(r,s,a,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Wi{constructor(){this.buffer=""}static form(r,s){let a=-1;function c(h,d,m,w,C,T){if(h==="%%")return"%";if(s[++a]===void 0)return;h=w?parseInt(w.substr(1)):void 0;let R=C?parseInt(C.substr(1)):void 0,B;switch(T){case"s":B=s[a];break;case"c":B=s[a][0];break;case"f":B=parseFloat(s[a]).toFixed(h);break;case"p":B=parseFloat(s[a]).toPrecision(h);break;case"e":B=parseFloat(s[a]).toExponential(h);break;case"x":B=parseInt(s[a]).toString(R||16);break;case"d":B=parseFloat(parseInt(s[a],R||10).toPrecision(h)).toFixed(0);break}B=typeof B=="object"?JSON.stringify(B):(+B).toString(R);let G=parseInt(m),K=m&&m[0]+""=="0"?"0":" ";for(;B.length<G;)B=d!==void 0?B+K:K+B;return B}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...s){this.buffer+=Wi.form(r,s)}toString(){return this.buffer}}class Xi{constructor(r){this.boundingBox=new wi(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let a=1;a<Xi.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(r)-a;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(r)+a,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new Wi;let s=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return r.toString()}}Xi.MAX_NEARBY_DISTANCE=5;class Ki{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return Se.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class Us extends Xi{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),m=-1,w=1,C=0;for(let T=h;T<d;T++){if(s[T]==null)continue;let R=s[T],B=R.getRowNumber()-m;if(B===0)C++;else if(B===1)w=Math.max(w,C),C=1,m=R.getRowNumber();else if(B<0||R.getRowNumber()>=r.getRowCount()||B>T)s[T]=null;else{let G;w>2?G=(w-2)*B:G=B;let K=G>=T;for(let $=1;$<=G&&!K;$++)K=s[T-$]!=null;K?s[T]=null:(m=R.getRowNumber(),C=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),d=this.getCodewords(),m=-1;for(let w=u;w<h;w++){if(d[w]==null)continue;let C=d[w];C.setRowNumberAsRowIndicatorColumn();let T=C.getRowNumber()-m;T===0||(T===1?m=C.getRowNumber():C.getRowNumber()>=r.getRowCount()?d[w]=null:m=C.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new Ki,a=new Ki,c=new Ki,u=new Ki;for(let d of r){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let m=d.getValue()%30,w=d.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:a.setValue(m*3+1);break;case 1:u.setValue(m/3),c.setValue(m%3);break;case 2:s.setValue(m+1);break}}if(s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<Se.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>Se.MAX_ROWS_IN_BARCODE)return null;let h=new Nh(s.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,h),h}removeIncorrectCodewords(r,s){for(let a=0;a<r.length;a++){let c=r[a];if(r[a]==null)continue;let u=c.getValue()%30,h=c.getRowNumber();if(h>s.getRowCount()){r[a]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[a]=null);break;case 2:u+1!==s.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Wn{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Se.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&s[a]!=null&&r[a].getRowNumber()===s[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(r[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let h=this.barcodeColumnCount+1;h>0&&u<this.ADJUST_ROW_NUMBER_SKIP;h--){let d=this.detectionResultColumns[h].getCodewords()[a];d!=null&&(u=Wn.adjustRowNumberIfValid(c,u,d),d.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let h=1;h<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;h++){let d=this.detectionResultColumns[h].getCodewords()[a];d!=null&&(u=Wn.adjustRowNumberIfValid(c,u,d),d.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,a){if(!this.detectionResultColumns[r-1])return;let c=a[s],u=this.detectionResultColumns[r-1].getCodewords(),h=u;this.detectionResultColumns[r+1]!=null&&(h=this.detectionResultColumns[r+1].getCodewords());let d=new Array(14);d[2]=u[s],d[3]=h[s],s>0&&(d[0]=a[s-1],d[4]=u[s-1],d[5]=h[s-1]),s>1&&(d[8]=a[s-2],d[10]=u[s-2],d[11]=h[s-2]),s<a.length-1&&(d[1]=a[s+1],d[6]=u[s+1],d[7]=h[s+1]),s<a.length-2&&(d[9]=a[s+2],d[12]=u[s+2],d[13]=h[s+2]);for(let m of d)if(Wn.adjustRowNumber(c,m))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Wi;for(let a=0;a<r.getCodewords().length;a++){s.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class qi{constructor(r,s,a,c){this.rowNumber=qi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==qi.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}qi.BARCODE_ROW_UNKNOWN=-1;class Sn{static initialize(){for(let r=0;r<Se.SYMBOL_TABLE.length;r++){let s=Se.SYMBOL_TABLE[r],a=s&1;for(let c=0;c<Se.BARS_IN_MODULE;c++){let u=0;for(;(s&1)===a;)u+=1,s>>=1;a=s&1,Sn.RATIOS_TABLE[r]||(Sn.RATIOS_TABLE[r]=new Array(Se.BARS_IN_MODULE)),Sn.RATIOS_TABLE[r][Se.BARS_IN_MODULE-c-1]=Math.fround(u/Se.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=Sn.getDecodedCodewordValue(Sn.sampleBitCounts(r));return s!==-1?s:Sn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=Ue.sum(r),a=new Int32Array(Se.BARS_IN_MODULE),c=0,u=0;for(let h=0;h<Se.MODULES_IN_CODEWORD;h++){let d=s/(2*Se.MODULES_IN_CODEWORD)+h*s/Se.MODULES_IN_CODEWORD;u+r[c]<=d&&(u+=r[c],c++),a[c]++}return a}static getDecodedCodewordValue(r){let s=Sn.getBitValue(r);return Se.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let a=0;a<r.length;a++)for(let c=0;c<r[a];c++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=Ue.sum(r),a=new Array(Se.BARS_IN_MODULE);if(s>1)for(let h=0;h<a.length;h++)a[h]=Math.fround(r[h]/s);let c=Ht.MAX_VALUE,u=-1;this.bSymbolTableReady||Sn.initialize();for(let h=0;h<Sn.RATIOS_TABLE.length;h++){let d=0,m=Sn.RATIOS_TABLE[h];for(let w=0;w<Se.BARS_IN_MODULE;w++){let C=Math.fround(m[w]-a[w]);if(d+=Math.fround(C*C),d>=c)break}d<c&&(c=d,u=Se.SYMBOL_TABLE[h])}return u}}Sn.bSymbolTableReady=!1,Sn.RATIOS_TABLE=new Array(Se.SYMBOL_TABLE.length).map(I=>new Array(Se.BARS_IN_MODULE));class Yi{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class ba{static parseLong(r,s=void 0){return parseInt(r,s)}}class yo extends p{}yo.kind="NullPointerException";class wo{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,a){if(r==null)throw new yo;if(s<0||s>r.length||a<0||s+a>r.length||s+a<0)throw new q;if(a===0)return;for(let c=0;c<a;c++)this.write(r[s+c])}flush(){}close(){}}class cc extends p{}class Eo extends wo{constructor(r=32){if(super(),this.count=0,r<0)throw new A("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new cc;a=F.MAX_VALUE}this.buf=L.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,a){if(s<0||s>r.length||a<0||s+a-r.length>0)throw new q;this.ensureCapacity(this.count+a),X.arraycopy(r,s,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return L.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var ot;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ot||(ot={}));function Da(){if(typeof window<"u")return window.BigInt||null;if(typeof Ma<"u")return Ma.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let $r;function Lr(I){if(typeof $r>"u"&&($r=Da()),$r===null)throw new Error("BigInt is not supported!");return $r(I)}function uc(){let I=[];I[0]=Lr(1);let r=Lr(900);I[1]=r;for(let s=2;s<16;s++)I[s]=I[s-1]*r;return I}class te{static decode(r,s){let a=new V(""),c=O.ISO8859_1;a.enableDecoding(c);let u=1,h=r[u++],d=new Yi;for(;u<r[0];){switch(h){case te.TEXT_COMPACTION_MODE_LATCH:u=te.textCompaction(r,u,a);break;case te.BYTE_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:u=te.byteCompaction(h,r,c,u,a);break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u++]);break;case te.NUMERIC_COMPACTION_MODE_LATCH:u=te.numericCompaction(r,u,a);break;case te.ECI_CHARSET:O.getCharacterSetECIByValue(r[u++]);break;case te.ECI_GENERAL_PURPOSE:u+=2;break;case te.ECI_USER_DEFINED:u++;break;case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=te.decodeMacroBlock(r,u,d);break;case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:throw new b;default:u--,u=te.textCompaction(r,u,a);break}if(u<r.length)h=r[u++];else throw b.getFormatInstance()}if(a.length()===0)throw b.getFormatInstance();let m=new Fi(null,a.toString(),null,s);return m.setOther(d),m}static decodeMacroBlock(r,s,a){if(s+te.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw b.getFormatInstance();let c=new Int32Array(te.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<te.NUMBER_OF_SEQUENCE_CODEWORDS;d++,s++)c[d]=r[s];a.setSegmentIndex(F.parseInt(te.decodeBase900toBase10(c,te.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new V;s=te.textCompaction(r,s,u),a.setFileId(u.toString());let h=-1;for(r[s]===te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=s+1);s<r[0];)switch(r[s]){case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case te.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new V;s=te.textCompaction(r,s+1,d),a.setFileName(d.toString());break;case te.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new V;s=te.textCompaction(r,s+1,m),a.setSender(m.toString());break;case te.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new V;s=te.textCompaction(r,s+1,w),a.setAddressee(w.toString());break;case te.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let C=new V;s=te.numericCompaction(r,s+1,C),a.setSegmentCount(F.parseInt(C.toString()));break;case te.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let T=new V;s=te.numericCompaction(r,s+1,T),a.setTimestamp(ba.parseLong(T.toString()));break;case te.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let R=new V;s=te.numericCompaction(r,s+1,R),a.setChecksum(F.parseInt(R.toString()));break;case te.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let B=new V;s=te.numericCompaction(r,s+1,B),a.setFileSize(ba.parseLong(B.toString()));break;default:throw b.getFormatInstance()}break;case te.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw b.getFormatInstance()}if(h!==-1){let d=s-h;a.isLastSegment()&&d--,a.setOptionalData(L.copyOfRange(r,h,h+d))}return s}static textCompaction(r,s,a){let c=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),h=0,d=!1;for(;s<r[0]&&!d;){let m=r[s++];if(m<te.TEXT_COMPACTION_MODE_LATCH)c[h]=m/30,c[h+1]=m%30,h+=2;else switch(m){case te.TEXT_COMPACTION_MODE_LATCH:c[h++]=te.TEXT_COMPACTION_MODE_LATCH;break;case te.BYTE_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.NUMERIC_COMPACTION_MODE_LATCH:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:s--,d=!0;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[h]=te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=r[s++],u[h]=m,h++;break}}return te.decodeTextCompaction(c,u,h,a),s}static decodeTextCompaction(r,s,a,c){let u=ot.ALPHA,h=ot.ALPHA,d=0;for(;d<a;){let m=r[d],w="";switch(u){case ot.ALPHA:if(m<26)w=String.fromCharCode(65+m);else switch(m){case 26:w=" ";break;case te.LL:u=ot.LOWER;break;case te.ML:u=ot.MIXED;break;case te.PS:h=u,u=ot.PUNCT_SHIFT;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case te.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.LOWER:if(m<26)w=String.fromCharCode(97+m);else switch(m){case 26:w=" ";break;case te.AS:h=u,u=ot.ALPHA_SHIFT;break;case te.ML:u=ot.MIXED;break;case te.PS:h=u,u=ot.PUNCT_SHIFT;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case te.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.MIXED:if(m<te.PL)w=te.MIXED_CHARS[m];else switch(m){case te.PL:u=ot.PUNCT;break;case 26:w=" ";break;case te.LL:u=ot.LOWER;break;case te.AL:u=ot.ALPHA;break;case te.PS:h=u,u=ot.PUNCT_SHIFT;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case te.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.PUNCT:if(m<te.PAL)w=te.PUNCT_CHARS[m];else switch(m){case te.PAL:u=ot.ALPHA;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case te.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.ALPHA_SHIFT:if(u=h,m<26)w=String.fromCharCode(65+m);else switch(m){case 26:w=" ";break;case te.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break;case ot.PUNCT_SHIFT:if(u=h,m<te.PAL)w=te.PUNCT_CHARS[m];else switch(m){case te.PAL:u=ot.ALPHA;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case te.TEXT_COMPACTION_MODE_LATCH:u=ot.ALPHA;break}break}w!==""&&c.append(w),d++}}static byteCompaction(r,s,a,c,u){let h=new Eo,d=0,m=0,w=!1;switch(r){case te.BYTE_COMPACTION_MODE_LATCH:let C=new Int32Array(6),T=s[c++];for(;c<s[0]&&!w;)switch(C[d++]=T,m=900*m+T,T=s[c++],T){case te.TEXT_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH:case te.NUMERIC_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:c--,w=!0;break;default:if(d%5===0&&d>0){for(let R=0;R<6;++R)h.write(Number(Lr(m)>>Lr(8*(5-R))));m=0,d=0}break}c===s[0]&&T<te.TEXT_COMPACTION_MODE_LATCH&&(C[d++]=T);for(let R=0;R<d;R++)h.write(C[R]);break;case te.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!w;){let R=s[c++];if(R<te.TEXT_COMPACTION_MODE_LATCH)d++,m=900*m+R;else switch(R){case te.TEXT_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH:case te.NUMERIC_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:c--,w=!0;break}if(d%5===0&&d>0){for(let B=0;B<6;++B)h.write(Number(Lr(m)>>Lr(8*(5-B))));m=0,d=0}}break}return u.append(H.decode(h.toByteArray(),a)),c}static numericCompaction(r,s,a){let c=0,u=!1,h=new Int32Array(te.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let d=r[s++];if(s===r[0]&&(u=!0),d<te.TEXT_COMPACTION_MODE_LATCH)h[c]=d,c++;else switch(d){case te.TEXT_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(c%te.MAX_NUMERIC_CODEWORDS===0||d===te.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(te.decodeBase900toBase10(h,c)),c=0)}return s}static decodeBase900toBase10(r,s){let a=Lr(0);for(let u=0;u<s;u++)a+=te.EXP900[s-u-1]*Lr(r[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new b;return c.substring(1)}}te.TEXT_COMPACTION_MODE_LATCH=900,te.BYTE_COMPACTION_MODE_LATCH=901,te.NUMERIC_COMPACTION_MODE_LATCH=902,te.BYTE_COMPACTION_MODE_LATCH_6=924,te.ECI_USER_DEFINED=925,te.ECI_GENERAL_PURPOSE=926,te.ECI_CHARSET=927,te.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,te.MACRO_PDF417_TERMINATOR=922,te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,te.MAX_NUMERIC_CODEWORDS=15,te.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,te.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,te.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,te.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,te.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,te.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,te.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,te.PL=25,te.LL=27,te.AS=27,te.ML=28,te.AL=28,te.PS=29,te.PAL=29,te.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,te.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",te.EXP900=Da()?uc():[],te.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Me{constructor(){}static decode(r,s,a,c,u,h,d){let m=new wi(r,s,a,c,u),w=null,C=null,T;for(let G=!0;;G=!1){if(s!=null&&(w=Me.getRowIndicatorColumn(r,m,s,!0,h,d)),c!=null&&(C=Me.getRowIndicatorColumn(r,m,c,!1,h,d)),T=Me.merge(w,C),T==null)throw re.getNotFoundInstance();let K=T.getBoundingBox();if(G&&K!=null&&(K.getMinY()<m.getMinY()||K.getMaxY()>m.getMaxY()))m=K;else break}T.setBoundingBox(m);let R=T.getBarcodeColumnCount()+1;T.setDetectionResultColumn(0,w),T.setDetectionResultColumn(R,C);let B=w!=null;for(let G=1;G<=R;G++){let K=B?G:R-G;if(T.getDetectionResultColumn(K)!==void 0)continue;let $;K===0||K===R?$=new Us(m,K===0):$=new Xi(m),T.setDetectionResultColumn(K,$);let ne=-1,ue=ne;for(let he=m.getMinY();he<=m.getMaxY();he++){if(ne=Me.getStartColumn(T,K,he,B),ne<0||ne>m.getMaxX()){if(ue===-1)continue;ne=ue}let ae=Me.detectCodeword(r,m.getMinX(),m.getMaxX(),B,ne,he,h,d);ae!=null&&($.setCodeword(he,ae),ue=ne,h=Math.min(h,ae.getWidth()),d=Math.max(d,ae.getWidth()))}}return Me.createDecoderResult(T)}static merge(r,s){if(r==null&&s==null)return null;let a=Me.getBarcodeMetadata(r,s);if(a==null)return null;let c=wi.merge(Me.adjustBoundingBox(r),Me.adjustBoundingBox(s));return new Wn(a,c)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let a=Me.getMax(s),c=0;for(let d of s)if(c+=a-d,d>0)break;let u=r.getCodewords();for(let d=0;c>0&&u[d]==null;d++)c--;let h=0;for(let d=s.length-1;d>=0&&(h+=a-s[d],!(s[d]>0));d--);for(let d=u.length-1;h>0&&u[d]==null;d--)h--;return r.getBoundingBox().addMissingRows(c,h,r.isLeft())}static getMax(r){let s=-1;for(let a of r)s=Math.max(s,a);return s}static getBarcodeMetadata(r,s){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(r,s,a,c,u,h){let d=new Us(s,c);for(let m=0;m<2;m++){let w=m===0?1:-1,C=Math.trunc(Math.trunc(a.getX()));for(let T=Math.trunc(Math.trunc(a.getY()));T<=s.getMaxY()&&T>=s.getMinY();T+=w){let R=Me.detectCodeword(r,0,r.getWidth(),c,C,T,u,h);R!=null&&(d.setCodeword(T,R),c?C=R.getStartX():C=R.getEndX())}}return d}static adjustCodewordCount(r,s){let a=s[0][1],c=a.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Me.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>Se.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(r){let s=Me.createBarcodeMatrix(r);Me.adjustCodewordCount(r,s);let a=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],h=new Array;for(let m=0;m<r.getBarcodeRowCount();m++)for(let w=0;w<r.getBarcodeColumnCount();w++){let C=s[m][w+1].getValue(),T=m*r.getBarcodeColumnCount()+w;C.length===0?a.push(T):C.length===1?c[T]=C[0]:(h.push(T),u.push(C))}let d=new Array(u.length);for(let m=0;m<d.length;m++)d[m]=u[m];return Me.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,Se.toIntArray(a),Se.toIntArray(h),d)}static createDecoderResultFromAmbiguousValues(r,s,a,c,u){let h=new Int32Array(c.length),d=100;for(;d-- >0;){for(let m=0;m<h.length;m++)s[c[m]]=u[m][h[m]];try{return Me.decodeCodewords(s,r,a)}catch(m){if(!(m instanceof M))throw m}if(h.length===0)throw M.getChecksumInstance();for(let m=0;m<h.length;m++)if(h[m]<u[m].length-1){h[m]++;break}else if(h[m]=0,m===h.length-1)throw M.getChecksumInstance()}throw M.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let u=0;u<s[c].length;u++)s[c][u]=new Ki;let a=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let h=u.getRowNumber();if(h>=0){if(h>=s.length)continue;s[h][a].setValue(u.getValue())}}}a++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,a,c){let u=c?1:-1,h=null;if(Me.isValidBarcodeColumn(r,s-u)&&(h=r.getDetectionResultColumn(s-u).getCodeword(a)),h!=null)return c?h.getEndX():h.getStartX();if(h=r.getDetectionResultColumn(s).getCodewordNearby(a),h!=null)return c?h.getStartX():h.getEndX();if(Me.isValidBarcodeColumn(r,s-u)&&(h=r.getDetectionResultColumn(s-u).getCodewordNearby(a)),h!=null)return c?h.getEndX():h.getStartX();let d=0;for(;Me.isValidBarcodeColumn(r,s-u);){s-=u;for(let m of r.getDetectionResultColumn(s).getCodewords())if(m!=null)return(c?m.getEndX():m.getStartX())+u*d*(m.getEndX()-m.getStartX());d++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,a,c,u,h,d,m){u=Me.adjustCodewordStartColumn(r,s,a,c,u,h);let w=Me.getModuleBitCount(r,s,a,c,u,h);if(w==null)return null;let C,T=Ue.sum(w);if(c)C=u+T;else{for(let G=0;G<w.length/2;G++){let K=w[G];w[G]=w[w.length-1-G],w[w.length-1-G]=K}C=u,u=C-T}if(!Me.checkCodewordSkew(T,d,m))return null;let R=Sn.getDecodedValue(w),B=Se.getCodeword(R);return B===-1?null:new qi(u,C,Me.getCodewordBucketNumber(R),B)}static getModuleBitCount(r,s,a,c,u,h){let d=u,m=new Int32Array(8),w=0,C=c?1:-1,T=c;for(;(c?d<a:d>=s)&&w<m.length;)r.get(d,h)===T?(m[w]++,d+=C):(w++,T=!T);return w===m.length||d===(c?a:s)&&w===m.length-1?m:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,a,c,u,h){let d=u,m=c?-1:1;for(let w=0;w<2;w++){for(;(c?d>=s:d<a)&&c===r.get(d,h);){if(Math.abs(u-d)>Me.CODEWORD_SKEW_SIZE)return u;d+=m}m=-m,c=!c}return d}static checkCodewordSkew(r,s,a){return s-Me.CODEWORD_SKEW_SIZE<=r&&r<=a+Me.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,a){if(r.length===0)throw b.getFormatInstance();let c=1<<s+1,u=Me.correctErrors(r,a,c);Me.verifyCodewordCount(r,c);let h=te.decode(r,""+s);return h.setErrorsCorrected(u),h.setErasures(a.length),h}static correctErrors(r,s,a){if(s!=null&&s.length>a/2+Me.MAX_ERRORS||a<0||a>Me.MAX_EC_CODEWORDS)throw M.getChecksumInstance();return Me.errorCorrection.decode(r,a,s)}static verifyCodewordCount(r,s){if(r.length<4)throw b.getFormatInstance();let a=r[0];if(a>r.length)throw b.getFormatInstance();if(a===0)if(s<r.length)r[0]=r.length-s;else throw b.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),a=0,c=s.length-1;for(;!((r&1)!==a&&(a=r&1,c--,c<0));)s[c]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Me.getCodewordBucketNumber(Me.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new Wi;for(let a=0;a<r.length;a++){s.format("Row %2d: ",a);for(let c=0;c<r[a].length;c++){let u=r[a][c];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}Me.CODEWORD_SKEW_SIZE=2,Me.MAX_ERRORS=3,Me.MAX_EC_CODEWORDS=512,Me.errorCorrection=new Ct;class qt{decode(r,s=null){let a=qt.decode(r,s,!1);if(a==null||a.length===0||a[0]==null)throw re.getNotFoundInstance();return a[0]}decodeMultiple(r,s=null){try{return qt.decode(r,s,!0)}catch(a){throw a instanceof b||a instanceof M?re.getNotFoundInstance():a}}static decode(r,s,a){const c=new Array,u=De.detectMultiple(r,s,a);for(const h of u.getPoints()){const d=Me.decode(u.getBits(),h[4],h[5],h[6],h[7],qt.getMinCodewordWidth(h),qt.getMaxCodewordWidth(h)),m=new ht(d.getText(),d.getRawBytes(),void 0,h,_e.PDF_417);m.putMetadata(Ft.ERROR_CORRECTION_LEVEL,d.getECLevel());const w=d.getOther();w!=null&&m.putMetadata(Ft.PDF417_EXTRA_METADATA,w),c.push(m)}return c.map(h=>h)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?F.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(qt.getMaxWidth(r[0],r[4]),qt.getMaxWidth(r[6],r[2])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN),Math.max(qt.getMaxWidth(r[1],r[5]),qt.getMaxWidth(r[7],r[3])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(qt.getMinWidth(r[0],r[4]),qt.getMinWidth(r[6],r[2])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN),Math.min(qt.getMinWidth(r[1],r[5]),qt.getMinWidth(r[7],r[3])*Se.MODULES_IN_CODEWORD/Se.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ei extends p{}Ei.kind="ReaderException";class Oa{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(Y.TRY_HARDER)===!0,a=i(r)?null:r.get(Y.POSSIBLE_FORMATS),c=new Array;if(!i(a)){const u=a.some(h=>h===_e.UPC_A||h===_e.UPC_E||h===_e.EAN_13||h===_e.EAN_8||h===_e.CODABAR||h===_e.CODE_39||h===_e.CODE_93||h===_e.CODE_128||h===_e.ITF||h===_e.RSS_14||h===_e.RSS_EXPANDED);u&&!s&&c.push(new yi(r,this.verbose)),a.includes(_e.QR_CODE)&&c.push(new Er),a.includes(_e.DATA_MATRIX)&&c.push(new Qe),a.includes(_e.AZTEC)&&c.push(new ho),a.includes(_e.PDF_417)&&c.push(new qt),u&&s&&c.push(new yi(r,this.verbose))}c.length===0&&(s||c.push(new yi(r,this.verbose)),c.push(new Er),c.push(new Qe),c.push(new ho),c.push(new qt),s&&c.push(new yi(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Ei("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(a){if(a instanceof Ei)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class hc extends Mn{constructor(r=null,s=500){const a=new Oa;a.setHints(r),super(a,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class _i extends Mn{constructor(r=500){super(new qt,r)}}class fc extends Mn{constructor(r=500){super(new Er,r)}}var _o;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(_o||(_o={}));var Vt=_o;class Ao{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new In(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let a=s[s.length-1];const c=this.field;for(let u=s.length;u<=r;u++){const h=a.multiply(new In(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));s.push(h),a=h}}return s[r]}encode(r,s){if(s===0)throw new A("No error correction bytes");const a=r.length-s;if(a<=0)throw new A("No data bytes provided");const c=this.buildGenerator(s),u=new Int32Array(a);X.arraycopy(r,0,u,0,a);let h=new In(this.field,u);h=h.multiplyByMonomial(s,1);const m=h.divide(c)[1].getCoefficients(),w=s-m.length;for(let C=0;C<w;C++)r[a+C]=0;X.arraycopy(m,0,r,a+w,m.length)}}class pt{constructor(){}static applyMaskPenaltyRule1(r){return pt.applyMaskPenaltyRule1Internal(r,!0)+pt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let h=0;h<u-1;h++){const d=a[h];for(let m=0;m<c-1;m++){const w=d[m];w===d[m+1]&&w===a[h+1][m]&&w===a[h+1][m+1]&&s++}}return pt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let h=0;h<u;h++)for(let d=0;d<c;d++){const m=a[h];d+6<c&&m[d]===1&&m[d+1]===0&&m[d+2]===1&&m[d+3]===1&&m[d+4]===1&&m[d+5]===0&&m[d+6]===1&&(pt.isWhiteHorizontal(m,d-4,d)||pt.isWhiteHorizontal(m,d+7,d+11))&&s++,h+6<u&&a[h][d]===1&&a[h+1][d]===0&&a[h+2][d]===1&&a[h+3][d]===1&&a[h+4][d]===1&&a[h+5][d]===0&&a[h+6][d]===1&&(pt.isWhiteVertical(a,d,h-4,h)||pt.isWhiteVertical(a,d,h+7,h+11))&&s++}return s*pt.N3}static isWhiteHorizontal(r,s,a){s=Math.max(s,0),a=Math.min(a,r.length);for(let c=s;c<a;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,s,a,c){a=Math.max(a,0),c=Math.min(c,r.length);for(let u=a;u<c;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let m=0;m<u;m++){const w=a[m];for(let C=0;C<c;C++)w[C]===1&&s++}const h=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-h)*10/h)*pt.N4}static getDataMaskBit(r,s,a){let c,u;switch(r){case 0:c=a+s&1;break;case 1:c=a&1;break;case 2:c=s%3;break;case 3:c=(a+s)%3;break;case 4:c=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:u=a*s,c=(u&1)+u%3;break;case 6:u=a*s,c=(u&1)+u%3&1;break;case 7:u=a*s,c=u%3+(a+s&1)&1;break;default:throw new A("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,s){let a=0;const c=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),h=r.getArray();for(let d=0;d<c;d++){let m=0,w=-1;for(let C=0;C<u;C++){const T=s?h[d][C]:h[C][d];T===w?m++:(m>=5&&(a+=pt.N1+(m-5)),m=1,w=T)}m>=5&&(a+=pt.N1+(m-5))}return a}}pt.N1=3,pt.N2=3,pt.N3=40,pt.N4=10;class un{constructor(r,s){this.width=r,this.height=s;const a=new Array(s);for(let c=0;c!==s;c++)a[c]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,a){this.bytes[s][r]=a}setBoolean(r,s,a){this.bytes[s][r]=a?1:0}clear(r){for(const s of this.bytes)L.fill(s,r)}equals(r){if(!(r instanceof un))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],h=s.bytes[a];for(let d=0,m=this.width;d<m;++d)if(u[d]!==h[d])return!1}return!0}toString(){const r=new V;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s];for(let u=0,h=this.width;u<h;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Zr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new V;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Zr.NUM_MASK_PATTERNS}}Zr.NUM_MASK_PATTERNS=8;class at extends p{}at.kind="WriterException";class Ce{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,a,c,u){Ce.clearMatrix(u),Ce.embedBasicPatterns(a,u),Ce.embedTypeInfo(s,c,u),Ce.maybeEmbedVersionInfo(a,u),Ce.embedDataBits(r,c,u)}static embedBasicPatterns(r,s){Ce.embedPositionDetectionPatternsAndSeparators(s),Ce.embedDarkDotAtLeftBottomCorner(s),Ce.maybeEmbedPositionAdjustmentPatterns(r,s),Ce.embedTimingPatterns(s)}static embedTypeInfo(r,s,a){const c=new Z;Ce.makeTypeInfoBits(r,s,c);for(let u=0,h=c.getSize();u<h;++u){const d=c.get(c.getSize()-1-u),m=Ce.TYPE_INFO_COORDINATES[u],w=m[0],C=m[1];if(a.setBoolean(w,C,d),u<8){const T=a.getWidth()-u-1,R=8;a.setBoolean(T,R,d)}else{const R=a.getHeight()-7+(u-8);a.setBoolean(8,R,d)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const a=new Z;Ce.makeVersionInfoBits(r,a);let c=6*3-1;for(let u=0;u<6;++u)for(let h=0;h<3;++h){const d=a.get(c);c--,s.setBoolean(u,s.getHeight()-11+h,d),s.setBoolean(s.getHeight()-11+h,u,d)}}static embedDataBits(r,s,a){let c=0,u=-1,h=a.getWidth()-1,d=a.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);d>=0&&d<a.getHeight();){for(let m=0;m<2;++m){const w=h-m;if(!Ce.isEmpty(a.get(w,d)))continue;let C;c<r.getSize()?(C=r.get(c),++c):C=!1,s!==255&&pt.getDataMaskBit(s,w,d)&&(C=!C),a.setBoolean(w,d,C)}d+=u}u=-u,d+=u,h-=2}if(c!==r.getSize())throw new at("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-F.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new A("0 polynomial");const a=Ce.findMSBSet(s);for(r<<=a-1;Ce.findMSBSet(r)>=a;)r^=s<<Ce.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,s,a){if(!Zr.isValidMaskPattern(s))throw new at("Invalid mask pattern");const c=r.getBits()<<3|s;a.appendBits(c,5);const u=Ce.calculateBCHCode(c,Ce.TYPE_INFO_POLY);a.appendBits(u,10);const h=new Z;if(h.appendBits(Ce.TYPE_INFO_MASK_PATTERN,15),a.xor(h),a.getSize()!==15)throw new at("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const a=Ce.calculateBCHCode(r.getVersionNumber(),Ce.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new at("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const a=(s+1)%2;Ce.isEmpty(r.get(s,6))&&r.setNumber(s,6,a),Ce.isEmpty(r.get(6,s))&&r.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new at;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,a){for(let c=0;c<8;++c){if(!Ce.isEmpty(a.get(r+c,s)))throw new at;a.setNumber(r+c,s,0)}}static embedVerticalSeparationPattern(r,s,a){for(let c=0;c<7;++c){if(!Ce.isEmpty(a.get(r,s+c)))throw new at;a.setNumber(r,s+c,0)}}static embedPositionAdjustmentPattern(r,s,a){for(let c=0;c<5;++c){const u=Ce.POSITION_ADJUSTMENT_PATTERN[c];for(let h=0;h<5;++h)a.setNumber(r+h,s+c,u[h])}}static embedPositionDetectionPattern(r,s,a){for(let c=0;c<7;++c){const u=Ce.POSITION_DETECTION_PATTERN[c];for(let h=0;h<7;++h)a.setNumber(r+h,s+c,u[h])}}static embedPositionDetectionPatternsAndSeparators(r){const s=Ce.POSITION_DETECTION_PATTERN[0].length;Ce.embedPositionDetectionPattern(0,0,r),Ce.embedPositionDetectionPattern(r.getWidth()-s,0,r),Ce.embedPositionDetectionPattern(0,r.getWidth()-s,r);const a=8;Ce.embedHorizontalSeparationPattern(0,a-1,r),Ce.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),Ce.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const c=7;Ce.embedVerticalSeparationPattern(c,0,r),Ce.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),Ce.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,c=Ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,h=c.length;u!==h;u++){const d=c[u];if(d>=0)for(let m=0;m!==h;m++){const w=c[m];w>=0&&Ce.isEmpty(s.get(w,d))&&Ce.embedPositionAdjustmentPattern(w-2,d-2,s)}}}}Ce.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ce.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ce.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ce.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ce.VERSION_INFO_POLY=7973,Ce.TYPE_INFO_POLY=1335,Ce.TYPE_INFO_MASK_PATTERN=21522;class g{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class _{constructor(){}static calculateMaskPenalty(r){return pt.applyMaskPenaltyRule1(r)+pt.applyMaskPenaltyRule2(r)+pt.applyMaskPenaltyRule3(r)+pt.applyMaskPenaltyRule4(r)}static encode(r,s,a=null){let c=_.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(Vt.CHARACTER_SET)!==void 0;u&&(c=a.get(Vt.CHARACTER_SET).toString());const h=this.chooseMode(r,c),d=new Z;if(h===ve.BYTE&&(u||_.DEFAULT_BYTE_MODE_ENCODING!==c)){const he=O.getCharacterSetECIByName(c);he!==void 0&&this.appendECI(he,d)}this.appendModeInfo(h,d);const m=new Z;this.appendBytes(r,h,m,c);let w;if(a!==null&&a.get(Vt.QR_VERSION)!==void 0){const he=Number.parseInt(a.get(Vt.QR_VERSION).toString(),10);w=Ae.getVersionForNumber(he);const ae=this.calculateBitsNeeded(h,d,m,w);if(!this.willFit(ae,w,s))throw new at("Data too big for requested version")}else w=this.recommendVersion(s,h,d,m);const C=new Z;C.appendBitArray(d);const T=h===ve.BYTE?m.getSizeInBytes():r.length;this.appendLengthInfo(T,w,h,C),C.appendBitArray(m);const R=w.getECBlocksForLevel(s),B=w.getTotalCodewords()-R.getTotalECCodewords();this.terminateBits(B,C);const G=this.interleaveWithECBytes(C,w.getTotalCodewords(),B,R.getNumBlocks()),K=new Zr;K.setECLevel(s),K.setMode(h),K.setVersion(w);const $=w.getDimensionForVersion(),ne=new un($,$),ue=this.chooseMaskPattern(G,s,w,ne);return K.setMaskPattern(ue),Ce.buildMatrix(G,s,w,ue,ne),K.setMatrix(ne),K}static recommendVersion(r,s,a,c){const u=this.calculateBitsNeeded(s,a,c,Ae.getVersionForNumber(1)),h=this.chooseVersion(u,r),d=this.calculateBitsNeeded(s,a,c,h);return this.chooseVersion(d,r)}static calculateBitsNeeded(r,s,a,c){return s.getSize()+r.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(r){return r<_.ALPHANUMERIC_TABLE.length?_.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(O.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return ve.KANJI;let a=!1,c=!1;for(let u=0,h=r.length;u<h;++u){const d=r.charAt(u);if(_.isDigit(d))a=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)c=!0;else return ve.BYTE}return c?ve.ALPHANUMERIC:a?ve.NUMERIC:ve.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=H.encode(r,O.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=s[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,a,c){let u=Number.MAX_SAFE_INTEGER,h=-1;for(let d=0;d<Zr.NUM_MASK_PATTERNS;d++){Ce.buildMatrix(r,s,a,d,c);let m=this.calculateMaskPenalty(c);m<u&&(u=m,h=d)}return h}static chooseVersion(r,s){for(let a=1;a<=40;a++){const c=Ae.getVersionForNumber(a);if(_.willFit(r,c,s))return c}throw new at("Data too big")}static willFit(r,s,a){const c=s.getTotalCodewords(),h=s.getECBlocksForLevel(a).getTotalECCodewords(),d=c-h,m=(r+7)/8;return d>=m}static terminateBits(r,s){const a=r*8;if(s.getSize()>a)throw new at("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let h=0;h<4&&s.getSize()<a;++h)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let h=c;h<8;h++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let h=0;h<u;++h)s.appendBits(h&1?17:236,8);if(s.getSize()!==a)throw new at("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,a,c,u,h){if(c>=a)throw new at("Block ID too large");const d=r%a,m=a-d,w=Math.floor(r/a),C=w+1,T=Math.floor(s/a),R=T+1,B=w-T,G=C-R;if(B!==G)throw new at("EC bytes mismatch");if(a!==m+d)throw new at("RS blocks mismatch");if(r!==(T+B)*m+(R+G)*d)throw new at("Total bytes mismatch");c<m?(u[0]=T,h[0]=B):(u[0]=R,h[0]=G)}static interleaveWithECBytes(r,s,a,c){if(r.getSizeInBytes()!==a)throw new at("Number of bits and data bytes does not match");let u=0,h=0,d=0;const m=new Array;for(let C=0;C<c;++C){const T=new Int32Array(1),R=new Int32Array(1);_.getNumDataBytesAndNumECBytesForBlockID(s,a,c,C,T,R);const B=T[0],G=new Uint8Array(B);r.toBytes(8*u,G,0,B);const K=_.generateECBytes(G,R[0]);m.push(new g(G,K)),h=Math.max(h,B),d=Math.max(d,K.length),u+=T[0]}if(a!==u)throw new at("Data bytes does not match offset");const w=new Z;for(let C=0;C<h;++C)for(const T of m){const R=T.getDataBytes();C<R.length&&w.appendBits(R[C],8)}for(let C=0;C<d;++C)for(const T of m){const R=T.getErrorCorrectionBytes();C<R.length&&w.appendBits(R[C],8)}if(s!==w.getSizeInBytes())throw new at("Interleaving error: "+s+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(r,s){const a=r.length,c=new Int32Array(a+s);for(let h=0;h<a;h++)c[h]=r[h]&255;new Ao(Ke.QR_CODE_FIELD_256).encode(c,s);const u=new Uint8Array(s);for(let h=0;h<s;h++)u[h]=c[a+h];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,a,c){const u=a.getCharacterCountBits(s);if(r>=1<<u)throw new at(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,s,a,c){switch(s){case ve.NUMERIC:_.appendNumericBytes(r,a);break;case ve.ALPHANUMERIC:_.appendAlphanumericBytes(r,a);break;case ve.BYTE:_.append8BitBytes(r,a,c);break;case ve.KANJI:_.appendKanjiBytes(r,a);break;default:throw new at("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=_.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=_.getDigit(r.charAt(c));if(c+2<a){const h=_.getDigit(r.charAt(c+1)),d=_.getDigit(r.charAt(c+2));s.appendBits(u*100+h*10+d,10),c+=3}else if(c+1<a){const h=_.getDigit(r.charAt(c+1));s.appendBits(u*10+h,7),c+=2}else s.appendBits(u,4),c++}}static appendAlphanumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=_.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new at;if(c+1<a){const h=_.getAlphanumericCode(r.charCodeAt(c+1));if(h===-1)throw new at;s.appendBits(u*45+h,11),c+=2}else s.appendBits(u,6),c++}}static append8BitBytes(r,s,a){let c;try{c=H.encode(r,a)}catch(u){throw new at(u)}for(let u=0,h=c.length;u!==h;u++){const d=c[u];s.appendBits(d,8)}}static appendKanjiBytes(r,s){let a;try{a=H.encode(r,O.SJIS)}catch(u){throw new at(u)}const c=a.length;for(let u=0;u<c;u+=2){const h=a[u]&255,d=a[u+1]&255,m=h<<8&4294967295|d;let w=-1;if(m>=33088&&m<=40956?w=m-33088:m>=57408&&m<=60351&&(w=m-49472),w===-1)throw new at("Invalid byte sequence");const C=(w>>8)*192+(w&255);s.appendBits(C,13)}}static appendECI(r,s){s.appendBits(ve.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}_.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),_.DEFAULT_BYTE_MODE_ENCODING=O.UTF8.getName();class v{write(r,s,a,c=null){if(r.length===0)throw new A("Found empty contents");if(s<0||a<0)throw new A("Requested dimensions are too small: "+s+"x"+a);let u=tt.L,h=v.QUIET_ZONE_SIZE;c!==null&&(c.get(Vt.ERROR_CORRECTION)!==void 0&&(u=tt.fromString(c.get(Vt.ERROR_CORRECTION).toString())),c.get(Vt.MARGIN)!==void 0&&(h=Number.parseInt(c.get(Vt.MARGIN).toString(),10)));const d=_.encode(r,u,c);return this.renderResult(d,s,a,h)}writeToDom(r,s,a,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const h=this.write(s,a,c,u);r&&r.appendChild(h)}renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new rr;const h=u.getWidth(),d=u.getHeight(),m=h+c*2,w=d+c*2,C=Math.max(s,m),T=Math.max(a,w),R=Math.min(Math.floor(C/m),Math.floor(T/w)),B=Math.floor((C-h*R)/2),G=Math.floor((T-d*R)/2),K=this.createSVGElement(C,T);for(let $=0,ne=G;$<d;$++,ne+=R)for(let ue=0,he=B;ue<h;ue++,he+=R)if(u.get(ue,$)===1){const ae=this.createSvgRectElement(he,ne,R,R);K.appendChild(ae)}return K}createSVGElement(r,s){const a=document.createElementNS(v.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(r,s,a,c){const u=document.createElementNS(v.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}v.QUIET_ZONE_SIZE=4,v.SVG_NS="http://www.w3.org/2000/svg";class P{encode(r,s,a,c,u){if(r.length===0)throw new A("Found empty contents");if(s!==_e.QR_CODE)throw new A("Can only encode QR_CODE, but got "+s);if(a<0||c<0)throw new A(`Requested dimensions are too small: ${a}x${c}`);let h=tt.L,d=P.QUIET_ZONE_SIZE;u!==null&&(u.get(Vt.ERROR_CORRECTION)!==void 0&&(h=tt.fromString(u.get(Vt.ERROR_CORRECTION).toString())),u.get(Vt.MARGIN)!==void 0&&(d=Number.parseInt(u.get(Vt.MARGIN).toString(),10)));const m=_.encode(r,h,u);return P.renderResult(m,a,c,d)}static renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new rr;const h=u.getWidth(),d=u.getHeight(),m=h+c*2,w=d+c*2,C=Math.max(s,m),T=Math.max(a,w),R=Math.min(Math.floor(C/m),Math.floor(T/w)),B=Math.floor((C-h*R)/2),G=Math.floor((T-d*R)/2),K=new He(C,T);for(let $=0,ne=G;$<d;$++,ne+=R)for(let ue=0,he=B;ue<h;ue++,he+=R)u.get(ue,$)===1&&K.setRegion(he,ne,R,R);return K}}P.QUIET_ZONE_SIZE=4;class Q{encode(r,s,a,c,u){let h;switch(s){case _e.QR_CODE:h=new P;break;default:throw new A("No encoder available for format "+s)}return h.encode(r,s,a,c,u)}}class ee extends pe{constructor(r,s,a,c,u,h,d,m){if(super(h,d),this.yuvData=r,this.dataWidth=s,this.dataHeight=a,this.left=c,this.top=u,c+h>s||u+d>a)throw new A("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(h,d)}getRow(r,s){if(r<0||r>=this.getHeight())throw new A("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return X.arraycopy(this.yuvData,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return X.arraycopy(this.yuvData,u,c,0,a),c;for(let h=0;h<s;h++){const d=h*r;X.arraycopy(this.yuvData,u,c,d,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new ee(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,a,c,!1)}renderThumbnail(){const r=this.getWidth()/ee.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/ee.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*s),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let h=0;h<s;h++){const d=h*r;for(let m=0;m<r;m++){const w=c[u+m*ee.THUMBNAIL_SCALE_FACTOR]&255;a[d+m]=4278190080|w*65793}u+=this.dataWidth*ee.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/ee.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ee.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<s;c++,u+=this.dataWidth){const h=u+r/2;for(let d=u,m=u+r-1;d<h;d++,m--){const w=a[d];a[d]=a[m],a[m]=w}}}invert(){return new Ie(this)}}ee.THUMBNAIL_SCALE_FACTOR=2;class de extends pe{constructor(r,s,a,c,u,h,d){if(super(s,a),this.dataWidth=c,this.dataHeight=u,this.left=h,this.top=d,r.BYTES_PER_ELEMENT===4){const m=s*a,w=new Uint8ClampedArray(m);for(let C=0;C<m;C++){const T=r[C],R=T>>16&255,B=T>>7&510,G=T&255;w[C]=(R+B+G)/4&255}this.luminances=w}else this.luminances=r;if(c===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=a),h===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new A("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new A("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return X.arraycopy(this.luminances,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return X.arraycopy(this.luminances,u,c,0,a),c;for(let h=0;h<s;h++){const d=h*r;X.arraycopy(this.luminances,u,c,d,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new de(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new Ie(this)}}class Le extends O{static forName(r){return this.getCharacterSetECIByName(r)}}class Pt{}Pt.ISO_8859_1=O.ISO8859_1;class lt{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class Gt{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class _r{constructor(r){this.previous=r}getPrevious(){return this.previous}}class Xn extends _r{constructor(r,s,a){super(r),this.value=s,this.bitCount=a}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new Xn(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Xn(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+F.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Ar extends Xn{constructor(r,s,a){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(r,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(r,s){return new Ar(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Jr(I,r,s){return new Ar(I,r,s)}function ei(I,r,s){return new Xn(I,r,s)}const Pa=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Qi=0,dc=1,Cr=2,x0=3,ti=4,sw=new Xn(null,0,0),Rh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,655360+928+30]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,917504+14336+928+30]),Int32Array.from([(5<<16)+29,(5<<16)+28,655360+928+30,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,655360+992+28,655360+992+30,655360+992+29,0])];function ow(I){for(let r of I)L.fill(r,-1);return I[Qi][ti]=0,I[dc][ti]=0,I[dc][Qi]=28,I[x0][ti]=0,I[Cr][ti]=0,I[Cr][Qi]=15,I}const y0=ow(L.createInt32Array(6,6));class ni{constructor(r,s,a,c){this.token=r,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let a=this.bitCount,c=this.token;if(r!==this.mode){let h=Rh[this.mode][r];c=ei(c,h&65535,h>>16),a+=h>>16}let u=r===Cr?4:5;return c=ei(c,s,u),new ni(c,r,0,a+u)}shiftAndAppend(r,s){let a=this.token,c=this.mode===Cr?4:5;return a=ei(a,y0[this.mode][r],c),a=ei(a,s,5),new ni(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let s=this.token,a=this.mode,c=this.bitCount;if(this.mode===ti||this.mode===Cr){let d=Rh[a][Qi];s=ei(s,d&65535,d>>16),c+=d>>16,a=Qi}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new ni(s,a,this.binaryShiftByteCount+1,c+u);return h.binaryShiftByteCount===2047+31&&(h=h.endBinaryShift(r+1)),h}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Jr(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new ni(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Rh[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=ni.calculateBinaryShiftCost(r)-ni.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())s.unshift(c);let a=new Z;for(const c of s)c.appendTo(a,r);return a}toString(){return W.format("%s bits=%d bytes=%d",Pa[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}ni.INITIAL_STATE=new ni(sw,Qi,0,0);function aw(I){const r=W.getCharCode(" "),s=W.getCharCode("."),a=W.getCharCode(",");I[Qi][r]=1;const c=W.getCharCode("Z"),u=W.getCharCode("A");for(let R=u;R<=c;R++)I[Qi][R]=R-u+2;I[dc][r]=1;const h=W.getCharCode("z"),d=W.getCharCode("a");for(let R=d;R<=h;R++)I[dc][R]=R-d+2;I[Cr][r]=1;const m=W.getCharCode("9"),w=W.getCharCode("0");for(let R=w;R<=m;R++)I[Cr][R]=R-w+2;I[Cr][a]=12,I[Cr][s]=13;const C=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let R=0;R<C.length;R++)I[x0][W.getCharCode(C[R])]=R;const T=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let R=0;R<T.length;R++)W.getCharCode(T[R])>0&&(I[ti][W.getCharCode(T[R])]=R);return I}const bh=aw(L.createInt32Array(5,256));class ka{constructor(r){this.text=r}encode(){const r=W.getCharCode(" "),s=W.getCharCode(`
`);let a=Gt.singletonList(ni.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let h,d=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case W.getCharCode("\r"):h=d===s?2:0;break;case W.getCharCode("."):h=d===r?3:0;break;case W.getCharCode(","):h=d===r?4:0;break;case W.getCharCode(":"):h=d===r?5:0;break;default:h=0}h>0?(a=ka.updateStateListForPair(a,u,h),u++):a=this.updateStateListForChar(a,u)}return Gt.min(a,(u,h)=>u.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const a=[];for(let c of r)this.updateStateForChar(c,s,a);return ka.simplifyStates(a)}updateStateForChar(r,s,a){let c=this.text[s]&255,u=bh[r.getMode()][c]>0,h=null;for(let d=0;d<=ti;d++){let m=bh[d][c];if(m>0){if(h==null&&(h=r.endBinaryShift(s)),!u||d===r.getMode()||d===Cr){const w=h.latchAndAppend(d,m);a.push(w)}if(!u&&y0[r.getMode()][d]>=0){const w=h.shiftAndAppend(d,m);a.push(w)}}}if(r.getBinaryShiftByteCount()>0||bh[r.getMode()][c]===0){let d=r.addBinaryShiftChar(s);a.push(d)}}static updateStateListForPair(r,s,a){const c=[];for(let u of r)this.updateStateForPair(u,s,a,c);return this.simplifyStates(c)}static updateStateForPair(r,s,a,c){let u=r.endBinaryShift(s);if(c.push(u.latchAndAppend(ti,a)),r.getMode()!==ti&&c.push(u.shiftAndAppend(ti,a)),a===3||a===4){let h=u.latchAndAppend(Cr,16-a).latchAndAppend(Cr,1);c.push(h)}if(r.getBinaryShiftByteCount()>0){let h=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(h)}}static simplifyStates(r){let s=[];for(const a of r){let c=!0;for(const u of s){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(s=s.filter(h=>h!==u))}c&&s.push(a)}return s}}class Je{constructor(){}static encodeBytes(r){return Je.encode(r,Je.DEFAULT_EC_PERCENT,Je.DEFAULT_AZTEC_LAYERS)}static encode(r,s,a){let c=new ka(r).encode(),u=F.truncDivision(c.getSize()*s,100)+11,h=c.getSize()+u,d,m,w,C,T;if(a!==Je.DEFAULT_AZTEC_LAYERS){if(d=a<0,m=Math.abs(a),m>(d?Je.MAX_NB_BITS_COMPACT:Je.MAX_NB_BITS))throw new A(W.format("Illegal value %s for layers",a));w=Je.totalBitsInLayer(m,d),C=Je.WORD_SIZE[m];let ae=w-w%C;if(T=Je.stuffBits(c,C),T.getSize()+u>ae)throw new A("Data to large for user specified layer");if(d&&T.getSize()>C*64)throw new A("Data to large for user specified layer")}else{C=0,T=null;for(let ae=0;;ae++){if(ae>Je.MAX_NB_BITS)throw new A("Data too large for an Aztec code");if(d=ae<=3,m=d?ae+1:ae,w=Je.totalBitsInLayer(m,d),h>w)continue;(T==null||C!==Je.WORD_SIZE[m])&&(C=Je.WORD_SIZE[m],T=Je.stuffBits(c,C));let Ge=w-w%C;if(!(d&&T.getSize()>C*64)&&T.getSize()+u<=Ge)break}}let R=Je.generateCheckWords(T,w,C),B=T.getSize()/C,G=Je.generateModeMessage(d,m,B),K=(d?11:14)+m*4,$=new Int32Array(K),ne;if(d){ne=K;for(let ae=0;ae<$.length;ae++)$[ae]=ae}else{ne=K+1+2*F.truncDivision(F.truncDivision(K,2)-1,15);let ae=F.truncDivision(K,2),Ge=F.truncDivision(ne,2);for(let Be=0;Be<ae;Be++){let Kn=Be+F.truncDivision(Be,15);$[ae-Be-1]=Ge-Kn-1,$[ae+Be]=Ge+Kn+1}}let ue=new He(ne);for(let ae=0,Ge=0;ae<m;ae++){let Be=(m-ae)*4+(d?9:12);for(let Kn=0;Kn<Be;Kn++){let Br=Kn*2;for(let qn=0;qn<2;qn++)R.get(Ge+Br+qn)&&ue.set($[ae*2+qn],$[ae*2+Kn]),R.get(Ge+Be*2+Br+qn)&&ue.set($[ae*2+Kn],$[K-1-ae*2-qn]),R.get(Ge+Be*4+Br+qn)&&ue.set($[K-1-ae*2-qn],$[K-1-ae*2-Kn]),R.get(Ge+Be*6+Br+qn)&&ue.set($[K-1-ae*2-Kn],$[ae*2+qn])}Ge+=Be*8}if(Je.drawModeMessage(ue,d,ne,G),d)Je.drawBullsEye(ue,F.truncDivision(ne,2),5);else{Je.drawBullsEye(ue,F.truncDivision(ne,2),7);for(let ae=0,Ge=0;ae<F.truncDivision(K,2)-1;ae+=15,Ge+=16)for(let Be=F.truncDivision(ne,2)&1;Be<ne;Be+=2)ue.set(F.truncDivision(ne,2)-Ge,Be),ue.set(F.truncDivision(ne,2)+Ge,Be),ue.set(Be,F.truncDivision(ne,2)-Ge),ue.set(Be,F.truncDivision(ne,2)+Ge)}let he=new lt;return he.setCompact(d),he.setSize(ne),he.setLayers(m),he.setCodeWords(B),he.setMatrix(ue),he}static drawBullsEye(r,s,a){for(let c=0;c<a;c+=2)for(let u=s-c;u<=s+c;u++)r.set(u,s-c),r.set(u,s+c),r.set(s-c,u),r.set(s+c,u);r.set(s-a,s-a),r.set(s-a+1,s-a),r.set(s-a,s-a+1),r.set(s+a,s-a),r.set(s+a,s-a+1),r.set(s+a,s+a-1)}static generateModeMessage(r,s,a){let c=new Z;return r?(c.appendBits(s-1,2),c.appendBits(a-1,6),c=Je.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(a-1,11),c=Je.generateCheckWords(c,40,4)),c}static drawModeMessage(r,s,a,c){let u=F.truncDivision(a,2);if(s)for(let h=0;h<7;h++){let d=u-3+h;c.get(h)&&r.set(d,u-5),c.get(h+7)&&r.set(u+5,d),c.get(20-h)&&r.set(d,u+5),c.get(27-h)&&r.set(u-5,d)}else for(let h=0;h<10;h++){let d=u-5+h+F.truncDivision(h,5);c.get(h)&&r.set(d,u-7),c.get(h+10)&&r.set(u+7,d),c.get(29-h)&&r.set(d,u+7),c.get(39-h)&&r.set(u-7,d)}}static generateCheckWords(r,s,a){let c=r.getSize()/a,u=new Ao(Je.getGF(a)),h=F.truncDivision(s,a),d=Je.bitsToWords(r,a,h);u.encode(d,h-c);let m=s%a,w=new Z;w.appendBits(0,m);for(const C of Array.from(d))w.appendBits(C,a);return w}static bitsToWords(r,s,a){let c=new Int32Array(a),u,h;for(u=0,h=r.getSize()/s;u<h;u++){let d=0;for(let m=0;m<s;m++)d|=r.get(u*s+m)?1<<s-m-1:0;c[u]=d}return c}static getGF(r){switch(r){case 4:return Ke.AZTEC_PARAM;case 6:return Ke.AZTEC_DATA_6;case 8:return Ke.AZTEC_DATA_8;case 10:return Ke.AZTEC_DATA_10;case 12:return Ke.AZTEC_DATA_12;default:throw new A("Unsupported word size "+r)}}static stuffBits(r,s){let a=new Z,c=r.getSize(),u=(1<<s)-2;for(let h=0;h<c;h+=s){let d=0;for(let m=0;m<s;m++)(h+m>=c||r.get(h+m))&&(d|=1<<s-1-m);(d&u)===u?(a.appendBits(d&u,s),h--):d&u?a.appendBits(d,s):(a.appendBits(d|1,s),h--)}return a}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Je.DEFAULT_EC_PERCENT=33,Je.DEFAULT_AZTEC_LAYERS=0,Je.MAX_NB_BITS=32,Je.MAX_NB_BITS_COMPACT=4,Je.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class gc{encode(r,s,a,c){return this.encodeWithHints(r,s,a,c,null)}encodeWithHints(r,s,a,c,u){let h=Pt.ISO_8859_1,d=Je.DEFAULT_EC_PERCENT,m=Je.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Vt.CHARACTER_SET)&&(h=Le.forName(u.get(Vt.CHARACTER_SET).toString())),u.has(Vt.ERROR_CORRECTION)&&(d=F.parseInt(u.get(Vt.ERROR_CORRECTION).toString())),u.has(Vt.AZTEC_LAYERS)&&(m=F.parseInt(u.get(Vt.AZTEC_LAYERS).toString()))),gc.encodeLayers(r,s,a,c,h,d,m)}static encodeLayers(r,s,a,c,u,h,d){if(s!==_e.AZTEC)throw new A("Can only encode AZTEC, but got "+s);let m=Je.encode(W.getBytes(r,u),h,d);return gc.renderResult(m,a,c)}static renderResult(r,s,a){let c=r.getMatrix();if(c==null)throw new rr;let u=c.getWidth(),h=c.getHeight(),d=Math.max(s,u),m=Math.max(a,h),w=Math.min(d/u,m/h),C=(d-u*w)/2,T=(m-h*w)/2,R=new He(d,m);for(let B=0,G=T;B<h;B++,G+=w)for(let K=0,$=C;K<u;K++,$+=w)c.get(K,B)&&R.setRegion($,G,w,w);return R}}n.AbstractExpandedDecoder=go,n.ArgumentException=E,n.ArithmeticException=Os,n.AztecCode=lt,n.AztecCodeReader=ho,n.AztecCodeWriter=gc,n.AztecDecoder=rt,n.AztecDetector=nc,n.AztecDetectorResult=tc,n.AztecEncoder=Je,n.AztecHighLevelEncoder=ka,n.AztecPoint=Jt,n.BarcodeFormat=_e,n.Binarizer=j,n.BinaryBitmap=S,n.BitArray=Z,n.BitMatrix=He,n.BitSource=yr,n.BrowserAztecCodeReader=rc,n.BrowserBarcodeReader=Ta,n.BrowserCodeReader=Mn,n.BrowserDatamatrixCodeReader=mo,n.BrowserMultiFormatReader=hc,n.BrowserPDF417Reader=_i,n.BrowserQRCodeReader=fc,n.BrowserQRCodeSvgWriter=v,n.CharacterSetECI=O,n.ChecksumException=M,n.Code128Reader=fe,n.Code39Reader=Dt,n.DataMatrixDecodedBitStreamParser=Hn,n.DataMatrixReader=Qe,n.DecodeHintType=Y,n.DecoderResult=Fi,n.DefaultGridSampler=Ca,n.DetectorResult=mi,n.EAN13Reader=qr,n.EncodeHintType=Vt,n.Exception=p,n.FormatException=b,n.GenericGF=Ke,n.GenericGFPoly=In,n.GlobalHistogramBinarizer=Nt,n.GridSampler=Aa,n.GridSamplerInstance=Or,n.HTMLCanvasElementLuminanceSource=Ne,n.HybridBinarizer=be,n.ITFReader=nt,n.IllegalArgumentException=A,n.IllegalStateException=rr,n.InvertedLuminanceSource=Ie,n.LuminanceSource=pe,n.MathUtils=Ue,n.MultiFormatOneDReader=yi,n.MultiFormatReader=Oa,n.MultiFormatWriter=Q,n.NotFoundException=re,n.OneDReader=bt,n.PDF417DecodedBitStreamParser=te,n.PDF417DecoderErrorCorrection=Ct,n.PDF417Reader=qt,n.PDF417ResultMetadata=Yi,n.PerspectiveTransform=gn,n.PlanarYUVLuminanceSource=ee,n.QRCodeByteMatrix=un,n.QRCodeDataMask=Gn,n.QRCodeDecodedBitStreamParser=yt,n.QRCodeDecoderErrorCorrectionLevel=tt,n.QRCodeDecoderFormatInformation=cn,n.QRCodeEncoder=_,n.QRCodeEncoderQRCode=Zr,n.QRCodeMaskUtil=pt,n.QRCodeMatrixUtil=Ce,n.QRCodeMode=ve,n.QRCodeReader=Er,n.QRCodeVersion=Ae,n.QRCodeWriter=P,n.RGBLuminanceSource=de,n.RSS14Reader=_t,n.RSSExpandedReader=oe,n.ReaderException=Ei,n.ReedSolomonDecoder=Ps,n.ReedSolomonEncoder=Ao,n.ReedSolomonException=Kr,n.Result=ht,n.ResultMetadataType=Ft,n.ResultPoint=ge,n.StringUtils=W,n.UnsupportedOperationException=U,n.VideoInputDevice=dt,n.WhiteRectangleDetector=gr,n.WriterException=at,n.ZXingArrays=L,n.ZXingCharset=Le,n.ZXingInteger=F,n.ZXingStandardCharsets=Pt,n.ZXingStringBuilder=V,n.ZXingStringEncoding=H,n.ZXingSystem=X,n.createAbstractExpandedDecoder=Gi,Object.defineProperty(n,"__esModule",{value:!0})})})(Bd,Bd.exports);var It=Bd.exports;const hI=$p(It),fI=uw({__proto__:null,default:hI},[It]);var Hp=function(){function t(e,n,i){if(this.formatMap=new Map([[we.QR_CODE,It.BarcodeFormat.QR_CODE],[we.AZTEC,It.BarcodeFormat.AZTEC],[we.CODABAR,It.BarcodeFormat.CODABAR],[we.CODE_39,It.BarcodeFormat.CODE_39],[we.CODE_93,It.BarcodeFormat.CODE_93],[we.CODE_128,It.BarcodeFormat.CODE_128],[we.DATA_MATRIX,It.BarcodeFormat.DATA_MATRIX],[we.MAXICODE,It.BarcodeFormat.MAXICODE],[we.ITF,It.BarcodeFormat.ITF],[we.EAN_13,It.BarcodeFormat.EAN_13],[we.EAN_8,It.BarcodeFormat.EAN_8],[we.PDF_417,It.BarcodeFormat.PDF_417],[we.RSS_14,It.BarcodeFormat.RSS_14],[we.RSS_EXPANDED,It.BarcodeFormat.RSS_EXPANDED],[we.UPC_A,It.BarcodeFormat.UPC_A],[we.UPC_E,It.BarcodeFormat.UPC_E],[we.UPC_EAN_EXTENSION,It.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!fI)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var o=this.createZXingFormats(e),l=new Map;l.set(It.DecodeHintType.POSSIBLE_FORMATS,o),l.set(It.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,o){try{i(n.decode(e))}catch(l){o(l)}})},t.prototype.decode=function(e){var n=new It.MultiFormatReader(this.verbose,this.hints),i=new It.HTMLCanvasElementLuminanceSource(e),o=new It.BinaryBitmap(new It.HybridBinarizer(i)),l=n.decode(o);return{text:l.text,format:$y.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),dI=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function y(E){try{p(i.next(E))}catch(A){f(A)}}function x(E){try{p(i.throw(E))}catch(A){f(A)}}function p(E){E.done?l(E.value):o(E.value).then(y,x)}p((i=i.apply(t,e||[])).next())})},gI=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(p){return function(E){return x([p,E])}}function x(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Gp=function(){function t(e,n,i){if(this.formatMap=new Map([[we.QR_CODE,"qr_code"],[we.AZTEC,"aztec"],[we.CODABAR,"codabar"],[we.CODE_39,"code_39"],[we.CODE_93,"code_93"],[we.CODE_128,"code_128"],[we.DATA_MATRIX,"data_matrix"],[we.ITF,"itf"],[we.EAN_13,"ean_13"],[we.EAN_8,"ean_8"],[we.PDF_417,"pdf417"],[we.UPC_A,"upc_a"],[we.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return dI(this,void 0,void 0,function(){var n,i;return gI(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:$y.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,o=0,l=e;o<l.length;o++){var f=l[o],y=f.boundingBox.width*f.boundingBox.height;y>i&&(i=y,n=f)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Wp=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function y(E){try{p(i.next(E))}catch(A){f(A)}}function x(E){try{p(i.throw(E))}catch(A){f(A)}}function p(E){E.done?l(E.value):o(E.value).then(y,x)}p((i=i.apply(t,e||[])).next())})},Xp=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(p){return function(E){return x([p,E])}}function x(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},pI=function(){function t(e,n,i,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Gp.isSupported()?(this.primaryDecoder=new Gp(e,i,o),this.secondaryDecoder=new Hp(e,i,o)):this.primaryDecoder=new Hp(e,i,o)}return t.prototype.decodeAsync=function(e){return Wp(this,void 0,void 0,function(){var n;return Xp(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return Wp(this,void 0,void 0,function(){var n,i;return Xp(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(i=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var o=i[n];e+=o}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),m0=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Gu=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function y(E){try{p(i.next(E))}catch(A){f(A)}}function x(E){try{p(i.throw(E))}catch(A){f(A)}}function p(E){E.done?l(E.value):o(E.value).then(y,x)}p((i=i.apply(t,e||[])).next())})},Wu=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(p){return function(E){return x([p,E])}}function x(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Jy=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),mI=function(t){m0(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var o={advanced:[i]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Jy),xI=function(t){m0(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(mI),yI=function(t){m0(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(Jy),wI=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new xI(this.track)},t.prototype.torchFeature=function(){return new yI(this.track)},t}(),EI=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,o),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,o){return Gu(this,void 0,void 0,function(){var l,f;return Wu(this,function(y){switch(y.label){case 0:return l=new t(e,n,o),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:y.sent(),y.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Gu(this,void 0,void 0,function(){return Wu(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var o=e.mediaStream.getVideoTracks(),l=o.length,f=0;e.mediaStream.getVideoTracks().forEach(function(y){e.mediaStream.removeTrack(y),y.stop(),++f,f>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new wI(this.getFirstTrackOrFail())},t}(),_I=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return Gu(this,void 0,void 0,function(){return Wu(this,function(o){return[2,EI.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return Gu(this,void 0,void 0,function(){var n,i;return Wu(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[2,new t(i)]}})})},t}(),Kp=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function y(E){try{p(i.next(E))}catch(A){f(A)}}function x(E){try{p(i.throw(E))}catch(A){f(A)}}function p(E){E.done?l(E.value):o(E.value).then(y,x)}p((i=i.apply(t,e||[])).next())})},qp=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(p){return function(E){return x([p,E])}}function x(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},AI=function(){function t(){}return t.failIfNotSupported=function(){return Kp(this,void 0,void 0,function(){return qp(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Kp(this,void 0,void 0,function(){return qp(this,function(n){return[2,_I.create(e)]})})},t}(),CI=globalThis&&globalThis.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(f){f(l)})}return new(n||(n=Promise))(function(l,f){function y(E){try{p(i.next(E))}catch(A){f(A)}}function x(E){try{p(i.throw(E))}catch(A){f(A)}}function p(E){E.done?l(E.value):o(E.value).then(y,x)}p((i=i.apply(t,e||[])).next())})},vI=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,f;return f={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function y(p){return function(E){return x([p,E])}}function x(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(n=0)),n;)try{if(i=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){n.label=p[1];break}if(p[0]===6&&n.label<l[1]){n.label=l[1],l=p;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(p);break}l[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(E){p=[6,E],o=0}finally{i=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},II=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Ho.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Ho.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return CI(this,void 0,void 0,function(){var e,n,i,o,l,f,y;return vI(this,function(x){switch(x.label){case 0:return e=function(p){for(var E=p.getVideoTracks(),A=0,S=E;A<S.length;A++){var M=S[A];M.enabled=!1,M.stop(),p.removeTrack(M)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=x.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=x.sent(),o=[],l=0,f=i;l<f.length;l++)y=f[l],y.kind==="videoinput"&&o.push({id:y.deviceId,label:y.label});return e(n),[2,o]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(l){for(var f=[],y=0,x=l;y<x.length;y++){var p=x[y];p.kind==="video"&&f.push({id:p.id,label:p.label})}e(f)},o=MediaStreamTrack;o.getSources(i)})},t}(),Ut;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Ut||(Ut={}));var TI=function(){function t(){this.state=Ut.NOT_STARTED,this.onGoingTransactionNewState=Ut.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Ut.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ut.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ut.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ut.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ut.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Ut.UNKNOWN:throw"Transition from unknown is not allowed";case Ut.NOT_STARTED:this.failIfNewStateIs(e,[Ut.PAUSED]);break;case Ut.SCANNING:break;case Ut.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,o=n;i<o.length;i++){var l=o[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),SI=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Ut.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Ut.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ut.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Ut.PAUSED},t}(),NI=function(){function t(){}return t.create=function(){return new SI(new TI)},t}(),RI=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),sr=function(t){RI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(lI),bI=function(){function t(e,n){this.logger=n,this.fps=sr.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=sr.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Zy.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Ai(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),DI=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new uI(this.verbose),this.qrcode=new pI(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=NI.create()}return t.prototype.start=function(e,n,i,o){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;o?f=o:f=this.verbose?this.logger.log:function(){};var y=bI.create(n,this.logger);this.clearElement();var x=!1;y.videoConstraints&&(y.isMediaStreamConstraintsValid()?x=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=x,E=document.getElementById(this.elementId);E.clientWidth?E.clientWidth:sr.DEFAULT_WIDTH,E.style.position="relative",this.shouldScan=!0,this.element=E;var A=this,S=this.stateManagerProxy.startTransition(Ut.SCANNING);return new Promise(function(M,j){var X=p?y.videoConstraints:A.createVideoConstraints(e);if(!X){S.cancel(),j("videoConstraints should be defined");return}var q={};(!p||y.aspectRatio)&&(q.aspectRatio=y.aspectRatio);var z={onRenderSurfaceReady:function(L,F){A.setupUi(L,F,y),A.isScanning=!0,A.foreverScan(y,i,f)}};AI.failIfNotSupported().then(function(L){L.create(X).then(function(F){return F.render(l.element,q,z).then(function(Z){A.renderedCamera=Z,S.execute(),M(null)}).catch(function(Z){S.cancel(),j(Z)})}).catch(function(F){S.cancel(),j(Ho.errorGettingUserMedia(F))})}).catch(function(L){S.cancel(),j(Ho.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ut.PAUSED),this.showPausedState(),(Ai(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Ut.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Ut.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(sr.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),i(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ai(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var f=new Image;f.onload=function(){var y=f.width,x=f.height,p=document.getElementById(i.elementId),E=p.clientWidth?p.clientWidth:sr.DEFAULT_WIDTH,A=Math.max(p.clientHeight?p.clientHeight:x,sr.FILE_SCAN_MIN_HEIGHT),S=i.computeCanvasDrawConfig(y,x,E,A);if(n){var M=i.createCanvasElement(E,A,"qr-canvas-visible");M.style.display="inline-block",p.appendChild(M);var j=M.getContext("2d");if(!j)throw"Unable to get 2d context from canvas";j.canvas.width=E,j.canvas.height=A,j.drawImage(f,0,0,y,x,S.x,S.y,S.width,S.height)}var X=sr.FILE_SCAN_HIDDEN_CANVAS_PADDING,q=Math.max(f.width,S.width),z=Math.max(f.height,S.height),L=q+2*X,F=z+2*X,Z=i.createCanvasElement(L,F);p.appendChild(Z);var le=Z.getContext("2d");if(!le)throw"Unable to get 2d context from canvas";le.canvas.width=L,le.canvas.height=F,le.drawImage(f,0,0,y,x,X,X,q,z);try{i.qrcode.decodeRobustlyAsync(Z).then(function(Y){o(zp.createFromQrcodeResult(Y))}).catch(l)}catch(Y){l("QR code parse error, error = ".concat(Y))}},f.onerror=l,f.onabort=l,f.onstalled=l,f.onsuspend=l,f.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return II.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Zy.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[we.QR_CODE,we.AZTEC,we.CODABAR,we.CODE_39,we.CODE_93,we.CODE_128,we.DATA_MATRIX,we.MAXICODE,we.ITF,we.EAN_13,we.EAN_8,we.PDF_417,we.RSS_14,we.RSS_EXPANDED,we.UPC_A,we.UPC_E,we.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],o=0,l=e.formatsToSupport;o<l.length;o++){var f=l[o];aI(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Ai(e))return!0;if(!Ai(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(Ai(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return Ai(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var o=this,l=i.qrbox;this.validateQrboxConfig(l);var f=this.toQrdimensions(e,n,l),y=function(p){if(p<sr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(sr.MIN_QR_BOX_SIZE,"px.")},x=function(p){return p>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=e),p};y(f.width),y(f.height),f.width=x(f.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var o=Ai(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(e,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&l.height<=n,y={x:0,y:0,width:e,height:n},x=f?this.getShadedRegionBounds(e,n,l):y,p=this.createCanvasElement(x.width,x.height),E={willReadFrequently:!0},A=p.getContext("2d",E);A.canvas.width=x.width,A.canvas.height=x.height,this.element.append(p),f&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=x,this.context=A,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ho.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,zp.createFromQrcodeResult(o)),i.possiblyUpdateShaders(!0),!0}).catch(function(o){i.possiblyUpdateShaders(!1);var l=Ho.codeParseError(o);return n(l,cI.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,i){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),f=l.videoWidth/l.clientWidth,y=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var x=this.qrRegion.width*f,p=this.qrRegion.height*y,E=this.qrRegion.x*f,A=this.qrRegion.y*y;this.context.drawImage(l,E,A,x,p,0,0,this.qrRegion.width,this.qrRegion.height);var S=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,n,i)},o.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(M){!M&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,i).finally(function(){S()})):S()}).catch(function(M){o.logger.logError("Error happend while scanning context",M),S()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",o={user:!0,environment:!0},l="exact",f=function(j){if(j in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(j,"'")},y=Object.keys(e);if(y.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(y.length," keys");var x=Object.keys(e)[0];if(x!==n&&x!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(x===n){var p=e.facingMode;if(typeof p=="string"){if(f(p))return{facingMode:p}}else if(typeof p=="object")if(l in p){if(f(p["".concat(l)]))return{facingMode:{exact:p["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var E=typeof p;throw"Invalid type of 'facingMode' = ".concat(E)}}else{var A=e.deviceId;if(typeof A=="string")return{deviceId:A};if(typeof A=="object"){if(l in A)return{deviceId:{exact:A["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var S=typeof A;throw"Invalid type of 'deviceId' = ".concat(S)}}}var M=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(M)},t.prototype.computeCanvasDrawConfig=function(e,n,i,o){if(e<=i&&n<=o){var l=(i-e)/2,f=(o-n)/2;return{x:l,y:f,width:e,height:n}}else{var y=e,x=n;return e>i&&(n=i/e*n,e=i),n>o&&(e=o/n*e,n=o),this.logger.log("Image downsampled from "+"".concat(y,"X").concat(x)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,o)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?sr.BORDER_SHADER_MATCH_COLOR:sr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var o=e,l=n,f=document.createElement("canvas");return f.style.width="".concat(o,"px"),f.style.height="".concat(l,"px"),f.style.display="none",f.id=Ai(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,o){if(!(n-o.width<1||i-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var f=(n-o.width)/2,y=(i-o.height)/2;if(l.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(sr.SHADED_REGION_ELEMENT_ID),n-o.width<11||i-o.height<11)this.hasBorderShaders=!1;else{var x=5,p=40;this.insertShaderBorders(l,p,x,-x,null,0,!0),this.insertShaderBorders(l,p,x,-x,null,0,!1),this.insertShaderBorders(l,p,x,null,-x,0,!0),this.insertShaderBorders(l,p,x,null,-x,0,!1),this.insertShaderBorders(l,x,p+x,-x,null,-x,!0),this.insertShaderBorders(l,x,p+x,null,-x,-x,!0),this.insertShaderBorders(l,x,p+x,-x,null,-x,!1),this.insertShaderBorders(l,x,p+x,null,-x,-x,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,i,o,l,f,y){var x=document.createElement("div");x.style.position="absolute",x.style.backgroundColor=sr.BORDER_SHADER_DEFAULT_COLOR,x.style.width="".concat(n,"px"),x.style.height="".concat(i,"px"),o!==null&&(x.style.top="".concat(o,"px")),l!==null&&(x.style.bottom="".concat(l,"px")),y?x.style.left="".concat(f,"px"):x.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(x),e.appendChild(x)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}();globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var Yp;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Yp||(Yp={}));const OI=({onComplete:t,onCancel:e,isReturnOnly:n=!1})=>{const[i,o]=Oe.useState(n?"SCAN_BOOKS_ONLY":"SCAN_STUDENT"),[l,f]=Oe.useState(null),[y,x]=Oe.useState([]),[p,E]=Oe.useState(null),[A,S]=Oe.useState(!1),M=Oe.useRef(null),j=Oe.useRef(0),X=Oe.useRef(!1),q=()=>{try{const Y=new(window.AudioContext||window.webkitAudioContext),b=Y.createOscillator(),D=Y.createGain();b.connect(D),D.connect(Y.destination),b.type="sine",b.frequency.setValueAtTime(880,Y.currentTime),D.gain.setValueAtTime(.1,Y.currentTime),b.start(),setTimeout(()=>{b.stop(),Y.close()},150)}catch(Y){console.error("Audio play failed",Y)}};Oe.useEffect(()=>{const Y="optimized-reader";return(async()=>{try{const D=new DI(Y);M.current=D,await D.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1},(O,U)=>{L(O)},O=>{}),X.current=!0}catch(D){console.error("Error starting scanner",D)}})(),()=>{M.current&&X.current&&(M.current.stop().then(()=>{var D;(D=M.current)==null||D.clear()}).catch(D=>{console.error("Failed to stop scanner",D)}),X.current=!1)}},[]);const z=Oe.useRef({scanState:i,studentId:l,books:y});Oe.useEffect(()=>{z.current={scanState:i,studentId:l,books:y}},[i,l,y]);const L=Y=>{const b=Date.now();if(b-j.current<1500)return;const{scanState:D,studentId:O,books:U}=z.current;D==="SCAN_STUDENT"?(q(),f(Y),o("SCAN_BOOKS"),F(Y),j.current=b):U.includes(Y)||(q(),x(H=>[...H,Y]),F(Y),j.current=b)},F=Y=>{E(Y),S(!0),setTimeout(()=>S(!1),1e3)},Z=()=>{const Y=prompt("renci Numaras Girin:");Y&&L(Y)},le=()=>{const Y=prompt("Kitap Barkodu Girin:");Y&&L(Y)};return N.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col items-center justify-between p-4",children:[N.jsxs("div",{className:"w-full text-white flex justify-between items-center mb-4",children:[N.jsxs("h2",{className:"text-lg font-bold flex items-center gap-2",children:[i==="SCAN_STUDENT"?N.jsx(Ng,{className:"text-yellow-400"}):N.jsx(hl,{className:"text-green-400"}),i==="SCAN_STUDENT"?"renci Kartn Okutun":n?"ade Edilecek Kitaplar Okutun":"Kitaplar Okutun"]}),N.jsx("button",{onClick:e,className:"p-2 bg-gray-800 rounded-full hover:bg-gray-700",children:N.jsx(Tu,{size:24})})]}),N.jsxs("div",{className:"relative w-full flex-grow flex items-center justify-center bg-black overflow-hidden rounded-xl border-2 border-gray-700",children:[N.jsx("div",{id:"optimized-reader",className:"w-full h-full object-cover"}),N.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:N.jsx("div",{className:`w-64 h-64 border-4 rounded-3xl opacity-50 ${i==="SCAN_STUDENT"?"border-yellow-400":"border-green-400"}`})}),A&&N.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-black/60 animated-fade-in",children:N.jsxs("div",{className:"bg-white text-black p-6 rounded-2xl flex flex-col items-center animate-bounce-in",children:[N.jsx(ud,{size:48,className:"text-green-500 mb-2"}),N.jsx("p",{className:"text-lg font-bold",children:p}),N.jsx("p",{className:"text-sm text-gray-500",children:"Okundu"})]})})]}),N.jsxs("div",{className:"w-full mt-4 space-y-3",children:[N.jsxs("div",{className:"bg-gray-900 text-white p-4 rounded-xl flex items-center justify-between",children:[!n&&N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"flex items-center gap-3",children:[N.jsx("div",{className:`p-2 rounded-lg ${l?"bg-green-600":"bg-gray-700"}`,children:N.jsx(Ng,{size:20})}),N.jsxs("div",{children:[N.jsx("p",{className:"text-xs text-gray-400",children:"Aktif renci"}),N.jsx("p",{className:"font-mono font-bold",children:l||"Bekleniyor..."})]})]}),N.jsx("div",{className:"h-8 w-px bg-gray-700"})]}),N.jsxs("div",{className:"flex items-center gap-3 flex-grow justify-center",children:[N.jsx("div",{className:`p-2 rounded-lg ${y.length>0?n?"bg-orange-600":"bg-blue-600":"bg-gray-700"}`,children:N.jsx(hl,{size:20})}),N.jsxs("div",{children:[N.jsx("p",{className:"text-xs text-gray-400",children:n?"Toplanacak Kitap":"Kitap Says"}),N.jsx("p",{className:"font-mono font-bold text-center",children:y.length})]})]})]}),N.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i==="SCAN_BOOKS"&&N.jsxs("button",{onClick:()=>{o("SCAN_STUDENT"),f(null),x([])},className:"flex items-center justify-center gap-2 py-3 px-4 bg-gray-800 text-white rounded-xl font-semibold hover:bg-gray-700 active:scale-95 transition-transform",children:[N.jsx(J_,{size:18}),N.jsx("span",{children:"Sfrla"})]}),N.jsxs("button",{onClick:()=>(n||l)&&y.length>0?t(l,y):null,disabled:n?y.length===0:!l||y.length===0,className:`col-span-${i==="SCAN_STUDENT"||n?"2":"1"} flex items-center justify-center gap-2 py-3 px-4 rounded-xl font-bold text-lg shadow-lg active:scale-95 transition-all ${(n||l)&&y.length>0?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:[N.jsx(e3,{size:20}),N.jsx("span",{children:n?"adeleri Tamamla":"dn lemini Tamamla"})]})]}),N.jsxs("div",{className:"flex justify-center gap-4",children:[N.jsx("button",{onClick:Z,className:"text-xs text-gray-500 underline",children:"El ile renci Gir"}),l&&N.jsx("button",{onClick:le,className:"text-xs text-gray-500 underline",children:"El ile Kitap Gir"})]})]})]})},PI=()=>{const[t,e]=Oe.useState("ISSUE"),[n,i]=Oe.useState(14),[o,l]=Oe.useState(null),[f,y]=Oe.useState(null),[x,p]=Oe.useState(!1),E=async(A,S)=>{p(!1),y(null),l({type:"warning",msg:"lem yaplyor, ltfen bekleyin..."});const M=[],j=[];for(const X of S)try{const q=t==="ISSUE"?await Zn.issueBook(X,A,n):await Zn.returnBook(X);q.success?M.push(`${X}: ${q.message}`):j.push(`${X}: ${q.message}`)}catch{j.push(`${X}: Sistem hatas`)}y({successes:M,failures:j}),j.length===0?l({type:"success",msg:`Toplam ${M.length} kitap baaryla ${t==="ISSUE"?"dn verildi":"iade alnd"}.`}):l({type:"warning",msg:`${M.length} kitap baarl, ${j.length} kitapta hata olutu.`})};return N.jsxs("div",{className:"max-w-4xl mx-auto space-y-8 pb-20",children:[N.jsxs("div",{className:"text-center space-y-2",children:[N.jsx("h2",{className:"text-4xl font-black text-gray-900 tracking-tight",children:"dn & ade Bankosu"}),N.jsx("p",{className:"text-gray-500 text-lg",children:"Hzl tarama sistemi ile kitap ilemlerini saniyeler iinde tamamlayn."})]}),N.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[N.jsx("div",{className:`relative overflow-hidden group rounded-3xl p-8 border-2 transition-all cursor-pointer ${t==="ISSUE"?"border-indigo-500 bg-white shadow-xl":"border-gray-100 bg-gray-50 hover:border-gray-200"}`,onClick:()=>{e("ISSUE"),l(null),y(null)},children:N.jsxs("div",{className:"flex flex-col h-full justify-between",children:[N.jsxs("div",{className:"space-y-4",children:[N.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${t==="ISSUE"?"bg-indigo-500 text-white":"bg-gray-200 text-gray-400"}`,children:N.jsx(z_,{size:32})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Kitap Ver (dn)"}),N.jsx("p",{className:"text-gray-500 mt-1",children:"renci kart ve kitaplar taratarak dn verin."})]})]}),t==="ISSUE"&&N.jsxs("div",{className:"mt-8 space-y-4 animate-fade-in",children:[N.jsxs("div",{className:"space-y-2",children:[N.jsx("label",{className:"text-sm font-semibold text-gray-600",children:"dn Sresi"}),N.jsxs("select",{value:n,onClick:A=>A.stopPropagation(),onChange:A=>i(Number(A.target.value)),className:"block w-full rounded-xl border-gray-200 border py-3 px-4 focus:ring-2 focus:ring-indigo-500 outline-none",children:[N.jsx("option",{value:7,children:"7 Gn (1 Hafta)"}),N.jsx("option",{value:14,children:"14 Gn (2 Hafta)"}),N.jsx("option",{value:30,children:"30 Gn (1 Ay)"}),N.jsx("option",{value:90,children:"90 Gn (Dnemlik)"})]})]}),N.jsxs("button",{onClick:A=>{A.stopPropagation(),p(!0)},className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-3 shadow-lg shadow-indigo-200 transition-transform active:scale-95",children:[N.jsx(sf,{size:22}),N.jsx("span",{children:"Hzl Taramay Balat"})]})]})]})}),N.jsx("div",{className:`relative overflow-hidden group rounded-3xl p-8 border-2 transition-all cursor-pointer ${t==="RETURN"?"border-emerald-500 bg-white shadow-xl":"border-gray-100 bg-gray-50 hover:border-gray-200"}`,onClick:()=>{e("RETURN"),l(null),y(null)},children:N.jsxs("div",{className:"flex flex-col h-full justify-between",children:[N.jsxs("div",{className:"space-y-4",children:[N.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center ${t==="RETURN"?"bg-emerald-500 text-white":"bg-gray-200 text-gray-400"}`,children:N.jsx(G_,{size:32})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Kitap Al (ade)"}),N.jsx("p",{className:"text-gray-500 mt-1",children:"ade edilen kitaplar topluca envantere geri aln."})]})]}),t==="RETURN"&&N.jsx("div",{className:"mt-8 animate-fade-in",children:N.jsxs("button",{onClick:A=>{A.stopPropagation(),p(!0)},className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-4 rounded-2xl font-bold flex items-center justify-center gap-3 shadow-lg shadow-emerald-200 transition-transform active:scale-95",children:[N.jsx(sf,{size:22}),N.jsx("span",{children:"Hzl Taramay Balat"})]})})]})})]}),x&&N.jsx(OI,{onComplete:E,onCancel:()=>p(!1),isReturnOnly:t==="RETURN"}),o&&N.jsxs("div",{className:`p-6 rounded-3xl flex items-start space-x-4 border ${o.type==="error"?"bg-red-50 text-red-800 border-red-100":o.type==="warning"?"bg-amber-50 text-amber-800 border-amber-100":"bg-green-50 text-green-800 border-green-100"}`,children:[o.type==="error"&&N.jsx(rf,{className:"shrink-0 mt-1",size:28}),o.type==="warning"&&N.jsx(rf,{className:"shrink-0 mt-1",size:28}),o.type==="success"&&N.jsx(ud,{className:"shrink-0 mt-1",size:28}),N.jsxs("div",{children:[N.jsx("p",{className:"text-xl font-bold mb-1",children:o.type==="error"?"Hata":o.type==="warning"?"Bilgi/Uyar":"Baarl"}),N.jsx("p",{className:"opacity-90",children:o.msg})]})]}),f&&N.jsxs("div",{className:"bg-white border border-gray-100 rounded-3xl overflow-hidden shadow-2xl",children:[N.jsxs("div",{className:"bg-gray-50 px-8 py-5 border-b flex justify-between items-center",children:[N.jsxs("h3",{className:"font-black text-xl text-gray-800 flex items-center gap-3",children:[N.jsx(Y_,{size:24,className:"text-gray-400"}),"lem Raporu"]}),N.jsxs("button",{onClick:()=>y(null),className:"text-gray-400 hover:text-gray-600 transition-colors",children:[N.jsx(sf,{size:20,className:"inline mr-1 rotate-12"})," Raporu Kapat"]})]}),N.jsxs("div",{className:"p-8 grid md:grid-cols-2 gap-8",children:[f.successes.length>0&&N.jsxs("div",{className:"space-y-4",children:[N.jsxs("h4",{className:"text-lg font-black text-green-700 flex items-center gap-2",children:[N.jsx(ud,{size:20})," Baarl (",f.successes.length,")"]}),N.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:f.successes.map((A,S)=>N.jsxs("div",{className:"p-3 bg-green-50 rounded-xl text-sm text-green-700 font-medium flex items-center gap-3 border border-green-100",children:[N.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),A]},S))})]}),f.failures.length>0&&N.jsxs("div",{className:"space-y-4",children:[N.jsxs("h4",{className:"text-lg font-black text-red-700 flex items-center gap-2",children:[N.jsx(rf,{size:20})," Hatal (",f.failures.length,")"]}),N.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2 pr-2",children:f.failures.map((A,S)=>N.jsxs("div",{className:"p-3 bg-red-50 rounded-xl text-sm text-red-700 font-medium flex items-center gap-3 border border-red-100",children:[N.jsx("div",{className:"w-2 h-2 rounded-full bg-red-400"}),A]},S))})]})]})]})]})};var kI=Object.defineProperty,Xu=Object.getOwnPropertySymbols,ew=Object.prototype.hasOwnProperty,tw=Object.prototype.propertyIsEnumerable,Qp=(t,e,n)=>e in t?kI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,MI=(t,e)=>{for(var n in e||(e={}))ew.call(e,n)&&Qp(t,n,e[n]);if(Xu)for(var n of Xu(e))tw.call(e,n)&&Qp(t,n,e[n]);return t},LI=(t,e)=>{var n={};for(var i in t)ew.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&Xu)for(var i of Xu(t))e.indexOf(i)<0&&tw.call(t,i)&&(n[i]=t[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var oo;(t=>{const e=class{constructor(x,p,E,A){if(this.version=x,this.errorCorrectionLevel=p,this.modules=[],this.isFunction=[],x<e.MIN_VERSION||x>e.MAX_VERSION)throw new RangeError("Version value out of range");if(A<-1||A>7)throw new RangeError("Mask value out of range");this.size=x*4+17;let S=[];for(let j=0;j<this.size;j++)S.push(!1);for(let j=0;j<this.size;j++)this.modules.push(S.slice()),this.isFunction.push(S.slice());this.drawFunctionPatterns();const M=this.addEccAndInterleave(E);if(this.drawCodewords(M),A==-1){let j=1e9;for(let X=0;X<8;X++){this.applyMask(X),this.drawFormatBits(X);const q=this.getPenaltyScore();q<j&&(A=X,j=q),this.applyMask(X)}}l(0<=A&&A<=7),this.mask=A,this.applyMask(A),this.drawFormatBits(A),this.isFunction=[]}static encodeText(x,p){const E=t.QrSegment.makeSegments(x);return e.encodeSegments(E,p)}static encodeBinary(x,p){const E=t.QrSegment.makeBytes(x);return e.encodeSegments([E],p)}static encodeSegments(x,p,E=1,A=40,S=-1,M=!0){if(!(e.MIN_VERSION<=E&&E<=A&&A<=e.MAX_VERSION)||S<-1||S>7)throw new RangeError("Invalid value");let j,X;for(j=E;;j++){const F=e.getNumDataCodewords(j,p)*8,Z=y.getTotalBits(x,j);if(Z<=F){X=Z;break}if(j>=A)throw new RangeError("Data too long")}for(const F of[e.Ecc.MEDIUM,e.Ecc.QUARTILE,e.Ecc.HIGH])M&&X<=e.getNumDataCodewords(j,F)*8&&(p=F);let q=[];for(const F of x){i(F.mode.modeBits,4,q),i(F.numChars,F.mode.numCharCountBits(j),q);for(const Z of F.getData())q.push(Z)}l(q.length==X);const z=e.getNumDataCodewords(j,p)*8;l(q.length<=z),i(0,Math.min(4,z-q.length),q),i(0,(8-q.length%8)%8,q),l(q.length%8==0);for(let F=236;q.length<z;F^=253)i(F,8,q);let L=[];for(;L.length*8<q.length;)L.push(0);return q.forEach((F,Z)=>L[Z>>>3]|=F<<7-(Z&7)),new e(j,p,L,S)}getModule(x,p){return 0<=x&&x<this.size&&0<=p&&p<this.size&&this.modules[p][x]}getModules(){return this.modules}drawFunctionPatterns(){for(let E=0;E<this.size;E++)this.setFunctionModule(6,E,E%2==0),this.setFunctionModule(E,6,E%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const x=this.getAlignmentPatternPositions(),p=x.length;for(let E=0;E<p;E++)for(let A=0;A<p;A++)E==0&&A==0||E==0&&A==p-1||E==p-1&&A==0||this.drawAlignmentPattern(x[E],x[A]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(x){const p=this.errorCorrectionLevel.formatBits<<3|x;let E=p;for(let S=0;S<10;S++)E=E<<1^(E>>>9)*1335;const A=(p<<10|E)^21522;l(A>>>15==0);for(let S=0;S<=5;S++)this.setFunctionModule(8,S,o(A,S));this.setFunctionModule(8,7,o(A,6)),this.setFunctionModule(8,8,o(A,7)),this.setFunctionModule(7,8,o(A,8));for(let S=9;S<15;S++)this.setFunctionModule(14-S,8,o(A,S));for(let S=0;S<8;S++)this.setFunctionModule(this.size-1-S,8,o(A,S));for(let S=8;S<15;S++)this.setFunctionModule(8,this.size-15+S,o(A,S));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let x=this.version;for(let E=0;E<12;E++)x=x<<1^(x>>>11)*7973;const p=this.version<<12|x;l(p>>>18==0);for(let E=0;E<18;E++){const A=o(p,E),S=this.size-11+E%3,M=Math.floor(E/3);this.setFunctionModule(S,M,A),this.setFunctionModule(M,S,A)}}drawFinderPattern(x,p){for(let E=-4;E<=4;E++)for(let A=-4;A<=4;A++){const S=Math.max(Math.abs(A),Math.abs(E)),M=x+A,j=p+E;0<=M&&M<this.size&&0<=j&&j<this.size&&this.setFunctionModule(M,j,S!=2&&S!=4)}}drawAlignmentPattern(x,p){for(let E=-2;E<=2;E++)for(let A=-2;A<=2;A++)this.setFunctionModule(x+A,p+E,Math.max(Math.abs(A),Math.abs(E))!=1)}setFunctionModule(x,p,E){this.modules[p][x]=E,this.isFunction[p][x]=!0}addEccAndInterleave(x){const p=this.version,E=this.errorCorrectionLevel;if(x.length!=e.getNumDataCodewords(p,E))throw new RangeError("Invalid argument");const A=e.NUM_ERROR_CORRECTION_BLOCKS[E.ordinal][p],S=e.ECC_CODEWORDS_PER_BLOCK[E.ordinal][p],M=Math.floor(e.getNumRawDataModules(p)/8),j=A-M%A,X=Math.floor(M/A);let q=[];const z=e.reedSolomonComputeDivisor(S);for(let F=0,Z=0;F<A;F++){let le=x.slice(Z,Z+X-S+(F<j?0:1));Z+=le.length;const Y=e.reedSolomonComputeRemainder(le,z);F<j&&le.push(0),q.push(le.concat(Y))}let L=[];for(let F=0;F<q[0].length;F++)q.forEach((Z,le)=>{(F!=X-S||le>=j)&&L.push(Z[F])});return l(L.length==M),L}drawCodewords(x){if(x.length!=Math.floor(e.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let p=0;for(let E=this.size-1;E>=1;E-=2){E==6&&(E=5);for(let A=0;A<this.size;A++)for(let S=0;S<2;S++){const M=E-S,X=(E+1&2)==0?this.size-1-A:A;!this.isFunction[X][M]&&p<x.length*8&&(this.modules[X][M]=o(x[p>>>3],7-(p&7)),p++)}}l(p==x.length*8)}applyMask(x){if(x<0||x>7)throw new RangeError("Mask value out of range");for(let p=0;p<this.size;p++)for(let E=0;E<this.size;E++){let A;switch(x){case 0:A=(E+p)%2==0;break;case 1:A=p%2==0;break;case 2:A=E%3==0;break;case 3:A=(E+p)%3==0;break;case 4:A=(Math.floor(E/3)+Math.floor(p/2))%2==0;break;case 5:A=E*p%2+E*p%3==0;break;case 6:A=(E*p%2+E*p%3)%2==0;break;case 7:A=((E+p)%2+E*p%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[p][E]&&A&&(this.modules[p][E]=!this.modules[p][E])}}getPenaltyScore(){let x=0;for(let S=0;S<this.size;S++){let M=!1,j=0,X=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[S][q]==M?(j++,j==5?x+=e.PENALTY_N1:j>5&&x++):(this.finderPenaltyAddHistory(j,X),M||(x+=this.finderPenaltyCountPatterns(X)*e.PENALTY_N3),M=this.modules[S][q],j=1);x+=this.finderPenaltyTerminateAndCount(M,j,X)*e.PENALTY_N3}for(let S=0;S<this.size;S++){let M=!1,j=0,X=[0,0,0,0,0,0,0];for(let q=0;q<this.size;q++)this.modules[q][S]==M?(j++,j==5?x+=e.PENALTY_N1:j>5&&x++):(this.finderPenaltyAddHistory(j,X),M||(x+=this.finderPenaltyCountPatterns(X)*e.PENALTY_N3),M=this.modules[q][S],j=1);x+=this.finderPenaltyTerminateAndCount(M,j,X)*e.PENALTY_N3}for(let S=0;S<this.size-1;S++)for(let M=0;M<this.size-1;M++){const j=this.modules[S][M];j==this.modules[S][M+1]&&j==this.modules[S+1][M]&&j==this.modules[S+1][M+1]&&(x+=e.PENALTY_N2)}let p=0;for(const S of this.modules)p=S.reduce((M,j)=>M+(j?1:0),p);const E=this.size*this.size,A=Math.ceil(Math.abs(p*20-E*10)/E)-1;return l(0<=A&&A<=9),x+=A*e.PENALTY_N4,l(0<=x&&x<=2568888),x}getAlignmentPatternPositions(){if(this.version==1)return[];{const x=Math.floor(this.version/7)+2,p=this.version==32?26:Math.ceil((this.version*4+4)/(x*2-2))*2;let E=[6];for(let A=this.size-7;E.length<x;A-=p)E.splice(1,0,A);return E}}static getNumRawDataModules(x){if(x<e.MIN_VERSION||x>e.MAX_VERSION)throw new RangeError("Version number out of range");let p=(16*x+128)*x+64;if(x>=2){const E=Math.floor(x/7)+2;p-=(25*E-10)*E-55,x>=7&&(p-=36)}return l(208<=p&&p<=29648),p}static getNumDataCodewords(x,p){return Math.floor(e.getNumRawDataModules(x)/8)-e.ECC_CODEWORDS_PER_BLOCK[p.ordinal][x]*e.NUM_ERROR_CORRECTION_BLOCKS[p.ordinal][x]}static reedSolomonComputeDivisor(x){if(x<1||x>255)throw new RangeError("Degree out of range");let p=[];for(let A=0;A<x-1;A++)p.push(0);p.push(1);let E=1;for(let A=0;A<x;A++){for(let S=0;S<p.length;S++)p[S]=e.reedSolomonMultiply(p[S],E),S+1<p.length&&(p[S]^=p[S+1]);E=e.reedSolomonMultiply(E,2)}return p}static reedSolomonComputeRemainder(x,p){let E=p.map(A=>0);for(const A of x){const S=A^E.shift();E.push(0),p.forEach((M,j)=>E[j]^=e.reedSolomonMultiply(M,S))}return E}static reedSolomonMultiply(x,p){if(x>>>8||p>>>8)throw new RangeError("Byte out of range");let E=0;for(let A=7;A>=0;A--)E=E<<1^(E>>>7)*285,E^=(p>>>A&1)*x;return l(E>>>8==0),E}finderPenaltyCountPatterns(x){const p=x[1];l(p<=this.size*3);const E=p>0&&x[2]==p&&x[3]==p*3&&x[4]==p&&x[5]==p;return(E&&x[0]>=p*4&&x[6]>=p?1:0)+(E&&x[6]>=p*4&&x[0]>=p?1:0)}finderPenaltyTerminateAndCount(x,p,E){return x&&(this.finderPenaltyAddHistory(p,E),p=0),p+=this.size,this.finderPenaltyAddHistory(p,E),this.finderPenaltyCountPatterns(E)}finderPenaltyAddHistory(x,p){p[0]==0&&(x+=this.size),p.pop(),p.unshift(x)}};let n=e;n.MIN_VERSION=1,n.MAX_VERSION=40,n.PENALTY_N1=3,n.PENALTY_N2=3,n.PENALTY_N3=40,n.PENALTY_N4=10,n.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],n.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=n;function i(x,p,E){if(p<0||p>31||x>>>p)throw new RangeError("Value out of range");for(let A=p-1;A>=0;A--)E.push(x>>>A&1)}function o(x,p){return(x>>>p&1)!=0}function l(x){if(!x)throw new Error("Assertion error")}const f=class{constructor(x,p,E){if(this.mode=x,this.numChars=p,this.bitData=E,p<0)throw new RangeError("Invalid argument");this.bitData=E.slice()}static makeBytes(x){let p=[];for(const E of x)i(E,8,p);return new f(f.Mode.BYTE,x.length,p)}static makeNumeric(x){if(!f.isNumeric(x))throw new RangeError("String contains non-numeric characters");let p=[];for(let E=0;E<x.length;){const A=Math.min(x.length-E,3);i(parseInt(x.substr(E,A),10),A*3+1,p),E+=A}return new f(f.Mode.NUMERIC,x.length,p)}static makeAlphanumeric(x){if(!f.isAlphanumeric(x))throw new RangeError("String contains unencodable characters in alphanumeric mode");let p=[],E;for(E=0;E+2<=x.length;E+=2){let A=f.ALPHANUMERIC_CHARSET.indexOf(x.charAt(E))*45;A+=f.ALPHANUMERIC_CHARSET.indexOf(x.charAt(E+1)),i(A,11,p)}return E<x.length&&i(f.ALPHANUMERIC_CHARSET.indexOf(x.charAt(E)),6,p),new f(f.Mode.ALPHANUMERIC,x.length,p)}static makeSegments(x){return x==""?[]:f.isNumeric(x)?[f.makeNumeric(x)]:f.isAlphanumeric(x)?[f.makeAlphanumeric(x)]:[f.makeBytes(f.toUtf8ByteArray(x))]}static makeEci(x){let p=[];if(x<0)throw new RangeError("ECI assignment value out of range");if(x<128)i(x,8,p);else if(x<16384)i(2,2,p),i(x,14,p);else if(x<1e6)i(6,3,p),i(x,21,p);else throw new RangeError("ECI assignment value out of range");return new f(f.Mode.ECI,0,p)}static isNumeric(x){return f.NUMERIC_REGEX.test(x)}static isAlphanumeric(x){return f.ALPHANUMERIC_REGEX.test(x)}getData(){return this.bitData.slice()}static getTotalBits(x,p){let E=0;for(const A of x){const S=A.mode.numCharCountBits(p);if(A.numChars>=1<<S)return 1/0;E+=4+S+A.bitData.length}return E}static toUtf8ByteArray(x){x=encodeURI(x);let p=[];for(let E=0;E<x.length;E++)x.charAt(E)!="%"?p.push(x.charCodeAt(E)):(p.push(parseInt(x.substr(E+1,2),16)),E+=2);return p}};let y=f;y.NUMERIC_REGEX=/^[0-9]*$/,y.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,y.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.QrSegment=y})(oo||(oo={}));(t=>{(e=>{const n=class{constructor(o,l){this.ordinal=o,this.formatBits=l}};let i=n;i.LOW=new n(0,1),i.MEDIUM=new n(1,0),i.QUARTILE=new n(2,3),i.HIGH=new n(3,2),e.Ecc=i})(t.QrCode||(t.QrCode={}))})(oo||(oo={}));(t=>{(e=>{const n=class{constructor(o,l){this.modeBits=o,this.numBitsCharCount=l}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};let i=n;i.NUMERIC=new n(1,[10,12,14]),i.ALPHANUMERIC=new n(2,[9,11,13]),i.BYTE=new n(4,[8,16,16]),i.KANJI=new n(8,[8,10,12]),i.ECI=new n(7,[0,0,0]),e.Mode=i})(t.QrSegment||(t.QrSegment={}))})(oo||(oo={}));var tl=oo;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var BI={L:tl.QrCode.Ecc.LOW,M:tl.QrCode.Ecc.MEDIUM,Q:tl.QrCode.Ecc.QUARTILE,H:tl.QrCode.Ecc.HIGH},FI=128,VI="L",UI="#FFFFFF",jI="#000000",zI=!1,nw=4,HI=.1;function GI(t,e=0){const n=[];return t.forEach(function(i,o){let l=null;i.forEach(function(f,y){if(!f&&l!==null){n.push(`M${l+e} ${o+e}h${y-l}v1H${l+e}z`),l=null;return}if(y===i.length-1){if(!f)return;l===null?n.push(`M${y+e},${o+e} h1v1H${y+e}z`):n.push(`M${l+e},${o+e} h${y+1-l}v1H${l+e}z`);return}f&&l===null&&(l=y)})}),n.join("")}function WI(t,e){return t.slice().map((n,i)=>i<e.y||i>=e.y+e.h?n:n.map((o,l)=>l<e.x||l>=e.x+e.w?o:!1))}function XI(t,e,n,i){if(i==null)return null;const o=n?nw:0,l=t.length+o*2,f=Math.floor(e*HI),y=l/e,x=(i.width||f)*y,p=(i.height||f)*y,E=i.x==null?t.length/2-x/2:i.x*y,A=i.y==null?t.length/2-p/2:i.y*y;let S=null;if(i.excavate){let M=Math.floor(E),j=Math.floor(A),X=Math.ceil(x+E-M),q=Math.ceil(p+A-j);S={x:M,y:j,w:X,h:q}}return{x:E,y:A,h:p,w:x,excavation:S}}(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function KI(t){const e=t,{value:n,size:i=FI,level:o=VI,bgColor:l=UI,fgColor:f=jI,includeMargin:y=zI,imageSettings:x}=e,p=LI(e,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let E=tl.QrCode.encodeText(n,BI[o]).getModules();const A=y?nw:0,S=E.length+A*2,M=XI(E,i,y,x);let j=null;x!=null&&M!=null&&(M.excavation!=null&&(E=WI(E,M.excavation)),j=Ka.createElement("image",{xlinkHref:x.src,height:M.h,width:M.w,x:M.x+A,y:M.y+A,preserveAspectRatio:"none"}));const X=GI(E,A);return Ka.createElement("svg",MI({height:i,width:i,viewBox:`0 0 ${S} ${S}`},p),Ka.createElement("path",{fill:l,d:`M0,0 h${S}v${S}H0z`,shapeRendering:"crispEdges"}),Ka.createElement("path",{fill:f,d:X,shapeRendering:"crispEdges"}),j)}const rw=({value:t,label:e,subLabel:n,size:i=128})=>N.jsxs("div",{className:"flex flex-col items-center justify-center p-4 border border-gray-200 rounded-lg bg-white shadow-sm break-inside-avoid",children:[N.jsx(KI,{value:t,size:i,level:"H"}),N.jsxs("div",{className:"mt-2 text-center",children:[N.jsx("p",{className:"font-bold text-gray-800 text-sm",children:e}),n&&N.jsx("p",{className:"text-xs text-gray-500",children:n})]})]}),qI=()=>{const[t,e]=Oe.useState([]),[n,i]=Oe.useState([]),[o,l]=Oe.useState(""),[f,y]=Oe.useState(!1),[x,p]=Oe.useState({title:"",author:"",isbn:"",category:""}),E=async()=>{const q=await Zn.getBooks();e(q),i(q)};Oe.useEffect(()=>{E()},[]),Oe.useEffect(()=>{const q=o.toLowerCase(),z=t.filter(L=>L.title.toLowerCase().includes(q)||L.author.toLowerCase().includes(q)||L.isbn.includes(q));i(z)},[o,t]);const A=async q=>{if(q.preventDefault(),x.title&&x.isbn){const z=await Zn.addBook(x);z.success?(p({title:"",author:"",isbn:"",category:""}),y(!1),E()):alert(z.message)}},S=async q=>{window.confirm("Bu kitab silmek istediinize emin misiniz?")&&(await Zn.deleteBook(q),E())},M=()=>{window.print()},j=()=>{p(q=>({...q,isbn:Math.floor(1e12+Math.random()*9e12).toString()}))},X=q=>{switch(q){case Si.AVAILABLE:return"MEVCUT";case Si.BORROWED:return"DNTE";case Si.LOST:return"KAYIP";default:return q}};return N.jsxs("div",{className:"space-y-6",children:[N.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 no-print",children:[N.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Kitap Envanteri"}),N.jsxs("div",{className:"relative w-full md:w-64",children:[N.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:N.jsx(fx,{size:18,className:"text-gray-400"})}),N.jsx("input",{type:"text",placeholder:"Kitap ara...",className:"pl-10 block w-full rounded-lg border-gray-300 border py-2 px-4 focus:ring-indigo-500 focus:border-indigo-500",value:o,onChange:q=>l(q.target.value)})]}),N.jsxs("div",{className:"flex space-x-3 w-full md:w-auto",children:[N.jsxs("button",{onClick:M,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[N.jsx(hx,{size:18}),N.jsx("span",{children:"QR Yazdr"})]}),N.jsxs("button",{onClick:()=>y(!f),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[N.jsx(ux,{size:18}),N.jsx("span",{children:"Ekle"})]})]})]}),f&&N.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-indigo-100 no-print",children:[N.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Yeni Kitap Ekle"}),N.jsxs("form",{onSubmit:A,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.jsx("input",{placeholder:"Kitap Ad",className:"border p-2 rounded",value:x.title,onChange:q=>p({...x,title:q.target.value}),required:!0}),N.jsx("input",{placeholder:"Yazar",className:"border p-2 rounded",value:x.author,onChange:q=>p({...x,author:q.target.value}),required:!0}),N.jsxs("div",{className:"flex space-x-2",children:[N.jsx("input",{placeholder:"ISBN / Barkod",className:"border p-2 rounded flex-1",value:x.isbn,onChange:q=>p({...x,isbn:q.target.value}),required:!0}),N.jsx("button",{type:"button",onClick:j,className:"text-xs bg-gray-100 px-2 rounded hover:bg-gray-200",children:"ret"})]}),N.jsx("input",{placeholder:"Kategori",className:"border p-2 rounded",value:x.category,onChange:q=>p({...x,category:q.target.value})}),N.jsx("button",{type:"submit",className:"col-span-2 bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700",children:"Kaydet"})]})]}),N.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden no-print",children:N.jsxs("table",{className:"w-full text-left",children:[N.jsx("thead",{className:"bg-gray-50",children:N.jsxs("tr",{children:[N.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Balk"}),N.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Yazar"}),N.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"ISBN"}),N.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Durum"}),N.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500 text-right",children:"lem"})]})}),N.jsx("tbody",{className:"divide-y divide-gray-100",children:n.length===0?N.jsx("tr",{children:N.jsx("td",{colSpan:5,className:"text-center py-6 text-gray-400",children:"Kitap bulunamad."})}):n.map(q=>N.jsxs("tr",{children:[N.jsx("td",{className:"px-6 py-4",children:q.title}),N.jsx("td",{className:"px-6 py-4 text-gray-500",children:q.author}),N.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:q.isbn}),N.jsx("td",{className:"px-6 py-4",children:N.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${q.status===Si.AVAILABLE?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:X(q.status)})}),N.jsx("td",{className:"px-6 py-4 text-right",children:N.jsx("button",{onClick:()=>S(q.id),className:"text-red-400 hover:text-red-600 p-1 rounded-full hover:bg-red-50 transition-colors",title:"Kitab Sil",children:N.jsx(fd,{size:16})})})]},q.id))})]})}),N.jsxs("div",{className:"print-only",children:[N.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Kitap Envanteri QR Kodlar"}),N.jsx("div",{className:"grid grid-cols-4 gap-4",children:n.map(q=>N.jsx(rw,{value:q.isbn,label:q.title.substring(0,20)+(q.title.length>20?"...":""),subLabel:q.isbn},q.id))})]})]})},YI=()=>{const[t,e]=Oe.useState([]),[n,i]=Oe.useState([]),[o,l]=Oe.useState(""),[f,y]=Oe.useState(!1),[x,p]=Oe.useState({name:"",studentNumber:"",email:"",grade:""}),[E,A]=Oe.useState(null),[S,M]=Oe.useState([]),[j,X]=Oe.useState(!1),q=async()=>{const Y=await Zn.getStudents();e(Y),i(Y)};Oe.useEffect(()=>{q()},[]),Oe.useEffect(()=>{const Y=o.toLowerCase(),b=t.filter(D=>D.name.toLowerCase().includes(Y)||D.studentNumber.includes(Y)||D.grade.toLowerCase().includes(Y));i(b)},[o,t]);const z=async Y=>{if(Y.preventDefault(),x.name&&x.studentNumber){const b=await Zn.addStudent(x);b.success?(p({name:"",studentNumber:"",email:"",grade:""}),y(!1),q()):alert(b.message)}},L=async Y=>{window.confirm("Bu renciyi silmek istediinize emin misiniz?")&&(await Zn.deleteStudent(Y),q())},F=()=>{window.print()},Z=async Y=>{A(Y),X(!0);try{const b=await Zn.getBooks(),D=Y.readingHistory.map(O=>b.find(U=>U.id===O)).filter(O=>O!==void 0);M(D)}catch(b){console.error("Failed to fetch history",b)}finally{X(!1)}},le=async Y=>{if(E&&window.confirm("Bu kitab rencinin gemiinden silmek istediinize emin misiniz?")){const b=await Zn.removeBookFromHistory(E.id,Y);b.success?(M(D=>D.filter(O=>O.id!==Y)),e(D=>D.map(O=>O.id===E.id?{...O,readingHistory:(O.readingHistory||[]).filter(U=>U!==Y)}:O))):alert(b.message)}};return N.jsxs("div",{className:"space-y-6",children:[N.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 no-print",children:[N.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"renci Veritaban"}),N.jsxs("div",{className:"relative w-full md:w-64",children:[N.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:N.jsx(fx,{size:18,className:"text-gray-400"})}),N.jsx("input",{type:"text",placeholder:"renci ara...",className:"pl-10 block w-full rounded-lg border-gray-300 border py-2 px-4 focus:ring-indigo-500 focus:border-indigo-500",value:o,onChange:Y=>l(Y.target.value)})]}),N.jsxs("div",{className:"flex space-x-3 w-full md:w-auto",children:[N.jsxs("button",{onClick:F,className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[N.jsx(hx,{size:18}),N.jsx("span",{children:"Kart Yazdr"})]}),N.jsxs("button",{onClick:()=>y(!f),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 flex items-center justify-center space-x-2 flex-1 md:flex-none",children:[N.jsx(ux,{size:18}),N.jsx("span",{children:"Ekle"})]})]})]}),f&&N.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-indigo-100 no-print",children:[N.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Yeni renci Kaydet"}),N.jsxs("form",{onSubmit:z,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.jsx("input",{placeholder:"Ad Soyad",className:"border p-2 rounded",value:x.name,onChange:Y=>p({...x,name:Y.target.value}),required:!0}),N.jsx("input",{placeholder:"renci No (ID)",className:"border p-2 rounded",value:x.studentNumber,onChange:Y=>p({...x,studentNumber:Y.target.value}),required:!0}),N.jsx("input",{placeholder:"Email",type:"email",className:"border p-2 rounded",value:x.email,onChange:Y=>p({...x,email:Y.target.value})}),N.jsx("input",{placeholder:"Snf / ube",className:"border p-2 rounded",value:x.grade,onChange:Y=>p({...x,grade:Y.target.value})}),N.jsx("button",{type:"submit",className:"col-span-2 bg-indigo-600 text-white p-2 rounded hover:bg-indigo-700",children:"renciyi Kaydet"})]})]}),N.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden no-print",children:N.jsxs("table",{className:"w-full text-left",children:[N.jsx("thead",{className:"bg-gray-50",children:N.jsxs("tr",{children:[N.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"sim"}),N.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"renci No"}),N.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Snf"}),N.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500",children:"Gemi"}),N.jsx("th",{className:"px-6 py-3 text-sm font-medium text-gray-500 text-right",children:"lem"})]})}),N.jsx("tbody",{className:"divide-y divide-gray-100",children:n.length===0?N.jsx("tr",{children:N.jsx("td",{colSpan:5,className:"text-center py-6 text-gray-400",children:"renci bulunamad."})}):n.map(Y=>N.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[N.jsx("td",{className:"px-6 py-4",children:N.jsx("button",{onClick:()=>Z(Y),className:"font-bold text-indigo-600 hover:text-indigo-800 hover:underline text-left",children:Y.name})}),N.jsx("td",{className:"px-6 py-4 text-gray-500 font-mono",children:Y.studentNumber}),N.jsx("td",{className:"px-6 py-4",children:Y.grade}),N.jsxs("td",{className:"px-6 py-4 text-sm text-gray-500",children:[Y.readingHistory.length," kitap okudu"]}),N.jsx("td",{className:"px-6 py-4 text-right",children:N.jsx("button",{onClick:()=>L(Y.id),className:"text-red-400 hover:text-red-600 p-1 rounded-full hover:bg-red-50 transition-colors",title:"renciyi Sil",children:N.jsx(fd,{size:16})})})]},Y.id))})]})}),E&&N.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in no-print",children:N.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden animate-bounce-in max-h-[90vh] flex flex-col",children:[N.jsxs("div",{className:"bg-indigo-600 p-6 text-white flex justify-between items-center shrink-0",children:[N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-2xl flex items-center justify-center",children:N.jsx(X_,{size:24})}),N.jsxs("div",{children:[N.jsx("h3",{className:"text-xl font-bold",children:E.name}),N.jsx("p",{className:"text-indigo-100 text-sm",children:"Okuma Gemii Detay"})]})]}),N.jsx("button",{onClick:()=>A(null),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:N.jsx(Tu,{size:24})})]}),N.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:j?N.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[N.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mb-4"}),N.jsx("p",{children:"Gemi ykleniyor..."})]}):S.length===0?N.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400 space-y-4",children:[N.jsx(hl,{size:48,className:"opacity-20"}),N.jsx("p",{className:"text-lg",children:"Bu renci henz hi kitap okumam."})]}):N.jsxs("div",{className:"space-y-4",children:[N.jsxs("h4",{className:"font-bold text-gray-700 flex items-center gap-2",children:[N.jsx(hl,{size:18,className:"text-indigo-500"}),"Toplam ",S.length," Kitap"]}),N.jsx("div",{className:"grid gap-3",children:S.map((Y,b)=>N.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-2xl border border-gray-100 hover:border-indigo-100 transition-all group",children:[N.jsxs("div",{className:"flex items-center gap-4",children:[N.jsx("div",{className:"w-10 h-10 bg-white rounded-xl shadow-sm flex items-center justify-center text-indigo-500 group-hover:bg-indigo-500 group-hover:text-white transition-colors",children:N.jsx(hl,{size:18})}),N.jsxs("div",{children:[N.jsx("p",{className:"font-bold text-gray-900 leading-tight",children:Y.title}),N.jsx("p",{className:"text-sm text-gray-500",children:Y.author})]})]}),N.jsxs("div",{className:"flex items-center gap-3",children:[N.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-bold uppercase tracking-wider hidden sm:inline-block",children:Y.category}),N.jsx("button",{onClick:()=>le(Y.id),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-colors",title:"Gemiten Sil",children:N.jsx(fd,{size:18})})]})]},b))})]})}),N.jsx("div",{className:"p-6 bg-gray-50 border-t flex justify-end shrink-0",children:N.jsx("button",{onClick:()=>A(null),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold hover:bg-indigo-700 transition-colors shadow-lg shadow-indigo-100",children:"Kapat"})})]})}),N.jsxs("div",{className:"print-only w-full",children:[N.jsx("h1",{className:"text-2xl font-bold mb-8 text-center",children:"Ktphane Kartlar"}),N.jsx("div",{className:"grid grid-cols-2 gap-8 w-full",children:n.map(Y=>N.jsxs("div",{className:"border-2 border-black rounded-xl p-6 flex items-center justify-between break-inside-avoid shadow-none",children:[N.jsxs("div",{className:"flex-1 mr-4",children:[N.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[N.jsx("div",{className:"w-8 h-8 bg-black rounded-full text-white flex items-center justify-center font-bold",children:"L"}),N.jsx("span",{className:"font-bold text-sm tracking-wider uppercase",children:"Okul Ktphanesi"})]}),N.jsx("h3",{className:"text-xl font-bold uppercase mb-1",children:Y.name}),N.jsx("p",{className:"text-lg font-mono mb-1",children:Y.studentNumber}),N.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Y.grade}),N.jsx("div",{className:"border-t-2 border-black pt-2 w-32",children:N.jsx("p",{className:"text-[10px] uppercase font-bold text-gray-500",children:"Yetkili mza"})})]}),N.jsx("div",{children:N.jsx(rw,{value:Y.studentNumber,label:"",size:96})})]},Y.id))})]})]})},QI=()=>{const[t,e]=Oe.useState(null),[n,i]=Oe.useState("dashboard"),o=()=>{e({id:"admin-1",name:"Admin User",email:"admin@library.school",role:"ADMIN"})},l=()=>{e(null),i("dashboard")};if(!t)return N.jsx(oI,{onLogin:o});const f=()=>{switch(n){case"dashboard":return N.jsx(Vp,{});case"circulation":return N.jsx(PI,{});case"books":return N.jsx(qI,{});case"students":return N.jsx(YI,{});default:return N.jsx(Vp,{})}};return N.jsx(sI,{currentPage:n,onNavigate:i,onLogout:l,user:t,children:f()})};const iw=document.getElementById("root");if(!iw)throw new Error("Could not find root element to mount to");const $I=xf.createRoot(iw);$I.render(N.jsx(Ka.StrictMode,{children:N.jsx(QI,{})}));
